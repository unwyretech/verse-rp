function a1(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var re=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function o1(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function jx(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return e[n]}})}),r}var Cx={exports:{}},Ro={},_x={exports:{}},ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mi=Symbol.for("react.element"),l1=Symbol.for("react.portal"),c1=Symbol.for("react.fragment"),u1=Symbol.for("react.strict_mode"),d1=Symbol.for("react.profiler"),h1=Symbol.for("react.provider"),f1=Symbol.for("react.context"),p1=Symbol.for("react.forward_ref"),x1=Symbol.for("react.suspense"),m1=Symbol.for("react.memo"),g1=Symbol.for("react.lazy"),Yd=Symbol.iterator;function v1(e){return e===null||typeof e!="object"?null:(e=Yd&&e[Yd]||e["@@iterator"],typeof e=="function"?e:null)}var kx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ex=Object.assign,Nx={};function Ns(e,t,r){this.props=e,this.context=t,this.refs=Nx,this.updater=r||kx}Ns.prototype.isReactComponent={};Ns.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ns.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Sx(){}Sx.prototype=Ns.prototype;function m0(e,t,r){this.props=e,this.context=t,this.refs=Nx,this.updater=r||kx}var g0=m0.prototype=new Sx;g0.constructor=m0;Ex(g0,Ns.prototype);g0.isPureReactComponent=!0;var Qd=Array.isArray,Ax=Object.prototype.hasOwnProperty,v0={current:null},Px={key:!0,ref:!0,__self:!0,__source:!0};function Dx(e,t,r){var n,s={},i=null,a=null;if(t!=null)for(n in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(i=""+t.key),t)Ax.call(t,n)&&!Px.hasOwnProperty(n)&&(s[n]=t[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:Mi,type:e,key:i,ref:a,props:s,_owner:v0.current}}function y1(e,t){return{$$typeof:Mi,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function y0(e){return typeof e=="object"&&e!==null&&e.$$typeof===Mi}function w1(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Xd=/\/+/g;function bl(e,t){return typeof e=="object"&&e!==null&&e.key!=null?w1(""+e.key):t.toString(36)}function Ba(e,t,r,n,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Mi:case l1:a=!0}}if(a)return a=e,s=s(a),e=n===""?"."+bl(a,0):n,Qd(s)?(r="",e!=null&&(r=e.replace(Xd,"$&/")+"/"),Ba(s,t,r,"",function(u){return u})):s!=null&&(y0(s)&&(s=y1(s,r+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Xd,"$&/")+"/")+e)),t.push(s)),1;if(a=0,n=n===""?".":n+":",Qd(e))for(var l=0;l<e.length;l++){i=e[l];var c=n+bl(i,l);a+=Ba(i,t,r,c,s)}else if(c=v1(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=n+bl(i,l++),a+=Ba(i,t,r,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function aa(e,t,r){if(e==null)return e;var n=[],s=0;return Ba(e,n,"","",function(i){return t.call(r,i,s++)}),n}function b1(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ut={current:null},Fa={transition:null},j1={ReactCurrentDispatcher:ut,ReactCurrentBatchConfig:Fa,ReactCurrentOwner:v0};function Bx(){throw Error("act(...) is not supported in production builds of React.")}ue.Children={map:aa,forEach:function(e,t,r){aa(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return aa(e,function(){t++}),t},toArray:function(e){return aa(e,function(t){return t})||[]},only:function(e){if(!y0(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ue.Component=Ns;ue.Fragment=c1;ue.Profiler=d1;ue.PureComponent=m0;ue.StrictMode=u1;ue.Suspense=x1;ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=j1;ue.act=Bx;ue.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=Ex({},e.props),s=e.key,i=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,a=v0.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)Ax.call(t,c)&&!Px.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:Mi,type:e.type,key:s,ref:i,props:n,_owner:a}};ue.createContext=function(e){return e={$$typeof:f1,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:h1,_context:e},e.Consumer=e};ue.createElement=Dx;ue.createFactory=function(e){var t=Dx.bind(null,e);return t.type=e,t};ue.createRef=function(){return{current:null}};ue.forwardRef=function(e){return{$$typeof:p1,render:e}};ue.isValidElement=y0;ue.lazy=function(e){return{$$typeof:g1,_payload:{_status:-1,_result:e},_init:b1}};ue.memo=function(e,t){return{$$typeof:m1,type:e,compare:t===void 0?null:t}};ue.startTransition=function(e){var t=Fa.transition;Fa.transition={};try{e()}finally{Fa.transition=t}};ue.unstable_act=Bx;ue.useCallback=function(e,t){return ut.current.useCallback(e,t)};ue.useContext=function(e){return ut.current.useContext(e)};ue.useDebugValue=function(){};ue.useDeferredValue=function(e){return ut.current.useDeferredValue(e)};ue.useEffect=function(e,t){return ut.current.useEffect(e,t)};ue.useId=function(){return ut.current.useId()};ue.useImperativeHandle=function(e,t,r){return ut.current.useImperativeHandle(e,t,r)};ue.useInsertionEffect=function(e,t){return ut.current.useInsertionEffect(e,t)};ue.useLayoutEffect=function(e,t){return ut.current.useLayoutEffect(e,t)};ue.useMemo=function(e,t){return ut.current.useMemo(e,t)};ue.useReducer=function(e,t,r){return ut.current.useReducer(e,t,r)};ue.useRef=function(e){return ut.current.useRef(e)};ue.useState=function(e){return ut.current.useState(e)};ue.useSyncExternalStore=function(e,t,r){return ut.current.useSyncExternalStore(e,t,r)};ue.useTransition=function(){return ut.current.useTransition()};ue.version="18.3.1";_x.exports=ue;var N=_x.exports;const w0=o1(N),C1=a1({__proto__:null,default:w0},[N]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _1=N,k1=Symbol.for("react.element"),E1=Symbol.for("react.fragment"),N1=Object.prototype.hasOwnProperty,S1=_1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,A1={key:!0,ref:!0,__self:!0,__source:!0};function Fx(e,t,r){var n,s={},i=null,a=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(a=t.ref);for(n in t)N1.call(t,n)&&!A1.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:k1,type:e,key:i,ref:a,props:s,_owner:S1.current}}Ro.Fragment=E1;Ro.jsx=Fx;Ro.jsxs=Fx;Cx.exports=Ro;var o=Cx.exports,Tx={exports:{}},Pt={},Rx={exports:{}},Lx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(I,W){var q=I.length;I.push(W);e:for(;0<q;){var C=q-1>>>1,R=I[C];if(0<s(R,W))I[C]=W,I[q]=R,q=C;else break e}}function r(I){return I.length===0?null:I[0]}function n(I){if(I.length===0)return null;var W=I[0],q=I.pop();if(q!==W){I[0]=q;e:for(var C=0,R=I.length,z=R>>>1;C<z;){var O=2*(C+1)-1,Q=I[O],J=O+1,ie=I[J];if(0>s(Q,q))J<R&&0>s(ie,Q)?(I[C]=ie,I[J]=q,C=J):(I[C]=Q,I[O]=q,C=O);else if(J<R&&0>s(ie,q))I[C]=ie,I[J]=q,C=J;else break e}}return W}function s(I,W){var q=I.sortIndex-W.sortIndex;return q!==0?q:I.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,g=!1,y=!1,w=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m(I){for(var W=r(u);W!==null;){if(W.callback===null)n(u);else if(W.startTime<=I)n(u),W.sortIndex=W.expirationTime,t(c,W);else break;W=r(u)}}function b(I){if(y=!1,m(I),!g)if(r(c)!==null)g=!0,M(j);else{var W=r(u);W!==null&&V(b,W.startTime-I)}}function j(I,W){g=!1,y&&(y=!1,v(E),E=-1),p=!0;var q=f;try{for(m(W),h=r(c);h!==null&&(!(h.expirationTime>W)||I&&!P());){var C=h.callback;if(typeof C=="function"){h.callback=null,f=h.priorityLevel;var R=C(h.expirationTime<=W);W=e.unstable_now(),typeof R=="function"?h.callback=R:h===r(c)&&n(c),m(W)}else n(c);h=r(c)}if(h!==null)var z=!0;else{var O=r(u);O!==null&&V(b,O.startTime-W),z=!1}return z}finally{h=null,f=q,p=!1}}var _=!1,k=null,E=-1,D=5,S=-1;function P(){return!(e.unstable_now()-S<D)}function A(){if(k!==null){var I=e.unstable_now();S=I;var W=!0;try{W=k(!0,I)}finally{W?B():(_=!1,k=null)}}else _=!1}var B;if(typeof x=="function")B=function(){x(A)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,G=H.port2;H.port1.onmessage=A,B=function(){G.postMessage(null)}}else B=function(){w(A,0)};function M(I){k=I,_||(_=!0,B())}function V(I,W){E=w(function(){I(e.unstable_now())},W)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(I){I.callback=null},e.unstable_continueExecution=function(){g||p||(g=!0,M(j))},e.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<I?Math.floor(1e3/I):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(I){switch(f){case 1:case 2:case 3:var W=3;break;default:W=f}var q=f;f=W;try{return I()}finally{f=q}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(I,W){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var q=f;f=I;try{return W()}finally{f=q}},e.unstable_scheduleCallback=function(I,W,q){var C=e.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?C+q:C):q=C,I){case 1:var R=-1;break;case 2:R=250;break;case 5:R=1073741823;break;case 4:R=1e4;break;default:R=5e3}return R=q+R,I={id:d++,callback:W,priorityLevel:I,startTime:q,expirationTime:R,sortIndex:-1},q>C?(I.sortIndex=q,t(u,I),r(c)===null&&I===r(u)&&(y?(v(E),E=-1):y=!0,V(b,q-C))):(I.sortIndex=R,t(c,I),g||p||(g=!0,M(j))),I},e.unstable_shouldYield=P,e.unstable_wrapCallback=function(I){var W=f;return function(){var q=f;f=W;try{return I.apply(this,arguments)}finally{f=q}}}})(Lx);Rx.exports=Lx;var P1=Rx.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D1=N,St=P1;function K(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ox=new Set,xi={};function Dn(e,t){gs(e,t),gs(e+"Capture",t)}function gs(e,t){for(xi[e]=t,e=0;e<t.length;e++)Ox.add(t[e])}var mr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zc=Object.prototype.hasOwnProperty,B1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Zd={},Jd={};function F1(e){return Zc.call(Jd,e)?!0:Zc.call(Zd,e)?!1:B1.test(e)?Jd[e]=!0:(Zd[e]=!0,!1)}function T1(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function R1(e,t,r,n){if(t===null||typeof t>"u"||T1(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function dt(e,t,r,n,s,i,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var Xe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Xe[e]=new dt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Xe[t]=new dt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Xe[e]=new dt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Xe[e]=new dt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Xe[e]=new dt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Xe[e]=new dt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Xe[e]=new dt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Xe[e]=new dt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Xe[e]=new dt(e,5,!1,e.toLowerCase(),null,!1,!1)});var b0=/[\-:]([a-z])/g;function j0(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(b0,j0);Xe[t]=new dt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(b0,j0);Xe[t]=new dt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(b0,j0);Xe[t]=new dt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Xe[e]=new dt(e,1,!1,e.toLowerCase(),null,!1,!1)});Xe.xlinkHref=new dt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Xe[e]=new dt(e,1,!1,e.toLowerCase(),null,!0,!0)});function C0(e,t,r,n){var s=Xe.hasOwnProperty(t)?Xe[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(R1(t,r,s,n)&&(r=null),n||s===null?F1(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var br=D1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,oa=Symbol.for("react.element"),Wn=Symbol.for("react.portal"),qn=Symbol.for("react.fragment"),_0=Symbol.for("react.strict_mode"),Jc=Symbol.for("react.profiler"),Ix=Symbol.for("react.provider"),Mx=Symbol.for("react.context"),k0=Symbol.for("react.forward_ref"),eu=Symbol.for("react.suspense"),tu=Symbol.for("react.suspense_list"),E0=Symbol.for("react.memo"),Sr=Symbol.for("react.lazy"),Ux=Symbol.for("react.offscreen"),eh=Symbol.iterator;function Rs(e){return e===null||typeof e!="object"?null:(e=eh&&e[eh]||e["@@iterator"],typeof e=="function"?e:null)}var Se=Object.assign,jl;function qs(e){if(jl===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);jl=t&&t[1]||""}return`
`+jl+e}var Cl=!1;function _l(e,t){if(!e||Cl)return"";Cl=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=n.stack.split(`
`),a=s.length-1,l=i.length-1;1<=a&&0<=l&&s[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==i[l]){var c=`
`+s[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=l);break}}}finally{Cl=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?qs(e):""}function L1(e){switch(e.tag){case 5:return qs(e.type);case 16:return qs("Lazy");case 13:return qs("Suspense");case 19:return qs("SuspenseList");case 0:case 2:case 15:return e=_l(e.type,!1),e;case 11:return e=_l(e.type.render,!1),e;case 1:return e=_l(e.type,!0),e;default:return""}}function ru(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case qn:return"Fragment";case Wn:return"Portal";case Jc:return"Profiler";case _0:return"StrictMode";case eu:return"Suspense";case tu:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Mx:return(e.displayName||"Context")+".Consumer";case Ix:return(e._context.displayName||"Context")+".Provider";case k0:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case E0:return t=e.displayName||null,t!==null?t:ru(e.type)||"Memo";case Sr:t=e._payload,e=e._init;try{return ru(e(t))}catch{}}return null}function O1(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ru(t);case 8:return t===_0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Yr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function $x(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function I1(e){var t=$x(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){n=""+a,i.call(this,a)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function la(e){e._valueTracker||(e._valueTracker=I1(e))}function zx(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=$x(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Ka(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function nu(e,t){var r=t.checked;return Se({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function th(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Yr(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Vx(e,t){t=t.checked,t!=null&&C0(e,"checked",t,!1)}function su(e,t){Vx(e,t);var r=Yr(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?iu(e,t.type,r):t.hasOwnProperty("defaultValue")&&iu(e,t.type,Yr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function rh(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function iu(e,t,r){(t!=="number"||Ka(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Ks=Array.isArray;function us(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Yr(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function au(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(K(91));return Se({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function nh(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(K(92));if(Ks(r)){if(1<r.length)throw Error(K(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Yr(r)}}function Hx(e,t){var r=Yr(t.value),n=Yr(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function sh(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Wx(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ou(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Wx(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ca,qx=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ca=ca||document.createElement("div"),ca.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ca.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function mi(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Zs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},M1=["Webkit","ms","Moz","O"];Object.keys(Zs).forEach(function(e){M1.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Zs[t]=Zs[e]})});function Kx(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Zs.hasOwnProperty(e)&&Zs[e]?(""+t).trim():t+"px"}function Gx(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=Kx(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var U1=Se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function lu(e,t){if(t){if(U1[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(K(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(K(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(K(61))}if(t.style!=null&&typeof t.style!="object")throw Error(K(62))}}function cu(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var uu=null;function N0(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var du=null,ds=null,hs=null;function ih(e){if(e=zi(e)){if(typeof du!="function")throw Error(K(280));var t=e.stateNode;t&&(t=Uo(t),du(e.stateNode,e.type,t))}}function Yx(e){ds?hs?hs.push(e):hs=[e]:ds=e}function Qx(){if(ds){var e=ds,t=hs;if(hs=ds=null,ih(e),t)for(e=0;e<t.length;e++)ih(t[e])}}function Xx(e,t){return e(t)}function Zx(){}var kl=!1;function Jx(e,t,r){if(kl)return e(t,r);kl=!0;try{return Xx(e,t,r)}finally{kl=!1,(ds!==null||hs!==null)&&(Zx(),Qx())}}function gi(e,t){var r=e.stateNode;if(r===null)return null;var n=Uo(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(K(231,t,typeof r));return r}var hu=!1;if(mr)try{var Ls={};Object.defineProperty(Ls,"passive",{get:function(){hu=!0}}),window.addEventListener("test",Ls,Ls),window.removeEventListener("test",Ls,Ls)}catch{hu=!1}function $1(e,t,r,n,s,i,a,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var Js=!1,Ga=null,Ya=!1,fu=null,z1={onError:function(e){Js=!0,Ga=e}};function V1(e,t,r,n,s,i,a,l,c){Js=!1,Ga=null,$1.apply(z1,arguments)}function H1(e,t,r,n,s,i,a,l,c){if(V1.apply(this,arguments),Js){if(Js){var u=Ga;Js=!1,Ga=null}else throw Error(K(198));Ya||(Ya=!0,fu=u)}}function Bn(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function em(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function ah(e){if(Bn(e)!==e)throw Error(K(188))}function W1(e){var t=e.alternate;if(!t){if(t=Bn(e),t===null)throw Error(K(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return ah(s),e;if(i===n)return ah(s),t;i=i.sibling}throw Error(K(188))}if(r.return!==n.return)r=s,n=i;else{for(var a=!1,l=s.child;l;){if(l===r){a=!0,r=s,n=i;break}if(l===n){a=!0,n=s,r=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===r){a=!0,r=i,n=s;break}if(l===n){a=!0,n=i,r=s;break}l=l.sibling}if(!a)throw Error(K(189))}}if(r.alternate!==n)throw Error(K(190))}if(r.tag!==3)throw Error(K(188));return r.stateNode.current===r?e:t}function tm(e){return e=W1(e),e!==null?rm(e):null}function rm(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=rm(e);if(t!==null)return t;e=e.sibling}return null}var nm=St.unstable_scheduleCallback,oh=St.unstable_cancelCallback,q1=St.unstable_shouldYield,K1=St.unstable_requestPaint,De=St.unstable_now,G1=St.unstable_getCurrentPriorityLevel,S0=St.unstable_ImmediatePriority,sm=St.unstable_UserBlockingPriority,Qa=St.unstable_NormalPriority,Y1=St.unstable_LowPriority,im=St.unstable_IdlePriority,Lo=null,rr=null;function Q1(e){if(rr&&typeof rr.onCommitFiberRoot=="function")try{rr.onCommitFiberRoot(Lo,e,void 0,(e.current.flags&128)===128)}catch{}}var Yt=Math.clz32?Math.clz32:J1,X1=Math.log,Z1=Math.LN2;function J1(e){return e>>>=0,e===0?32:31-(X1(e)/Z1|0)|0}var ua=64,da=4194304;function Gs(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Xa(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,i=e.pingedLanes,a=r&268435455;if(a!==0){var l=a&~s;l!==0?n=Gs(l):(i&=a,i!==0&&(n=Gs(i)))}else a=r&~s,a!==0?n=Gs(a):i!==0&&(n=Gs(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Yt(t),s=1<<r,n|=e[r],t&=~s;return n}function ew(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tw(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-Yt(i),l=1<<a,c=s[a];c===-1?(!(l&r)||l&n)&&(s[a]=ew(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function pu(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function am(){var e=ua;return ua<<=1,!(ua&4194240)&&(ua=64),e}function El(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Ui(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Yt(t),e[t]=r}function rw(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-Yt(r),i=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~i}}function A0(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Yt(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var pe=0;function om(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var lm,P0,cm,um,dm,xu=!1,ha=[],Mr=null,Ur=null,$r=null,vi=new Map,yi=new Map,Br=[],nw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function lh(e,t){switch(e){case"focusin":case"focusout":Mr=null;break;case"dragenter":case"dragleave":Ur=null;break;case"mouseover":case"mouseout":$r=null;break;case"pointerover":case"pointerout":vi.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":yi.delete(t.pointerId)}}function Os(e,t,r,n,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},t!==null&&(t=zi(t),t!==null&&P0(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function sw(e,t,r,n,s){switch(t){case"focusin":return Mr=Os(Mr,e,t,r,n,s),!0;case"dragenter":return Ur=Os(Ur,e,t,r,n,s),!0;case"mouseover":return $r=Os($r,e,t,r,n,s),!0;case"pointerover":var i=s.pointerId;return vi.set(i,Os(vi.get(i)||null,e,t,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,yi.set(i,Os(yi.get(i)||null,e,t,r,n,s)),!0}return!1}function hm(e){var t=vn(e.target);if(t!==null){var r=Bn(t);if(r!==null){if(t=r.tag,t===13){if(t=em(r),t!==null){e.blockedOn=t,dm(e.priority,function(){cm(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ta(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=mu(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);uu=n,r.target.dispatchEvent(n),uu=null}else return t=zi(r),t!==null&&P0(t),e.blockedOn=r,!1;t.shift()}return!0}function ch(e,t,r){Ta(e)&&r.delete(t)}function iw(){xu=!1,Mr!==null&&Ta(Mr)&&(Mr=null),Ur!==null&&Ta(Ur)&&(Ur=null),$r!==null&&Ta($r)&&($r=null),vi.forEach(ch),yi.forEach(ch)}function Is(e,t){e.blockedOn===t&&(e.blockedOn=null,xu||(xu=!0,St.unstable_scheduleCallback(St.unstable_NormalPriority,iw)))}function wi(e){function t(s){return Is(s,e)}if(0<ha.length){Is(ha[0],e);for(var r=1;r<ha.length;r++){var n=ha[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Mr!==null&&Is(Mr,e),Ur!==null&&Is(Ur,e),$r!==null&&Is($r,e),vi.forEach(t),yi.forEach(t),r=0;r<Br.length;r++)n=Br[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Br.length&&(r=Br[0],r.blockedOn===null);)hm(r),r.blockedOn===null&&Br.shift()}var fs=br.ReactCurrentBatchConfig,Za=!0;function aw(e,t,r,n){var s=pe,i=fs.transition;fs.transition=null;try{pe=1,D0(e,t,r,n)}finally{pe=s,fs.transition=i}}function ow(e,t,r,n){var s=pe,i=fs.transition;fs.transition=null;try{pe=4,D0(e,t,r,n)}finally{pe=s,fs.transition=i}}function D0(e,t,r,n){if(Za){var s=mu(e,t,r,n);if(s===null)Ll(e,t,n,Ja,r),lh(e,n);else if(sw(s,e,t,r,n))n.stopPropagation();else if(lh(e,n),t&4&&-1<nw.indexOf(e)){for(;s!==null;){var i=zi(s);if(i!==null&&lm(i),i=mu(e,t,r,n),i===null&&Ll(e,t,n,Ja,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else Ll(e,t,n,null,r)}}var Ja=null;function mu(e,t,r,n){if(Ja=null,e=N0(n),e=vn(e),e!==null)if(t=Bn(e),t===null)e=null;else if(r=t.tag,r===13){if(e=em(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ja=e,null}function fm(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(G1()){case S0:return 1;case sm:return 4;case Qa:case Y1:return 16;case im:return 536870912;default:return 16}default:return 16}}var Rr=null,B0=null,Ra=null;function pm(){if(Ra)return Ra;var e,t=B0,r=t.length,n,s="value"in Rr?Rr.value:Rr.textContent,i=s.length;for(e=0;e<r&&t[e]===s[e];e++);var a=r-e;for(n=1;n<=a&&t[r-n]===s[i-n];n++);return Ra=s.slice(e,1<n?1-n:void 0)}function La(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function fa(){return!0}function uh(){return!1}function Dt(e){function t(r,n,s,i,a){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?fa:uh,this.isPropagationStopped=uh,this}return Se(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=fa)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=fa)},persist:function(){},isPersistent:fa}),t}var Ss={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},F0=Dt(Ss),$i=Se({},Ss,{view:0,detail:0}),lw=Dt($i),Nl,Sl,Ms,Oo=Se({},$i,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:T0,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ms&&(Ms&&e.type==="mousemove"?(Nl=e.screenX-Ms.screenX,Sl=e.screenY-Ms.screenY):Sl=Nl=0,Ms=e),Nl)},movementY:function(e){return"movementY"in e?e.movementY:Sl}}),dh=Dt(Oo),cw=Se({},Oo,{dataTransfer:0}),uw=Dt(cw),dw=Se({},$i,{relatedTarget:0}),Al=Dt(dw),hw=Se({},Ss,{animationName:0,elapsedTime:0,pseudoElement:0}),fw=Dt(hw),pw=Se({},Ss,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xw=Dt(pw),mw=Se({},Ss,{data:0}),hh=Dt(mw),gw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ww(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=yw[e])?!!t[e]:!1}function T0(){return ww}var bw=Se({},$i,{key:function(e){if(e.key){var t=gw[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=La(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?vw[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:T0,charCode:function(e){return e.type==="keypress"?La(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?La(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),jw=Dt(bw),Cw=Se({},Oo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fh=Dt(Cw),_w=Se({},$i,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:T0}),kw=Dt(_w),Ew=Se({},Ss,{propertyName:0,elapsedTime:0,pseudoElement:0}),Nw=Dt(Ew),Sw=Se({},Oo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Aw=Dt(Sw),Pw=[9,13,27,32],R0=mr&&"CompositionEvent"in window,ei=null;mr&&"documentMode"in document&&(ei=document.documentMode);var Dw=mr&&"TextEvent"in window&&!ei,xm=mr&&(!R0||ei&&8<ei&&11>=ei),ph=" ",xh=!1;function mm(e,t){switch(e){case"keyup":return Pw.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gm(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Kn=!1;function Bw(e,t){switch(e){case"compositionend":return gm(t);case"keypress":return t.which!==32?null:(xh=!0,ph);case"textInput":return e=t.data,e===ph&&xh?null:e;default:return null}}function Fw(e,t){if(Kn)return e==="compositionend"||!R0&&mm(e,t)?(e=pm(),Ra=B0=Rr=null,Kn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return xm&&t.locale!=="ko"?null:t.data;default:return null}}var Tw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mh(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Tw[e.type]:t==="textarea"}function vm(e,t,r,n){Yx(n),t=eo(t,"onChange"),0<t.length&&(r=new F0("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var ti=null,bi=null;function Rw(e){Am(e,0)}function Io(e){var t=Qn(e);if(zx(t))return e}function Lw(e,t){if(e==="change")return t}var ym=!1;if(mr){var Pl;if(mr){var Dl="oninput"in document;if(!Dl){var gh=document.createElement("div");gh.setAttribute("oninput","return;"),Dl=typeof gh.oninput=="function"}Pl=Dl}else Pl=!1;ym=Pl&&(!document.documentMode||9<document.documentMode)}function vh(){ti&&(ti.detachEvent("onpropertychange",wm),bi=ti=null)}function wm(e){if(e.propertyName==="value"&&Io(bi)){var t=[];vm(t,bi,e,N0(e)),Jx(Rw,t)}}function Ow(e,t,r){e==="focusin"?(vh(),ti=t,bi=r,ti.attachEvent("onpropertychange",wm)):e==="focusout"&&vh()}function Iw(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Io(bi)}function Mw(e,t){if(e==="click")return Io(t)}function Uw(e,t){if(e==="input"||e==="change")return Io(t)}function $w(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Xt=typeof Object.is=="function"?Object.is:$w;function ji(e,t){if(Xt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Zc.call(t,s)||!Xt(e[s],t[s]))return!1}return!0}function yh(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function wh(e,t){var r=yh(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=yh(r)}}function bm(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?bm(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function jm(){for(var e=window,t=Ka();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Ka(e.document)}return t}function L0(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function zw(e){var t=jm(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&bm(r.ownerDocument.documentElement,r)){if(n!==null&&L0(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!e.extend&&i>n&&(s=n,n=i,i=s),s=wh(r,i);var a=wh(r,n);s&&a&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Vw=mr&&"documentMode"in document&&11>=document.documentMode,Gn=null,gu=null,ri=null,vu=!1;function bh(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;vu||Gn==null||Gn!==Ka(n)||(n=Gn,"selectionStart"in n&&L0(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),ri&&ji(ri,n)||(ri=n,n=eo(gu,"onSelect"),0<n.length&&(t=new F0("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Gn)))}function pa(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Yn={animationend:pa("Animation","AnimationEnd"),animationiteration:pa("Animation","AnimationIteration"),animationstart:pa("Animation","AnimationStart"),transitionend:pa("Transition","TransitionEnd")},Bl={},Cm={};mr&&(Cm=document.createElement("div").style,"AnimationEvent"in window||(delete Yn.animationend.animation,delete Yn.animationiteration.animation,delete Yn.animationstart.animation),"TransitionEvent"in window||delete Yn.transitionend.transition);function Mo(e){if(Bl[e])return Bl[e];if(!Yn[e])return e;var t=Yn[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Cm)return Bl[e]=t[r];return e}var _m=Mo("animationend"),km=Mo("animationiteration"),Em=Mo("animationstart"),Nm=Mo("transitionend"),Sm=new Map,jh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Jr(e,t){Sm.set(e,t),Dn(t,[e])}for(var Fl=0;Fl<jh.length;Fl++){var Tl=jh[Fl],Hw=Tl.toLowerCase(),Ww=Tl[0].toUpperCase()+Tl.slice(1);Jr(Hw,"on"+Ww)}Jr(_m,"onAnimationEnd");Jr(km,"onAnimationIteration");Jr(Em,"onAnimationStart");Jr("dblclick","onDoubleClick");Jr("focusin","onFocus");Jr("focusout","onBlur");Jr(Nm,"onTransitionEnd");gs("onMouseEnter",["mouseout","mouseover"]);gs("onMouseLeave",["mouseout","mouseover"]);gs("onPointerEnter",["pointerout","pointerover"]);gs("onPointerLeave",["pointerout","pointerover"]);Dn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Dn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Dn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Dn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Dn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Dn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ys="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qw=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ys));function Ch(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,H1(n,t,void 0,e),e.currentTarget=null}function Am(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var a=n.length-1;0<=a;a--){var l=n[a],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;Ch(s,l,u),i=c}else for(a=0;a<n.length;a++){if(l=n[a],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;Ch(s,l,u),i=c}}}if(Ya)throw e=fu,Ya=!1,fu=null,e}function we(e,t){var r=t[Cu];r===void 0&&(r=t[Cu]=new Set);var n=e+"__bubble";r.has(n)||(Pm(t,e,2,!1),r.add(n))}function Rl(e,t,r){var n=0;t&&(n|=4),Pm(r,e,n,t)}var xa="_reactListening"+Math.random().toString(36).slice(2);function Ci(e){if(!e[xa]){e[xa]=!0,Ox.forEach(function(r){r!=="selectionchange"&&(qw.has(r)||Rl(r,!1,e),Rl(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[xa]||(t[xa]=!0,Rl("selectionchange",!1,t))}}function Pm(e,t,r,n){switch(fm(t)){case 1:var s=aw;break;case 4:s=ow;break;default:s=D0}r=s.bind(null,t,r,e),s=void 0,!hu||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function Ll(e,t,r,n,s){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=n.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;l!==null;){if(a=vn(l),a===null)return;if(c=a.tag,c===5||c===6){n=i=a;continue e}l=l.parentNode}}n=n.return}Jx(function(){var u=i,d=N0(r),h=[];e:{var f=Sm.get(e);if(f!==void 0){var p=F0,g=e;switch(e){case"keypress":if(La(r)===0)break e;case"keydown":case"keyup":p=jw;break;case"focusin":g="focus",p=Al;break;case"focusout":g="blur",p=Al;break;case"beforeblur":case"afterblur":p=Al;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=dh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=uw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=kw;break;case _m:case km:case Em:p=fw;break;case Nm:p=Nw;break;case"scroll":p=lw;break;case"wheel":p=Aw;break;case"copy":case"cut":case"paste":p=xw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=fh}var y=(t&4)!==0,w=!y&&e==="scroll",v=y?f!==null?f+"Capture":null:f;y=[];for(var x=u,m;x!==null;){m=x;var b=m.stateNode;if(m.tag===5&&b!==null&&(m=b,v!==null&&(b=gi(x,v),b!=null&&y.push(_i(x,b,m)))),w)break;x=x.return}0<y.length&&(f=new p(f,g,null,r,d),h.push({event:f,listeners:y}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",f&&r!==uu&&(g=r.relatedTarget||r.fromElement)&&(vn(g)||g[gr]))break e;if((p||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,p?(g=r.relatedTarget||r.toElement,p=u,g=g?vn(g):null,g!==null&&(w=Bn(g),g!==w||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=u),p!==g)){if(y=dh,b="onMouseLeave",v="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(y=fh,b="onPointerLeave",v="onPointerEnter",x="pointer"),w=p==null?f:Qn(p),m=g==null?f:Qn(g),f=new y(b,x+"leave",p,r,d),f.target=w,f.relatedTarget=m,b=null,vn(d)===u&&(y=new y(v,x+"enter",g,r,d),y.target=m,y.relatedTarget=w,b=y),w=b,p&&g)t:{for(y=p,v=g,x=0,m=y;m;m=Mn(m))x++;for(m=0,b=v;b;b=Mn(b))m++;for(;0<x-m;)y=Mn(y),x--;for(;0<m-x;)v=Mn(v),m--;for(;x--;){if(y===v||v!==null&&y===v.alternate)break t;y=Mn(y),v=Mn(v)}y=null}else y=null;p!==null&&_h(h,f,p,y,!1),g!==null&&w!==null&&_h(h,w,g,y,!0)}}e:{if(f=u?Qn(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var j=Lw;else if(mh(f))if(ym)j=Uw;else{j=Iw;var _=Ow}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(j=Mw);if(j&&(j=j(e,u))){vm(h,j,r,d);break e}_&&_(e,f,u),e==="focusout"&&(_=f._wrapperState)&&_.controlled&&f.type==="number"&&iu(f,"number",f.value)}switch(_=u?Qn(u):window,e){case"focusin":(mh(_)||_.contentEditable==="true")&&(Gn=_,gu=u,ri=null);break;case"focusout":ri=gu=Gn=null;break;case"mousedown":vu=!0;break;case"contextmenu":case"mouseup":case"dragend":vu=!1,bh(h,r,d);break;case"selectionchange":if(Vw)break;case"keydown":case"keyup":bh(h,r,d)}var k;if(R0)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Kn?mm(e,r)&&(E="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(E="onCompositionStart");E&&(xm&&r.locale!=="ko"&&(Kn||E!=="onCompositionStart"?E==="onCompositionEnd"&&Kn&&(k=pm()):(Rr=d,B0="value"in Rr?Rr.value:Rr.textContent,Kn=!0)),_=eo(u,E),0<_.length&&(E=new hh(E,e,null,r,d),h.push({event:E,listeners:_}),k?E.data=k:(k=gm(r),k!==null&&(E.data=k)))),(k=Dw?Bw(e,r):Fw(e,r))&&(u=eo(u,"onBeforeInput"),0<u.length&&(d=new hh("onBeforeInput","beforeinput",null,r,d),h.push({event:d,listeners:u}),d.data=k))}Am(h,t)})}function _i(e,t,r){return{instance:e,listener:t,currentTarget:r}}function eo(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=gi(e,r),i!=null&&n.unshift(_i(e,i,s)),i=gi(e,t),i!=null&&n.push(_i(e,i,s))),e=e.return}return n}function Mn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function _h(e,t,r,n,s){for(var i=t._reactName,a=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,s?(c=gi(r,i),c!=null&&a.unshift(_i(r,c,l))):s||(c=gi(r,i),c!=null&&a.push(_i(r,c,l)))),r=r.return}a.length!==0&&e.push({event:t,listeners:a})}var Kw=/\r\n?/g,Gw=/\u0000|\uFFFD/g;function kh(e){return(typeof e=="string"?e:""+e).replace(Kw,`
`).replace(Gw,"")}function ma(e,t,r){if(t=kh(t),kh(e)!==t&&r)throw Error(K(425))}function to(){}var yu=null,wu=null;function bu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ju=typeof setTimeout=="function"?setTimeout:void 0,Yw=typeof clearTimeout=="function"?clearTimeout:void 0,Eh=typeof Promise=="function"?Promise:void 0,Qw=typeof queueMicrotask=="function"?queueMicrotask:typeof Eh<"u"?function(e){return Eh.resolve(null).then(e).catch(Xw)}:ju;function Xw(e){setTimeout(function(){throw e})}function Ol(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),wi(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);wi(t)}function zr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Nh(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var As=Math.random().toString(36).slice(2),tr="__reactFiber$"+As,ki="__reactProps$"+As,gr="__reactContainer$"+As,Cu="__reactEvents$"+As,Zw="__reactListeners$"+As,Jw="__reactHandles$"+As;function vn(e){var t=e[tr];if(t)return t;for(var r=e.parentNode;r;){if(t=r[gr]||r[tr]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Nh(e);e!==null;){if(r=e[tr])return r;e=Nh(e)}return t}e=r,r=e.parentNode}return null}function zi(e){return e=e[tr]||e[gr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Qn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(K(33))}function Uo(e){return e[ki]||null}var _u=[],Xn=-1;function en(e){return{current:e}}function be(e){0>Xn||(e.current=_u[Xn],_u[Xn]=null,Xn--)}function ve(e,t){Xn++,_u[Xn]=e.current,e.current=t}var Qr={},st=en(Qr),mt=en(!1),En=Qr;function vs(e,t){var r=e.type.contextTypes;if(!r)return Qr;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function gt(e){return e=e.childContextTypes,e!=null}function ro(){be(mt),be(st)}function Sh(e,t,r){if(st.current!==Qr)throw Error(K(168));ve(st,t),ve(mt,r)}function Dm(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(K(108,O1(e)||"Unknown",s));return Se({},r,n)}function no(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Qr,En=st.current,ve(st,e),ve(mt,mt.current),!0}function Ah(e,t,r){var n=e.stateNode;if(!n)throw Error(K(169));r?(e=Dm(e,t,En),n.__reactInternalMemoizedMergedChildContext=e,be(mt),be(st),ve(st,e)):be(mt),ve(mt,r)}var lr=null,$o=!1,Il=!1;function Bm(e){lr===null?lr=[e]:lr.push(e)}function e2(e){$o=!0,Bm(e)}function tn(){if(!Il&&lr!==null){Il=!0;var e=0,t=pe;try{var r=lr;for(pe=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}lr=null,$o=!1}catch(s){throw lr!==null&&(lr=lr.slice(e+1)),nm(S0,tn),s}finally{pe=t,Il=!1}}return null}var Zn=[],Jn=0,so=null,io=0,Rt=[],Lt=0,Nn=null,cr=1,ur="";function dn(e,t){Zn[Jn++]=io,Zn[Jn++]=so,so=e,io=t}function Fm(e,t,r){Rt[Lt++]=cr,Rt[Lt++]=ur,Rt[Lt++]=Nn,Nn=e;var n=cr;e=ur;var s=32-Yt(n)-1;n&=~(1<<s),r+=1;var i=32-Yt(t)+s;if(30<i){var a=s-s%5;i=(n&(1<<a)-1).toString(32),n>>=a,s-=a,cr=1<<32-Yt(t)+s|r<<s|n,ur=i+e}else cr=1<<i|r<<s|n,ur=e}function O0(e){e.return!==null&&(dn(e,1),Fm(e,1,0))}function I0(e){for(;e===so;)so=Zn[--Jn],Zn[Jn]=null,io=Zn[--Jn],Zn[Jn]=null;for(;e===Nn;)Nn=Rt[--Lt],Rt[Lt]=null,ur=Rt[--Lt],Rt[Lt]=null,cr=Rt[--Lt],Rt[Lt]=null}var Nt=null,Et=null,Ce=!1,Gt=null;function Tm(e,t){var r=Ot(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Ph(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Nt=e,Et=zr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Nt=e,Et=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Nn!==null?{id:cr,overflow:ur}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Ot(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Nt=e,Et=null,!0):!1;default:return!1}}function ku(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Eu(e){if(Ce){var t=Et;if(t){var r=t;if(!Ph(e,t)){if(ku(e))throw Error(K(418));t=zr(r.nextSibling);var n=Nt;t&&Ph(e,t)?Tm(n,r):(e.flags=e.flags&-4097|2,Ce=!1,Nt=e)}}else{if(ku(e))throw Error(K(418));e.flags=e.flags&-4097|2,Ce=!1,Nt=e}}}function Dh(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Nt=e}function ga(e){if(e!==Nt)return!1;if(!Ce)return Dh(e),Ce=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!bu(e.type,e.memoizedProps)),t&&(t=Et)){if(ku(e))throw Rm(),Error(K(418));for(;t;)Tm(e,t),t=zr(t.nextSibling)}if(Dh(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(K(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Et=zr(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Et=null}}else Et=Nt?zr(e.stateNode.nextSibling):null;return!0}function Rm(){for(var e=Et;e;)e=zr(e.nextSibling)}function ys(){Et=Nt=null,Ce=!1}function M0(e){Gt===null?Gt=[e]:Gt.push(e)}var t2=br.ReactCurrentBatchConfig;function Us(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(K(309));var n=r.stateNode}if(!n)throw Error(K(147,e));var s=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(a){var l=s.refs;a===null?delete l[i]:l[i]=a},t._stringRef=i,t)}if(typeof e!="string")throw Error(K(284));if(!r._owner)throw Error(K(290,e))}return e}function va(e,t){throw e=Object.prototype.toString.call(t),Error(K(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Bh(e){var t=e._init;return t(e._payload)}function Lm(e){function t(v,x){if(e){var m=v.deletions;m===null?(v.deletions=[x],v.flags|=16):m.push(x)}}function r(v,x){if(!e)return null;for(;x!==null;)t(v,x),x=x.sibling;return null}function n(v,x){for(v=new Map;x!==null;)x.key!==null?v.set(x.key,x):v.set(x.index,x),x=x.sibling;return v}function s(v,x){return v=qr(v,x),v.index=0,v.sibling=null,v}function i(v,x,m){return v.index=m,e?(m=v.alternate,m!==null?(m=m.index,m<x?(v.flags|=2,x):m):(v.flags|=2,x)):(v.flags|=1048576,x)}function a(v){return e&&v.alternate===null&&(v.flags|=2),v}function l(v,x,m,b){return x===null||x.tag!==6?(x=Wl(m,v.mode,b),x.return=v,x):(x=s(x,m),x.return=v,x)}function c(v,x,m,b){var j=m.type;return j===qn?d(v,x,m.props.children,b,m.key):x!==null&&(x.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Sr&&Bh(j)===x.type)?(b=s(x,m.props),b.ref=Us(v,x,m),b.return=v,b):(b=Va(m.type,m.key,m.props,null,v.mode,b),b.ref=Us(v,x,m),b.return=v,b)}function u(v,x,m,b){return x===null||x.tag!==4||x.stateNode.containerInfo!==m.containerInfo||x.stateNode.implementation!==m.implementation?(x=ql(m,v.mode,b),x.return=v,x):(x=s(x,m.children||[]),x.return=v,x)}function d(v,x,m,b,j){return x===null||x.tag!==7?(x=Cn(m,v.mode,b,j),x.return=v,x):(x=s(x,m),x.return=v,x)}function h(v,x,m){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Wl(""+x,v.mode,m),x.return=v,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case oa:return m=Va(x.type,x.key,x.props,null,v.mode,m),m.ref=Us(v,null,x),m.return=v,m;case Wn:return x=ql(x,v.mode,m),x.return=v,x;case Sr:var b=x._init;return h(v,b(x._payload),m)}if(Ks(x)||Rs(x))return x=Cn(x,v.mode,m,null),x.return=v,x;va(v,x)}return null}function f(v,x,m,b){var j=x!==null?x.key:null;if(typeof m=="string"&&m!==""||typeof m=="number")return j!==null?null:l(v,x,""+m,b);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case oa:return m.key===j?c(v,x,m,b):null;case Wn:return m.key===j?u(v,x,m,b):null;case Sr:return j=m._init,f(v,x,j(m._payload),b)}if(Ks(m)||Rs(m))return j!==null?null:d(v,x,m,b,null);va(v,m)}return null}function p(v,x,m,b,j){if(typeof b=="string"&&b!==""||typeof b=="number")return v=v.get(m)||null,l(x,v,""+b,j);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case oa:return v=v.get(b.key===null?m:b.key)||null,c(x,v,b,j);case Wn:return v=v.get(b.key===null?m:b.key)||null,u(x,v,b,j);case Sr:var _=b._init;return p(v,x,m,_(b._payload),j)}if(Ks(b)||Rs(b))return v=v.get(m)||null,d(x,v,b,j,null);va(x,b)}return null}function g(v,x,m,b){for(var j=null,_=null,k=x,E=x=0,D=null;k!==null&&E<m.length;E++){k.index>E?(D=k,k=null):D=k.sibling;var S=f(v,k,m[E],b);if(S===null){k===null&&(k=D);break}e&&k&&S.alternate===null&&t(v,k),x=i(S,x,E),_===null?j=S:_.sibling=S,_=S,k=D}if(E===m.length)return r(v,k),Ce&&dn(v,E),j;if(k===null){for(;E<m.length;E++)k=h(v,m[E],b),k!==null&&(x=i(k,x,E),_===null?j=k:_.sibling=k,_=k);return Ce&&dn(v,E),j}for(k=n(v,k);E<m.length;E++)D=p(k,v,E,m[E],b),D!==null&&(e&&D.alternate!==null&&k.delete(D.key===null?E:D.key),x=i(D,x,E),_===null?j=D:_.sibling=D,_=D);return e&&k.forEach(function(P){return t(v,P)}),Ce&&dn(v,E),j}function y(v,x,m,b){var j=Rs(m);if(typeof j!="function")throw Error(K(150));if(m=j.call(m),m==null)throw Error(K(151));for(var _=j=null,k=x,E=x=0,D=null,S=m.next();k!==null&&!S.done;E++,S=m.next()){k.index>E?(D=k,k=null):D=k.sibling;var P=f(v,k,S.value,b);if(P===null){k===null&&(k=D);break}e&&k&&P.alternate===null&&t(v,k),x=i(P,x,E),_===null?j=P:_.sibling=P,_=P,k=D}if(S.done)return r(v,k),Ce&&dn(v,E),j;if(k===null){for(;!S.done;E++,S=m.next())S=h(v,S.value,b),S!==null&&(x=i(S,x,E),_===null?j=S:_.sibling=S,_=S);return Ce&&dn(v,E),j}for(k=n(v,k);!S.done;E++,S=m.next())S=p(k,v,E,S.value,b),S!==null&&(e&&S.alternate!==null&&k.delete(S.key===null?E:S.key),x=i(S,x,E),_===null?j=S:_.sibling=S,_=S);return e&&k.forEach(function(A){return t(v,A)}),Ce&&dn(v,E),j}function w(v,x,m,b){if(typeof m=="object"&&m!==null&&m.type===qn&&m.key===null&&(m=m.props.children),typeof m=="object"&&m!==null){switch(m.$$typeof){case oa:e:{for(var j=m.key,_=x;_!==null;){if(_.key===j){if(j=m.type,j===qn){if(_.tag===7){r(v,_.sibling),x=s(_,m.props.children),x.return=v,v=x;break e}}else if(_.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Sr&&Bh(j)===_.type){r(v,_.sibling),x=s(_,m.props),x.ref=Us(v,_,m),x.return=v,v=x;break e}r(v,_);break}else t(v,_);_=_.sibling}m.type===qn?(x=Cn(m.props.children,v.mode,b,m.key),x.return=v,v=x):(b=Va(m.type,m.key,m.props,null,v.mode,b),b.ref=Us(v,x,m),b.return=v,v=b)}return a(v);case Wn:e:{for(_=m.key;x!==null;){if(x.key===_)if(x.tag===4&&x.stateNode.containerInfo===m.containerInfo&&x.stateNode.implementation===m.implementation){r(v,x.sibling),x=s(x,m.children||[]),x.return=v,v=x;break e}else{r(v,x);break}else t(v,x);x=x.sibling}x=ql(m,v.mode,b),x.return=v,v=x}return a(v);case Sr:return _=m._init,w(v,x,_(m._payload),b)}if(Ks(m))return g(v,x,m,b);if(Rs(m))return y(v,x,m,b);va(v,m)}return typeof m=="string"&&m!==""||typeof m=="number"?(m=""+m,x!==null&&x.tag===6?(r(v,x.sibling),x=s(x,m),x.return=v,v=x):(r(v,x),x=Wl(m,v.mode,b),x.return=v,v=x),a(v)):r(v,x)}return w}var ws=Lm(!0),Om=Lm(!1),ao=en(null),oo=null,es=null,U0=null;function $0(){U0=es=oo=null}function z0(e){var t=ao.current;be(ao),e._currentValue=t}function Nu(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function ps(e,t){oo=e,U0=es=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(xt=!0),e.firstContext=null)}function Mt(e){var t=e._currentValue;if(U0!==e)if(e={context:e,memoizedValue:t,next:null},es===null){if(oo===null)throw Error(K(308));es=e,oo.dependencies={lanes:0,firstContext:e}}else es=es.next=e;return t}var yn=null;function V0(e){yn===null?yn=[e]:yn.push(e)}function Im(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,V0(t)):(r.next=s.next,s.next=r),t.interleaved=r,vr(e,n)}function vr(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Ar=!1;function H0(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Mm(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function hr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Vr(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,fe&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,vr(e,r)}return s=n.interleaved,s===null?(t.next=t,V0(n)):(t.next=s.next,s.next=t),n.interleaved=t,vr(e,r)}function Oa(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,A0(e,r)}}function Fh(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=a:i=i.next=a,r=r.next}while(r!==null);i===null?s=i=t:i=i.next=t}else s=i=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function lo(e,t,r,n){var s=e.updateQueue;Ar=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,a===null?i=u:a.next=u,a=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var h=s.baseState;a=0,d=u=c=null,l=i;do{var f=l.lane,p=l.eventTime;if((n&f)===f){d!==null&&(d=d.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var g=e,y=l;switch(f=t,p=r,y.tag){case 1:if(g=y.payload,typeof g=="function"){h=g.call(p,h,f);break e}h=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=y.payload,f=typeof g=="function"?g.call(p,h,f):g,f==null)break e;h=Se({},h,f);break e;case 2:Ar=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,f=s.effects,f===null?s.effects=[l]:f.push(l))}else p={eventTime:p,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=p,c=h):d=d.next=p,a|=f;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;f=l,l=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(c=h),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do a|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);An|=a,e.lanes=a,e.memoizedState=h}}function Th(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(K(191,s));s.call(n)}}}var Vi={},nr=en(Vi),Ei=en(Vi),Ni=en(Vi);function wn(e){if(e===Vi)throw Error(K(174));return e}function W0(e,t){switch(ve(Ni,t),ve(Ei,e),ve(nr,Vi),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ou(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ou(t,e)}be(nr),ve(nr,t)}function bs(){be(nr),be(Ei),be(Ni)}function Um(e){wn(Ni.current);var t=wn(nr.current),r=ou(t,e.type);t!==r&&(ve(Ei,e),ve(nr,r))}function q0(e){Ei.current===e&&(be(nr),be(Ei))}var ke=en(0);function co(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ml=[];function K0(){for(var e=0;e<Ml.length;e++)Ml[e]._workInProgressVersionPrimary=null;Ml.length=0}var Ia=br.ReactCurrentDispatcher,Ul=br.ReactCurrentBatchConfig,Sn=0,Ne=null,Ie=null,qe=null,uo=!1,ni=!1,Si=0,r2=0;function Je(){throw Error(K(321))}function G0(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Xt(e[r],t[r]))return!1;return!0}function Y0(e,t,r,n,s,i){if(Sn=i,Ne=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ia.current=e===null||e.memoizedState===null?a2:o2,e=r(n,s),ni){i=0;do{if(ni=!1,Si=0,25<=i)throw Error(K(301));i+=1,qe=Ie=null,t.updateQueue=null,Ia.current=l2,e=r(n,s)}while(ni)}if(Ia.current=ho,t=Ie!==null&&Ie.next!==null,Sn=0,qe=Ie=Ne=null,uo=!1,t)throw Error(K(300));return e}function Q0(){var e=Si!==0;return Si=0,e}function er(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qe===null?Ne.memoizedState=qe=e:qe=qe.next=e,qe}function Ut(){if(Ie===null){var e=Ne.alternate;e=e!==null?e.memoizedState:null}else e=Ie.next;var t=qe===null?Ne.memoizedState:qe.next;if(t!==null)qe=t,Ie=e;else{if(e===null)throw Error(K(310));Ie=e,e={memoizedState:Ie.memoizedState,baseState:Ie.baseState,baseQueue:Ie.baseQueue,queue:Ie.queue,next:null},qe===null?Ne.memoizedState=qe=e:qe=qe.next=e}return qe}function Ai(e,t){return typeof t=="function"?t(e):t}function $l(e){var t=Ut(),r=t.queue;if(r===null)throw Error(K(311));r.lastRenderedReducer=e;var n=Ie,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var l=a=null,c=null,u=i;do{var d=u.lane;if((Sn&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,a=n):c=c.next=h,Ne.lanes|=d,An|=d}u=u.next}while(u!==null&&u!==i);c===null?a=n:c.next=l,Xt(n,t.memoizedState)||(xt=!0),t.memoizedState=n,t.baseState=a,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do i=s.lane,Ne.lanes|=i,An|=i,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function zl(e){var t=Ut(),r=t.queue;if(r===null)throw Error(K(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,i=t.memoizedState;if(s!==null){r.pending=null;var a=s=s.next;do i=e(i,a.action),a=a.next;while(a!==s);Xt(i,t.memoizedState)||(xt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function $m(){}function zm(e,t){var r=Ne,n=Ut(),s=t(),i=!Xt(n.memoizedState,s);if(i&&(n.memoizedState=s,xt=!0),n=n.queue,X0(Wm.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||qe!==null&&qe.memoizedState.tag&1){if(r.flags|=2048,Pi(9,Hm.bind(null,r,n,s,t),void 0,null),Ke===null)throw Error(K(349));Sn&30||Vm(r,t,s)}return s}function Vm(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Ne.updateQueue,t===null?(t={lastEffect:null,stores:null},Ne.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Hm(e,t,r,n){t.value=r,t.getSnapshot=n,qm(t)&&Km(e)}function Wm(e,t,r){return r(function(){qm(t)&&Km(e)})}function qm(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Xt(e,r)}catch{return!0}}function Km(e){var t=vr(e,1);t!==null&&Qt(t,e,1,-1)}function Rh(e){var t=er();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ai,lastRenderedState:e},t.queue=e,e=e.dispatch=i2.bind(null,Ne,e),[t.memoizedState,e]}function Pi(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Ne.updateQueue,t===null?(t={lastEffect:null,stores:null},Ne.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function Gm(){return Ut().memoizedState}function Ma(e,t,r,n){var s=er();Ne.flags|=e,s.memoizedState=Pi(1|t,r,void 0,n===void 0?null:n)}function zo(e,t,r,n){var s=Ut();n=n===void 0?null:n;var i=void 0;if(Ie!==null){var a=Ie.memoizedState;if(i=a.destroy,n!==null&&G0(n,a.deps)){s.memoizedState=Pi(t,r,i,n);return}}Ne.flags|=e,s.memoizedState=Pi(1|t,r,i,n)}function Lh(e,t){return Ma(8390656,8,e,t)}function X0(e,t){return zo(2048,8,e,t)}function Ym(e,t){return zo(4,2,e,t)}function Qm(e,t){return zo(4,4,e,t)}function Xm(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Zm(e,t,r){return r=r!=null?r.concat([e]):null,zo(4,4,Xm.bind(null,t,e),r)}function Z0(){}function Jm(e,t){var r=Ut();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&G0(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function eg(e,t){var r=Ut();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&G0(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function tg(e,t,r){return Sn&21?(Xt(r,t)||(r=am(),Ne.lanes|=r,An|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,xt=!0),e.memoizedState=r)}function n2(e,t){var r=pe;pe=r!==0&&4>r?r:4,e(!0);var n=Ul.transition;Ul.transition={};try{e(!1),t()}finally{pe=r,Ul.transition=n}}function rg(){return Ut().memoizedState}function s2(e,t,r){var n=Wr(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},ng(e))sg(t,r);else if(r=Im(e,t,r,n),r!==null){var s=ct();Qt(r,e,n,s),ig(r,t,n)}}function i2(e,t,r){var n=Wr(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(ng(e))sg(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var a=t.lastRenderedState,l=i(a,r);if(s.hasEagerState=!0,s.eagerState=l,Xt(l,a)){var c=t.interleaved;c===null?(s.next=s,V0(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}r=Im(e,t,s,n),r!==null&&(s=ct(),Qt(r,e,n,s),ig(r,t,n))}}function ng(e){var t=e.alternate;return e===Ne||t!==null&&t===Ne}function sg(e,t){ni=uo=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function ig(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,A0(e,r)}}var ho={readContext:Mt,useCallback:Je,useContext:Je,useEffect:Je,useImperativeHandle:Je,useInsertionEffect:Je,useLayoutEffect:Je,useMemo:Je,useReducer:Je,useRef:Je,useState:Je,useDebugValue:Je,useDeferredValue:Je,useTransition:Je,useMutableSource:Je,useSyncExternalStore:Je,useId:Je,unstable_isNewReconciler:!1},a2={readContext:Mt,useCallback:function(e,t){return er().memoizedState=[e,t===void 0?null:t],e},useContext:Mt,useEffect:Lh,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Ma(4194308,4,Xm.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Ma(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ma(4,2,e,t)},useMemo:function(e,t){var r=er();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=er();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=s2.bind(null,Ne,e),[n.memoizedState,e]},useRef:function(e){var t=er();return e={current:e},t.memoizedState=e},useState:Rh,useDebugValue:Z0,useDeferredValue:function(e){return er().memoizedState=e},useTransition:function(){var e=Rh(!1),t=e[0];return e=n2.bind(null,e[1]),er().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Ne,s=er();if(Ce){if(r===void 0)throw Error(K(407));r=r()}else{if(r=t(),Ke===null)throw Error(K(349));Sn&30||Vm(n,t,r)}s.memoizedState=r;var i={value:r,getSnapshot:t};return s.queue=i,Lh(Wm.bind(null,n,i,e),[e]),n.flags|=2048,Pi(9,Hm.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=er(),t=Ke.identifierPrefix;if(Ce){var r=ur,n=cr;r=(n&~(1<<32-Yt(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Si++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=r2++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},o2={readContext:Mt,useCallback:Jm,useContext:Mt,useEffect:X0,useImperativeHandle:Zm,useInsertionEffect:Ym,useLayoutEffect:Qm,useMemo:eg,useReducer:$l,useRef:Gm,useState:function(){return $l(Ai)},useDebugValue:Z0,useDeferredValue:function(e){var t=Ut();return tg(t,Ie.memoizedState,e)},useTransition:function(){var e=$l(Ai)[0],t=Ut().memoizedState;return[e,t]},useMutableSource:$m,useSyncExternalStore:zm,useId:rg,unstable_isNewReconciler:!1},l2={readContext:Mt,useCallback:Jm,useContext:Mt,useEffect:X0,useImperativeHandle:Zm,useInsertionEffect:Ym,useLayoutEffect:Qm,useMemo:eg,useReducer:zl,useRef:Gm,useState:function(){return zl(Ai)},useDebugValue:Z0,useDeferredValue:function(e){var t=Ut();return Ie===null?t.memoizedState=e:tg(t,Ie.memoizedState,e)},useTransition:function(){var e=zl(Ai)[0],t=Ut().memoizedState;return[e,t]},useMutableSource:$m,useSyncExternalStore:zm,useId:rg,unstable_isNewReconciler:!1};function Wt(e,t){if(e&&e.defaultProps){t=Se({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Su(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Se({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Vo={isMounted:function(e){return(e=e._reactInternals)?Bn(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=ct(),s=Wr(e),i=hr(n,s);i.payload=t,r!=null&&(i.callback=r),t=Vr(e,i,s),t!==null&&(Qt(t,e,s,n),Oa(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=ct(),s=Wr(e),i=hr(n,s);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=Vr(e,i,s),t!==null&&(Qt(t,e,s,n),Oa(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=ct(),n=Wr(e),s=hr(r,n);s.tag=2,t!=null&&(s.callback=t),t=Vr(e,s,n),t!==null&&(Qt(t,e,n,r),Oa(t,e,n))}};function Oh(e,t,r,n,s,i,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,a):t.prototype&&t.prototype.isPureReactComponent?!ji(r,n)||!ji(s,i):!0}function ag(e,t,r){var n=!1,s=Qr,i=t.contextType;return typeof i=="object"&&i!==null?i=Mt(i):(s=gt(t)?En:st.current,n=t.contextTypes,i=(n=n!=null)?vs(e,s):Qr),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Vo,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function Ih(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Vo.enqueueReplaceState(t,t.state,null)}function Au(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},H0(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=Mt(i):(i=gt(t)?En:st.current,s.context=vs(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Su(e,t,i,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Vo.enqueueReplaceState(s,s.state,null),lo(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function js(e,t){try{var r="",n=t;do r+=L1(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function Vl(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Pu(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var c2=typeof WeakMap=="function"?WeakMap:Map;function og(e,t,r){r=hr(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){po||(po=!0,Uu=n),Pu(e,t)},r}function lg(e,t,r){r=hr(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){Pu(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){Pu(e,t),typeof n!="function"&&(Hr===null?Hr=new Set([this]):Hr.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),r}function Mh(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new c2;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=C2.bind(null,e,t,r),t.then(e,e))}function Uh(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function $h(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=hr(-1,1),t.tag=2,Vr(r,t,1))),r.lanes|=1),e)}var u2=br.ReactCurrentOwner,xt=!1;function lt(e,t,r,n){t.child=e===null?Om(t,null,r,n):ws(t,e.child,r,n)}function zh(e,t,r,n,s){r=r.render;var i=t.ref;return ps(t,s),n=Y0(e,t,r,n,i,s),r=Q0(),e!==null&&!xt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,yr(e,t,s)):(Ce&&r&&O0(t),t.flags|=1,lt(e,t,n,s),t.child)}function Vh(e,t,r,n,s){if(e===null){var i=r.type;return typeof i=="function"&&!ad(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,cg(e,t,i,n,s)):(e=Va(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var a=i.memoizedProps;if(r=r.compare,r=r!==null?r:ji,r(a,n)&&e.ref===t.ref)return yr(e,t,s)}return t.flags|=1,e=qr(i,n),e.ref=t.ref,e.return=t,t.child=e}function cg(e,t,r,n,s){if(e!==null){var i=e.memoizedProps;if(ji(i,n)&&e.ref===t.ref)if(xt=!1,t.pendingProps=n=i,(e.lanes&s)!==0)e.flags&131072&&(xt=!0);else return t.lanes=e.lanes,yr(e,t,s)}return Du(e,t,r,n,s)}function ug(e,t,r){var n=t.pendingProps,s=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ve(rs,kt),kt|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ve(rs,kt),kt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,ve(rs,kt),kt|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,ve(rs,kt),kt|=n;return lt(e,t,s,r),t.child}function dg(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Du(e,t,r,n,s){var i=gt(r)?En:st.current;return i=vs(t,i),ps(t,s),r=Y0(e,t,r,n,i,s),n=Q0(),e!==null&&!xt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,yr(e,t,s)):(Ce&&n&&O0(t),t.flags|=1,lt(e,t,r,s),t.child)}function Hh(e,t,r,n,s){if(gt(r)){var i=!0;no(t)}else i=!1;if(ps(t,s),t.stateNode===null)Ua(e,t),ag(t,r,n),Au(t,r,n,s),n=!0;else if(e===null){var a=t.stateNode,l=t.memoizedProps;a.props=l;var c=a.context,u=r.contextType;typeof u=="object"&&u!==null?u=Mt(u):(u=gt(r)?En:st.current,u=vs(t,u));var d=r.getDerivedStateFromProps,h=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==n||c!==u)&&Ih(t,a,n,u),Ar=!1;var f=t.memoizedState;a.state=f,lo(t,n,a,s),c=t.memoizedState,l!==n||f!==c||mt.current||Ar?(typeof d=="function"&&(Su(t,r,d,n),c=t.memoizedState),(l=Ar||Oh(t,r,l,n,f,c,u))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),a.props=n,a.state=c,a.context=u,n=l):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{a=t.stateNode,Mm(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Wt(t.type,l),a.props=u,h=t.pendingProps,f=a.context,c=r.contextType,typeof c=="object"&&c!==null?c=Mt(c):(c=gt(r)?En:st.current,c=vs(t,c));var p=r.getDerivedStateFromProps;(d=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==h||f!==c)&&Ih(t,a,n,c),Ar=!1,f=t.memoizedState,a.state=f,lo(t,n,a,s);var g=t.memoizedState;l!==h||f!==g||mt.current||Ar?(typeof p=="function"&&(Su(t,r,p,n),g=t.memoizedState),(u=Ar||Oh(t,r,u,n,f,g,c)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,g,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,g,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=g),a.props=n,a.state=g,a.context=c,n=u):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),n=!1)}return Bu(e,t,r,n,i,s)}function Bu(e,t,r,n,s,i){dg(e,t);var a=(t.flags&128)!==0;if(!n&&!a)return s&&Ah(t,r,!1),yr(e,t,i);n=t.stateNode,u2.current=t;var l=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&a?(t.child=ws(t,e.child,null,i),t.child=ws(t,null,l,i)):lt(e,t,l,i),t.memoizedState=n.state,s&&Ah(t,r,!0),t.child}function hg(e){var t=e.stateNode;t.pendingContext?Sh(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Sh(e,t.context,!1),W0(e,t.containerInfo)}function Wh(e,t,r,n,s){return ys(),M0(s),t.flags|=256,lt(e,t,r,n),t.child}var Fu={dehydrated:null,treeContext:null,retryLane:0};function Tu(e){return{baseLanes:e,cachePool:null,transitions:null}}function fg(e,t,r){var n=t.pendingProps,s=ke.current,i=!1,a=(t.flags&128)!==0,l;if((l=a)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),ve(ke,s&1),e===null)return Eu(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=n.children,e=n.fallback,i?(n=t.mode,i=t.child,a={mode:"hidden",children:a},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=qo(a,n,0,null),e=Cn(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Tu(r),t.memoizedState=Fu,e):J0(t,a));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return d2(e,t,a,n,l,s,r);if(i){i=n.fallback,a=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:n.children};return!(a&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=qr(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=qr(l,i):(i=Cn(i,a,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,a=e.child.memoizedState,a=a===null?Tu(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=e.childLanes&~r,t.memoizedState=Fu,n}return i=e.child,e=i.sibling,n=qr(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function J0(e,t){return t=qo({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ya(e,t,r,n){return n!==null&&M0(n),ws(t,e.child,null,r),e=J0(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function d2(e,t,r,n,s,i,a){if(r)return t.flags&256?(t.flags&=-257,n=Vl(Error(K(422))),ya(e,t,a,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,s=t.mode,n=qo({mode:"visible",children:n.children},s,0,null),i=Cn(i,s,a,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&ws(t,e.child,null,a),t.child.memoizedState=Tu(a),t.memoizedState=Fu,i);if(!(t.mode&1))return ya(e,t,a,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(K(419)),n=Vl(i,n,void 0),ya(e,t,a,n)}if(l=(a&e.childLanes)!==0,xt||l){if(n=Ke,n!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,vr(e,s),Qt(n,e,s,-1))}return id(),n=Vl(Error(K(421))),ya(e,t,a,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=_2.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,Et=zr(s.nextSibling),Nt=t,Ce=!0,Gt=null,e!==null&&(Rt[Lt++]=cr,Rt[Lt++]=ur,Rt[Lt++]=Nn,cr=e.id,ur=e.overflow,Nn=t),t=J0(t,n.children),t.flags|=4096,t)}function qh(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Nu(e.return,t,r)}function Hl(e,t,r,n,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function pg(e,t,r){var n=t.pendingProps,s=n.revealOrder,i=n.tail;if(lt(e,t,n.children,r),n=ke.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&qh(e,r,t);else if(e.tag===19)qh(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(ve(ke,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&co(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),Hl(t,!1,s,r,i);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&co(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}Hl(t,!0,r,null,i);break;case"together":Hl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ua(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function yr(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),An|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(K(153));if(t.child!==null){for(e=t.child,r=qr(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=qr(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function h2(e,t,r){switch(t.tag){case 3:hg(t),ys();break;case 5:Um(t);break;case 1:gt(t.type)&&no(t);break;case 4:W0(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;ve(ao,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(ve(ke,ke.current&1),t.flags|=128,null):r&t.child.childLanes?fg(e,t,r):(ve(ke,ke.current&1),e=yr(e,t,r),e!==null?e.sibling:null);ve(ke,ke.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return pg(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ve(ke,ke.current),n)break;return null;case 22:case 23:return t.lanes=0,ug(e,t,r)}return yr(e,t,r)}var xg,Ru,mg,gg;xg=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Ru=function(){};mg=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,wn(nr.current);var i=null;switch(r){case"input":s=nu(e,s),n=nu(e,n),i=[];break;case"select":s=Se({},s,{value:void 0}),n=Se({},n,{value:void 0}),i=[];break;case"textarea":s=au(e,s),n=au(e,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=to)}lu(r,n);var a;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(a in l)l.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(xi.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var c=n[u];if(l=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(r||(r={}),r[a]=c[a])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(xi.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&we("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};gg=function(e,t,r,n){r!==n&&(t.flags|=4)};function $s(e,t){if(!Ce)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function et(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function f2(e,t,r){var n=t.pendingProps;switch(I0(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return et(t),null;case 1:return gt(t.type)&&ro(),et(t),null;case 3:return n=t.stateNode,bs(),be(mt),be(st),K0(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(ga(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Gt!==null&&(Vu(Gt),Gt=null))),Ru(e,t),et(t),null;case 5:q0(t);var s=wn(Ni.current);if(r=t.type,e!==null&&t.stateNode!=null)mg(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(K(166));return et(t),null}if(e=wn(nr.current),ga(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[tr]=t,n[ki]=i,e=(t.mode&1)!==0,r){case"dialog":we("cancel",n),we("close",n);break;case"iframe":case"object":case"embed":we("load",n);break;case"video":case"audio":for(s=0;s<Ys.length;s++)we(Ys[s],n);break;case"source":we("error",n);break;case"img":case"image":case"link":we("error",n),we("load",n);break;case"details":we("toggle",n);break;case"input":th(n,i),we("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},we("invalid",n);break;case"textarea":nh(n,i),we("invalid",n)}lu(r,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&ma(n.textContent,l,e),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&ma(n.textContent,l,e),s=["children",""+l]):xi.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&we("scroll",n)}switch(r){case"input":la(n),rh(n,i,!0);break;case"textarea":la(n),sh(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=to)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Wx(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=a.createElement(r,{is:n.is}):(e=a.createElement(r),r==="select"&&(a=e,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):e=a.createElementNS(e,r),e[tr]=t,e[ki]=n,xg(e,t,!1,!1),t.stateNode=e;e:{switch(a=cu(r,n),r){case"dialog":we("cancel",e),we("close",e),s=n;break;case"iframe":case"object":case"embed":we("load",e),s=n;break;case"video":case"audio":for(s=0;s<Ys.length;s++)we(Ys[s],e);s=n;break;case"source":we("error",e),s=n;break;case"img":case"image":case"link":we("error",e),we("load",e),s=n;break;case"details":we("toggle",e),s=n;break;case"input":th(e,n),s=nu(e,n),we("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=Se({},n,{value:void 0}),we("invalid",e);break;case"textarea":nh(e,n),s=au(e,n),we("invalid",e);break;default:s=n}lu(r,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?Gx(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&qx(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&mi(e,c):typeof c=="number"&&mi(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(xi.hasOwnProperty(i)?c!=null&&i==="onScroll"&&we("scroll",e):c!=null&&C0(e,i,c,a))}switch(r){case"input":la(e),rh(e,n,!1);break;case"textarea":la(e),sh(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Yr(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?us(e,!!n.multiple,i,!1):n.defaultValue!=null&&us(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=to)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return et(t),null;case 6:if(e&&t.stateNode!=null)gg(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(K(166));if(r=wn(Ni.current),wn(nr.current),ga(t)){if(n=t.stateNode,r=t.memoizedProps,n[tr]=t,(i=n.nodeValue!==r)&&(e=Nt,e!==null))switch(e.tag){case 3:ma(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ma(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[tr]=t,t.stateNode=n}return et(t),null;case 13:if(be(ke),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ce&&Et!==null&&t.mode&1&&!(t.flags&128))Rm(),ys(),t.flags|=98560,i=!1;else if(i=ga(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(K(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(K(317));i[tr]=t}else ys(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;et(t),i=!1}else Gt!==null&&(Vu(Gt),Gt=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||ke.current&1?Me===0&&(Me=3):id())),t.updateQueue!==null&&(t.flags|=4),et(t),null);case 4:return bs(),Ru(e,t),e===null&&Ci(t.stateNode.containerInfo),et(t),null;case 10:return z0(t.type._context),et(t),null;case 17:return gt(t.type)&&ro(),et(t),null;case 19:if(be(ke),i=t.memoizedState,i===null)return et(t),null;if(n=(t.flags&128)!==0,a=i.rendering,a===null)if(n)$s(i,!1);else{if(Me!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=co(e),a!==null){for(t.flags|=128,$s(i,!1),n=a.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,e=a.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return ve(ke,ke.current&1|2),t.child}e=e.sibling}i.tail!==null&&De()>Cs&&(t.flags|=128,n=!0,$s(i,!1),t.lanes=4194304)}else{if(!n)if(e=co(a),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),$s(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Ce)return et(t),null}else 2*De()-i.renderingStartTime>Cs&&r!==1073741824&&(t.flags|=128,n=!0,$s(i,!1),t.lanes=4194304);i.isBackwards?(a.sibling=t.child,t.child=a):(r=i.last,r!==null?r.sibling=a:t.child=a,i.last=a)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=De(),t.sibling=null,r=ke.current,ve(ke,n?r&1|2:r&1),t):(et(t),null);case 22:case 23:return sd(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?kt&1073741824&&(et(t),t.subtreeFlags&6&&(t.flags|=8192)):et(t),null;case 24:return null;case 25:return null}throw Error(K(156,t.tag))}function p2(e,t){switch(I0(t),t.tag){case 1:return gt(t.type)&&ro(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return bs(),be(mt),be(st),K0(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return q0(t),null;case 13:if(be(ke),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(K(340));ys()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return be(ke),null;case 4:return bs(),null;case 10:return z0(t.type._context),null;case 22:case 23:return sd(),null;case 24:return null;default:return null}}var wa=!1,rt=!1,x2=typeof WeakSet=="function"?WeakSet:Set,Y=null;function ts(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Ae(e,t,n)}else r.current=null}function Lu(e,t,r){try{r()}catch(n){Ae(e,t,n)}}var Kh=!1;function m2(e,t){if(yu=Za,e=jm(),L0(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var a=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==r||s!==0&&h.nodeType!==3||(l=a+s),h!==i||n!==0&&h.nodeType!==3||(c=a+n),h.nodeType===3&&(a+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===e)break t;if(f===r&&++u===s&&(l=a),f===i&&++d===n&&(c=a),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(wu={focusedElem:e,selectionRange:r},Za=!1,Y=t;Y!==null;)if(t=Y,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Y=e;else for(;Y!==null;){t=Y;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var y=g.memoizedProps,w=g.memoizedState,v=t.stateNode,x=v.getSnapshotBeforeUpdate(t.elementType===t.type?y:Wt(t.type,y),w);v.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var m=t.stateNode.containerInfo;m.nodeType===1?m.textContent="":m.nodeType===9&&m.documentElement&&m.removeChild(m.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(K(163))}}catch(b){Ae(t,t.return,b)}if(e=t.sibling,e!==null){e.return=t.return,Y=e;break}Y=t.return}return g=Kh,Kh=!1,g}function si(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&Lu(t,r,i)}s=s.next}while(s!==n)}}function Ho(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Ou(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function vg(e){var t=e.alternate;t!==null&&(e.alternate=null,vg(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[tr],delete t[ki],delete t[Cu],delete t[Zw],delete t[Jw])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function yg(e){return e.tag===5||e.tag===3||e.tag===4}function Gh(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||yg(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Iu(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=to));else if(n!==4&&(e=e.child,e!==null))for(Iu(e,t,r),e=e.sibling;e!==null;)Iu(e,t,r),e=e.sibling}function Mu(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Mu(e,t,r),e=e.sibling;e!==null;)Mu(e,t,r),e=e.sibling}var Ye=null,qt=!1;function kr(e,t,r){for(r=r.child;r!==null;)wg(e,t,r),r=r.sibling}function wg(e,t,r){if(rr&&typeof rr.onCommitFiberUnmount=="function")try{rr.onCommitFiberUnmount(Lo,r)}catch{}switch(r.tag){case 5:rt||ts(r,t);case 6:var n=Ye,s=qt;Ye=null,kr(e,t,r),Ye=n,qt=s,Ye!==null&&(qt?(e=Ye,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Ye.removeChild(r.stateNode));break;case 18:Ye!==null&&(qt?(e=Ye,r=r.stateNode,e.nodeType===8?Ol(e.parentNode,r):e.nodeType===1&&Ol(e,r),wi(e)):Ol(Ye,r.stateNode));break;case 4:n=Ye,s=qt,Ye=r.stateNode.containerInfo,qt=!0,kr(e,t,r),Ye=n,qt=s;break;case 0:case 11:case 14:case 15:if(!rt&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&Lu(r,t,a),s=s.next}while(s!==n)}kr(e,t,r);break;case 1:if(!rt&&(ts(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){Ae(r,t,l)}kr(e,t,r);break;case 21:kr(e,t,r);break;case 22:r.mode&1?(rt=(n=rt)||r.memoizedState!==null,kr(e,t,r),rt=n):kr(e,t,r);break;default:kr(e,t,r)}}function Yh(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new x2),t.forEach(function(n){var s=k2.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Vt(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=e,a=t,l=a;e:for(;l!==null;){switch(l.tag){case 5:Ye=l.stateNode,qt=!1;break e;case 3:Ye=l.stateNode.containerInfo,qt=!0;break e;case 4:Ye=l.stateNode.containerInfo,qt=!0;break e}l=l.return}if(Ye===null)throw Error(K(160));wg(i,a,s),Ye=null,qt=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){Ae(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)bg(t,e),t=t.sibling}function bg(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Vt(t,e),Jt(e),n&4){try{si(3,e,e.return),Ho(3,e)}catch(y){Ae(e,e.return,y)}try{si(5,e,e.return)}catch(y){Ae(e,e.return,y)}}break;case 1:Vt(t,e),Jt(e),n&512&&r!==null&&ts(r,r.return);break;case 5:if(Vt(t,e),Jt(e),n&512&&r!==null&&ts(r,r.return),e.flags&32){var s=e.stateNode;try{mi(s,"")}catch(y){Ae(e,e.return,y)}}if(n&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,a=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Vx(s,i),cu(l,a);var u=cu(l,i);for(a=0;a<c.length;a+=2){var d=c[a],h=c[a+1];d==="style"?Gx(s,h):d==="dangerouslySetInnerHTML"?qx(s,h):d==="children"?mi(s,h):C0(s,d,h,u)}switch(l){case"input":su(s,i);break;case"textarea":Hx(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?us(s,!!i.multiple,p,!1):f!==!!i.multiple&&(i.defaultValue!=null?us(s,!!i.multiple,i.defaultValue,!0):us(s,!!i.multiple,i.multiple?[]:"",!1))}s[ki]=i}catch(y){Ae(e,e.return,y)}}break;case 6:if(Vt(t,e),Jt(e),n&4){if(e.stateNode===null)throw Error(K(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(y){Ae(e,e.return,y)}}break;case 3:if(Vt(t,e),Jt(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{wi(t.containerInfo)}catch(y){Ae(e,e.return,y)}break;case 4:Vt(t,e),Jt(e);break;case 13:Vt(t,e),Jt(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(rd=De())),n&4&&Yh(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(rt=(u=rt)||d,Vt(t,e),rt=u):Vt(t,e),Jt(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(Y=e,d=e.child;d!==null;){for(h=Y=d;Y!==null;){switch(f=Y,p=f.child,f.tag){case 0:case 11:case 14:case 15:si(4,f,f.return);break;case 1:ts(f,f.return);var g=f.stateNode;if(typeof g.componentWillUnmount=="function"){n=f,r=f.return;try{t=n,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(y){Ae(n,r,y)}}break;case 5:ts(f,f.return);break;case 22:if(f.memoizedState!==null){Xh(h);continue}}p!==null?(p.return=f,Y=p):Xh(h)}d=d.sibling}e:for(d=null,h=e;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Kx("display",a))}catch(y){Ae(e,e.return,y)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(y){Ae(e,e.return,y)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Vt(t,e),Jt(e),n&4&&Yh(e);break;case 21:break;default:Vt(t,e),Jt(e)}}function Jt(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(yg(r)){var n=r;break e}r=r.return}throw Error(K(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(mi(s,""),n.flags&=-33);var i=Gh(e);Mu(e,i,s);break;case 3:case 4:var a=n.stateNode.containerInfo,l=Gh(e);Iu(e,l,a);break;default:throw Error(K(161))}}catch(c){Ae(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function g2(e,t,r){Y=e,jg(e)}function jg(e,t,r){for(var n=(e.mode&1)!==0;Y!==null;){var s=Y,i=s.child;if(s.tag===22&&n){var a=s.memoizedState!==null||wa;if(!a){var l=s.alternate,c=l!==null&&l.memoizedState!==null||rt;l=wa;var u=rt;if(wa=a,(rt=c)&&!u)for(Y=s;Y!==null;)a=Y,c=a.child,a.tag===22&&a.memoizedState!==null?Zh(s):c!==null?(c.return=a,Y=c):Zh(s);for(;i!==null;)Y=i,jg(i),i=i.sibling;Y=s,wa=l,rt=u}Qh(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Y=i):Qh(e)}}function Qh(e){for(;Y!==null;){var t=Y;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:rt||Ho(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!rt)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:Wt(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Th(t,i,n);break;case 3:var a=t.updateQueue;if(a!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Th(t,a,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&wi(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(K(163))}rt||t.flags&512&&Ou(t)}catch(f){Ae(t,t.return,f)}}if(t===e){Y=null;break}if(r=t.sibling,r!==null){r.return=t.return,Y=r;break}Y=t.return}}function Xh(e){for(;Y!==null;){var t=Y;if(t===e){Y=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Y=r;break}Y=t.return}}function Zh(e){for(;Y!==null;){var t=Y;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Ho(4,t)}catch(c){Ae(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(c){Ae(t,s,c)}}var i=t.return;try{Ou(t)}catch(c){Ae(t,i,c)}break;case 5:var a=t.return;try{Ou(t)}catch(c){Ae(t,a,c)}}}catch(c){Ae(t,t.return,c)}if(t===e){Y=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Y=l;break}Y=t.return}}var v2=Math.ceil,fo=br.ReactCurrentDispatcher,ed=br.ReactCurrentOwner,It=br.ReactCurrentBatchConfig,fe=0,Ke=null,Re=null,Qe=0,kt=0,rs=en(0),Me=0,Di=null,An=0,Wo=0,td=0,ii=null,ft=null,rd=0,Cs=1/0,ar=null,po=!1,Uu=null,Hr=null,ba=!1,Lr=null,xo=0,ai=0,$u=null,$a=-1,za=0;function ct(){return fe&6?De():$a!==-1?$a:$a=De()}function Wr(e){return e.mode&1?fe&2&&Qe!==0?Qe&-Qe:t2.transition!==null?(za===0&&(za=am()),za):(e=pe,e!==0||(e=window.event,e=e===void 0?16:fm(e.type)),e):1}function Qt(e,t,r,n){if(50<ai)throw ai=0,$u=null,Error(K(185));Ui(e,r,n),(!(fe&2)||e!==Ke)&&(e===Ke&&(!(fe&2)&&(Wo|=r),Me===4&&Fr(e,Qe)),vt(e,n),r===1&&fe===0&&!(t.mode&1)&&(Cs=De()+500,$o&&tn()))}function vt(e,t){var r=e.callbackNode;tw(e,t);var n=Xa(e,e===Ke?Qe:0);if(n===0)r!==null&&oh(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&oh(r),t===1)e.tag===0?e2(Jh.bind(null,e)):Bm(Jh.bind(null,e)),Qw(function(){!(fe&6)&&tn()}),r=null;else{switch(om(n)){case 1:r=S0;break;case 4:r=sm;break;case 16:r=Qa;break;case 536870912:r=im;break;default:r=Qa}r=Pg(r,Cg.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Cg(e,t){if($a=-1,za=0,fe&6)throw Error(K(327));var r=e.callbackNode;if(xs()&&e.callbackNode!==r)return null;var n=Xa(e,e===Ke?Qe:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=mo(e,n);else{t=n;var s=fe;fe|=2;var i=kg();(Ke!==e||Qe!==t)&&(ar=null,Cs=De()+500,jn(e,t));do try{b2();break}catch(l){_g(e,l)}while(!0);$0(),fo.current=i,fe=s,Re!==null?t=0:(Ke=null,Qe=0,t=Me)}if(t!==0){if(t===2&&(s=pu(e),s!==0&&(n=s,t=zu(e,s))),t===1)throw r=Di,jn(e,0),Fr(e,n),vt(e,De()),r;if(t===6)Fr(e,n);else{if(s=e.current.alternate,!(n&30)&&!y2(s)&&(t=mo(e,n),t===2&&(i=pu(e),i!==0&&(n=i,t=zu(e,i))),t===1))throw r=Di,jn(e,0),Fr(e,n),vt(e,De()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(K(345));case 2:hn(e,ft,ar);break;case 3:if(Fr(e,n),(n&130023424)===n&&(t=rd+500-De(),10<t)){if(Xa(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){ct(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=ju(hn.bind(null,e,ft,ar),t);break}hn(e,ft,ar);break;case 4:if(Fr(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var a=31-Yt(n);i=1<<a,a=t[a],a>s&&(s=a),n&=~i}if(n=s,n=De()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*v2(n/1960))-n,10<n){e.timeoutHandle=ju(hn.bind(null,e,ft,ar),n);break}hn(e,ft,ar);break;case 5:hn(e,ft,ar);break;default:throw Error(K(329))}}}return vt(e,De()),e.callbackNode===r?Cg.bind(null,e):null}function zu(e,t){var r=ii;return e.current.memoizedState.isDehydrated&&(jn(e,t).flags|=256),e=mo(e,t),e!==2&&(t=ft,ft=r,t!==null&&Vu(t)),e}function Vu(e){ft===null?ft=e:ft.push.apply(ft,e)}function y2(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!Xt(i(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Fr(e,t){for(t&=~td,t&=~Wo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Yt(t),n=1<<r;e[r]=-1,t&=~n}}function Jh(e){if(fe&6)throw Error(K(327));xs();var t=Xa(e,0);if(!(t&1))return vt(e,De()),null;var r=mo(e,t);if(e.tag!==0&&r===2){var n=pu(e);n!==0&&(t=n,r=zu(e,n))}if(r===1)throw r=Di,jn(e,0),Fr(e,t),vt(e,De()),r;if(r===6)throw Error(K(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,hn(e,ft,ar),vt(e,De()),null}function nd(e,t){var r=fe;fe|=1;try{return e(t)}finally{fe=r,fe===0&&(Cs=De()+500,$o&&tn())}}function Pn(e){Lr!==null&&Lr.tag===0&&!(fe&6)&&xs();var t=fe;fe|=1;var r=It.transition,n=pe;try{if(It.transition=null,pe=1,e)return e()}finally{pe=n,It.transition=r,fe=t,!(fe&6)&&tn()}}function sd(){kt=rs.current,be(rs)}function jn(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Yw(r)),Re!==null)for(r=Re.return;r!==null;){var n=r;switch(I0(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&ro();break;case 3:bs(),be(mt),be(st),K0();break;case 5:q0(n);break;case 4:bs();break;case 13:be(ke);break;case 19:be(ke);break;case 10:z0(n.type._context);break;case 22:case 23:sd()}r=r.return}if(Ke=e,Re=e=qr(e.current,null),Qe=kt=t,Me=0,Di=null,td=Wo=An=0,ft=ii=null,yn!==null){for(t=0;t<yn.length;t++)if(r=yn[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var a=i.next;i.next=s,n.next=a}r.pending=n}yn=null}return e}function _g(e,t){do{var r=Re;try{if($0(),Ia.current=ho,uo){for(var n=Ne.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}uo=!1}if(Sn=0,qe=Ie=Ne=null,ni=!1,Si=0,ed.current=null,r===null||r.return===null){Me=1,Di=t,Re=null;break}e:{var i=e,a=r.return,l=r,c=t;if(t=Qe,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=Uh(a);if(p!==null){p.flags&=-257,$h(p,a,l,i,t),p.mode&1&&Mh(i,u,t),t=p,c=u;var g=t.updateQueue;if(g===null){var y=new Set;y.add(c),t.updateQueue=y}else g.add(c);break e}else{if(!(t&1)){Mh(i,u,t),id();break e}c=Error(K(426))}}else if(Ce&&l.mode&1){var w=Uh(a);if(w!==null){!(w.flags&65536)&&(w.flags|=256),$h(w,a,l,i,t),M0(js(c,l));break e}}i=c=js(c,l),Me!==4&&(Me=2),ii===null?ii=[i]:ii.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var v=og(i,c,t);Fh(i,v);break e;case 1:l=c;var x=i.type,m=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Hr===null||!Hr.has(m)))){i.flags|=65536,t&=-t,i.lanes|=t;var b=lg(i,l,t);Fh(i,b);break e}}i=i.return}while(i!==null)}Ng(r)}catch(j){t=j,Re===r&&r!==null&&(Re=r=r.return);continue}break}while(!0)}function kg(){var e=fo.current;return fo.current=ho,e===null?ho:e}function id(){(Me===0||Me===3||Me===2)&&(Me=4),Ke===null||!(An&268435455)&&!(Wo&268435455)||Fr(Ke,Qe)}function mo(e,t){var r=fe;fe|=2;var n=kg();(Ke!==e||Qe!==t)&&(ar=null,jn(e,t));do try{w2();break}catch(s){_g(e,s)}while(!0);if($0(),fe=r,fo.current=n,Re!==null)throw Error(K(261));return Ke=null,Qe=0,Me}function w2(){for(;Re!==null;)Eg(Re)}function b2(){for(;Re!==null&&!q1();)Eg(Re)}function Eg(e){var t=Ag(e.alternate,e,kt);e.memoizedProps=e.pendingProps,t===null?Ng(e):Re=t,ed.current=null}function Ng(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=p2(r,t),r!==null){r.flags&=32767,Re=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Me=6,Re=null;return}}else if(r=f2(r,t,kt),r!==null){Re=r;return}if(t=t.sibling,t!==null){Re=t;return}Re=t=e}while(t!==null);Me===0&&(Me=5)}function hn(e,t,r){var n=pe,s=It.transition;try{It.transition=null,pe=1,j2(e,t,r,n)}finally{It.transition=s,pe=n}return null}function j2(e,t,r,n){do xs();while(Lr!==null);if(fe&6)throw Error(K(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(K(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(rw(e,i),e===Ke&&(Re=Ke=null,Qe=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||ba||(ba=!0,Pg(Qa,function(){return xs(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=It.transition,It.transition=null;var a=pe;pe=1;var l=fe;fe|=4,ed.current=null,m2(e,r),bg(r,e),zw(wu),Za=!!yu,wu=yu=null,e.current=r,g2(r),K1(),fe=l,pe=a,It.transition=i}else e.current=r;if(ba&&(ba=!1,Lr=e,xo=s),i=e.pendingLanes,i===0&&(Hr=null),Q1(r.stateNode),vt(e,De()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(po)throw po=!1,e=Uu,Uu=null,e;return xo&1&&e.tag!==0&&xs(),i=e.pendingLanes,i&1?e===$u?ai++:(ai=0,$u=e):ai=0,tn(),null}function xs(){if(Lr!==null){var e=om(xo),t=It.transition,r=pe;try{if(It.transition=null,pe=16>e?16:e,Lr===null)var n=!1;else{if(e=Lr,Lr=null,xo=0,fe&6)throw Error(K(331));var s=fe;for(fe|=4,Y=e.current;Y!==null;){var i=Y,a=i.child;if(Y.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(Y=u;Y!==null;){var d=Y;switch(d.tag){case 0:case 11:case 15:si(8,d,i)}var h=d.child;if(h!==null)h.return=d,Y=h;else for(;Y!==null;){d=Y;var f=d.sibling,p=d.return;if(vg(d),d===u){Y=null;break}if(f!==null){f.return=p,Y=f;break}Y=p}}}var g=i.alternate;if(g!==null){var y=g.child;if(y!==null){g.child=null;do{var w=y.sibling;y.sibling=null,y=w}while(y!==null)}}Y=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,Y=a;else e:for(;Y!==null;){if(i=Y,i.flags&2048)switch(i.tag){case 0:case 11:case 15:si(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,Y=v;break e}Y=i.return}}var x=e.current;for(Y=x;Y!==null;){a=Y;var m=a.child;if(a.subtreeFlags&2064&&m!==null)m.return=a,Y=m;else e:for(a=x;Y!==null;){if(l=Y,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Ho(9,l)}}catch(j){Ae(l,l.return,j)}if(l===a){Y=null;break e}var b=l.sibling;if(b!==null){b.return=l.return,Y=b;break e}Y=l.return}}if(fe=s,tn(),rr&&typeof rr.onPostCommitFiberRoot=="function")try{rr.onPostCommitFiberRoot(Lo,e)}catch{}n=!0}return n}finally{pe=r,It.transition=t}}return!1}function ef(e,t,r){t=js(r,t),t=og(e,t,1),e=Vr(e,t,1),t=ct(),e!==null&&(Ui(e,1,t),vt(e,t))}function Ae(e,t,r){if(e.tag===3)ef(e,e,r);else for(;t!==null;){if(t.tag===3){ef(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Hr===null||!Hr.has(n))){e=js(r,e),e=lg(t,e,1),t=Vr(t,e,1),e=ct(),t!==null&&(Ui(t,1,e),vt(t,e));break}}t=t.return}}function C2(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=ct(),e.pingedLanes|=e.suspendedLanes&r,Ke===e&&(Qe&r)===r&&(Me===4||Me===3&&(Qe&130023424)===Qe&&500>De()-rd?jn(e,0):td|=r),vt(e,t)}function Sg(e,t){t===0&&(e.mode&1?(t=da,da<<=1,!(da&130023424)&&(da=4194304)):t=1);var r=ct();e=vr(e,t),e!==null&&(Ui(e,t,r),vt(e,r))}function _2(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Sg(e,r)}function k2(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(K(314))}n!==null&&n.delete(t),Sg(e,r)}var Ag;Ag=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||mt.current)xt=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return xt=!1,h2(e,t,r);xt=!!(e.flags&131072)}else xt=!1,Ce&&t.flags&1048576&&Fm(t,io,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Ua(e,t),e=t.pendingProps;var s=vs(t,st.current);ps(t,r),s=Y0(null,t,n,e,s,r);var i=Q0();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,gt(n)?(i=!0,no(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,H0(t),s.updater=Vo,t.stateNode=s,s._reactInternals=t,Au(t,n,e,r),t=Bu(null,t,n,!0,i,r)):(t.tag=0,Ce&&i&&O0(t),lt(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Ua(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=N2(n),e=Wt(n,e),s){case 0:t=Du(null,t,n,e,r);break e;case 1:t=Hh(null,t,n,e,r);break e;case 11:t=zh(null,t,n,e,r);break e;case 14:t=Vh(null,t,n,Wt(n.type,e),r);break e}throw Error(K(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Wt(n,s),Du(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Wt(n,s),Hh(e,t,n,s,r);case 3:e:{if(hg(t),e===null)throw Error(K(387));n=t.pendingProps,i=t.memoizedState,s=i.element,Mm(e,t),lo(t,n,null,r);var a=t.memoizedState;if(n=a.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=js(Error(K(423)),t),t=Wh(e,t,n,r,s);break e}else if(n!==s){s=js(Error(K(424)),t),t=Wh(e,t,n,r,s);break e}else for(Et=zr(t.stateNode.containerInfo.firstChild),Nt=t,Ce=!0,Gt=null,r=Om(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(ys(),n===s){t=yr(e,t,r);break e}lt(e,t,n,r)}t=t.child}return t;case 5:return Um(t),e===null&&Eu(t),n=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,a=s.children,bu(n,s)?a=null:i!==null&&bu(n,i)&&(t.flags|=32),dg(e,t),lt(e,t,a,r),t.child;case 6:return e===null&&Eu(t),null;case 13:return fg(e,t,r);case 4:return W0(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=ws(t,null,n,r):lt(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Wt(n,s),zh(e,t,n,s,r);case 7:return lt(e,t,t.pendingProps,r),t.child;case 8:return lt(e,t,t.pendingProps.children,r),t.child;case 12:return lt(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,i=t.memoizedProps,a=s.value,ve(ao,n._currentValue),n._currentValue=a,i!==null)if(Xt(i.value,a)){if(i.children===s.children&&!mt.current){t=yr(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=hr(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),Nu(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)a=i.type===t.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(K(341));a.lanes|=r,l=a.alternate,l!==null&&(l.lanes|=r),Nu(a,r,t),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===t){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}lt(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,ps(t,r),s=Mt(s),n=n(s),t.flags|=1,lt(e,t,n,r),t.child;case 14:return n=t.type,s=Wt(n,t.pendingProps),s=Wt(n.type,s),Vh(e,t,n,s,r);case 15:return cg(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Wt(n,s),Ua(e,t),t.tag=1,gt(n)?(e=!0,no(t)):e=!1,ps(t,r),ag(t,n,s),Au(t,n,s,r),Bu(null,t,n,!0,e,r);case 19:return pg(e,t,r);case 22:return ug(e,t,r)}throw Error(K(156,t.tag))};function Pg(e,t){return nm(e,t)}function E2(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ot(e,t,r,n){return new E2(e,t,r,n)}function ad(e){return e=e.prototype,!(!e||!e.isReactComponent)}function N2(e){if(typeof e=="function")return ad(e)?1:0;if(e!=null){if(e=e.$$typeof,e===k0)return 11;if(e===E0)return 14}return 2}function qr(e,t){var r=e.alternate;return r===null?(r=Ot(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Va(e,t,r,n,s,i){var a=2;if(n=e,typeof e=="function")ad(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case qn:return Cn(r.children,s,i,t);case _0:a=8,s|=8;break;case Jc:return e=Ot(12,r,t,s|2),e.elementType=Jc,e.lanes=i,e;case eu:return e=Ot(13,r,t,s),e.elementType=eu,e.lanes=i,e;case tu:return e=Ot(19,r,t,s),e.elementType=tu,e.lanes=i,e;case Ux:return qo(r,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Ix:a=10;break e;case Mx:a=9;break e;case k0:a=11;break e;case E0:a=14;break e;case Sr:a=16,n=null;break e}throw Error(K(130,e==null?e:typeof e,""))}return t=Ot(a,r,t,s),t.elementType=e,t.type=n,t.lanes=i,t}function Cn(e,t,r,n){return e=Ot(7,e,n,t),e.lanes=r,e}function qo(e,t,r,n){return e=Ot(22,e,n,t),e.elementType=Ux,e.lanes=r,e.stateNode={isHidden:!1},e}function Wl(e,t,r){return e=Ot(6,e,null,t),e.lanes=r,e}function ql(e,t,r){return t=Ot(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function S2(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=El(0),this.expirationTimes=El(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=El(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function od(e,t,r,n,s,i,a,l,c){return e=new S2(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Ot(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},H0(i),e}function A2(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Wn,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function Dg(e){if(!e)return Qr;e=e._reactInternals;e:{if(Bn(e)!==e||e.tag!==1)throw Error(K(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(gt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(K(171))}if(e.tag===1){var r=e.type;if(gt(r))return Dm(e,r,t)}return t}function Bg(e,t,r,n,s,i,a,l,c){return e=od(r,n,!0,e,s,i,a,l,c),e.context=Dg(null),r=e.current,n=ct(),s=Wr(r),i=hr(n,s),i.callback=t??null,Vr(r,i,s),e.current.lanes=s,Ui(e,s,n),vt(e,n),e}function Ko(e,t,r,n){var s=t.current,i=ct(),a=Wr(s);return r=Dg(r),t.context===null?t.context=r:t.pendingContext=r,t=hr(i,a),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Vr(s,t,a),e!==null&&(Qt(e,s,a,i),Oa(e,s,a)),a}function go(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function tf(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function ld(e,t){tf(e,t),(e=e.alternate)&&tf(e,t)}function P2(){return null}var Fg=typeof reportError=="function"?reportError:function(e){console.error(e)};function cd(e){this._internalRoot=e}Go.prototype.render=cd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(K(409));Ko(e,t,null,null)};Go.prototype.unmount=cd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Pn(function(){Ko(null,e,null,null)}),t[gr]=null}};function Go(e){this._internalRoot=e}Go.prototype.unstable_scheduleHydration=function(e){if(e){var t=um();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Br.length&&t!==0&&t<Br[r].priority;r++);Br.splice(r,0,e),r===0&&hm(e)}};function ud(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Yo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function rf(){}function D2(e,t,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var u=go(a);i.call(u)}}var a=Bg(t,n,e,0,null,!1,!1,"",rf);return e._reactRootContainer=a,e[gr]=a.current,Ci(e.nodeType===8?e.parentNode:e),Pn(),a}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var u=go(c);l.call(u)}}var c=od(e,0,!1,null,null,!1,!1,"",rf);return e._reactRootContainer=c,e[gr]=c.current,Ci(e.nodeType===8?e.parentNode:e),Pn(function(){Ko(t,c,r,n)}),c}function Qo(e,t,r,n,s){var i=r._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var l=s;s=function(){var c=go(a);l.call(c)}}Ko(t,a,e,s)}else a=D2(r,t,e,s,n);return go(a)}lm=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Gs(t.pendingLanes);r!==0&&(A0(t,r|1),vt(t,De()),!(fe&6)&&(Cs=De()+500,tn()))}break;case 13:Pn(function(){var n=vr(e,1);if(n!==null){var s=ct();Qt(n,e,1,s)}}),ld(e,1)}};P0=function(e){if(e.tag===13){var t=vr(e,134217728);if(t!==null){var r=ct();Qt(t,e,134217728,r)}ld(e,134217728)}};cm=function(e){if(e.tag===13){var t=Wr(e),r=vr(e,t);if(r!==null){var n=ct();Qt(r,e,t,n)}ld(e,t)}};um=function(){return pe};dm=function(e,t){var r=pe;try{return pe=e,t()}finally{pe=r}};du=function(e,t,r){switch(t){case"input":if(su(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=Uo(n);if(!s)throw Error(K(90));zx(n),su(n,s)}}}break;case"textarea":Hx(e,r);break;case"select":t=r.value,t!=null&&us(e,!!r.multiple,t,!1)}};Xx=nd;Zx=Pn;var B2={usingClientEntryPoint:!1,Events:[zi,Qn,Uo,Yx,Qx,nd]},zs={findFiberByHostInstance:vn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},F2={bundleType:zs.bundleType,version:zs.version,rendererPackageName:zs.rendererPackageName,rendererConfig:zs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:br.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=tm(e),e===null?null:e.stateNode},findFiberByHostInstance:zs.findFiberByHostInstance||P2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ja=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ja.isDisabled&&ja.supportsFiber)try{Lo=ja.inject(F2),rr=ja}catch{}}Pt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=B2;Pt.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ud(t))throw Error(K(200));return A2(e,t,null,r)};Pt.createRoot=function(e,t){if(!ud(e))throw Error(K(299));var r=!1,n="",s=Fg;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=od(e,1,!1,null,null,r,!1,n,s),e[gr]=t.current,Ci(e.nodeType===8?e.parentNode:e),new cd(t)};Pt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(K(188)):(e=Object.keys(e).join(","),Error(K(268,e)));return e=tm(t),e=e===null?null:e.stateNode,e};Pt.flushSync=function(e){return Pn(e)};Pt.hydrate=function(e,t,r){if(!Yo(t))throw Error(K(200));return Qo(null,e,t,!0,r)};Pt.hydrateRoot=function(e,t,r){if(!ud(e))throw Error(K(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",a=Fg;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),t=Bg(t,null,e,1,r??null,s,!1,i,a),e[gr]=t.current,Ci(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new Go(t)};Pt.render=function(e,t,r){if(!Yo(t))throw Error(K(200));return Qo(null,e,t,!1,r)};Pt.unmountComponentAtNode=function(e){if(!Yo(e))throw Error(K(40));return e._reactRootContainer?(Pn(function(){Qo(null,null,e,!1,function(){e._reactRootContainer=null,e[gr]=null})}),!0):!1};Pt.unstable_batchedUpdates=nd;Pt.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Yo(r))throw Error(K(200));if(e==null||e._reactInternals===void 0)throw Error(K(38));return Qo(e,t,r,!1,n)};Pt.version="18.3.1-next-f1338f8080-20240426";function Tg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Tg)}catch(e){console.error(e)}}Tg(),Tx.exports=Pt;var T2=Tx.exports,Rg,nf=T2;Rg=nf.createRoot,nf.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bi(){return Bi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Bi.apply(this,arguments)}var Or;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Or||(Or={}));const sf="popstate";function R2(e){e===void 0&&(e={});function t(n,s){let{pathname:i,search:a,hash:l}=n.location;return Hu("",{pathname:i,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:Og(s)}return O2(t,r,null,e)}function Le(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Lg(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function L2(){return Math.random().toString(36).substr(2,8)}function af(e,t){return{usr:e.state,key:e.key,idx:t}}function Hu(e,t,r,n){return r===void 0&&(r=null),Bi({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Ps(t):t,{state:r,key:t&&t.key||n||L2()})}function Og(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Ps(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function O2(e,t,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:i=!1}=n,a=s.history,l=Or.Pop,c=null,u=d();u==null&&(u=0,a.replaceState(Bi({},a.state,{idx:u}),""));function d(){return(a.state||{idx:null}).idx}function h(){l=Or.Pop;let w=d(),v=w==null?null:w-u;u=w,c&&c({action:l,location:y.location,delta:v})}function f(w,v){l=Or.Push;let x=Hu(y.location,w,v);u=d()+1;let m=af(x,u),b=y.createHref(x);try{a.pushState(m,"",b)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;s.location.assign(b)}i&&c&&c({action:l,location:y.location,delta:1})}function p(w,v){l=Or.Replace;let x=Hu(y.location,w,v);u=d();let m=af(x,u),b=y.createHref(x);a.replaceState(m,"",b),i&&c&&c({action:l,location:y.location,delta:0})}function g(w){let v=s.location.origin!=="null"?s.location.origin:s.location.href,x=typeof w=="string"?w:Og(w);return x=x.replace(/ $/,"%20"),Le(v,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,v)}let y={get action(){return l},get location(){return e(s,a)},listen(w){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(sf,h),c=w,()=>{s.removeEventListener(sf,h),c=null}},createHref(w){return t(s,w)},createURL:g,encodeLocation(w){let v=g(w);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:f,replace:p,go(w){return a.go(w)}};return y}var of;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(of||(of={}));function I2(e,t,r){return r===void 0&&(r="/"),M2(e,t,r,!1)}function M2(e,t,r,n){let s=typeof t=="string"?Ps(t):t,i=Ug(s.pathname||"/",r);if(i==null)return null;let a=Ig(e);U2(a);let l=null;for(let c=0;l==null&&c<a.length;++c){let u=X2(i);l=Y2(a[c],u,n)}return l}function Ig(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(i,a,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};c.relativePath.startsWith("/")&&(Le(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=_n([n,c.relativePath]),d=r.concat(c);i.children&&i.children.length>0&&(Le(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Ig(i.children,t,d,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:K2(u,i.index),routesMeta:d})};return e.forEach((i,a)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,a);else for(let c of Mg(i.path))s(i,a,c)}),t}function Mg(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let a=Mg(n.join("/")),l=[];return l.push(...a.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...a),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function U2(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:G2(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const $2=/^:[\w-]+$/,z2=3,V2=2,H2=1,W2=10,q2=-2,lf=e=>e==="*";function K2(e,t){let r=e.split("/"),n=r.length;return r.some(lf)&&(n+=q2),t&&(n+=V2),r.filter(s=>!lf(s)).reduce((s,i)=>s+($2.test(i)?z2:i===""?H2:W2),n)}function G2(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function Y2(e,t,r){let{routesMeta:n}=e,s={},i="/",a=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,d=i==="/"?t:t.slice(i.length)||"/",h=cf({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),f=c.route;if(!h&&u&&r&&!n[n.length-1].route.index&&(h=cf({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!h)return null;Object.assign(s,h.params),a.push({params:s,pathname:_n([i,h.pathname]),pathnameBase:tb(_n([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=_n([i,h.pathnameBase]))}return a}function cf(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=Q2(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((u,d,h)=>{let{paramName:f,isOptional:p}=d;if(f==="*"){let y=l[h]||"";a=i.slice(0,i.length-y.length).replace(/(.)\/+$/,"$1")}const g=l[h];return p&&!g?u[f]=void 0:u[f]=(g||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:a,pattern:e}}function Q2(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),Lg(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function X2(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Lg(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Ug(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function Z2(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?Ps(e):e;return{pathname:r?r.startsWith("/")?r:J2(r,t):t,search:rb(n),hash:nb(s)}}function J2(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function Kl(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function eb(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function $g(e,t){let r=eb(e);return t?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function zg(e,t,r,n){n===void 0&&(n=!1);let s;typeof e=="string"?s=Ps(e):(s=Bi({},e),Le(!s.pathname||!s.pathname.includes("?"),Kl("?","pathname","search",s)),Le(!s.pathname||!s.pathname.includes("#"),Kl("#","pathname","hash",s)),Le(!s.search||!s.search.includes("#"),Kl("#","search","hash",s)));let i=e===""||s.pathname==="",a=i?"/":s.pathname,l;if(a==null)l=r;else{let h=t.length-1;if(!n&&a.startsWith("..")){let f=a.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}l=h>=0?t[h]:"/"}let c=Z2(s,l),u=a&&a!=="/"&&a.endsWith("/"),d=(i||a===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const _n=e=>e.join("/").replace(/\/\/+/g,"/"),tb=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),rb=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,nb=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function sb(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Vg=["post","put","patch","delete"];new Set(Vg);const ib=["get",...Vg];new Set(ib);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fi(){return Fi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fi.apply(this,arguments)}const dd=N.createContext(null),ab=N.createContext(null),Hi=N.createContext(null),Xo=N.createContext(null),Fn=N.createContext({outlet:null,matches:[],isDataRoute:!1}),Hg=N.createContext(null);function Wi(){return N.useContext(Xo)!=null}function Ds(){return Wi()||Le(!1),N.useContext(Xo).location}function Wg(e){N.useContext(Hi).static||N.useLayoutEffect(e)}function Zo(){let{isDataRoute:e}=N.useContext(Fn);return e?yb():ob()}function ob(){Wi()||Le(!1);let e=N.useContext(dd),{basename:t,future:r,navigator:n}=N.useContext(Hi),{matches:s}=N.useContext(Fn),{pathname:i}=Ds(),a=JSON.stringify($g(s,r.v7_relativeSplatPath)),l=N.useRef(!1);return Wg(()=>{l.current=!0}),N.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){n.go(u);return}let h=zg(u,JSON.parse(a),i,d.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:_n([t,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[t,n,a,i,e])}function lb(e,t){return cb(e,t)}function cb(e,t,r,n){Wi()||Le(!1);let{navigator:s}=N.useContext(Hi),{matches:i}=N.useContext(Fn),a=i[i.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let u=Ds(),d;if(t){var h;let w=typeof t=="string"?Ps(t):t;c==="/"||(h=w.pathname)!=null&&h.startsWith(c)||Le(!1),d=w}else d=u;let f=d.pathname||"/",p=f;if(c!=="/"){let w=c.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(w.length).join("/")}let g=I2(e,{pathname:p}),y=pb(g&&g.map(w=>Object.assign({},w,{params:Object.assign({},l,w.params),pathname:_n([c,s.encodeLocation?s.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:_n([c,s.encodeLocation?s.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,r,n);return t&&y?N.createElement(Xo.Provider,{value:{location:Fi({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Or.Pop}},y):y}function ub(){let e=vb(),t=sb(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},t),r?N.createElement("pre",{style:s},r):null,null)}const db=N.createElement(ub,null);class hb extends N.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?N.createElement(Fn.Provider,{value:this.props.routeContext},N.createElement(Hg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function fb(e){let{routeContext:t,match:r,children:n}=e,s=N.useContext(dd);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),N.createElement(Fn.Provider,{value:t},n)}function pb(e,t,r,n){var s;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let a=e,l=(s=r)==null?void 0:s.errors;if(l!=null){let d=a.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);d>=0||Le(!1),a=a.slice(0,Math.min(a.length,d+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<a.length;d++){let h=a[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:f,errors:p}=r,g=h.route.loader&&f[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||g){c=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((d,h,f)=>{let p,g=!1,y=null,w=null;r&&(p=l&&h.route.id?l[h.route.id]:void 0,y=h.route.errorElement||db,c&&(u<0&&f===0?(g=!0,w=null):u===f&&(g=!0,w=h.route.hydrateFallbackElement||null)));let v=t.concat(a.slice(0,f+1)),x=()=>{let m;return p?m=y:g?m=w:h.route.Component?m=N.createElement(h.route.Component,null):h.route.element?m=h.route.element:m=d,N.createElement(fb,{match:h,routeContext:{outlet:d,matches:v,isDataRoute:r!=null},children:m})};return r&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?N.createElement(hb,{location:r.location,revalidation:r.revalidation,component:y,error:p,children:x(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):x()},null)}var qg=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(qg||{}),vo=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(vo||{});function xb(e){let t=N.useContext(dd);return t||Le(!1),t}function mb(e){let t=N.useContext(ab);return t||Le(!1),t}function gb(e){let t=N.useContext(Fn);return t||Le(!1),t}function Kg(e){let t=gb(),r=t.matches[t.matches.length-1];return r.route.id||Le(!1),r.route.id}function vb(){var e;let t=N.useContext(Hg),r=mb(vo.UseRouteError),n=Kg(vo.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function yb(){let{router:e}=xb(qg.UseNavigateStable),t=Kg(vo.UseNavigateStable),r=N.useRef(!1);return Wg(()=>{r.current=!0}),N.useCallback(function(s,i){i===void 0&&(i={}),r.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,Fi({fromRouteId:t},i)))},[e,t])}function wb(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Gl(e){let{to:t,replace:r,state:n,relative:s}=e;Wi()||Le(!1);let{future:i,static:a}=N.useContext(Hi),{matches:l}=N.useContext(Fn),{pathname:c}=Ds(),u=Zo(),d=zg(t,$g(l,i.v7_relativeSplatPath),c,s==="path"),h=JSON.stringify(d);return N.useEffect(()=>u(JSON.parse(h),{replace:r,state:n,relative:s}),[u,h,s,r,n]),null}function _t(e){Le(!1)}function bb(e){let{basename:t="/",children:r=null,location:n,navigationType:s=Or.Pop,navigator:i,static:a=!1,future:l}=e;Wi()&&Le(!1);let c=t.replace(/^\/*/,"/"),u=N.useMemo(()=>({basename:c,navigator:i,static:a,future:Fi({v7_relativeSplatPath:!1},l)}),[c,l,i,a]);typeof n=="string"&&(n=Ps(n));let{pathname:d="/",search:h="",hash:f="",state:p=null,key:g="default"}=n,y=N.useMemo(()=>{let w=Ug(d,c);return w==null?null:{location:{pathname:w,search:h,hash:f,state:p,key:g},navigationType:s}},[c,d,h,f,p,g,s]);return y==null?null:N.createElement(Hi.Provider,{value:u},N.createElement(Xo.Provider,{children:r,value:y}))}function uf(e){let{children:t,location:r}=e;return lb(Wu(t),r)}new Promise(()=>{});function Wu(e,t){t===void 0&&(t=[]);let r=[];return N.Children.forEach(e,(n,s)=>{if(!N.isValidElement(n))return;let i=[...t,s];if(n.type===N.Fragment){r.push.apply(r,Wu(n.props.children,i));return}n.type!==_t&&Le(!1),!n.props.index||!n.props.children||Le(!1);let a={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=Wu(n.props.children,i)),r.push(a)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const jb="6";try{window.__reactRouterVersion=jb}catch{}const Cb="startTransition",df=C1[Cb];function _b(e){let{basename:t,children:r,future:n,window:s}=e,i=N.useRef();i.current==null&&(i.current=R2({window:s,v5Compat:!0}));let a=i.current,[l,c]=N.useState({action:a.action,location:a.location}),{v7_startTransition:u}=n||{},d=N.useCallback(h=>{u&&df?df(()=>c(h)):c(h)},[c,u]);return N.useLayoutEffect(()=>a.listen(d),[a,d]),N.useEffect(()=>wb(n),[n]),N.createElement(bb,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:a,future:n})}var hf;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(hf||(hf={}));var ff;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(ff||(ff={}));const kb="modulepreload",Eb=function(e){return"/"+e},pf={},qi=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(r.map(c=>{if(c=Eb(c),c in pf)return;pf[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":kb,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((f,p)=>{h.addEventListener("load",f),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return s.then(a=>{for(const l of a||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})},Nb=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>qi(async()=>{const{default:n}=await Promise.resolve().then(()=>Bs);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class hd extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class Sb extends hd{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Ab extends hd{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Pb extends hd{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var qu;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(qu||(qu={}));var Db=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function l(d){try{u(n.next(d))}catch(h){a(h)}}function c(d){try{u(n.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class Bb{constructor(t,{headers:r={},customFetch:n,region:s=qu.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=Nb(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var n;return Db(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:a}=r;let l={},{region:c}=r;c||(c=this.region),c&&c!=="any"&&(l["x-region"]=c);let u;a&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",u=a):typeof a=="string"?(l["Content-Type"]="text/plain",u=a):typeof FormData<"u"&&a instanceof FormData?u=a:(l["Content-Type"]="application/json",u=JSON.stringify(a)));const d=yield this.fetch(`${this.url}/${t}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:u}).catch(g=>{throw new Sb(g)}),h=d.headers.get("x-relay-error");if(h&&h==="true")throw new Ab(d);if(!d.ok)throw new Pb(d);let f=((n=d.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),p;return f==="application/json"?p=yield d.json():f==="application/octet-stream"?p=yield d.blob():f==="text/event-stream"?p=d:f==="multipart/form-data"?p=yield d.formData():p=yield d.text(),{data:p,error:null}}catch(s){return{data:null,error:s}}})}}var pt={},fd={},Jo={},Ki={},el={},tl={},Fb=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},_s=Fb();const Tb=_s.fetch,Gg=_s.fetch.bind(_s),Yg=_s.Headers,Rb=_s.Request,Lb=_s.Response,Bs=Object.freeze(Object.defineProperty({__proto__:null,Headers:Yg,Request:Rb,Response:Lb,default:Gg,fetch:Tb},Symbol.toStringTag,{value:"Module"})),Ob=jx(Bs);var rl={};Object.defineProperty(rl,"__esModule",{value:!0});let Ib=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};rl.default=Ib;var Qg=re&&re.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(tl,"__esModule",{value:!0});const Mb=Qg(Ob),Ub=Qg(rl);let $b=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=Mb.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=Object.assign({},this.headers),this.headers[t]=r,this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var a,l,c;let u=null,d=null,h=null,f=i.status,p=i.statusText;if(i.ok){if(this.method!=="HEAD"){const v=await i.text();v===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=v:d=JSON.parse(v))}const y=(a=this.headers.Prefer)===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),w=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");y&&w&&w.length>1&&(h=parseInt(w[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,h=null,f=406,p="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const y=await i.text();try{u=JSON.parse(y),Array.isArray(u)&&i.status===404&&(d=[],u=null,f=200,p="OK")}catch{i.status===404&&y===""?(f=204,p="No Content"):u={message:y}}if(u&&this.isMaybeSingle&&(!((c=u==null?void 0:u.details)===null||c===void 0)&&c.includes("0 rows"))&&(u=null,f=200,p="OK"),u&&this.shouldThrowOnError)throw new Ub.default(u)}return{error:u,data:d,count:h,status:f,statusText:p}});return this.shouldThrowOnError||(s=s.catch(i=>{var a,l,c;return{error:{message:`${(a=i==null?void 0:i.name)!==null&&a!==void 0?a:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,r)}returns(){return this}overrideTypes(){return this}};tl.default=$b;var zb=re&&re.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(el,"__esModule",{value:!0});const Vb=zb(tl);let Hb=class extends Vb.default{select(t){let r=!1;const n=(t??"*").split("").map(s=>/\s/.test(s)&&!r?"":(s==='"'&&(r=!r),s)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:r=!0,nullsFirst:n,foreignTable:s,referencedTable:i=s}={}){const a=i?`${i}.order`:"order",l=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${l?`${l},`:""}${t}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,r,{foreignTable:n,referencedTable:s=n}={}){const i=typeof s>"u"?"offset":`${s}.offset`,a=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(a,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:r=!1,settings:n=!1,buffers:s=!1,wal:i=!1,format:a="text"}={}){var l;const c=[t?"analyze":null,r?"verbose":null,n?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${a}; for="${u}"; options=${c};`,a==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};el.default=Hb;var Wb=re&&re.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ki,"__esModule",{value:!0});const qb=Wb(el);let Kb=class extends qb.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const n=Array.from(new Set(r)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:n,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const a=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${i}fts${a}.${r}`),this}match(t){return Object.entries(t).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(t,r,n){return this.url.searchParams.append(t,`not.${r}.${n}`),this}or(t,{foreignTable:r,referencedTable:n=r}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,r,n){return this.url.searchParams.append(t,`${r}.${n}`),this}};Ki.default=Kb;var Gb=re&&re.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Jo,"__esModule",{value:!0});const Vs=Gb(Ki);let Yb=class{constructor(t,{headers:r={},schema:n,fetch:s}){this.url=t,this.headers=r,this.schema=n,this.fetch=s}select(t,{head:r=!1,count:n}={}){const s=r?"HEAD":"GET";let i=!1;const a=(t??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",a),n&&(this.headers.Prefer=`count=${n}`),new Vs.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:r,defaultToNull:n=!0}={}){const s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),r&&i.push(`count=${r}`),n||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(t)){const a=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(a.length>0){const l=[...new Set(a)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Vs.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:r,ignoreDuplicates:n=!1,count:s,defaultToNull:i=!0}={}){const a="POST",l=[`resolution=${n?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&l.push(this.headers.Prefer),s&&l.push(`count=${s}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(t)){const c=t.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new Vs.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:r}={}){const n="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),r&&s.push(`count=${r}`),this.headers.Prefer=s.join(","),new Vs.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const r="DELETE",n=[];return t&&n.push(`count=${t}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new Vs.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Jo.default=Yb;var nl={},sl={};Object.defineProperty(sl,"__esModule",{value:!0});sl.version=void 0;sl.version="0.0.0-automated";Object.defineProperty(nl,"__esModule",{value:!0});nl.DEFAULT_HEADERS=void 0;const Qb=sl;nl.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Qb.version}`};var Xg=re&&re.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(fd,"__esModule",{value:!0});const Xb=Xg(Jo),Zb=Xg(Ki),Jb=nl;let e4=class Zg{constructor(t,{headers:r={},schema:n,fetch:s}={}){this.url=t,this.headers=Object.assign(Object.assign({},Jb.DEFAULT_HEADERS),r),this.schemaName=n,this.fetch=s}from(t){const r=new URL(`${this.url}/${t}`);return new Xb.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new Zg(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:s=!1,count:i}={}){let a;const l=new URL(`${this.url}/rpc/${t}`);let c;n||s?(a=n?"HEAD":"GET",Object.entries(r).filter(([d,h])=>h!==void 0).map(([d,h])=>[d,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([d,h])=>{l.searchParams.append(d,h)})):(a="POST",c=r);const u=Object.assign({},this.headers);return i&&(u.Prefer=`count=${i}`),new Zb.default({method:a,url:l,headers:u,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};fd.default=e4;var Fs=re&&re.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(pt,"__esModule",{value:!0});pt.PostgrestError=pt.PostgrestBuilder=pt.PostgrestTransformBuilder=pt.PostgrestFilterBuilder=pt.PostgrestQueryBuilder=pt.PostgrestClient=void 0;const Jg=Fs(fd);pt.PostgrestClient=Jg.default;const ev=Fs(Jo);pt.PostgrestQueryBuilder=ev.default;const tv=Fs(Ki);pt.PostgrestFilterBuilder=tv.default;const rv=Fs(el);pt.PostgrestTransformBuilder=rv.default;const nv=Fs(tl);pt.PostgrestBuilder=nv.default;const sv=Fs(rl);pt.PostgrestError=sv.default;var t4=pt.default={PostgrestClient:Jg.default,PostgrestQueryBuilder:ev.default,PostgrestFilterBuilder:tv.default,PostgrestTransformBuilder:rv.default,PostgrestBuilder:nv.default,PostgrestError:sv.default};const{PostgrestClient:r4,PostgrestQueryBuilder:T5,PostgrestFilterBuilder:R5,PostgrestTransformBuilder:L5,PostgrestBuilder:O5,PostgrestError:I5}=t4;let Ku;typeof window>"u"?Ku=require("ws"):Ku=window.WebSocket;const n4=Ku,s4="2.11.10",i4={"X-Client-Info":`realtime-js/${s4}`},a4="1.0.0",iv=1e4,o4=1e3;var ms;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(ms||(ms={}));var at;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(at||(at={}));var Kt;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Kt||(Kt={}));var Gu;(function(e){e.websocket="websocket"})(Gu||(Gu={}));var gn;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(gn||(gn={}));class l4{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const s=r.getUint8(1),i=r.getUint8(2);let a=this.HEADER_LENGTH+2;const l=n.decode(t.slice(a,a+s));a=a+s;const c=n.decode(t.slice(a,a+i));a=a+i;const u=JSON.parse(n.decode(t.slice(a,t.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class av{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ge;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(ge||(ge={}));const xf=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((i,a)=>(i[a]=c4(a,e,t,s),i),{})},c4=(e,t,r,n)=>{const s=t.find(l=>l.name===e),i=s==null?void 0:s.type,a=r[e];return i&&!n.includes(i)?ov(i,a):Yu(a)},ov=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return f4(t,r)}switch(e){case ge.bool:return u4(t);case ge.float4:case ge.float8:case ge.int2:case ge.int4:case ge.int8:case ge.numeric:case ge.oid:return d4(t);case ge.json:case ge.jsonb:return h4(t);case ge.timestamp:return p4(t);case ge.abstime:case ge.date:case ge.daterange:case ge.int4range:case ge.int8range:case ge.money:case ge.reltime:case ge.text:case ge.time:case ge.timestamptz:case ge.timetz:case ge.tsrange:case ge.tstzrange:return Yu(t);default:return Yu(t)}},Yu=e=>e,u4=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},d4=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},h4=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},f4=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const a=e.slice(1,r);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(l=>ov(t,l))}return e},p4=e=>typeof e=="string"?e.replace(" ","T"):e,lv=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class Yl{constructor(t,r,n={},s=iv){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var mf;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(mf||(mf={}));class oi{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=oi.syncState(this.state,s,i,a),this.pendingDiffs.forEach(c=>{this.state=oi.syncDiff(this.state,c,i,a)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=oi.syncDiff(this.state,s,i,a),l())}),this.onJoin((s,i,a)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:a})}),this.onLeave((s,i,a)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const i=this.cloneDeep(t),a=this.transformState(r),l={},c={};return this.map(i,(u,d)=>{a[u]||(c[u]=d)}),this.map(a,(u,d)=>{const h=i[u];if(h){const f=d.map(w=>w.presence_ref),p=h.map(w=>w.presence_ref),g=d.filter(w=>p.indexOf(w.presence_ref)<0),y=h.filter(w=>f.indexOf(w.presence_ref)<0);g.length>0&&(l[u]=g),y.length>0&&(c[u]=y)}else l[u]=d}),this.syncDiff(i,{joins:l,leaves:c},n,s)}static syncDiff(t,r,n,s){const{joins:i,leaves:a}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(l,c)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),d.length>0){const h=t[l].map(p=>p.presence_ref),f=d.filter(p=>h.indexOf(p.presence_ref)<0);t[l].unshift(...f)}n(l,d,c)}),this.map(a,(l,c)=>{let u=t[l];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),t[l]=u,s(l,u,c),u.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var gf;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(gf||(gf={}));var vf;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(vf||(vf={}));var or;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(or||(or={}));class pd{constructor(t,r={config:{}},n){this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=at.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Yl(this,Kt.join,this.params,this.timeout),this.rejoinTimer=new av(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=at.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=at.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=at.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=at.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Kt.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new oi(this),this.broadcastEndpointURL=lv(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var n,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:a,private:l}}=this.params;this._onError(d=>t==null?void 0:t(or.CHANNEL_ERROR,d)),this._onClose(()=>t==null?void 0:t(or.CLOSED));const c={},u={broadcast:i,presence:a,postgres_changes:(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(d=>d.filter))!==null&&s!==void 0?s:[],private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},c)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:d})=>{var h;if(this.socket.setAuth(),d===void 0){t==null||t(or.SUBSCRIBED);return}else{const f=this.bindings.postgres_changes,p=(h=f==null?void 0:f.length)!==null&&h!==void 0?h:0,g=[];for(let y=0;y<p;y++){const w=f[y],{filter:{event:v,schema:x,table:m,filter:b}}=w,j=d&&d[y];if(j&&j.event===v&&j.schema===x&&j.table===m&&j.filter===b)g.push(Object.assign(Object.assign({},w),{id:j.id}));else{this.unsubscribe(),this.state=at.errored,t==null||t(or.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,t&&t(or.SUBSCRIBED);return}}).receive("error",d=>{this.state=at.errored,t==null||t(or.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(or.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this._on(t,r,n)}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:a}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,l,c;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=at.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Kt.close,"leave",this._joinRef())};return this.joinPush.destroy(),new Promise(n=>{const s=new Yl(this,Kt.leave,{},t);s.receive("ok",()=>{r(),n("ok")}).receive("timeout",()=>{r(),n("timed out")}).receive("error",()=>{n("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(t,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),a=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),a}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Yl(this,t,r,n);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,i;const a=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=Kt;if(n&&[l,c,u,d].indexOf(a)>=0&&n!==this._joinRef())return;let f=this._onMessage(a,r,n);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(p=>{var g,y,w;return((g=p.filter)===null||g===void 0?void 0:g.event)==="*"||((w=(y=p.filter)===null||y===void 0?void 0:y.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===a}).map(p=>p.callback(f,n)):(i=this.bindings[a])===null||i===void 0||i.filter(p=>{var g,y,w,v,x,m;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in p){const b=p.id,j=(g=p.filter)===null||g===void 0?void 0:g.event;return b&&((y=r.ids)===null||y===void 0?void 0:y.includes(b))&&(j==="*"||(j==null?void 0:j.toLocaleLowerCase())===((w=r.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const b=(x=(v=p==null?void 0:p.filter)===null||v===void 0?void 0:v.event)===null||x===void 0?void 0:x.toLocaleLowerCase();return b==="*"||b===((m=r==null?void 0:r.event)===null||m===void 0?void 0:m.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===a}).map(p=>{if(typeof f=="object"&&"ids"in f){const g=f.data,{schema:y,table:w,commit_timestamp:v,type:x,errors:m}=g;f=Object.assign(Object.assign({},{schema:y,table:w,commit_timestamp:v,eventType:x,new:{},old:{},errors:m}),this._getPayloadRecords(g))}p.callback(f,n)})}_isClosed(){return this.state===at.closed}_isJoined(){return this.state===at.joined}_isJoining(){return this.state===at.joining}_isLeaving(){return this.state===at.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&pd.isEqual(s.filter,r))}),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Kt.close,{},t)}_onError(t){this._on(Kt.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=at.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=xf(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=xf(t.columns,t.old_record)),r}}const yf=()=>{},x4=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class m4{constructor(t,r){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers=i4,this.params={},this.timeout=iv,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=yf,this.ref=0,this.logger=yf,this.conn=null,this.sendBuffer=[],this.serializer=new l4,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let a;return i?a=i:typeof fetch>"u"?a=(...l)=>qi(async()=>{const{default:c}=await Promise.resolve().then(()=>Bs);return{default:c}},void 0).then(({default:c})=>c(...l)):a=fetch,(...l)=>a(...l)},this.endPoint=`${t}/${Gu.websocket}`,this.httpEndpoint=lv(t),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.headers&&(this.headers=Object.assign(Object.assign({},this.headers),r.headers)),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),(r!=null&&r.logLevel||r!=null&&r.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const s=(n=r==null?void 0:r.params)===null||n===void 0?void 0:n.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(i,a)=>a(JSON.stringify(i)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new av(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=n4),this.transport){typeof window<"u"&&this.transport===window.WebSocket?this.conn=new this.transport(this.endpointURL()):this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection();return}this.conn=new g4(this.endpointURL(),void 0,{close:()=>{this.conn=null}})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:a4}))}disconnect(t,r){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(n=>n.teardown()))}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels=this.channels.filter(n=>n._joinRef!==t._joinRef),this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case ms.connecting:return gn.Connecting;case ms.open:return gn.Open;case ms.closing:return gn.Closing;default:return gn.Closed}}isConnected(){return this.connectionState()===gn.Open}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new pd(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:s,ref:i}=t,a=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(t=null){let r=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{r&&n.updateJoinPayload({access_token:r,version:this.headers&&this.headers["X-Client-Info"]}),n.joinedOnce&&n._isJoined()&&n._push(Kt.access_token,{access_token:r})}))}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(t=this.conn)===null||t===void 0||t.close(o4,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,r=>{let{topic:n,event:s,payload:i,ref:a}=r;n==="phoenix"&&s==="phx_reply"&&this.heartbeatCallback(r.payload.status=="ok"?"ok":"error"),a&&a===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${n} ${s} ${a&&"("+a+")"||""}`,i),Array.from(this.channels).filter(l=>l._isMember(n)).forEach(l=>l._trigger(s,i,a)),this.stateChangeCallbacks.message.forEach(l=>l(r))})}_onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(t=>t())}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(t))}_onConnError(t){this.log("transport",t.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(Kt.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([x4],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}}class g4{constructor(t,r,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=ms.connecting,this.send=()=>{},this.url=null,this.url=t,this.close=n.close}}class xd extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function We(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class v4 extends xd{constructor(t,r){super(t),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Qu extends xd{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var y4=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function l(d){try{u(n.next(d))}catch(h){a(h)}}function c(d){try{u(n.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const cv=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>qi(async()=>{const{default:n}=await Promise.resolve().then(()=>Bs);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},w4=()=>y4(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield qi(()=>Promise.resolve().then(()=>Bs),void 0)).Response:Response}),Xu=e=>{if(Array.isArray(e))return e.map(r=>Xu(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=Xu(n)}),t};var Tn=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function l(d){try{u(n.next(d))}catch(h){a(h)}}function c(d){try{u(n.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const Ql=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),b4=(e,t,r)=>Tn(void 0,void 0,void 0,function*(){const n=yield w4();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(s=>{t(new v4(Ql(s),e.status||500))}).catch(s=>{t(new Qu(Ql(s),s))}):t(new Qu(Ql(e),e))}),j4=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),n&&(s.body=JSON.stringify(n)),Object.assign(Object.assign({},s),r))};function Gi(e,t,r,n,s,i){return Tn(this,void 0,void 0,function*(){return new Promise((a,l)=>{e(r,j4(t,n,s,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>a(c)).catch(c=>b4(c,l,n))})})}function yo(e,t,r,n){return Tn(this,void 0,void 0,function*(){return Gi(e,"GET",t,r,n)})}function Pr(e,t,r,n,s){return Tn(this,void 0,void 0,function*(){return Gi(e,"POST",t,n,s,r)})}function C4(e,t,r,n,s){return Tn(this,void 0,void 0,function*(){return Gi(e,"PUT",t,n,s,r)})}function _4(e,t,r,n){return Tn(this,void 0,void 0,function*(){return Gi(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function uv(e,t,r,n,s){return Tn(this,void 0,void 0,function*(){return Gi(e,"DELETE",t,n,s,r)})}var ht=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function l(d){try{u(n.next(d))}catch(h){a(h)}}function c(d){try{u(n.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const k4={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},wf={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class E4{constructor(t,r={},n,s){this.url=t,this.headers=r,this.bucketId=n,this.fetch=cv(s)}uploadOrUpdate(t,r,n,s){return ht(this,void 0,void 0,function*(){try{let i;const a=Object.assign(Object.assign({},wf),s);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(a.upsert)});const c=a.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",a.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=n,l["cache-control"]=`max-age=${a.cacheControl}`,l["content-type"]=a.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),h=yield this.fetch(`${this.url}/object/${d}`,Object.assign({method:t,body:i,headers:l},a!=null&&a.duplex?{duplex:a.duplex}:{})),f=yield h.json();return h.ok?{data:{path:u,id:f.Id,fullPath:f.Key},error:null}:{data:null,error:f}}catch(i){if(We(i))return{data:null,error:i};throw i}})}upload(t,r,n){return ht(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,s){return ht(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),a=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${a}`);l.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:wf.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield this.fetch(l.toString(),{method:"PUT",body:c,headers:d}),f=yield h.json();return h.ok?{data:{path:i,fullPath:f.Key},error:null}:{data:null,error:f}}catch(c){if(We(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return ht(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const i=yield Pr(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),a=new URL(this.url+i.url),l=a.searchParams.get("token");if(!l)throw new xd("No token returned by API");return{data:{signedUrl:a.toString(),path:t,token:l},error:null}}catch(n){if(We(n))return{data:null,error:n};throw n}})}update(t,r,n){return ht(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return ht(this,void 0,void 0,function*(){try{return{data:yield Pr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(We(s))return{data:null,error:s};throw s}})}copy(t,r,n){return ht(this,void 0,void 0,function*(){try{return{data:{path:(yield Pr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(We(s))return{data:null,error:s};throw s}})}createSignedUrl(t,r,n){return ht(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield Pr(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(s){if(We(s))return{data:null,error:s};throw s}})}createSignedUrls(t,r,n){return ht(this,void 0,void 0,function*(){try{const s=yield Pr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${i}`):null})),error:null}}catch(s){if(We(s))return{data:null,error:s};throw s}})}download(t,r){return ht(this,void 0,void 0,function*(){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),a=i?`?${i}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield yo(this.fetch,`${this.url}/${s}/${l}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(We(l))return{data:null,error:l};throw l}})}info(t){return ht(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield yo(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Xu(n),error:null}}catch(n){if(We(n))return{data:null,error:n};throw n}})}exists(t){return ht(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield _4(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(We(n)&&n instanceof Qu){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),s=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&s.push(i);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${u}`)}}}remove(t){return ht(this,void 0,void 0,function*(){try{return{data:yield uv(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(We(r))return{data:null,error:r};throw r}})}list(t,r,n){return ht(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},k4),r),{prefix:t||""});return{data:yield Pr(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(We(s))return{data:null,error:s};throw s}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const N4="2.7.1",S4={"X-Client-Info":`storage-js/${N4}`};var Un=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function l(d){try{u(n.next(d))}catch(h){a(h)}}function c(d){try{u(n.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class A4{constructor(t,r={},n){this.url=t,this.headers=Object.assign(Object.assign({},S4),r),this.fetch=cv(n)}listBuckets(){return Un(this,void 0,void 0,function*(){try{return{data:yield yo(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(We(t))return{data:null,error:t};throw t}})}getBucket(t){return Un(this,void 0,void 0,function*(){try{return{data:yield yo(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(We(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return Un(this,void 0,void 0,function*(){try{return{data:yield Pr(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(We(n))return{data:null,error:n};throw n}})}updateBucket(t,r){return Un(this,void 0,void 0,function*(){try{return{data:yield C4(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(We(n))return{data:null,error:n};throw n}})}emptyBucket(t){return Un(this,void 0,void 0,function*(){try{return{data:yield Pr(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(We(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Un(this,void 0,void 0,function*(){try{return{data:yield uv(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(We(r))return{data:null,error:r};throw r}})}}class P4 extends A4{constructor(t,r={},n){super(t,r,n)}from(t){return new E4(this.url,this.headers,t,this.fetch)}}const D4="2.50.0";let Qs="";typeof Deno<"u"?Qs="deno":typeof document<"u"?Qs="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Qs="react-native":Qs="node";const B4={"X-Client-Info":`supabase-js-${Qs}/${D4}`},F4={headers:B4},T4={schema:"public"},R4={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},L4={};var O4=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function l(d){try{u(n.next(d))}catch(h){a(h)}}function c(d){try{u(n.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const I4=e=>{let t;return e?t=e:typeof fetch>"u"?t=Gg:t=fetch,(...r)=>t(...r)},M4=()=>typeof Headers>"u"?Yg:Headers,U4=(e,t,r)=>{const n=I4(r),s=M4();return(i,a)=>O4(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let u=new s(a==null?void 0:a.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(i,Object.assign(Object.assign({},a),{headers:u}))})};var $4=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function l(d){try{u(n.next(d))}catch(h){a(h)}}function c(d){try{u(n.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};function z4(e){return e.endsWith("/")?e:e+"/"}function V4(e,t){var r,n;const{db:s,auth:i,realtime:a,global:l}=e,{db:c,auth:u,realtime:d,global:h}=t,f={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},d),a),global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>$4(this,void 0,void 0,function*(){return""})};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}const dv="2.70.0",Hn=30*1e3,Zu=3,Xl=Zu*Hn,H4="http://localhost:9999",W4="supabase.auth.token",q4={"X-Client-Info":`gotrue-js/${dv}`},Ju="X-Supabase-Api-Version",hv={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},K4=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,G4=6e5;class md extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function oe(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class Y4 extends md{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function Q4(e){return oe(e)&&e.name==="AuthApiError"}class fv extends md{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class rn extends md{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class Er extends rn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function X4(e){return oe(e)&&e.name==="AuthSessionMissingError"}class Ca extends rn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class _a extends rn{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class ka extends rn{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Z4(e){return oe(e)&&e.name==="AuthImplicitGrantRedirectError"}class bf extends rn{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class e0 extends rn{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Zl(e){return oe(e)&&e.name==="AuthRetryableFetchError"}class jf extends rn{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class li extends rn{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const wo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Cf=` 	
\r=`.split(""),J4=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Cf.length;t+=1)e[Cf[t].charCodeAt(0)]=-2;for(let t=0;t<wo.length;t+=1)e[wo[t].charCodeAt(0)]=t;return e})();function _f(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(wo[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(wo[n]),t.queuedBits-=6}}function pv(e,t,r){const n=J4[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function kf(e){const t=[],r=a=>{t.push(String.fromCodePoint(a))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=a=>{rj(a,n,r)};for(let a=0;a<e.length;a+=1)pv(e.charCodeAt(a),s,i);return t.join("")}function ej(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function tj(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}ej(n,t)}}function rj(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function nj(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)pv(e.charCodeAt(s),r,n);return new Uint8Array(t)}function sj(e){const t=[];return tj(e,r=>t.push(r)),new Uint8Array(t)}function ij(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>_f(s,r,n)),_f(null,r,n),t.join("")}function aj(e){return Math.round(Date.now()/1e3)+e}function oj(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Ht=()=>typeof window<"u"&&typeof document<"u",cn={tested:!1,writable:!1},ci=()=>{if(!Ht())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(cn.tested)return cn.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),cn.tested=!0,cn.writable=!0}catch{cn.tested=!0,cn.writable=!1}return cn.writable};function lj(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const xv=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>qi(async()=>{const{default:n}=await Promise.resolve().then(()=>Bs);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},cj=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",mv=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Ea=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Na=async(e,t)=>{await e.removeItem(t)};class il{constructor(){this.promise=new il.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}il.promiseConstructor=Promise;function Jl(e){const t=e.split(".");if(t.length!==3)throw new li("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!K4.test(t[n]))throw new li("JWT not in base64url format");return{header:JSON.parse(kf(t[0])),payload:JSON.parse(kf(t[1])),signature:nj(t[2]),raw:{header:t[0],payload:t[1]}}}async function uj(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function dj(e,t){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await e(i);if(!t(i,null,a)){n(a);return}}catch(a){if(!t(i,a)){s(a);return}}})()})}function hj(e){return("0"+e.toString(16)).substr(-2)}function fj(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,hj).join("")}async function pj(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function xj(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await pj(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function $n(e,t,r=!1){const n=fj();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await mv(e,`${t}-code-verifier`,s);const i=await xj(n);return[i,n===i?"plain":"s256"]}const mj=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function gj(e){const t=e.headers.get(Ju);if(!t||!t.match(mj))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function vj(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function yj(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const wj=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function zn(e){if(!wj.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var bj=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};const fn=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),jj=[502,503,504];async function Ef(e){var t;if(!cj(e))throw new e0(fn(e),0);if(jj.includes(e.status))throw new e0(fn(e),e.status);let r;try{r=await e.json()}catch(i){throw new fv(fn(i),i)}let n;const s=gj(e);if(s&&s.getTime()>=hv["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new jf(fn(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Er}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new jf(fn(r),e.status,r.weak_password.reasons);throw new Y4(fn(r),e.status||500,n)}const Cj=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function ce(e,t,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[Ju]||(i[Ju]=hv["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const a=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(a.redirect_to=n.redirectTo);const l=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=await _j(e,t,r+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function _j(e,t,r,n,s,i){const a=Cj(t,n,s,i);let l;try{l=await e(r,Object.assign({},a))}catch(c){throw console.error(c),new e0(fn(c),0)}if(l.ok||await Ef(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await Ef(c)}}function ir(e){var t;let r=null;Sj(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=aj(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function Nf(e){const t=ir(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Tr(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function kj(e){return{data:e,error:null}}function Ej(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=e,a=bj(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},c=Object.assign({},a);return{data:{properties:l,user:c},error:null}}function Nj(e){return e}function Sj(e){return e.access_token&&e.refresh_token&&e.expires_in}const ec=["global","local","others"];var Aj=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};class Pj{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=xv(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=ec[0]){if(ec.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ec.join(", ")}`);try{return await ce(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(oe(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await ce(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Tr})}catch(n){if(oe(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=Aj(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await ce(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:Ej,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(oe(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await ce(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Tr})}catch(r){if(oe(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,i,a,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await ce(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Nj});if(d.error)throw d.error;const h=await d.json(),f=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,p=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(g=>{const y=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(g.split(";")[1].split("=")[1]);u[`${w}Page`]=y}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(oe(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){zn(t);try{return await ce(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Tr})}catch(r){if(oe(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){zn(t);try{return await ce(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Tr})}catch(n){if(oe(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){zn(t);try{return await ce(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Tr})}catch(n){if(oe(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){zn(t.userId);try{const{data:r,error:n}=await ce(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(oe(r))return{data:null,error:r};throw r}}async _deleteFactor(t){zn(t.userId),zn(t.id);try{return{data:await ce(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(oe(r))return{data:null,error:r};throw r}}}const Dj={getItem:e=>ci()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{ci()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{ci()&&globalThis.localStorage.removeItem(e)}};function Sf(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function Bj(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Vn={debug:!!(globalThis&&ci()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class gv extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class Fj extends gv{}async function Tj(e,t,r){Vn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Vn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){Vn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{Vn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw Vn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Fj(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Vn.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}Bj();const Rj={url:H4,storageKey:W4,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:q4,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Af(e,t,r){return await r()}class Ti{constructor(t){var r,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ti.nextInstanceID,Ti.nextInstanceID+=1,this.instanceID>0&&Ht()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},Rj),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Pj({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=xv(s.fetch),this.lock=s.lock||Af,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Ht()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=Tj:this.lock=Af,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:ci()?this.storage=Dj:(this.memoryStorage={},this.storage=Sf(this.memoryStorage)):(this.memoryStorage={},this.storage=Sf(this.memoryStorage)),Ht()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${dv}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=lj(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),Ht()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),Z4(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:a,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",l),await this._saveSession(a),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return oe(r)?{error:r}:{error:new fv("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const i=await ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:ir}),{data:a,error:l}=i;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(oe(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var r,n,s;try{let i;if("email"in t){const{email:d,password:h,options:f}=t;let p=null,g=null;this.flowType==="pkce"&&([p,g]=await $n(this.storage,this.storageKey)),i=await ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:g},xform:ir})}else if("phone"in t){const{phone:d,password:h,options:f}=t;i=await ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:ir})}else throw new _a("You must provide either an email or phone number and a password");const{data:a,error:l}=i;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(oe(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:a,options:l}=t;r=await ce(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Nf})}else if("phone"in t){const{phone:i,password:a,options:l}=t;r=await ce(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Nf})}else throw new _a("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Ca}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(oe(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,n,s,i,a,l,c,u,d,h,f,p;let g,y;if("message"in t)g=t.message,y=t.signature;else{const{chain:w,wallet:v,statement:x,options:m}=t;let b;if(Ht())if(typeof v=="object")b=v;else{const _=window;if("solana"in _&&typeof _.solana=="object"&&("signIn"in _.solana&&typeof _.solana.signIn=="function"||"signMessage"in _.solana&&typeof _.solana.signMessage=="function"))b=_.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(m!=null&&m.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=v}const j=new URL((r=m==null?void 0:m.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in b&&b.signIn){const _=await b.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},m==null?void 0:m.signInWithSolana),{version:"1",domain:j.host,uri:j.href}),x?{statement:x}:null));let k;if(Array.isArray(_)&&_[0]&&typeof _[0]=="object")k=_[0];else if(_&&typeof _=="object"&&"signedMessage"in _&&"signature"in _)k=_;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in k&&"signature"in k&&(typeof k.signedMessage=="string"||k.signedMessage instanceof Uint8Array)&&k.signature instanceof Uint8Array)g=typeof k.signedMessage=="string"?k.signedMessage:new TextDecoder().decode(k.signedMessage),y=k.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in b)||typeof b.signMessage!="function"||!("publicKey"in b)||typeof b!="object"||!b.publicKey||!("toBase58"in b.publicKey)||typeof b.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${j.host} wants you to sign in with your Solana account:`,b.publicKey.toBase58(),...x?["",x,""]:[""],"Version: 1",`URI: ${j.href}`,`Issued At: ${(s=(n=m==null?void 0:m.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=m==null?void 0:m.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${m.signInWithSolana.notBefore}`]:[],...!((a=m==null?void 0:m.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${m.signInWithSolana.expirationTime}`]:[],...!((l=m==null?void 0:m.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${m.signInWithSolana.chainId}`]:[],...!((c=m==null?void 0:m.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${m.signInWithSolana.nonce}`]:[],...!((u=m==null?void 0:m.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${m.signInWithSolana.requestId}`]:[],...!((h=(d=m==null?void 0:m.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...m.signInWithSolana.resources.map(k=>`- ${k}`)]:[]].join(`
`);const _=await b.signMessage(new TextEncoder().encode(g),"utf8");if(!_||!(_ instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=_}}try{const{data:w,error:v}=await ce(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:ij(y)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:ir});if(v)throw v;return!w||!w.session||!w.user?{data:{user:null,session:null},error:new Ca}:(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),{data:Object.assign({},w),error:v})}catch(w){if(oe(w))return{data:{user:null,session:null},error:w};throw w}}async _exchangeCodeForSession(t){const r=await Ea(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:i,error:a}=await ce(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:ir});if(await Na(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Ca}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:a})}catch(i){if(oe(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:i,nonce:a}=t,l=await ce(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:ir}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Ca}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(r){if(oe(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,s,i,a;try{if("email"in t){const{email:l,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await $n(this.storage,this.storageKey));const{error:h}=await ce(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:d}=await ce(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(a=c==null?void 0:c.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new _a("You must provide either an email or phone number.")}catch(l){if(oe(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var r,n;try{let s,i;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:a,error:l}=await ce(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:ir});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");const c=a.session,u=a.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(oe(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var r,n,s;try{let i=null,a=null;return this.flowType==="pkce"&&([i,a]=await $n(this.storage,this.storageKey)),await ce(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:a}),headers:this.headers,xform:kj})}catch(i){if(oe(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Er;const{error:s}=await ce(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(oe(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:i}=t,{error:a}=await ce(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in t){const{phone:n,type:s,options:i}=t,{data:a,error:l}=await ce(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:l}}throw new _a("You must provide either an email or phone number and a type")}catch(r){if(oe(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Ea(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<Xl:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.storage.isServer){let a=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,u,d)=>(!a&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:t},error:null}}const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await ce(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Tr}):await this._useSession(async r=>{var n,s,i;const{data:a,error:l}=r;if(l)throw l;return!(!((n=a.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Er}:await ce(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Tr})})}catch(r){if(oe(r))return X4(r)&&(await this._removeSession(),await Na(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new Er;const a=s.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await $n(this.storage,this.storageKey));const{data:u,error:d}=await ce(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:a.access_token,xform:Tr});if(d)throw d;return a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(n){if(oe(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Er;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:a}=Jl(t.access_token);if(a.exp&&(n=a.exp,s=n<=r),s){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(oe(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:a,error:l}=r;if(l)throw l;t=(n=a.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Er;const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(oe(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!Ht())throw new ka("No browser detected.");if(t.error||t.error_description||t.error_code)throw new ka(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new bf("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ka("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new bf("No code detected.");const{data:x,error:m}=await this._exchangeCodeForSession(t.code);if(m)throw m;const b=new URL(window.location.href);return b.searchParams.delete("code"),window.history.replaceState(window.history.state,"",b.toString()),{data:{session:x.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:a,expires_in:l,expires_at:c,token_type:u}=t;if(!i||!l||!a||!u)throw new ka("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let f=d+h;c&&(f=parseInt(c));const p=f-d;p*1e3<=Hn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);const g=f-h;d-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,f,d):d-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,f,d);const{data:y,error:w}=await this._getUser(i);if(w)throw w;const v={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:f,refresh_token:a,token_type:u,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:v,redirectType:t.type},error:null}}catch(n){if(oe(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Ea(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{error:i};const a=(n=s.session)===null||n===void 0?void 0:n.access_token;if(a){const{error:l}=await this.admin.signOut(a,t);if(l&&!(Q4(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await Na(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=oj(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:a}=r;if(a)throw a;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await $n(this.storage,this.storageKey,!0));try{return await ce(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(oe(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(oe(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var a,l,c,u,d;const{data:h,error:f}=i;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await ce(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return Ht()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(oe(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:a}=r;if(a)throw a;return await ce(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(oe(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await dj(async s=>(s>0&&await uj(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await ce(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:ir})),(s,i)=>{const a=200*Math.pow(2,s);return i&&Zl(i)&&Date.now()+a-n<Hn})}catch(n){if(this._debug(r,"error",n),oe(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Ht()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const n=await Ea(this.storage,this.storageKey);if(this._debug(r,"session from storage",n),!this._isValidSession(n)){this._debug(r,"session is not valid"),n!==null&&await this._removeSession();return}const s=((t=n.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Xl;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${Xl}s`),s){if(this.autoRefreshToken&&n.refresh_token){const{error:i}=await this._callRefreshToken(n.refresh_token);i&&(console.error(i),Zl(i)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(r,"error",n),console.error(n);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Er;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new il;const{data:i,error:a}=await this._refreshAccessToken(t);if(a)throw a;if(!i.session)throw new Er;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),oe(i)){const a={session:null,error:i};return Zl(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(a),a}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){i.push(c)}});if(await Promise.all(a),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await mv(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),await Na(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Ht()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Hn);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/Hn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Hn}ms, refresh threshold is ${Zu} ticks`),s<=Zu&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof gv)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ht()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,a]=await $n(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await ce(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(oe(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:a}=r;if(a)return{data:null,error:a};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:u}=await ce(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(oe(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{data:null,error:i};const{data:a,error:l}=await ce(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:l})})}catch(r){if(oe(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await ce(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(oe(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(t==null?void 0:t.factors)||[],s=n.filter(a=>a.factor_type==="totp"&&a.status==="verified"),i=n.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:n,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:s},error:i}=t;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=Jl(s.access_token);let l=null;a.aal&&(l=a.aal);let c=l;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const d=a.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(a=>a.kid===t);if(n||(n=this.jwks.keys.find(a=>a.kid===t),n&&this.jwks_cached_at+G4>Date.now()))return n;const{data:s,error:i}=await ce(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!s.keys||s.keys.length===0)throw new li("JWKS is empty");if(this.jwks=s,this.jwks_cached_at=Date.now(),n=s.keys.find(a=>a.kid===t),!n)throw new li("No matching signing key found in JWKS");return n}async getClaims(t,r={keys:[]}){try{let n=t;if(!n){const{data:p,error:g}=await this.getSession();if(g||!p.session)return{data:null,error:g};n=p.session.access_token}const{header:s,payload:i,signature:a,raw:{header:l,payload:c}}=Jl(n);if(vj(i.exp),!s.kid||s.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:p}=await this.getUser(n);if(p)throw p;return{data:{claims:i,header:s,signature:a},error:null}}const u=yj(s.alg),d=await this.fetchJwk(s.kid,r),h=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,a,sj(`${l}.${c}`)))throw new li("Invalid JWT signature");return{data:{claims:i,header:s,signature:a},error:null}}catch(n){if(oe(n))return{data:null,error:n};throw n}}}Ti.nextInstanceID=0;const Lj=Ti;class Oj extends Lj{constructor(t){super(t)}}var Ij=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function l(d){try{u(n.next(d))}catch(h){a(h)}}function c(d){try{u(n.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class Mj{constructor(t,r,n){var s,i,a;if(this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const l=z4(t),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,d={db:T4,realtime:L4,auth:Object.assign(Object.assign({},R4),{storageKey:u}),global:F4},h=V4(n??{},d);this.storageKey=(s=h.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(f,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=h.auth)!==null&&a!==void 0?a:{},this.headers,h.global.fetch),this.fetch=U4(r,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new r4(new URL("rest/v1",c).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),h.accessToken||this._listenForAuthEvents()}get functions(){return new Bb(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new P4(this.storageUrl.href,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return Ij(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,storageKey:i,flowType:a,lock:l,debug:c},u,d){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Oj({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),u),storageKey:i,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,flowType:a,lock:l,debug:c,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new m4(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Uj=(e,t,r)=>new Mj(e,t,r);var $j={exports:{}};function zj(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var tc={exports:{}};const Vj={},Hj=Object.freeze(Object.defineProperty({__proto__:null,default:Vj},Symbol.toStringTag,{value:"Module"})),Wj=jx(Hj);var Pf;function he(){return Pf||(Pf=1,function(e,t){(function(r,n){e.exports=n()})(re,function(){var r=r||function(n,s){var i;if(typeof window<"u"&&window.crypto&&(i=window.crypto),typeof self<"u"&&self.crypto&&(i=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(i=globalThis.crypto),!i&&typeof window<"u"&&window.msCrypto&&(i=window.msCrypto),!i&&typeof re<"u"&&re.crypto&&(i=re.crypto),!i&&typeof zj=="function")try{i=Wj}catch{}var a=function(){if(i){if(typeof i.getRandomValues=="function")try{return i.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof i.randomBytes=="function")try{return i.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},l=Object.create||function(){function x(){}return function(m){var b;return x.prototype=m,b=new x,x.prototype=null,b}}(),c={},u=c.lib={},d=u.Base=function(){return{extend:function(x){var m=l(this);return x&&m.mixIn(x),(!m.hasOwnProperty("init")||this.init===m.init)&&(m.init=function(){m.$super.init.apply(this,arguments)}),m.init.prototype=m,m.$super=this,m},create:function(){var x=this.extend();return x.init.apply(x,arguments),x},init:function(){},mixIn:function(x){for(var m in x)x.hasOwnProperty(m)&&(this[m]=x[m]);x.hasOwnProperty("toString")&&(this.toString=x.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),h=u.WordArray=d.extend({init:function(x,m){x=this.words=x||[],m!=s?this.sigBytes=m:this.sigBytes=x.length*4},toString:function(x){return(x||p).stringify(this)},concat:function(x){var m=this.words,b=x.words,j=this.sigBytes,_=x.sigBytes;if(this.clamp(),j%4)for(var k=0;k<_;k++){var E=b[k>>>2]>>>24-k%4*8&255;m[j+k>>>2]|=E<<24-(j+k)%4*8}else for(var D=0;D<_;D+=4)m[j+D>>>2]=b[D>>>2];return this.sigBytes+=_,this},clamp:function(){var x=this.words,m=this.sigBytes;x[m>>>2]&=4294967295<<32-m%4*8,x.length=n.ceil(m/4)},clone:function(){var x=d.clone.call(this);return x.words=this.words.slice(0),x},random:function(x){for(var m=[],b=0;b<x;b+=4)m.push(a());return new h.init(m,x)}}),f=c.enc={},p=f.Hex={stringify:function(x){for(var m=x.words,b=x.sigBytes,j=[],_=0;_<b;_++){var k=m[_>>>2]>>>24-_%4*8&255;j.push((k>>>4).toString(16)),j.push((k&15).toString(16))}return j.join("")},parse:function(x){for(var m=x.length,b=[],j=0;j<m;j+=2)b[j>>>3]|=parseInt(x.substr(j,2),16)<<24-j%8*4;return new h.init(b,m/2)}},g=f.Latin1={stringify:function(x){for(var m=x.words,b=x.sigBytes,j=[],_=0;_<b;_++){var k=m[_>>>2]>>>24-_%4*8&255;j.push(String.fromCharCode(k))}return j.join("")},parse:function(x){for(var m=x.length,b=[],j=0;j<m;j++)b[j>>>2]|=(x.charCodeAt(j)&255)<<24-j%4*8;return new h.init(b,m)}},y=f.Utf8={stringify:function(x){try{return decodeURIComponent(escape(g.stringify(x)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(x){return g.parse(unescape(encodeURIComponent(x)))}},w=u.BufferedBlockAlgorithm=d.extend({reset:function(){this._data=new h.init,this._nDataBytes=0},_append:function(x){typeof x=="string"&&(x=y.parse(x)),this._data.concat(x),this._nDataBytes+=x.sigBytes},_process:function(x){var m,b=this._data,j=b.words,_=b.sigBytes,k=this.blockSize,E=k*4,D=_/E;x?D=n.ceil(D):D=n.max((D|0)-this._minBufferSize,0);var S=D*k,P=n.min(S*4,_);if(S){for(var A=0;A<S;A+=k)this._doProcessBlock(j,A);m=j.splice(0,S),b.sigBytes-=P}return new h.init(m,P)},clone:function(){var x=d.clone.call(this);return x._data=this._data.clone(),x},_minBufferSize:0});u.Hasher=w.extend({cfg:d.extend(),init:function(x){this.cfg=this.cfg.extend(x),this.reset()},reset:function(){w.reset.call(this),this._doReset()},update:function(x){return this._append(x),this._process(),this},finalize:function(x){x&&this._append(x);var m=this._doFinalize();return m},blockSize:16,_createHelper:function(x){return function(m,b){return new x.init(b).finalize(m)}},_createHmacHelper:function(x){return function(m,b){return new v.HMAC.init(x,b).finalize(m)}}});var v=c.algo={};return c}(Math);return r})}(tc)),tc.exports}var rc={exports:{}},Df;function al(){return Df||(Df=1,function(e,t){(function(r,n){e.exports=n(he())})(re,function(r){return function(n){var s=r,i=s.lib,a=i.Base,l=i.WordArray,c=s.x64={};c.Word=a.extend({init:function(u,d){this.high=u,this.low=d}}),c.WordArray=a.extend({init:function(u,d){u=this.words=u||[],d!=n?this.sigBytes=d:this.sigBytes=u.length*8},toX32:function(){for(var u=this.words,d=u.length,h=[],f=0;f<d;f++){var p=u[f];h.push(p.high),h.push(p.low)}return l.create(h,this.sigBytes)},clone:function(){for(var u=a.clone.call(this),d=u.words=this.words.slice(0),h=d.length,f=0;f<h;f++)d[f]=d[f].clone();return u}})}(),r})}(rc)),rc.exports}var nc={exports:{}},Bf;function qj(){return Bf||(Bf=1,function(e,t){(function(r,n){e.exports=n(he())})(re,function(r){return function(){if(typeof ArrayBuffer=="function"){var n=r,s=n.lib,i=s.WordArray,a=i.init,l=i.init=function(c){if(c instanceof ArrayBuffer&&(c=new Uint8Array(c)),(c instanceof Int8Array||typeof Uint8ClampedArray<"u"&&c instanceof Uint8ClampedArray||c instanceof Int16Array||c instanceof Uint16Array||c instanceof Int32Array||c instanceof Uint32Array||c instanceof Float32Array||c instanceof Float64Array)&&(c=new Uint8Array(c.buffer,c.byteOffset,c.byteLength)),c instanceof Uint8Array){for(var u=c.byteLength,d=[],h=0;h<u;h++)d[h>>>2]|=c[h]<<24-h%4*8;a.call(this,d,u)}else a.apply(this,arguments)};l.prototype=i}}(),r.lib.WordArray})}(nc)),nc.exports}var sc={exports:{}},Ff;function Kj(){return Ff||(Ff=1,function(e,t){(function(r,n){e.exports=n(he())})(re,function(r){return function(){var n=r,s=n.lib,i=s.WordArray,a=n.enc;a.Utf16=a.Utf16BE={stringify:function(c){for(var u=c.words,d=c.sigBytes,h=[],f=0;f<d;f+=2){var p=u[f>>>2]>>>16-f%4*8&65535;h.push(String.fromCharCode(p))}return h.join("")},parse:function(c){for(var u=c.length,d=[],h=0;h<u;h++)d[h>>>1]|=c.charCodeAt(h)<<16-h%2*16;return i.create(d,u*2)}},a.Utf16LE={stringify:function(c){for(var u=c.words,d=c.sigBytes,h=[],f=0;f<d;f+=2){var p=l(u[f>>>2]>>>16-f%4*8&65535);h.push(String.fromCharCode(p))}return h.join("")},parse:function(c){for(var u=c.length,d=[],h=0;h<u;h++)d[h>>>1]|=l(c.charCodeAt(h)<<16-h%2*16);return i.create(d,u*2)}};function l(c){return c<<8&4278255360|c>>>8&16711935}}(),r.enc.Utf16})}(sc)),sc.exports}var ic={exports:{}},Tf;function Rn(){return Tf||(Tf=1,function(e,t){(function(r,n){e.exports=n(he())})(re,function(r){return function(){var n=r,s=n.lib,i=s.WordArray,a=n.enc;a.Base64={stringify:function(c){var u=c.words,d=c.sigBytes,h=this._map;c.clamp();for(var f=[],p=0;p<d;p+=3)for(var g=u[p>>>2]>>>24-p%4*8&255,y=u[p+1>>>2]>>>24-(p+1)%4*8&255,w=u[p+2>>>2]>>>24-(p+2)%4*8&255,v=g<<16|y<<8|w,x=0;x<4&&p+x*.75<d;x++)f.push(h.charAt(v>>>6*(3-x)&63));var m=h.charAt(64);if(m)for(;f.length%4;)f.push(m);return f.join("")},parse:function(c){var u=c.length,d=this._map,h=this._reverseMap;if(!h){h=this._reverseMap=[];for(var f=0;f<d.length;f++)h[d.charCodeAt(f)]=f}var p=d.charAt(64);if(p){var g=c.indexOf(p);g!==-1&&(u=g)}return l(c,u,h)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function l(c,u,d){for(var h=[],f=0,p=0;p<u;p++)if(p%4){var g=d[c.charCodeAt(p-1)]<<p%4*2,y=d[c.charCodeAt(p)]>>>6-p%4*2,w=g|y;h[f>>>2]|=w<<24-f%4*8,f++}return i.create(h,f)}}(),r.enc.Base64})}(ic)),ic.exports}var ac={exports:{}},Rf;function Gj(){return Rf||(Rf=1,function(e,t){(function(r,n){e.exports=n(he())})(re,function(r){return function(){var n=r,s=n.lib,i=s.WordArray,a=n.enc;a.Base64url={stringify:function(c,u){u===void 0&&(u=!0);var d=c.words,h=c.sigBytes,f=u?this._safe_map:this._map;c.clamp();for(var p=[],g=0;g<h;g+=3)for(var y=d[g>>>2]>>>24-g%4*8&255,w=d[g+1>>>2]>>>24-(g+1)%4*8&255,v=d[g+2>>>2]>>>24-(g+2)%4*8&255,x=y<<16|w<<8|v,m=0;m<4&&g+m*.75<h;m++)p.push(f.charAt(x>>>6*(3-m)&63));var b=f.charAt(64);if(b)for(;p.length%4;)p.push(b);return p.join("")},parse:function(c,u){u===void 0&&(u=!0);var d=c.length,h=u?this._safe_map:this._map,f=this._reverseMap;if(!f){f=this._reverseMap=[];for(var p=0;p<h.length;p++)f[h.charCodeAt(p)]=p}var g=h.charAt(64);if(g){var y=c.indexOf(g);y!==-1&&(d=y)}return l(c,d,f)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function l(c,u,d){for(var h=[],f=0,p=0;p<u;p++)if(p%4){var g=d[c.charCodeAt(p-1)]<<p%4*2,y=d[c.charCodeAt(p)]>>>6-p%4*2,w=g|y;h[f>>>2]|=w<<24-f%4*8,f++}return i.create(h,f)}}(),r.enc.Base64url})}(ac)),ac.exports}var oc={exports:{}},Lf;function Ln(){return Lf||(Lf=1,function(e,t){(function(r,n){e.exports=n(he())})(re,function(r){return function(n){var s=r,i=s.lib,a=i.WordArray,l=i.Hasher,c=s.algo,u=[];(function(){for(var y=0;y<64;y++)u[y]=n.abs(n.sin(y+1))*4294967296|0})();var d=c.MD5=l.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(y,w){for(var v=0;v<16;v++){var x=w+v,m=y[x];y[x]=(m<<8|m>>>24)&16711935|(m<<24|m>>>8)&4278255360}var b=this._hash.words,j=y[w+0],_=y[w+1],k=y[w+2],E=y[w+3],D=y[w+4],S=y[w+5],P=y[w+6],A=y[w+7],B=y[w+8],H=y[w+9],G=y[w+10],M=y[w+11],V=y[w+12],I=y[w+13],W=y[w+14],q=y[w+15],C=b[0],R=b[1],z=b[2],O=b[3];C=h(C,R,z,O,j,7,u[0]),O=h(O,C,R,z,_,12,u[1]),z=h(z,O,C,R,k,17,u[2]),R=h(R,z,O,C,E,22,u[3]),C=h(C,R,z,O,D,7,u[4]),O=h(O,C,R,z,S,12,u[5]),z=h(z,O,C,R,P,17,u[6]),R=h(R,z,O,C,A,22,u[7]),C=h(C,R,z,O,B,7,u[8]),O=h(O,C,R,z,H,12,u[9]),z=h(z,O,C,R,G,17,u[10]),R=h(R,z,O,C,M,22,u[11]),C=h(C,R,z,O,V,7,u[12]),O=h(O,C,R,z,I,12,u[13]),z=h(z,O,C,R,W,17,u[14]),R=h(R,z,O,C,q,22,u[15]),C=f(C,R,z,O,_,5,u[16]),O=f(O,C,R,z,P,9,u[17]),z=f(z,O,C,R,M,14,u[18]),R=f(R,z,O,C,j,20,u[19]),C=f(C,R,z,O,S,5,u[20]),O=f(O,C,R,z,G,9,u[21]),z=f(z,O,C,R,q,14,u[22]),R=f(R,z,O,C,D,20,u[23]),C=f(C,R,z,O,H,5,u[24]),O=f(O,C,R,z,W,9,u[25]),z=f(z,O,C,R,E,14,u[26]),R=f(R,z,O,C,B,20,u[27]),C=f(C,R,z,O,I,5,u[28]),O=f(O,C,R,z,k,9,u[29]),z=f(z,O,C,R,A,14,u[30]),R=f(R,z,O,C,V,20,u[31]),C=p(C,R,z,O,S,4,u[32]),O=p(O,C,R,z,B,11,u[33]),z=p(z,O,C,R,M,16,u[34]),R=p(R,z,O,C,W,23,u[35]),C=p(C,R,z,O,_,4,u[36]),O=p(O,C,R,z,D,11,u[37]),z=p(z,O,C,R,A,16,u[38]),R=p(R,z,O,C,G,23,u[39]),C=p(C,R,z,O,I,4,u[40]),O=p(O,C,R,z,j,11,u[41]),z=p(z,O,C,R,E,16,u[42]),R=p(R,z,O,C,P,23,u[43]),C=p(C,R,z,O,H,4,u[44]),O=p(O,C,R,z,V,11,u[45]),z=p(z,O,C,R,q,16,u[46]),R=p(R,z,O,C,k,23,u[47]),C=g(C,R,z,O,j,6,u[48]),O=g(O,C,R,z,A,10,u[49]),z=g(z,O,C,R,W,15,u[50]),R=g(R,z,O,C,S,21,u[51]),C=g(C,R,z,O,V,6,u[52]),O=g(O,C,R,z,E,10,u[53]),z=g(z,O,C,R,G,15,u[54]),R=g(R,z,O,C,_,21,u[55]),C=g(C,R,z,O,B,6,u[56]),O=g(O,C,R,z,q,10,u[57]),z=g(z,O,C,R,P,15,u[58]),R=g(R,z,O,C,I,21,u[59]),C=g(C,R,z,O,D,6,u[60]),O=g(O,C,R,z,M,10,u[61]),z=g(z,O,C,R,k,15,u[62]),R=g(R,z,O,C,H,21,u[63]),b[0]=b[0]+C|0,b[1]=b[1]+R|0,b[2]=b[2]+z|0,b[3]=b[3]+O|0},_doFinalize:function(){var y=this._data,w=y.words,v=this._nDataBytes*8,x=y.sigBytes*8;w[x>>>5]|=128<<24-x%32;var m=n.floor(v/4294967296),b=v;w[(x+64>>>9<<4)+15]=(m<<8|m>>>24)&16711935|(m<<24|m>>>8)&4278255360,w[(x+64>>>9<<4)+14]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,y.sigBytes=(w.length+1)*4,this._process();for(var j=this._hash,_=j.words,k=0;k<4;k++){var E=_[k];_[k]=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360}return j},clone:function(){var y=l.clone.call(this);return y._hash=this._hash.clone(),y}});function h(y,w,v,x,m,b,j){var _=y+(w&v|~w&x)+m+j;return(_<<b|_>>>32-b)+w}function f(y,w,v,x,m,b,j){var _=y+(w&x|v&~x)+m+j;return(_<<b|_>>>32-b)+w}function p(y,w,v,x,m,b,j){var _=y+(w^v^x)+m+j;return(_<<b|_>>>32-b)+w}function g(y,w,v,x,m,b,j){var _=y+(v^(w|~x))+m+j;return(_<<b|_>>>32-b)+w}s.MD5=l._createHelper(d),s.HmacMD5=l._createHmacHelper(d)}(Math),r.MD5})}(oc)),oc.exports}var lc={exports:{}},Of;function vv(){return Of||(Of=1,function(e,t){(function(r,n){e.exports=n(he())})(re,function(r){return function(){var n=r,s=n.lib,i=s.WordArray,a=s.Hasher,l=n.algo,c=[],u=l.SHA1=a.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(d,h){for(var f=this._hash.words,p=f[0],g=f[1],y=f[2],w=f[3],v=f[4],x=0;x<80;x++){if(x<16)c[x]=d[h+x]|0;else{var m=c[x-3]^c[x-8]^c[x-14]^c[x-16];c[x]=m<<1|m>>>31}var b=(p<<5|p>>>27)+v+c[x];x<20?b+=(g&y|~g&w)+1518500249:x<40?b+=(g^y^w)+1859775393:x<60?b+=(g&y|g&w|y&w)-1894007588:b+=(g^y^w)-899497514,v=w,w=y,y=g<<30|g>>>2,g=p,p=b}f[0]=f[0]+p|0,f[1]=f[1]+g|0,f[2]=f[2]+y|0,f[3]=f[3]+w|0,f[4]=f[4]+v|0},_doFinalize:function(){var d=this._data,h=d.words,f=this._nDataBytes*8,p=d.sigBytes*8;return h[p>>>5]|=128<<24-p%32,h[(p+64>>>9<<4)+14]=Math.floor(f/4294967296),h[(p+64>>>9<<4)+15]=f,d.sigBytes=h.length*4,this._process(),this._hash},clone:function(){var d=a.clone.call(this);return d._hash=this._hash.clone(),d}});n.SHA1=a._createHelper(u),n.HmacSHA1=a._createHmacHelper(u)}(),r.SHA1})}(lc)),lc.exports}var cc={exports:{}},If;function gd(){return If||(If=1,function(e,t){(function(r,n){e.exports=n(he())})(re,function(r){return function(n){var s=r,i=s.lib,a=i.WordArray,l=i.Hasher,c=s.algo,u=[],d=[];(function(){function p(v){for(var x=n.sqrt(v),m=2;m<=x;m++)if(!(v%m))return!1;return!0}function g(v){return(v-(v|0))*4294967296|0}for(var y=2,w=0;w<64;)p(y)&&(w<8&&(u[w]=g(n.pow(y,1/2))),d[w]=g(n.pow(y,1/3)),w++),y++})();var h=[],f=c.SHA256=l.extend({_doReset:function(){this._hash=new a.init(u.slice(0))},_doProcessBlock:function(p,g){for(var y=this._hash.words,w=y[0],v=y[1],x=y[2],m=y[3],b=y[4],j=y[5],_=y[6],k=y[7],E=0;E<64;E++){if(E<16)h[E]=p[g+E]|0;else{var D=h[E-15],S=(D<<25|D>>>7)^(D<<14|D>>>18)^D>>>3,P=h[E-2],A=(P<<15|P>>>17)^(P<<13|P>>>19)^P>>>10;h[E]=S+h[E-7]+A+h[E-16]}var B=b&j^~b&_,H=w&v^w&x^v&x,G=(w<<30|w>>>2)^(w<<19|w>>>13)^(w<<10|w>>>22),M=(b<<26|b>>>6)^(b<<21|b>>>11)^(b<<7|b>>>25),V=k+M+B+d[E]+h[E],I=G+H;k=_,_=j,j=b,b=m+V|0,m=x,x=v,v=w,w=V+I|0}y[0]=y[0]+w|0,y[1]=y[1]+v|0,y[2]=y[2]+x|0,y[3]=y[3]+m|0,y[4]=y[4]+b|0,y[5]=y[5]+j|0,y[6]=y[6]+_|0,y[7]=y[7]+k|0},_doFinalize:function(){var p=this._data,g=p.words,y=this._nDataBytes*8,w=p.sigBytes*8;return g[w>>>5]|=128<<24-w%32,g[(w+64>>>9<<4)+14]=n.floor(y/4294967296),g[(w+64>>>9<<4)+15]=y,p.sigBytes=g.length*4,this._process(),this._hash},clone:function(){var p=l.clone.call(this);return p._hash=this._hash.clone(),p}});s.SHA256=l._createHelper(f),s.HmacSHA256=l._createHmacHelper(f)}(Math),r.SHA256})}(cc)),cc.exports}var uc={exports:{}},Mf;function Yj(){return Mf||(Mf=1,function(e,t){(function(r,n,s){e.exports=n(he(),gd())})(re,function(r){return function(){var n=r,s=n.lib,i=s.WordArray,a=n.algo,l=a.SHA256,c=a.SHA224=l.extend({_doReset:function(){this._hash=new i.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var u=l._doFinalize.call(this);return u.sigBytes-=4,u}});n.SHA224=l._createHelper(c),n.HmacSHA224=l._createHmacHelper(c)}(),r.SHA224})}(uc)),uc.exports}var dc={exports:{}},Uf;function yv(){return Uf||(Uf=1,function(e,t){(function(r,n,s){e.exports=n(he(),al())})(re,function(r){return function(){var n=r,s=n.lib,i=s.Hasher,a=n.x64,l=a.Word,c=a.WordArray,u=n.algo;function d(){return l.create.apply(l,arguments)}var h=[d(1116352408,3609767458),d(1899447441,602891725),d(3049323471,3964484399),d(3921009573,2173295548),d(961987163,4081628472),d(1508970993,3053834265),d(2453635748,2937671579),d(2870763221,3664609560),d(3624381080,2734883394),d(310598401,1164996542),d(607225278,1323610764),d(1426881987,3590304994),d(1925078388,4068182383),d(2162078206,991336113),d(2614888103,633803317),d(3248222580,3479774868),d(3835390401,2666613458),d(4022224774,944711139),d(264347078,2341262773),d(604807628,2007800933),d(770255983,1495990901),d(1249150122,1856431235),d(1555081692,3175218132),d(1996064986,2198950837),d(2554220882,3999719339),d(2821834349,766784016),d(2952996808,2566594879),d(3210313671,3203337956),d(3336571891,1034457026),d(3584528711,2466948901),d(113926993,3758326383),d(338241895,168717936),d(666307205,1188179964),d(773529912,1546045734),d(1294757372,1522805485),d(1396182291,2643833823),d(1695183700,2343527390),d(1986661051,1014477480),d(2177026350,1206759142),d(2456956037,344077627),d(2730485921,1290863460),d(2820302411,3158454273),d(3259730800,3505952657),d(3345764771,106217008),d(3516065817,3606008344),d(3600352804,1432725776),d(4094571909,1467031594),d(275423344,851169720),d(430227734,3100823752),d(506948616,1363258195),d(659060556,3750685593),d(883997877,3785050280),d(958139571,3318307427),d(1322822218,3812723403),d(1537002063,2003034995),d(1747873779,3602036899),d(1955562222,1575990012),d(2024104815,1125592928),d(2227730452,2716904306),d(2361852424,442776044),d(2428436474,593698344),d(2756734187,3733110249),d(3204031479,2999351573),d(3329325298,3815920427),d(3391569614,3928383900),d(3515267271,566280711),d(3940187606,3454069534),d(4118630271,4000239992),d(116418474,1914138554),d(174292421,2731055270),d(289380356,3203993006),d(460393269,320620315),d(685471733,587496836),d(852142971,1086792851),d(1017036298,365543100),d(1126000580,2618297676),d(1288033470,3409855158),d(1501505948,4234509866),d(1607167915,987167468),d(1816402316,1246189591)],f=[];(function(){for(var g=0;g<80;g++)f[g]=d()})();var p=u.SHA512=i.extend({_doReset:function(){this._hash=new c.init([new l.init(1779033703,4089235720),new l.init(3144134277,2227873595),new l.init(1013904242,4271175723),new l.init(2773480762,1595750129),new l.init(1359893119,2917565137),new l.init(2600822924,725511199),new l.init(528734635,4215389547),new l.init(1541459225,327033209)])},_doProcessBlock:function(g,y){for(var w=this._hash.words,v=w[0],x=w[1],m=w[2],b=w[3],j=w[4],_=w[5],k=w[6],E=w[7],D=v.high,S=v.low,P=x.high,A=x.low,B=m.high,H=m.low,G=b.high,M=b.low,V=j.high,I=j.low,W=_.high,q=_.low,C=k.high,R=k.low,z=E.high,O=E.low,Q=D,J=S,ie=P,X=A,Ue=B,$e=H,Oe=G,wt=M,ze=V,Fe=I,Bt=W,ee=q,Ve=C,bt=R,Zt=z,jt=O,He=0;He<80;He++){var _e,U,Z=f[He];if(He<16)U=Z.high=g[y+He*2]|0,_e=Z.low=g[y+He*2+1]|0;else{var le=f[He-15],xe=le.high,it=le.low,gl=(xe>>>1|it<<31)^(xe>>>8|it<<24)^xe>>>7,ea=(it>>>1|xe<<31)^(it>>>8|xe<<24)^(it>>>7|xe<<25),ta=f[He-2],jr=ta.high,an=ta.low,vl=(jr>>>19|an<<13)^(jr<<3|an>>>29)^jr>>>6,ra=(an>>>19|jr<<13)^(an<<3|jr>>>29)^(an>>>6|jr<<26),na=f[He-7],yl=na.high,wl=na.low,sa=f[He-16],L=sa.high,T=sa.low;_e=ea+wl,U=gl+yl+(_e>>>0<ea>>>0?1:0),_e=_e+ra,U=U+vl+(_e>>>0<ra>>>0?1:0),_e=_e+T,U=U+L+(_e>>>0<T>>>0?1:0),Z.high=U,Z.low=_e}var $=ze&Bt^~ze&Ve,F=Fe&ee^~Fe&bt,se=Q&ie^Q&Ue^ie&Ue,je=J&X^J&$e^X&$e,$t=(Q>>>28|J<<4)^(Q<<30|J>>>2)^(Q<<25|J>>>7),de=(J>>>28|Q<<4)^(J<<30|Q>>>2)^(J<<25|Q>>>7),Cr=(ze>>>14|Fe<<18)^(ze>>>18|Fe<<14)^(ze<<23|Fe>>>9),on=(Fe>>>14|ze<<18)^(Fe>>>18|ze<<14)^(Fe<<23|ze>>>9),ln=h[He],ia=ln.high,zt=ln.low,Ct=jt+on,_r=Zt+Cr+(Ct>>>0<jt>>>0?1:0),Ct=Ct+F,_r=_r+$+(Ct>>>0<F>>>0?1:0),Ct=Ct+zt,_r=_r+ia+(Ct>>>0<zt>>>0?1:0),Ct=Ct+_e,_r=_r+U+(Ct>>>0<_e>>>0?1:0),Gd=de+je,i1=$t+se+(Gd>>>0<de>>>0?1:0);Zt=Ve,jt=bt,Ve=Bt,bt=ee,Bt=ze,ee=Fe,Fe=wt+Ct|0,ze=Oe+_r+(Fe>>>0<wt>>>0?1:0)|0,Oe=Ue,wt=$e,Ue=ie,$e=X,ie=Q,X=J,J=Ct+Gd|0,Q=_r+i1+(J>>>0<Ct>>>0?1:0)|0}S=v.low=S+J,v.high=D+Q+(S>>>0<J>>>0?1:0),A=x.low=A+X,x.high=P+ie+(A>>>0<X>>>0?1:0),H=m.low=H+$e,m.high=B+Ue+(H>>>0<$e>>>0?1:0),M=b.low=M+wt,b.high=G+Oe+(M>>>0<wt>>>0?1:0),I=j.low=I+Fe,j.high=V+ze+(I>>>0<Fe>>>0?1:0),q=_.low=q+ee,_.high=W+Bt+(q>>>0<ee>>>0?1:0),R=k.low=R+bt,k.high=C+Ve+(R>>>0<bt>>>0?1:0),O=E.low=O+jt,E.high=z+Zt+(O>>>0<jt>>>0?1:0)},_doFinalize:function(){var g=this._data,y=g.words,w=this._nDataBytes*8,v=g.sigBytes*8;y[v>>>5]|=128<<24-v%32,y[(v+128>>>10<<5)+30]=Math.floor(w/4294967296),y[(v+128>>>10<<5)+31]=w,g.sigBytes=y.length*4,this._process();var x=this._hash.toX32();return x},clone:function(){var g=i.clone.call(this);return g._hash=this._hash.clone(),g},blockSize:1024/32});n.SHA512=i._createHelper(p),n.HmacSHA512=i._createHmacHelper(p)}(),r.SHA512})}(dc)),dc.exports}var hc={exports:{}},$f;function Qj(){return $f||($f=1,function(e,t){(function(r,n,s){e.exports=n(he(),al(),yv())})(re,function(r){return function(){var n=r,s=n.x64,i=s.Word,a=s.WordArray,l=n.algo,c=l.SHA512,u=l.SHA384=c.extend({_doReset:function(){this._hash=new a.init([new i.init(3418070365,3238371032),new i.init(1654270250,914150663),new i.init(2438529370,812702999),new i.init(355462360,4144912697),new i.init(1731405415,4290775857),new i.init(2394180231,1750603025),new i.init(3675008525,1694076839),new i.init(1203062813,3204075428)])},_doFinalize:function(){var d=c._doFinalize.call(this);return d.sigBytes-=16,d}});n.SHA384=c._createHelper(u),n.HmacSHA384=c._createHmacHelper(u)}(),r.SHA384})}(hc)),hc.exports}var fc={exports:{}},zf;function Xj(){return zf||(zf=1,function(e,t){(function(r,n,s){e.exports=n(he(),al())})(re,function(r){return function(n){var s=r,i=s.lib,a=i.WordArray,l=i.Hasher,c=s.x64,u=c.Word,d=s.algo,h=[],f=[],p=[];(function(){for(var w=1,v=0,x=0;x<24;x++){h[w+5*v]=(x+1)*(x+2)/2%64;var m=v%5,b=(2*w+3*v)%5;w=m,v=b}for(var w=0;w<5;w++)for(var v=0;v<5;v++)f[w+5*v]=v+(2*w+3*v)%5*5;for(var j=1,_=0;_<24;_++){for(var k=0,E=0,D=0;D<7;D++){if(j&1){var S=(1<<D)-1;S<32?E^=1<<S:k^=1<<S-32}j&128?j=j<<1^113:j<<=1}p[_]=u.create(k,E)}})();var g=[];(function(){for(var w=0;w<25;w++)g[w]=u.create()})();var y=d.SHA3=l.extend({cfg:l.cfg.extend({outputLength:512}),_doReset:function(){for(var w=this._state=[],v=0;v<25;v++)w[v]=new u.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(w,v){for(var x=this._state,m=this.blockSize/2,b=0;b<m;b++){var j=w[v+2*b],_=w[v+2*b+1];j=(j<<8|j>>>24)&16711935|(j<<24|j>>>8)&4278255360,_=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360;var k=x[b];k.high^=_,k.low^=j}for(var E=0;E<24;E++){for(var D=0;D<5;D++){for(var S=0,P=0,A=0;A<5;A++){var k=x[D+5*A];S^=k.high,P^=k.low}var B=g[D];B.high=S,B.low=P}for(var D=0;D<5;D++)for(var H=g[(D+4)%5],G=g[(D+1)%5],M=G.high,V=G.low,S=H.high^(M<<1|V>>>31),P=H.low^(V<<1|M>>>31),A=0;A<5;A++){var k=x[D+5*A];k.high^=S,k.low^=P}for(var I=1;I<25;I++){var S,P,k=x[I],W=k.high,q=k.low,C=h[I];C<32?(S=W<<C|q>>>32-C,P=q<<C|W>>>32-C):(S=q<<C-32|W>>>64-C,P=W<<C-32|q>>>64-C);var R=g[f[I]];R.high=S,R.low=P}var z=g[0],O=x[0];z.high=O.high,z.low=O.low;for(var D=0;D<5;D++)for(var A=0;A<5;A++){var I=D+5*A,k=x[I],Q=g[I],J=g[(D+1)%5+5*A],ie=g[(D+2)%5+5*A];k.high=Q.high^~J.high&ie.high,k.low=Q.low^~J.low&ie.low}var k=x[0],X=p[E];k.high^=X.high,k.low^=X.low}},_doFinalize:function(){var w=this._data,v=w.words;this._nDataBytes*8;var x=w.sigBytes*8,m=this.blockSize*32;v[x>>>5]|=1<<24-x%32,v[(n.ceil((x+1)/m)*m>>>5)-1]|=128,w.sigBytes=v.length*4,this._process();for(var b=this._state,j=this.cfg.outputLength/8,_=j/8,k=[],E=0;E<_;E++){var D=b[E],S=D.high,P=D.low;S=(S<<8|S>>>24)&16711935|(S<<24|S>>>8)&4278255360,P=(P<<8|P>>>24)&16711935|(P<<24|P>>>8)&4278255360,k.push(P),k.push(S)}return new a.init(k,j)},clone:function(){for(var w=l.clone.call(this),v=w._state=this._state.slice(0),x=0;x<25;x++)v[x]=v[x].clone();return w}});s.SHA3=l._createHelper(y),s.HmacSHA3=l._createHmacHelper(y)}(Math),r.SHA3})}(fc)),fc.exports}var pc={exports:{}},Vf;function Zj(){return Vf||(Vf=1,function(e,t){(function(r,n){e.exports=n(he())})(re,function(r){/** @preserve
			(c) 2012 by Cédric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(n){var s=r,i=s.lib,a=i.WordArray,l=i.Hasher,c=s.algo,u=a.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),d=a.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),h=a.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),f=a.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),p=a.create([0,1518500249,1859775393,2400959708,2840853838]),g=a.create([1352829926,1548603684,1836072691,2053994217,0]),y=c.RIPEMD160=l.extend({_doReset:function(){this._hash=a.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(_,k){for(var E=0;E<16;E++){var D=k+E,S=_[D];_[D]=(S<<8|S>>>24)&16711935|(S<<24|S>>>8)&4278255360}var P=this._hash.words,A=p.words,B=g.words,H=u.words,G=d.words,M=h.words,V=f.words,I,W,q,C,R,z,O,Q,J,ie;z=I=P[0],O=W=P[1],Q=q=P[2],J=C=P[3],ie=R=P[4];for(var X,E=0;E<80;E+=1)X=I+_[k+H[E]]|0,E<16?X+=w(W,q,C)+A[0]:E<32?X+=v(W,q,C)+A[1]:E<48?X+=x(W,q,C)+A[2]:E<64?X+=m(W,q,C)+A[3]:X+=b(W,q,C)+A[4],X=X|0,X=j(X,M[E]),X=X+R|0,I=R,R=C,C=j(q,10),q=W,W=X,X=z+_[k+G[E]]|0,E<16?X+=b(O,Q,J)+B[0]:E<32?X+=m(O,Q,J)+B[1]:E<48?X+=x(O,Q,J)+B[2]:E<64?X+=v(O,Q,J)+B[3]:X+=w(O,Q,J)+B[4],X=X|0,X=j(X,V[E]),X=X+ie|0,z=ie,ie=J,J=j(Q,10),Q=O,O=X;X=P[1]+q+J|0,P[1]=P[2]+C+ie|0,P[2]=P[3]+R+z|0,P[3]=P[4]+I+O|0,P[4]=P[0]+W+Q|0,P[0]=X},_doFinalize:function(){var _=this._data,k=_.words,E=this._nDataBytes*8,D=_.sigBytes*8;k[D>>>5]|=128<<24-D%32,k[(D+64>>>9<<4)+14]=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,_.sigBytes=(k.length+1)*4,this._process();for(var S=this._hash,P=S.words,A=0;A<5;A++){var B=P[A];P[A]=(B<<8|B>>>24)&16711935|(B<<24|B>>>8)&4278255360}return S},clone:function(){var _=l.clone.call(this);return _._hash=this._hash.clone(),_}});function w(_,k,E){return _^k^E}function v(_,k,E){return _&k|~_&E}function x(_,k,E){return(_|~k)^E}function m(_,k,E){return _&E|k&~E}function b(_,k,E){return _^(k|~E)}function j(_,k){return _<<k|_>>>32-k}s.RIPEMD160=l._createHelper(y),s.HmacRIPEMD160=l._createHmacHelper(y)}(),r.RIPEMD160})}(pc)),pc.exports}var xc={exports:{}},Hf;function vd(){return Hf||(Hf=1,function(e,t){(function(r,n){e.exports=n(he())})(re,function(r){(function(){var n=r,s=n.lib,i=s.Base,a=n.enc,l=a.Utf8,c=n.algo;c.HMAC=i.extend({init:function(u,d){u=this._hasher=new u.init,typeof d=="string"&&(d=l.parse(d));var h=u.blockSize,f=h*4;d.sigBytes>f&&(d=u.finalize(d)),d.clamp();for(var p=this._oKey=d.clone(),g=this._iKey=d.clone(),y=p.words,w=g.words,v=0;v<h;v++)y[v]^=1549556828,w[v]^=909522486;p.sigBytes=g.sigBytes=f,this.reset()},reset:function(){var u=this._hasher;u.reset(),u.update(this._iKey)},update:function(u){return this._hasher.update(u),this},finalize:function(u){var d=this._hasher,h=d.finalize(u);d.reset();var f=d.finalize(this._oKey.clone().concat(h));return f}})})()})}(xc)),xc.exports}var mc={exports:{}},Wf;function Jj(){return Wf||(Wf=1,function(e,t){(function(r,n,s){e.exports=n(he(),gd(),vd())})(re,function(r){return function(){var n=r,s=n.lib,i=s.Base,a=s.WordArray,l=n.algo,c=l.SHA256,u=l.HMAC,d=l.PBKDF2=i.extend({cfg:i.extend({keySize:128/32,hasher:c,iterations:25e4}),init:function(h){this.cfg=this.cfg.extend(h)},compute:function(h,f){for(var p=this.cfg,g=u.create(p.hasher,h),y=a.create(),w=a.create([1]),v=y.words,x=w.words,m=p.keySize,b=p.iterations;v.length<m;){var j=g.update(f).finalize(w);g.reset();for(var _=j.words,k=_.length,E=j,D=1;D<b;D++){E=g.finalize(E),g.reset();for(var S=E.words,P=0;P<k;P++)_[P]^=S[P]}y.concat(j),x[0]++}return y.sigBytes=m*4,y}});n.PBKDF2=function(h,f,p){return d.create(p).compute(h,f)}}(),r.PBKDF2})}(mc)),mc.exports}var gc={exports:{}},qf;function nn(){return qf||(qf=1,function(e,t){(function(r,n,s){e.exports=n(he(),vv(),vd())})(re,function(r){return function(){var n=r,s=n.lib,i=s.Base,a=s.WordArray,l=n.algo,c=l.MD5,u=l.EvpKDF=i.extend({cfg:i.extend({keySize:128/32,hasher:c,iterations:1}),init:function(d){this.cfg=this.cfg.extend(d)},compute:function(d,h){for(var f,p=this.cfg,g=p.hasher.create(),y=a.create(),w=y.words,v=p.keySize,x=p.iterations;w.length<v;){f&&g.update(f),f=g.update(d).finalize(h),g.reset();for(var m=1;m<x;m++)f=g.finalize(f),g.reset();y.concat(f)}return y.sigBytes=v*4,y}});n.EvpKDF=function(d,h,f){return u.create(f).compute(d,h)}}(),r.EvpKDF})}(gc)),gc.exports}var vc={exports:{}},Kf;function Ge(){return Kf||(Kf=1,function(e,t){(function(r,n,s){e.exports=n(he(),nn())})(re,function(r){r.lib.Cipher||function(n){var s=r,i=s.lib,a=i.Base,l=i.WordArray,c=i.BufferedBlockAlgorithm,u=s.enc;u.Utf8;var d=u.Base64,h=s.algo,f=h.EvpKDF,p=i.Cipher=c.extend({cfg:a.extend(),createEncryptor:function(S,P){return this.create(this._ENC_XFORM_MODE,S,P)},createDecryptor:function(S,P){return this.create(this._DEC_XFORM_MODE,S,P)},init:function(S,P,A){this.cfg=this.cfg.extend(A),this._xformMode=S,this._key=P,this.reset()},reset:function(){c.reset.call(this),this._doReset()},process:function(S){return this._append(S),this._process()},finalize:function(S){S&&this._append(S);var P=this._doFinalize();return P},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function S(P){return typeof P=="string"?D:_}return function(P){return{encrypt:function(A,B,H){return S(B).encrypt(P,A,B,H)},decrypt:function(A,B,H){return S(B).decrypt(P,A,B,H)}}}}()});i.StreamCipher=p.extend({_doFinalize:function(){var S=this._process(!0);return S},blockSize:1});var g=s.mode={},y=i.BlockCipherMode=a.extend({createEncryptor:function(S,P){return this.Encryptor.create(S,P)},createDecryptor:function(S,P){return this.Decryptor.create(S,P)},init:function(S,P){this._cipher=S,this._iv=P}}),w=g.CBC=function(){var S=y.extend();S.Encryptor=S.extend({processBlock:function(A,B){var H=this._cipher,G=H.blockSize;P.call(this,A,B,G),H.encryptBlock(A,B),this._prevBlock=A.slice(B,B+G)}}),S.Decryptor=S.extend({processBlock:function(A,B){var H=this._cipher,G=H.blockSize,M=A.slice(B,B+G);H.decryptBlock(A,B),P.call(this,A,B,G),this._prevBlock=M}});function P(A,B,H){var G,M=this._iv;M?(G=M,this._iv=n):G=this._prevBlock;for(var V=0;V<H;V++)A[B+V]^=G[V]}return S}(),v=s.pad={},x=v.Pkcs7={pad:function(S,P){for(var A=P*4,B=A-S.sigBytes%A,H=B<<24|B<<16|B<<8|B,G=[],M=0;M<B;M+=4)G.push(H);var V=l.create(G,B);S.concat(V)},unpad:function(S){var P=S.words[S.sigBytes-1>>>2]&255;S.sigBytes-=P}};i.BlockCipher=p.extend({cfg:p.cfg.extend({mode:w,padding:x}),reset:function(){var S;p.reset.call(this);var P=this.cfg,A=P.iv,B=P.mode;this._xformMode==this._ENC_XFORM_MODE?S=B.createEncryptor:(S=B.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==S?this._mode.init(this,A&&A.words):(this._mode=S.call(B,this,A&&A.words),this._mode.__creator=S)},_doProcessBlock:function(S,P){this._mode.processBlock(S,P)},_doFinalize:function(){var S,P=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(P.pad(this._data,this.blockSize),S=this._process(!0)):(S=this._process(!0),P.unpad(S)),S},blockSize:128/32});var m=i.CipherParams=a.extend({init:function(S){this.mixIn(S)},toString:function(S){return(S||this.formatter).stringify(this)}}),b=s.format={},j=b.OpenSSL={stringify:function(S){var P,A=S.ciphertext,B=S.salt;return B?P=l.create([1398893684,1701076831]).concat(B).concat(A):P=A,P.toString(d)},parse:function(S){var P,A=d.parse(S),B=A.words;return B[0]==1398893684&&B[1]==1701076831&&(P=l.create(B.slice(2,4)),B.splice(0,4),A.sigBytes-=16),m.create({ciphertext:A,salt:P})}},_=i.SerializableCipher=a.extend({cfg:a.extend({format:j}),encrypt:function(S,P,A,B){B=this.cfg.extend(B);var H=S.createEncryptor(A,B),G=H.finalize(P),M=H.cfg;return m.create({ciphertext:G,key:A,iv:M.iv,algorithm:S,mode:M.mode,padding:M.padding,blockSize:S.blockSize,formatter:B.format})},decrypt:function(S,P,A,B){B=this.cfg.extend(B),P=this._parse(P,B.format);var H=S.createDecryptor(A,B).finalize(P.ciphertext);return H},_parse:function(S,P){return typeof S=="string"?P.parse(S,this):S}}),k=s.kdf={},E=k.OpenSSL={execute:function(S,P,A,B,H){if(B||(B=l.random(64/8)),H)var G=f.create({keySize:P+A,hasher:H}).compute(S,B);else var G=f.create({keySize:P+A}).compute(S,B);var M=l.create(G.words.slice(P),A*4);return G.sigBytes=P*4,m.create({key:G,iv:M,salt:B})}},D=i.PasswordBasedCipher=_.extend({cfg:_.cfg.extend({kdf:E}),encrypt:function(S,P,A,B){B=this.cfg.extend(B);var H=B.kdf.execute(A,S.keySize,S.ivSize,B.salt,B.hasher);B.iv=H.iv;var G=_.encrypt.call(this,S,P,H.key,B);return G.mixIn(H),G},decrypt:function(S,P,A,B){B=this.cfg.extend(B),P=this._parse(P,B.format);var H=B.kdf.execute(A,S.keySize,S.ivSize,P.salt,B.hasher);B.iv=H.iv;var G=_.decrypt.call(this,S,P,H.key,B);return G}})}()})}(vc)),vc.exports}var yc={exports:{}},Gf;function eC(){return Gf||(Gf=1,function(e,t){(function(r,n,s){e.exports=n(he(),Ge())})(re,function(r){return r.mode.CFB=function(){var n=r.lib.BlockCipherMode.extend();n.Encryptor=n.extend({processBlock:function(i,a){var l=this._cipher,c=l.blockSize;s.call(this,i,a,c,l),this._prevBlock=i.slice(a,a+c)}}),n.Decryptor=n.extend({processBlock:function(i,a){var l=this._cipher,c=l.blockSize,u=i.slice(a,a+c);s.call(this,i,a,c,l),this._prevBlock=u}});function s(i,a,l,c){var u,d=this._iv;d?(u=d.slice(0),this._iv=void 0):u=this._prevBlock,c.encryptBlock(u,0);for(var h=0;h<l;h++)i[a+h]^=u[h]}return n}(),r.mode.CFB})}(yc)),yc.exports}var wc={exports:{}},Yf;function tC(){return Yf||(Yf=1,function(e,t){(function(r,n,s){e.exports=n(he(),Ge())})(re,function(r){return r.mode.CTR=function(){var n=r.lib.BlockCipherMode.extend(),s=n.Encryptor=n.extend({processBlock:function(i,a){var l=this._cipher,c=l.blockSize,u=this._iv,d=this._counter;u&&(d=this._counter=u.slice(0),this._iv=void 0);var h=d.slice(0);l.encryptBlock(h,0),d[c-1]=d[c-1]+1|0;for(var f=0;f<c;f++)i[a+f]^=h[f]}});return n.Decryptor=s,n}(),r.mode.CTR})}(wc)),wc.exports}var bc={exports:{}},Qf;function rC(){return Qf||(Qf=1,function(e,t){(function(r,n,s){e.exports=n(he(),Ge())})(re,function(r){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return r.mode.CTRGladman=function(){var n=r.lib.BlockCipherMode.extend();function s(l){if((l>>24&255)===255){var c=l>>16&255,u=l>>8&255,d=l&255;c===255?(c=0,u===255?(u=0,d===255?d=0:++d):++u):++c,l=0,l+=c<<16,l+=u<<8,l+=d}else l+=1<<24;return l}function i(l){return(l[0]=s(l[0]))===0&&(l[1]=s(l[1])),l}var a=n.Encryptor=n.extend({processBlock:function(l,c){var u=this._cipher,d=u.blockSize,h=this._iv,f=this._counter;h&&(f=this._counter=h.slice(0),this._iv=void 0),i(f);var p=f.slice(0);u.encryptBlock(p,0);for(var g=0;g<d;g++)l[c+g]^=p[g]}});return n.Decryptor=a,n}(),r.mode.CTRGladman})}(bc)),bc.exports}var jc={exports:{}},Xf;function nC(){return Xf||(Xf=1,function(e,t){(function(r,n,s){e.exports=n(he(),Ge())})(re,function(r){return r.mode.OFB=function(){var n=r.lib.BlockCipherMode.extend(),s=n.Encryptor=n.extend({processBlock:function(i,a){var l=this._cipher,c=l.blockSize,u=this._iv,d=this._keystream;u&&(d=this._keystream=u.slice(0),this._iv=void 0),l.encryptBlock(d,0);for(var h=0;h<c;h++)i[a+h]^=d[h]}});return n.Decryptor=s,n}(),r.mode.OFB})}(jc)),jc.exports}var Cc={exports:{}},Zf;function sC(){return Zf||(Zf=1,function(e,t){(function(r,n,s){e.exports=n(he(),Ge())})(re,function(r){return r.mode.ECB=function(){var n=r.lib.BlockCipherMode.extend();return n.Encryptor=n.extend({processBlock:function(s,i){this._cipher.encryptBlock(s,i)}}),n.Decryptor=n.extend({processBlock:function(s,i){this._cipher.decryptBlock(s,i)}}),n}(),r.mode.ECB})}(Cc)),Cc.exports}var _c={exports:{}},Jf;function iC(){return Jf||(Jf=1,function(e,t){(function(r,n,s){e.exports=n(he(),Ge())})(re,function(r){return r.pad.AnsiX923={pad:function(n,s){var i=n.sigBytes,a=s*4,l=a-i%a,c=i+l-1;n.clamp(),n.words[c>>>2]|=l<<24-c%4*8,n.sigBytes+=l},unpad:function(n){var s=n.words[n.sigBytes-1>>>2]&255;n.sigBytes-=s}},r.pad.Ansix923})}(_c)),_c.exports}var kc={exports:{}},ep;function aC(){return ep||(ep=1,function(e,t){(function(r,n,s){e.exports=n(he(),Ge())})(re,function(r){return r.pad.Iso10126={pad:function(n,s){var i=s*4,a=i-n.sigBytes%i;n.concat(r.lib.WordArray.random(a-1)).concat(r.lib.WordArray.create([a<<24],1))},unpad:function(n){var s=n.words[n.sigBytes-1>>>2]&255;n.sigBytes-=s}},r.pad.Iso10126})}(kc)),kc.exports}var Ec={exports:{}},tp;function oC(){return tp||(tp=1,function(e,t){(function(r,n,s){e.exports=n(he(),Ge())})(re,function(r){return r.pad.Iso97971={pad:function(n,s){n.concat(r.lib.WordArray.create([2147483648],1)),r.pad.ZeroPadding.pad(n,s)},unpad:function(n){r.pad.ZeroPadding.unpad(n),n.sigBytes--}},r.pad.Iso97971})}(Ec)),Ec.exports}var Nc={exports:{}},rp;function lC(){return rp||(rp=1,function(e,t){(function(r,n,s){e.exports=n(he(),Ge())})(re,function(r){return r.pad.ZeroPadding={pad:function(n,s){var i=s*4;n.clamp(),n.sigBytes+=i-(n.sigBytes%i||i)},unpad:function(n){for(var s=n.words,i=n.sigBytes-1,i=n.sigBytes-1;i>=0;i--)if(s[i>>>2]>>>24-i%4*8&255){n.sigBytes=i+1;break}}},r.pad.ZeroPadding})}(Nc)),Nc.exports}var Sc={exports:{}},np;function cC(){return np||(np=1,function(e,t){(function(r,n,s){e.exports=n(he(),Ge())})(re,function(r){return r.pad.NoPadding={pad:function(){},unpad:function(){}},r.pad.NoPadding})}(Sc)),Sc.exports}var Ac={exports:{}},sp;function uC(){return sp||(sp=1,function(e,t){(function(r,n,s){e.exports=n(he(),Ge())})(re,function(r){return function(n){var s=r,i=s.lib,a=i.CipherParams,l=s.enc,c=l.Hex,u=s.format;u.Hex={stringify:function(d){return d.ciphertext.toString(c)},parse:function(d){var h=c.parse(d);return a.create({ciphertext:h})}}}(),r.format.Hex})}(Ac)),Ac.exports}var Pc={exports:{}},ip;function dC(){return ip||(ip=1,function(e,t){(function(r,n,s){e.exports=n(he(),Rn(),Ln(),nn(),Ge())})(re,function(r){return function(){var n=r,s=n.lib,i=s.BlockCipher,a=n.algo,l=[],c=[],u=[],d=[],h=[],f=[],p=[],g=[],y=[],w=[];(function(){for(var m=[],b=0;b<256;b++)b<128?m[b]=b<<1:m[b]=b<<1^283;for(var j=0,_=0,b=0;b<256;b++){var k=_^_<<1^_<<2^_<<3^_<<4;k=k>>>8^k&255^99,l[j]=k,c[k]=j;var E=m[j],D=m[E],S=m[D],P=m[k]*257^k*16843008;u[j]=P<<24|P>>>8,d[j]=P<<16|P>>>16,h[j]=P<<8|P>>>24,f[j]=P;var P=S*16843009^D*65537^E*257^j*16843008;p[k]=P<<24|P>>>8,g[k]=P<<16|P>>>16,y[k]=P<<8|P>>>24,w[k]=P,j?(j=E^m[m[m[S^E]]],_^=m[m[_]]):j=_=1}})();var v=[0,1,2,4,8,16,32,64,128,27,54],x=a.AES=i.extend({_doReset:function(){var m;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var b=this._keyPriorReset=this._key,j=b.words,_=b.sigBytes/4,k=this._nRounds=_+6,E=(k+1)*4,D=this._keySchedule=[],S=0;S<E;S++)S<_?D[S]=j[S]:(m=D[S-1],S%_?_>6&&S%_==4&&(m=l[m>>>24]<<24|l[m>>>16&255]<<16|l[m>>>8&255]<<8|l[m&255]):(m=m<<8|m>>>24,m=l[m>>>24]<<24|l[m>>>16&255]<<16|l[m>>>8&255]<<8|l[m&255],m^=v[S/_|0]<<24),D[S]=D[S-_]^m);for(var P=this._invKeySchedule=[],A=0;A<E;A++){var S=E-A;if(A%4)var m=D[S];else var m=D[S-4];A<4||S<=4?P[A]=m:P[A]=p[l[m>>>24]]^g[l[m>>>16&255]]^y[l[m>>>8&255]]^w[l[m&255]]}}},encryptBlock:function(m,b){this._doCryptBlock(m,b,this._keySchedule,u,d,h,f,l)},decryptBlock:function(m,b){var j=m[b+1];m[b+1]=m[b+3],m[b+3]=j,this._doCryptBlock(m,b,this._invKeySchedule,p,g,y,w,c);var j=m[b+1];m[b+1]=m[b+3],m[b+3]=j},_doCryptBlock:function(m,b,j,_,k,E,D,S){for(var P=this._nRounds,A=m[b]^j[0],B=m[b+1]^j[1],H=m[b+2]^j[2],G=m[b+3]^j[3],M=4,V=1;V<P;V++){var I=_[A>>>24]^k[B>>>16&255]^E[H>>>8&255]^D[G&255]^j[M++],W=_[B>>>24]^k[H>>>16&255]^E[G>>>8&255]^D[A&255]^j[M++],q=_[H>>>24]^k[G>>>16&255]^E[A>>>8&255]^D[B&255]^j[M++],C=_[G>>>24]^k[A>>>16&255]^E[B>>>8&255]^D[H&255]^j[M++];A=I,B=W,H=q,G=C}var I=(S[A>>>24]<<24|S[B>>>16&255]<<16|S[H>>>8&255]<<8|S[G&255])^j[M++],W=(S[B>>>24]<<24|S[H>>>16&255]<<16|S[G>>>8&255]<<8|S[A&255])^j[M++],q=(S[H>>>24]<<24|S[G>>>16&255]<<16|S[A>>>8&255]<<8|S[B&255])^j[M++],C=(S[G>>>24]<<24|S[A>>>16&255]<<16|S[B>>>8&255]<<8|S[H&255])^j[M++];m[b]=I,m[b+1]=W,m[b+2]=q,m[b+3]=C},keySize:256/32});n.AES=i._createHelper(x)}(),r.AES})}(Pc)),Pc.exports}var Dc={exports:{}},ap;function hC(){return ap||(ap=1,function(e,t){(function(r,n,s){e.exports=n(he(),Rn(),Ln(),nn(),Ge())})(re,function(r){return function(){var n=r,s=n.lib,i=s.WordArray,a=s.BlockCipher,l=n.algo,c=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],u=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],d=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],h=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],f=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],p=l.DES=a.extend({_doReset:function(){for(var v=this._key,x=v.words,m=[],b=0;b<56;b++){var j=c[b]-1;m[b]=x[j>>>5]>>>31-j%32&1}for(var _=this._subKeys=[],k=0;k<16;k++){for(var E=_[k]=[],D=d[k],b=0;b<24;b++)E[b/6|0]|=m[(u[b]-1+D)%28]<<31-b%6,E[4+(b/6|0)]|=m[28+(u[b+24]-1+D)%28]<<31-b%6;E[0]=E[0]<<1|E[0]>>>31;for(var b=1;b<7;b++)E[b]=E[b]>>>(b-1)*4+3;E[7]=E[7]<<5|E[7]>>>27}for(var S=this._invSubKeys=[],b=0;b<16;b++)S[b]=_[15-b]},encryptBlock:function(v,x){this._doCryptBlock(v,x,this._subKeys)},decryptBlock:function(v,x){this._doCryptBlock(v,x,this._invSubKeys)},_doCryptBlock:function(v,x,m){this._lBlock=v[x],this._rBlock=v[x+1],g.call(this,4,252645135),g.call(this,16,65535),y.call(this,2,858993459),y.call(this,8,16711935),g.call(this,1,1431655765);for(var b=0;b<16;b++){for(var j=m[b],_=this._lBlock,k=this._rBlock,E=0,D=0;D<8;D++)E|=h[D][((k^j[D])&f[D])>>>0];this._lBlock=k,this._rBlock=_^E}var S=this._lBlock;this._lBlock=this._rBlock,this._rBlock=S,g.call(this,1,1431655765),y.call(this,8,16711935),y.call(this,2,858993459),g.call(this,16,65535),g.call(this,4,252645135),v[x]=this._lBlock,v[x+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function g(v,x){var m=(this._lBlock>>>v^this._rBlock)&x;this._rBlock^=m,this._lBlock^=m<<v}function y(v,x){var m=(this._rBlock>>>v^this._lBlock)&x;this._lBlock^=m,this._rBlock^=m<<v}n.DES=a._createHelper(p);var w=l.TripleDES=a.extend({_doReset:function(){var v=this._key,x=v.words;if(x.length!==2&&x.length!==4&&x.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var m=x.slice(0,2),b=x.length<4?x.slice(0,2):x.slice(2,4),j=x.length<6?x.slice(0,2):x.slice(4,6);this._des1=p.createEncryptor(i.create(m)),this._des2=p.createEncryptor(i.create(b)),this._des3=p.createEncryptor(i.create(j))},encryptBlock:function(v,x){this._des1.encryptBlock(v,x),this._des2.decryptBlock(v,x),this._des3.encryptBlock(v,x)},decryptBlock:function(v,x){this._des3.decryptBlock(v,x),this._des2.encryptBlock(v,x),this._des1.decryptBlock(v,x)},keySize:192/32,ivSize:64/32,blockSize:64/32});n.TripleDES=a._createHelper(w)}(),r.TripleDES})}(Dc)),Dc.exports}var Bc={exports:{}},op;function fC(){return op||(op=1,function(e,t){(function(r,n,s){e.exports=n(he(),Rn(),Ln(),nn(),Ge())})(re,function(r){return function(){var n=r,s=n.lib,i=s.StreamCipher,a=n.algo,l=a.RC4=i.extend({_doReset:function(){for(var d=this._key,h=d.words,f=d.sigBytes,p=this._S=[],g=0;g<256;g++)p[g]=g;for(var g=0,y=0;g<256;g++){var w=g%f,v=h[w>>>2]>>>24-w%4*8&255;y=(y+p[g]+v)%256;var x=p[g];p[g]=p[y],p[y]=x}this._i=this._j=0},_doProcessBlock:function(d,h){d[h]^=c.call(this)},keySize:256/32,ivSize:0});function c(){for(var d=this._S,h=this._i,f=this._j,p=0,g=0;g<4;g++){h=(h+1)%256,f=(f+d[h])%256;var y=d[h];d[h]=d[f],d[f]=y,p|=d[(d[h]+d[f])%256]<<24-g*8}return this._i=h,this._j=f,p}n.RC4=i._createHelper(l);var u=a.RC4Drop=l.extend({cfg:l.cfg.extend({drop:192}),_doReset:function(){l._doReset.call(this);for(var d=this.cfg.drop;d>0;d--)c.call(this)}});n.RC4Drop=i._createHelper(u)}(),r.RC4})}(Bc)),Bc.exports}var Fc={exports:{}},lp;function pC(){return lp||(lp=1,function(e,t){(function(r,n,s){e.exports=n(he(),Rn(),Ln(),nn(),Ge())})(re,function(r){return function(){var n=r,s=n.lib,i=s.StreamCipher,a=n.algo,l=[],c=[],u=[],d=a.Rabbit=i.extend({_doReset:function(){for(var f=this._key.words,p=this.cfg.iv,g=0;g<4;g++)f[g]=(f[g]<<8|f[g]>>>24)&16711935|(f[g]<<24|f[g]>>>8)&4278255360;var y=this._X=[f[0],f[3]<<16|f[2]>>>16,f[1],f[0]<<16|f[3]>>>16,f[2],f[1]<<16|f[0]>>>16,f[3],f[2]<<16|f[1]>>>16],w=this._C=[f[2]<<16|f[2]>>>16,f[0]&4294901760|f[1]&65535,f[3]<<16|f[3]>>>16,f[1]&4294901760|f[2]&65535,f[0]<<16|f[0]>>>16,f[2]&4294901760|f[3]&65535,f[1]<<16|f[1]>>>16,f[3]&4294901760|f[0]&65535];this._b=0;for(var g=0;g<4;g++)h.call(this);for(var g=0;g<8;g++)w[g]^=y[g+4&7];if(p){var v=p.words,x=v[0],m=v[1],b=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,j=(m<<8|m>>>24)&16711935|(m<<24|m>>>8)&4278255360,_=b>>>16|j&4294901760,k=j<<16|b&65535;w[0]^=b,w[1]^=_,w[2]^=j,w[3]^=k,w[4]^=b,w[5]^=_,w[6]^=j,w[7]^=k;for(var g=0;g<4;g++)h.call(this)}},_doProcessBlock:function(f,p){var g=this._X;h.call(this),l[0]=g[0]^g[5]>>>16^g[3]<<16,l[1]=g[2]^g[7]>>>16^g[5]<<16,l[2]=g[4]^g[1]>>>16^g[7]<<16,l[3]=g[6]^g[3]>>>16^g[1]<<16;for(var y=0;y<4;y++)l[y]=(l[y]<<8|l[y]>>>24)&16711935|(l[y]<<24|l[y]>>>8)&4278255360,f[p+y]^=l[y]},blockSize:128/32,ivSize:64/32});function h(){for(var f=this._X,p=this._C,g=0;g<8;g++)c[g]=p[g];p[0]=p[0]+1295307597+this._b|0,p[1]=p[1]+3545052371+(p[0]>>>0<c[0]>>>0?1:0)|0,p[2]=p[2]+886263092+(p[1]>>>0<c[1]>>>0?1:0)|0,p[3]=p[3]+1295307597+(p[2]>>>0<c[2]>>>0?1:0)|0,p[4]=p[4]+3545052371+(p[3]>>>0<c[3]>>>0?1:0)|0,p[5]=p[5]+886263092+(p[4]>>>0<c[4]>>>0?1:0)|0,p[6]=p[6]+1295307597+(p[5]>>>0<c[5]>>>0?1:0)|0,p[7]=p[7]+3545052371+(p[6]>>>0<c[6]>>>0?1:0)|0,this._b=p[7]>>>0<c[7]>>>0?1:0;for(var g=0;g<8;g++){var y=f[g]+p[g],w=y&65535,v=y>>>16,x=((w*w>>>17)+w*v>>>15)+v*v,m=((y&4294901760)*y|0)+((y&65535)*y|0);u[g]=x^m}f[0]=u[0]+(u[7]<<16|u[7]>>>16)+(u[6]<<16|u[6]>>>16)|0,f[1]=u[1]+(u[0]<<8|u[0]>>>24)+u[7]|0,f[2]=u[2]+(u[1]<<16|u[1]>>>16)+(u[0]<<16|u[0]>>>16)|0,f[3]=u[3]+(u[2]<<8|u[2]>>>24)+u[1]|0,f[4]=u[4]+(u[3]<<16|u[3]>>>16)+(u[2]<<16|u[2]>>>16)|0,f[5]=u[5]+(u[4]<<8|u[4]>>>24)+u[3]|0,f[6]=u[6]+(u[5]<<16|u[5]>>>16)+(u[4]<<16|u[4]>>>16)|0,f[7]=u[7]+(u[6]<<8|u[6]>>>24)+u[5]|0}n.Rabbit=i._createHelper(d)}(),r.Rabbit})}(Fc)),Fc.exports}var Tc={exports:{}},cp;function xC(){return cp||(cp=1,function(e,t){(function(r,n,s){e.exports=n(he(),Rn(),Ln(),nn(),Ge())})(re,function(r){return function(){var n=r,s=n.lib,i=s.StreamCipher,a=n.algo,l=[],c=[],u=[],d=a.RabbitLegacy=i.extend({_doReset:function(){var f=this._key.words,p=this.cfg.iv,g=this._X=[f[0],f[3]<<16|f[2]>>>16,f[1],f[0]<<16|f[3]>>>16,f[2],f[1]<<16|f[0]>>>16,f[3],f[2]<<16|f[1]>>>16],y=this._C=[f[2]<<16|f[2]>>>16,f[0]&4294901760|f[1]&65535,f[3]<<16|f[3]>>>16,f[1]&4294901760|f[2]&65535,f[0]<<16|f[0]>>>16,f[2]&4294901760|f[3]&65535,f[1]<<16|f[1]>>>16,f[3]&4294901760|f[0]&65535];this._b=0;for(var w=0;w<4;w++)h.call(this);for(var w=0;w<8;w++)y[w]^=g[w+4&7];if(p){var v=p.words,x=v[0],m=v[1],b=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,j=(m<<8|m>>>24)&16711935|(m<<24|m>>>8)&4278255360,_=b>>>16|j&4294901760,k=j<<16|b&65535;y[0]^=b,y[1]^=_,y[2]^=j,y[3]^=k,y[4]^=b,y[5]^=_,y[6]^=j,y[7]^=k;for(var w=0;w<4;w++)h.call(this)}},_doProcessBlock:function(f,p){var g=this._X;h.call(this),l[0]=g[0]^g[5]>>>16^g[3]<<16,l[1]=g[2]^g[7]>>>16^g[5]<<16,l[2]=g[4]^g[1]>>>16^g[7]<<16,l[3]=g[6]^g[3]>>>16^g[1]<<16;for(var y=0;y<4;y++)l[y]=(l[y]<<8|l[y]>>>24)&16711935|(l[y]<<24|l[y]>>>8)&4278255360,f[p+y]^=l[y]},blockSize:128/32,ivSize:64/32});function h(){for(var f=this._X,p=this._C,g=0;g<8;g++)c[g]=p[g];p[0]=p[0]+1295307597+this._b|0,p[1]=p[1]+3545052371+(p[0]>>>0<c[0]>>>0?1:0)|0,p[2]=p[2]+886263092+(p[1]>>>0<c[1]>>>0?1:0)|0,p[3]=p[3]+1295307597+(p[2]>>>0<c[2]>>>0?1:0)|0,p[4]=p[4]+3545052371+(p[3]>>>0<c[3]>>>0?1:0)|0,p[5]=p[5]+886263092+(p[4]>>>0<c[4]>>>0?1:0)|0,p[6]=p[6]+1295307597+(p[5]>>>0<c[5]>>>0?1:0)|0,p[7]=p[7]+3545052371+(p[6]>>>0<c[6]>>>0?1:0)|0,this._b=p[7]>>>0<c[7]>>>0?1:0;for(var g=0;g<8;g++){var y=f[g]+p[g],w=y&65535,v=y>>>16,x=((w*w>>>17)+w*v>>>15)+v*v,m=((y&4294901760)*y|0)+((y&65535)*y|0);u[g]=x^m}f[0]=u[0]+(u[7]<<16|u[7]>>>16)+(u[6]<<16|u[6]>>>16)|0,f[1]=u[1]+(u[0]<<8|u[0]>>>24)+u[7]|0,f[2]=u[2]+(u[1]<<16|u[1]>>>16)+(u[0]<<16|u[0]>>>16)|0,f[3]=u[3]+(u[2]<<8|u[2]>>>24)+u[1]|0,f[4]=u[4]+(u[3]<<16|u[3]>>>16)+(u[2]<<16|u[2]>>>16)|0,f[5]=u[5]+(u[4]<<8|u[4]>>>24)+u[3]|0,f[6]=u[6]+(u[5]<<16|u[5]>>>16)+(u[4]<<16|u[4]>>>16)|0,f[7]=u[7]+(u[6]<<8|u[6]>>>24)+u[5]|0}n.RabbitLegacy=i._createHelper(d)}(),r.RabbitLegacy})}(Tc)),Tc.exports}var Rc={exports:{}},up;function mC(){return up||(up=1,function(e,t){(function(r,n,s){e.exports=n(he(),Rn(),Ln(),nn(),Ge())})(re,function(r){return function(){var n=r,s=n.lib,i=s.BlockCipher,a=n.algo;const l=16,c=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],u=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var d={pbox:[],sbox:[]};function h(w,v){let x=v>>24&255,m=v>>16&255,b=v>>8&255,j=v&255,_=w.sbox[0][x]+w.sbox[1][m];return _=_^w.sbox[2][b],_=_+w.sbox[3][j],_}function f(w,v,x){let m=v,b=x,j;for(let _=0;_<l;++_)m=m^w.pbox[_],b=h(w,m)^b,j=m,m=b,b=j;return j=m,m=b,b=j,b=b^w.pbox[l],m=m^w.pbox[l+1],{left:m,right:b}}function p(w,v,x){let m=v,b=x,j;for(let _=l+1;_>1;--_)m=m^w.pbox[_],b=h(w,m)^b,j=m,m=b,b=j;return j=m,m=b,b=j,b=b^w.pbox[1],m=m^w.pbox[0],{left:m,right:b}}function g(w,v,x){for(let k=0;k<4;k++){w.sbox[k]=[];for(let E=0;E<256;E++)w.sbox[k][E]=u[k][E]}let m=0;for(let k=0;k<l+2;k++)w.pbox[k]=c[k]^v[m],m++,m>=x&&(m=0);let b=0,j=0,_=0;for(let k=0;k<l+2;k+=2)_=f(w,b,j),b=_.left,j=_.right,w.pbox[k]=b,w.pbox[k+1]=j;for(let k=0;k<4;k++)for(let E=0;E<256;E+=2)_=f(w,b,j),b=_.left,j=_.right,w.sbox[k][E]=b,w.sbox[k][E+1]=j;return!0}var y=a.Blowfish=i.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var w=this._keyPriorReset=this._key,v=w.words,x=w.sigBytes/4;g(d,v,x)}},encryptBlock:function(w,v){var x=f(d,w[v],w[v+1]);w[v]=x.left,w[v+1]=x.right},decryptBlock:function(w,v){var x=p(d,w[v],w[v+1]);w[v]=x.left,w[v+1]=x.right},blockSize:64/32,keySize:128/32,ivSize:64/32});n.Blowfish=i._createHelper(y)}(),r.Blowfish})}(Rc)),Rc.exports}(function(e,t){(function(r,n,s){e.exports=n(he(),al(),qj(),Kj(),Rn(),Gj(),Ln(),vv(),gd(),Yj(),yv(),Qj(),Xj(),Zj(),vd(),Jj(),nn(),Ge(),eC(),tC(),rC(),nC(),sC(),iC(),aC(),oC(),lC(),cC(),uC(),dC(),hC(),fC(),pC(),xC(),mC())})(re,function(r){return r})})($j);const gC="https://cggsodnyilnhlrtuzdkr.supabase.co",Lc="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNnZ3NvZG55aWxuaGxydHV6ZGtyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTA0NTQ1MzksImV4cCI6MjA2NjAzMDUzOX0.I3j8Wyt1oeH57A3mN_MmcpMcHw9xS2zNqXWTTIYBF08",ae=Uj(gC,Lc,{db:{schema:"public"},auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0},global:{headers:{apikey:Lc,Authorization:`Bearer ${Lc}`}}}),yd=async(e,t,r)=>{try{const{data:n,error:s}=await ae.storage.from(t).upload(r,e,{cacheControl:"3600",upsert:!0});if(s)throw s;const{data:{publicUrl:i}}=ae.storage.from(t).getPublicUrl(n.path);return i}catch(n){return console.error("Error uploading image:",n),null}},cs=class cs{static storeTokens(t){try{localStorage.setItem(this.ACCESS_TOKEN_KEY,t.accessToken),localStorage.setItem(this.REFRESH_TOKEN_KEY,t.refreshToken),localStorage.setItem(this.EXPIRES_AT_KEY,t.expiresAt.toString()),localStorage.setItem(this.USER_ID_KEY,t.userId)}catch(r){console.error("Failed to store tokens:",r)}}static getTokens(){try{const t=localStorage.getItem(this.ACCESS_TOKEN_KEY),r=localStorage.getItem(this.REFRESH_TOKEN_KEY),n=localStorage.getItem(this.EXPIRES_AT_KEY),s=localStorage.getItem(this.USER_ID_KEY);return!t||!r||!n||!s?null:{accessToken:t,refreshToken:r,expiresAt:parseInt(n),userId:s}}catch(t){return console.error("Failed to get tokens:",t),null}}static clearTokens(){try{localStorage.removeItem(this.ACCESS_TOKEN_KEY),localStorage.removeItem(this.REFRESH_TOKEN_KEY),localStorage.removeItem(this.EXPIRES_AT_KEY),localStorage.removeItem(this.USER_ID_KEY)}catch(t){console.error("Failed to clear tokens:",t)}}static isTokenExpired(t){return Date.now()>=t}static needsRefresh(t){const r=Date.now()+3e5;return t<=r}static generateTokens(t){const r=this.generateToken(),n=this.generateToken(),s=Date.now()+7*24*60*60*1e3;return{accessToken:r,refreshToken:n,expiresAt:s,userId:t}}static generateToken(){const t=new Uint8Array(32);return crypto.getRandomValues(t),Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}static isValidTokenFormat(t){return typeof t=="string"&&t.length===64&&/^[a-f0-9]+$/.test(t)}};cs.ACCESS_TOKEN_KEY="verse_access_token",cs.REFRESH_TOKEN_KEY="verse_refresh_token",cs.EXPIRES_AT_KEY="verse_expires_at",cs.USER_ID_KEY="verse_user_id";let me=cs;const wv=N.createContext(void 0),Pe=()=>{const e=N.useContext(wv);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},vC=({children:e})=>{const[t,r]=N.useState({isAuthenticated:!1,user:null,loading:!0});N.useEffect(()=>{let p;return t.isAuthenticated&&(p=setInterval(()=>{n()},5*60*1e3)),()=>{p&&clearInterval(p)}},[t.isAuthenticated]),N.useEffect(()=>{let p=!0;(async()=>{try{const w=me.getTokens();if(w){if(me.isTokenExpired(w.expiresAt)){console.log("Stored token expired, clearing..."),me.clearTokens(),p&&r({isAuthenticated:!1,user:null,loading:!1});return}await s(w.userId);return}const{data:{session:v},error:x}=await ae.auth.getSession();if(x){console.error("Supabase session check error:",x),p&&r({isAuthenticated:!1,user:null,loading:!1});return}if(v!=null&&v.user&&p){const m=me.generateTokens(v.user.id);me.storeTokens(m),await s(v.user.id)}else p&&r({isAuthenticated:!1,user:null,loading:!1})}catch(w){console.error("Auth initialization failed:",w),p&&(me.clearTokens(),r({isAuthenticated:!1,user:null,loading:!1}))}})();const{data:{subscription:y}}=ae.auth.onAuthStateChange(async(w,v)=>{if(p)try{if(w==="SIGNED_IN"&&(v!=null&&v.user)){const x=me.generateTokens(v.user.id);me.storeTokens(x),await s(v.user.id)}else w==="SIGNED_OUT"&&(me.clearTokens(),r({isAuthenticated:!1,user:null,loading:!1}))}catch(x){console.error("Auth state change error:",x),me.clearTokens(),r({isAuthenticated:!1,user:null,loading:!1})}});return()=>{p=!1,y.unsubscribe()}},[]);const n=async()=>{const p=me.getTokens();if(!p){console.log("No stored tokens found"),await c();return}if(me.isTokenExpired(p.expiresAt)){console.log("Token expired, logging out"),await c();return}if(me.needsRefresh(p.expiresAt)){console.log("Token needs refresh, generating new tokens");const g=me.generateTokens(p.userId);me.storeTokens(g)}},s=async p=>{var g,y;try{const{data:w,error:v}=await ae.from("profiles").select(`
          *,
          characters(id),
          privacy_settings(*)
        `).eq("id",p).single();if(v){console.error("Profile load error:",v),me.clearTokens(),r({isAuthenticated:!1,user:null,loading:!1});return}const x={id:w.id,username:w.username,displayName:w.display_name,email:w.email,avatar:w.avatar_url||"https://images.pexels.com/photos/1239291/pexels-photo-1239291.jpeg?auto=compress&cs=tinysrgb&w=150&h=150",headerImage:w.header_image_url||"https://images.pexels.com/photos/1323550/pexels-photo-1323550.jpeg?auto=compress&cs=tinysrgb&w=800&h=300",bio:w.bio,writersTag:w.writers_tag,twoFactorEnabled:w.two_factor_enabled,characters:((g=w.characters)==null?void 0:g.map(m=>m.id))||[],followers:w.followers||[],following:w.following||[],createdAt:new Date(w.created_at),role:w.role||"user",privacySettings:(y=w.privacy_settings)!=null&&y[0]?{profileVisibility:w.privacy_settings[0].profile_visibility,messagePermissions:w.privacy_settings[0].message_permissions,tagNotifications:w.privacy_settings[0].tag_notifications,directMessageNotifications:w.privacy_settings[0].direct_message_notifications}:{profileVisibility:"public",messagePermissions:"everyone",tagNotifications:!0,directMessageNotifications:!0}};r({isAuthenticated:!0,user:x,loading:!1})}catch(w){console.error("Error loading user profile:",w),me.clearTokens(),r({isAuthenticated:!1,user:null,loading:!1})}},i=async()=>{await n()},a=async(p,g)=>{try{r(m=>({...m,loading:!0}));const y=p.includes("@");let w=p;if(!y)try{const{data:m,error:b}=await ae.from("profiles").select("email").eq("username",p).maybeSingle();if(b)throw console.error("Profile lookup error:",b),new Error("Database error occurred");if(!m||!m.email)throw new Error("User not found or no email associated with username");w=m.email}catch(m){throw console.error("Database query failed:",m),new Error("Unable to find user. Please check your username or try using your email address.")}const{data:v,error:x}=await ae.auth.signInWithPassword({email:w,password:g});if(x)throw console.error("Auth error:",x),r(m=>({...m,loading:!1})),new Error(x.message||"Login failed");if(v.user){const m=me.generateTokens(v.user.id);me.storeTokens(m)}return!0}catch(y){throw console.error("Login error:",y),r(w=>({...w,loading:!1})),y}},l=async(p,g,y,w,v)=>{try{r(b=>({...b,loading:!0}));const{data:x,error:m}=await ae.auth.signUp({email:v,password:g});if(m)throw console.error("Auth signup error:",m),r(b=>({...b,loading:!1})),new Error(m.message||"Registration failed");if(x.user){const{error:b}=await ae.from("profiles").insert({id:x.user.id,username:p,display_name:y,email:v,writers_tag:w,bio:"New to CharacterVerse!",role:"user"});if(b)throw console.error("Profile creation error:",b),r(k=>({...k,loading:!1})),b.code==="23505"?b.message.includes("username")?new Error("Username already exists. Please choose a different username."):new Error("This account already exists. Please try logging in instead."):new Error(b.message||"Failed to create user profile");const{error:j}=await ae.from("privacy_settings").insert({user_id:x.user.id,profile_visibility:"public",message_permissions:"everyone",tag_notifications:!0,direct_message_notifications:!0});j&&console.warn("Privacy settings creation failed:",j);const _=me.generateTokens(x.user.id);me.storeTokens(_)}return!0}catch(x){throw console.error("Registration error:",x),r(m=>({...m,loading:!1})),x}},c=async()=>{try{me.clearTokens(),ae.auth.signOut().catch(p=>{console.warn("Supabase signout error:",p)}),r({isAuthenticated:!1,user:null,loading:!1})}catch(p){console.error("Logout error:",p),me.clearTokens(),r({isAuthenticated:!1,user:null,loading:!1})}},u=async p=>{if(t.user)try{const{error:g}=await ae.from("profiles").update({username:p.username,display_name:p.displayName,bio:p.bio,writers_tag:p.writersTag,email:p.email,avatar_url:p.avatar,header_image_url:p.headerImage,updated_at:new Date().toISOString()}).eq("id",t.user.id);if(g)throw g;if(p.privacySettings){const{error:y}=await ae.from("privacy_settings").update({profile_visibility:p.privacySettings.profileVisibility,message_permissions:p.privacySettings.messagePermissions,tag_notifications:p.privacySettings.tagNotifications,direct_message_notifications:p.privacySettings.directMessageNotifications,updated_at:new Date().toISOString()}).eq("user_id",t.user.id);y&&console.warn("Privacy settings update failed:",y)}r(y=>({...y,user:y.user?{...y.user,...p}:null}))}catch(g){throw console.error("Error updating user:",g),g}},d=async(p,g)=>{try{const{error:y}=await ae.auth.updateUser({password:g});if(y)throw console.error("Password change error:",y),new Error(y.message||"Failed to change password");if(t.user){const w=me.generateTokens(t.user.id);me.storeTokens(w)}return!0}catch(y){throw console.error("Password change error:",y),y}},h=async p=>p==="123456",f=async p=>(t.user&&await u({email:p,twoFactorEnabled:!0}),!0);return o.jsx(wv.Provider,{value:{...t,login:a,register:l,logout:c,updateUser:u,changePassword:d,verifyOTP:h,enableTwoFactor:f,refreshSession:i},children:e})},bv=N.createContext(void 0),Ze=()=>{const e=N.useContext(bv);if(!e)throw new Error("useApp must be used within an AppProvider");return e},yC=({children:e})=>{const{user:t,isAuthenticated:r}=Pe(),[n,s]=N.useState([]),[i,a]=N.useState([]),[l,c]=N.useState([]),[u,d]=N.useState([]),[h,f]=N.useState([]),[p,g]=N.useState([]),[y,w]=N.useState([]),[v,x]=N.useState([]),[m,b]=N.useState(null),[j,_]=N.useState(!1),k=L=>{b(L),L?localStorage.setItem("verse_selected_character",JSON.stringify(L)):localStorage.removeItem("verse_selected_character")};N.useEffect(()=>{const L=localStorage.getItem("verse_selected_character");if(L)try{const T=JSON.parse(L);b(T)}catch(T){console.error("Error loading saved character:",T),localStorage.removeItem("verse_selected_character")}},[]),N.useEffect(()=>{if(m){const L=i.find(T=>T.id===m.id);L?(b(L),localStorage.setItem("verse_selected_character",JSON.stringify(L))):(b(null),localStorage.removeItem("verse_selected_character"))}},[i,m]),N.useEffect(()=>{if(r&&t){E();const L=setInterval(()=>{E()},1e3);return()=>clearInterval(L)}},[r,t]);const E=async()=>{if(!(!t||j)){_(!0);try{await Promise.all([D(),S(),P(),A(),B()])}catch(L){console.error("Error loading data:",L)}finally{_(!1)}}},D=async()=>{try{const{data:L,error:T}=await ae.from("profiles").select("*").order("created_at",{ascending:!1});if(T)throw T;const $=L.map(F=>({id:F.id,username:F.username,displayName:F.display_name,avatar:F.avatar_url||"https://images.pexels.com/photos/1239291/pexels-photo-1239291.jpeg?auto=compress&cs=tinysrgb&w=350&h=350",headerImage:F.header_image_url||"https://images.pexels.com/photos/1323550/pexels-photo-1323550.jpeg?auto=compress&cs=tinysrgb&w=800&h=300",bio:F.bio||"",writersTag:F.writers_tag,email:F.email,twoFactorEnabled:F.two_factor_enabled||!1,characters:[],followers:[],following:[],createdAt:new Date(F.created_at),role:F.role||"user",privacySettings:{profileVisibility:"public",messagePermissions:"everyone",tagNotifications:!0,directMessageNotifications:!0}}));c($)}catch(L){console.error("Error loading users:",L)}},S=async()=>{try{const{data:L,error:T}=await ae.from("characters").select("*").order("created_at",{ascending:!1});if(T)throw T;const $=L.map(F=>({id:F.id,username:F.username,name:F.name,title:F.title,avatar:F.avatar_url||"https://images.pexels.com/photos/1382734/pexels-photo-1382734.jpeg?auto=compress&cs=tinysrgb&w=350&h=350",headerImage:F.header_url||"https://images.pexels.com/photos/1323550/pexels-photo-1323550.jpeg?auto=compress&cs=tinysrgb&w=800&h=300",bio:F.bio,universe:F.universe,verseTag:F.verse_tag,traits:F.traits||[],userId:F.user_id,customColor:F.custom_color||"#8b5cf6",customFont:F.custom_font||"Inter",followers:F.followers||[],following:F.following||[],createdAt:new Date(F.created_at)}));a($)}catch(L){console.error("Error loading characters:",L)}},P=async()=>{try{const{data:L,error:T}=await ae.from("posts").select(`
          *,
          profiles:user_id(id, username, display_name, avatar_url),
          characters:character_id(id, username, name, title, avatar_url, universe, verse_tag),
          comments(count)
        `).is("parent_post_id",null).order("created_at",{ascending:!1});if(T)throw T;const $=await Promise.all(L.map(async F=>{const{data:se,error:je}=await ae.from("posts").select(`
            *,
            profiles:user_id(id, username, display_name, avatar_url),
            characters:character_id(id, username, name, title, avatar_url, universe, verse_tag)
          `).eq("parent_post_id",F.id).order("created_at",{ascending:!0}),$t=je?[]:se.map(de=>({id:de.id,content:de.content,characterId:de.character_id,character:de.characters?{id:de.characters.id,username:de.characters.username,name:de.characters.name,title:de.characters.title,avatar:de.characters.avatar_url||"https://images.pexels.com/photos/1382734/pexels-photo-1382734.jpeg?auto=compress&cs=tinysrgb&w=350&h=350",headerImage:"https://images.pexels.com/photos/1323550/pexels-photo-1323550.jpeg?auto=compress&cs=tinysrgb&w=800&h=300",bio:"",universe:de.characters.universe,verseTag:de.characters.verse_tag,traits:[],userId:de.user_id,customColor:"#8b5cf6",customFont:"Inter",followers:[],following:[],createdAt:new Date}:void 0,userId:de.user_id,user:de.profiles?{id:de.profiles.id,username:de.profiles.username,displayName:de.profiles.display_name,avatar:de.profiles.avatar_url||"https://images.pexels.com/photos/1239291/pexels-photo-1239291.jpeg?auto=compress&cs=tinysrgb&w=350&h=350",headerImage:"https://images.pexels.com/photos/1323550/pexels-photo-1323550.jpeg?auto=compress&cs=tinysrgb&w=800&h=300",bio:"",writersTag:"",twoFactorEnabled:!1,characters:[],followers:[],following:[],createdAt:new Date,privacySettings:{profileVisibility:"public",messagePermissions:"everyone",tagNotifications:!0,directMessageNotifications:!0}}:void 0,timestamp:new Date(de.created_at)}));return{id:F.id,content:F.content,characterId:F.character_id,character:F.characters?{id:F.characters.id,username:F.characters.username,name:F.characters.name,title:F.characters.title,avatar:F.characters.avatar_url||"https://images.pexels.com/photos/1382734/pexels-photo-1382734.jpeg?auto=compress&cs=tinysrgb&w=350&h=350",headerImage:"https://images.pexels.com/photos/1323550/pexels-photo-1323550.jpeg?auto=compress&cs=tinysrgb&w=800&h=300",bio:"",universe:F.characters.universe,verseTag:F.characters.verse_tag,traits:[],userId:F.user_id,customColor:"#8b5cf6",customFont:"Inter",followers:[],following:[],createdAt:new Date}:void 0,userId:F.user_id,user:F.profiles?{id:F.profiles.id,username:F.profiles.username,displayName:F.profiles.display_name,avatar:F.profiles.avatar_url||"https://images.pexels.com/photos/1239291/pexels-photo-1239291.jpeg?auto=compress&cs=tinysrgb&w=350&h=350",headerImage:"https://images.pexels.com/photos/1323550/pexels-photo-1323550.jpeg?auto=compress&cs=tinysrgb&w=800&h=300",bio:"",writersTag:"",twoFactorEnabled:!1,characters:[],followers:[],following:[],createdAt:new Date,privacySettings:{profileVisibility:"public",messagePermissions:"everyone",tagNotifications:!0,directMessageNotifications:!0}}:void 0,timestamp:new Date(F.created_at),likes:0,reposts:0,comments:Array.isArray(F.comments)?F.comments.length:0,isLiked:!1,isReposted:!1,isPinned:!1,isThread:F.is_thread||!1,threadId:F.thread_id,parentPostId:F.parent_post_id,visibility:F.visibility||"public",tags:F.tags||[],mediaUrls:F.media_urls||[],replies:$t}}));s($)}catch(L){console.error("Error loading posts:",L)}},A=async()=>{try{if(!t)return;const{data:L,error:T}=await ae.from("chats").select(`
          *,
          chat_participants!inner(
            user_id,
            profiles:user_id(id, username, display_name, avatar_url)
          ),
          messages(
            id,
            content,
            sender_id,
            created_at,
            read_by,
            is_encrypted,
            profiles:sender_id(id, username, display_name, avatar_url)
          )
        `).eq("chat_participants.user_id",t.id).order("updated_at",{ascending:!1});if(T)throw T;const $=L.map(F=>{var $t;const se=F.messages&&F.messages.length>0?F.messages[F.messages.length-1]:null,je=(($t=F.chat_participants)==null?void 0:$t.map(de=>{var Cr,on,ln;return{id:de.user_id,username:((Cr=de.profiles)==null?void 0:Cr.username)||"Unknown",displayName:((on=de.profiles)==null?void 0:on.display_name)||"Unknown User",avatar:((ln=de.profiles)==null?void 0:ln.avatar_url)||"https://images.pexels.com/photos/1239291/pexels-photo-1239291.jpeg?auto=compress&cs=tinysrgb&w=350&h=350"}}))||[];return{id:F.id,participants:je.map(de=>de.id),participantInfo:je,isGroup:F.is_group||!1,name:F.name,createdAt:new Date(F.created_at),isEncrypted:F.is_encrypted||!0,lastMessage:se?{id:se.id,content:se.is_encrypted?"🔒 Encrypted message":se.content,senderId:se.sender_id,senderInfo:se.profiles?{username:se.profiles.username,displayName:se.profiles.display_name,avatar:se.profiles.avatar_url||"https://images.pexels.com/photos/1239291/pexels-photo-1239291.jpeg?auto=compress&cs=tinysrgb&w=350&h=350"}:void 0,chatId:F.id,timestamp:new Date(se.created_at),isEncrypted:se.is_encrypted||!0,readBy:se.read_by||[]}:void 0}});d($)}catch(L){console.error("Error loading chats:",L)}},B=async()=>{try{const{data:L,error:T}=await ae.from("notifications").select(`
          *,
          profiles:from_user_id(id, username, display_name, avatar_url)
        `).eq("user_id",t==null?void 0:t.id).order("created_at",{ascending:!1});if(T)throw T;const $=L.map(F=>({id:F.id,type:F.type,userId:F.user_id,fromUserId:F.from_user_id,fromUser:F.profiles?{id:F.profiles.id,username:F.profiles.username,displayName:F.profiles.display_name,avatar:F.profiles.avatar_url||"https://images.pexels.com/photos/1239291/pexels-photo-1239291.jpeg?auto=compress&cs=tinysrgb&w=350&h=350",headerImage:"https://images.pexels.com/photos/1323550/pexels-photo-1323550.jpeg?auto=compress&cs=tinysrgb&w=800&h=300",bio:"",writersTag:"",twoFactorEnabled:!1,characters:[],followers:[],following:[],createdAt:new Date,privacySettings:{profileVisibility:"public",messagePermissions:"everyone",tagNotifications:!0,directMessageNotifications:!0}}:void 0,postId:F.post_id,message:F.message,timestamp:new Date(F.created_at),read:F.read||!1}));f($)}catch(L){console.error("Error loading notifications:",L)}},H=h.filter(L=>!L.read).length,G=u.reduce((L,T)=>T.lastMessage&&!T.lastMessage.readBy.includes((t==null?void 0:t.id)||"")?L+1:L,0),M=async L=>{if(t)try{console.log("Creating post with data:",L);const{data:T,error:$}=await ae.from("posts").insert({content:L.content,user_id:t.id,character_id:L.characterId||null,is_thread:L.isThread||!1,thread_id:L.threadId||null,parent_post_id:L.parentPostId||null,visibility:L.visibility||"public",tags:L.tags||[],media_urls:L.mediaUrls||[]}).select().single();if($)throw console.error("Supabase error:",$),$;console.log("Post created successfully:",T),await P()}catch(T){throw console.error("Error adding post:",T),T}},V=async(L,T)=>{try{const{error:$}=await ae.from("posts").update({content:T.content,visibility:T.visibility,tags:T.tags,media_urls:T.mediaUrls,updated_at:new Date().toISOString()}).eq("id",L);if($)throw $;s(F=>F.map(se=>se.id===L?{...se,...T}:se))}catch($){console.error("Error updating post:",$)}},I=async L=>{try{const{error:T}=await ae.from("posts").delete().eq("id",L);if(T)throw T;s($=>$.filter(F=>F.id!==L))}catch(T){console.error("Error deleting post:",T)}},W=L=>{s(T=>T.map($=>$.id===L?{...$,isLiked:!$.isLiked,likes:$.isLiked?$.likes-1:$.likes+1}:$))},q=L=>{s(T=>T.map($=>$.id===L?{...$,isReposted:!$.isReposted,reposts:$.isReposted?$.reposts-1:$.reposts+1}:$))},C=L=>{s(T=>T.map($=>$.id===L?{...$,isPinned:!0}:$))},R=L=>{s(T=>T.map($=>$.id===L?{...$,isPinned:!1}:$))},z=L=>{g(T=>[...T,L])},O=L=>{g(T=>T.filter($=>$!==L))},Q=async L=>{try{const{data:T,error:$}=await ae.from("characters").insert({username:L.username,name:L.name,title:L.title,avatar_url:L.avatar,header_url:L.headerImage,bio:L.bio,universe:L.universe,verse_tag:L.verseTag,traits:L.traits,user_id:L.userId,custom_color:L.customColor,custom_font:L.customFont,followers:L.followers,following:L.following}).select().single();if($)throw $;await S()}catch(T){console.error("Error adding character:",T)}},J=async(L,T)=>{try{const{error:$}=await ae.from("characters").update({username:T.username,name:T.name,title:T.title,avatar_url:T.avatar,header_url:T.headerImage,bio:T.bio,universe:T.universe,verse_tag:T.verseTag,traits:T.traits,custom_color:T.customColor,custom_font:T.customFont,updated_at:new Date().toISOString()}).eq("id",L);if($)throw $;a(F=>F.map(se=>se.id===L?{...se,...T}:se))}catch($){console.error("Error updating character:",$)}},ie=async L=>{try{const{error:T}=await ae.from("characters").delete().eq("id",L);if(T)throw T;a($=>$.filter(F=>F.id!==L)),(m==null?void 0:m.id)===L&&k(null)}catch(T){console.error("Error deleting character:",T)}},X=L=>{console.log("Following character:",L)},Ue=L=>{console.log("Unfollowing character:",L)},$e=L=>{w(T=>[...T,L])},Oe=L=>{w(T=>T.filter($=>$!==L))},wt=async L=>{if(t)try{const{error:T}=await ae.from("follows").insert({follower_id:t.id,following_id:L});if(T)throw T;c($=>$.map(F=>F.id===L?{...F,followers:[...F.followers,t.id]}:F.id===t.id?{...F,following:[...F.following,L]}:F))}catch(T){console.error("Error following user:",T)}},ze=async L=>{if(t)try{const{error:T}=await ae.from("follows").delete().eq("follower_id",t.id).eq("following_id",L);if(T)throw T;c($=>$.map(F=>F.id===L?{...F,followers:F.followers.filter(se=>se!==t.id)}:F.id===t.id?{...F,following:F.following.filter(se=>se!==L)}:F))}catch(T){console.error("Error unfollowing user:",T)}},Fe=L=>{x(T=>[...T,L])},Bt=L=>{x(T=>T.filter($=>$!==L))},ee=async(L,T,$,F)=>{try{const{error:se}=await ae.from("messages").insert({chat_id:L,sender_id:$,content:T,media_url:F,is_encrypted:!0,read_by:[$]});if(se)throw se;await ae.from("chats").update({updated_at:new Date().toISOString()}).eq("id",L),await A()}catch(se){console.error("Error sending message:",se)}},Ve=async(L,T,$)=>{try{if(!t)throw new Error("User not authenticated");const{data:F,error:se}=await ae.from("chats").insert({name:$,is_group:T,created_by:t.id,is_encrypted:!0}).select().single();if(se)throw se;const je=[...L,t.id].filter(Boolean),$t=je.map(zt=>({chat_id:F.id,user_id:zt})),{error:de}=await ae.from("chat_participants").insert($t);if(de)throw de;const{data:Cr,error:on}=await ae.from("profiles").select("id, username, display_name, avatar_url").in("id",je);if(on)throw on;const ln=Cr.map(zt=>({id:zt.id,username:zt.username,displayName:zt.display_name,avatar:zt.avatar_url||"https://images.pexels.com/photos/1239291/pexels-photo-1239291.jpeg?auto=compress&cs=tinysrgb&w=350&h=350"})),ia={id:F.id,participants:je,participantInfo:ln,isGroup:T,name:$,createdAt:new Date(F.created_at),isEncrypted:!0};return d(zt=>[ia,...zt]),ia}catch(F){throw console.error("Error creating chat:",F),F}},bt=async L=>{try{const{data:T,error:$}=await ae.from("messages").select(`
          *,
          profiles:sender_id(id, username, display_name, avatar_url)
        `).eq("chat_id",L).order("created_at",{ascending:!0});if($)throw $;return T.map(F=>({id:F.id,content:F.content,senderId:F.sender_id,senderInfo:F.profiles?{username:F.profiles.username,displayName:F.profiles.display_name,avatar:F.profiles.avatar_url||"https://images.pexels.com/photos/1239291/pexels-photo-1239291.jpeg?auto=compress&cs=tinysrgb&w=350&h=350"}:void 0,chatId:F.chat_id,timestamp:new Date(F.created_at),isEncrypted:F.is_encrypted||!0,readBy:F.read_by||[],mediaUrl:F.media_url}))}catch(T){return console.error("Error loading messages:",T),[]}},Zt=async L=>{if(t)try{await ae.rpc("mark_messages_as_read",{chat_id_param:L,user_id_param:t.id}),d(T=>T.map($=>$.id===L&&$.lastMessage?{...$,lastMessage:{...$.lastMessage,readBy:[...$.lastMessage.readBy,t.id]}}:$))}catch(T){console.error("Error marking messages as read:",T)}},jt=async(L,T)=>{try{const{error:$}=await ae.from("chat_participants").delete().eq("chat_id",L).eq("user_id",T);if($)throw $;d(F=>F.filter(se=>se.id!==L))}catch($){console.error("Error deleting chat:",$)}},He=()=>{d(L=>L.map(T=>T.lastMessage&&!T.lastMessage.readBy.includes((t==null?void 0:t.id)||"")?{...T,lastMessage:{...T.lastMessage,readBy:[...T.lastMessage.readBy,(t==null?void 0:t.id)||""]}}:T))},_e=async L=>{try{const{data:T,error:$}=await ae.from("profiles").select("*").or(`username.ilike.%${L}%,display_name.ilike.%${L}%`).limit(10);if($)throw $;return T.map(F=>({id:F.id,username:F.username,displayName:F.display_name,avatar:F.avatar_url||"https://images.pexels.com/photos/1239291/pexels-photo-1239291.jpeg?auto=compress&cs=tinysrgb&w=350&h=350",headerImage:F.header_image_url||"https://images.pexels.com/photos/1323550/pexels-photo-1323550.jpeg?auto=compress&cs=tinysrgb&w=800&h=300",bio:F.bio||"",writersTag:F.writers_tag,email:F.email,twoFactorEnabled:F.two_factor_enabled||!1,characters:[],followers:[],following:[],createdAt:new Date(F.created_at),role:F.role||"user",privacySettings:{profileVisibility:"public",messagePermissions:"everyone",tagNotifications:!0,directMessageNotifications:!0}}))}catch(T){return console.error("Error searching users:",T),[]}},U=L=>{const T={...L,id:Date.now().toString(),timestamp:new Date,read:!1};f($=>[T,...$])},Z=async L=>{try{const{error:T}=await ae.from("notifications").update({read:!0}).eq("id",L);if(T)throw T;f($=>$.map(F=>F.id===L?{...F,read:!0}:F))}catch(T){console.error("Error marking notification as read:",T)}},le=async()=>{try{const{error:L}=await ae.from("notifications").update({read:!0}).eq("user_id",t==null?void 0:t.id);if(L)throw L;f([])}catch(L){console.error("Error clearing notifications:",L)}},xe=async(L,T,$)=>{try{if(!t)return;console.log("Adding reply to post:",{postId:L,content:T,characterId:$,userId:t.id});const{data:F,error:se}=await ae.from("posts").insert({content:T,user_id:t.id,character_id:$||null,parent_post_id:L,is_thread:!1,visibility:"public",tags:T.match(/#\w+/g)||[],media_urls:[]}).select().single();if(se)throw console.error("Supabase error adding reply:",se),se;console.log("Reply added successfully:",F),await P()}catch(F){throw console.error("Error adding reply:",F),F}},it=L=>{const T=L.toLowerCase(),$=n.filter(je=>{var $t,de;return je.content.toLowerCase().includes(T)||(($t=je.character)==null?void 0:$t.name.toLowerCase().includes(T))||((de=je.user)==null?void 0:de.displayName.toLowerCase().includes(T))||je.tags.some(Cr=>Cr.toLowerCase().includes(T))}),F=i.filter(je=>je.name.toLowerCase().includes(T)||je.username.toLowerCase().includes(T)||je.verseTag.toLowerCase().includes(T)||je.universe.toLowerCase().includes(T)),se=l.filter(je=>je.displayName.toLowerCase().includes(T)||je.username.toLowerCase().includes(T)||je.writersTag.toLowerCase().includes(T));return{posts:$,characters:F,users:se}},gl=()=>{const L=l.slice(0,5),T=i.slice(0,5);return{writers:L,characters:T}},ea=L=>n.sort((T,$)=>$.timestamp.getTime()-T.timestamp.getTime()),ta=async()=>l,jr=async L=>{try{const{error:T}=await ae.rpc("admin_delete_user",{target_user_id:L});if(T)throw T;c($=>$.filter(F=>F.id!==L))}catch(T){throw console.error("Error deleting user:",T),T}},an=async(L,T)=>{try{const{error:$}=await ae.rpc("admin_reset_password",{target_user_id:L,new_password:T});if($)throw $}catch($){throw console.error("Error resetting password:",$),$}},vl=async(L,T)=>{try{const{error:$}=await ae.from("profiles").update({role:T}).eq("id",L);if($)throw $;c(F=>F.map(se=>se.id===L?{...se,role:T}:se))}catch($){throw console.error("Error updating user role:",$),$}},ra=async L=>{try{const{data:T,error:$}=await ae.from("follows").select(`
          follower_id,
          profiles:follower_id(*)
        `).eq("following_id",L);if($)throw $;return T.map(F=>({id:F.profiles.id,username:F.profiles.username,displayName:F.profiles.display_name,avatar:F.profiles.avatar_url||"https://images.pexels.com/photos/1239291/pexels-photo-1239291.jpeg?auto=compress&cs=tinysrgb&w=350&h=350",headerImage:F.profiles.header_image_url||"https://images.pexels.com/photos/1323550/pexels-photo-1323550.jpeg?auto=compress&cs=tinysrgb&w=800&h=300",bio:F.profiles.bio||"",writersTag:F.profiles.writers_tag,email:F.profiles.email,twoFactorEnabled:F.profiles.two_factor_enabled||!1,characters:[],followers:[],following:[],createdAt:new Date(F.profiles.created_at),role:F.profiles.role||"user",privacySettings:{profileVisibility:"public",messagePermissions:"everyone",tagNotifications:!0,directMessageNotifications:!0}}))}catch(T){return console.error("Error loading followers:",T),[]}},na=async L=>{try{const{data:T,error:$}=await ae.from("follows").select(`
          following_id,
          profiles:following_id(*)
        `).eq("follower_id",L);if($)throw $;return T.map(F=>({id:F.profiles.id,username:F.profiles.username,displayName:F.profiles.display_name,avatar:F.profiles.avatar_url||"https://images.pexels.com/photos/1239291/pexels-photo-1239291.jpeg?auto=compress&cs=tinysrgb&w=350&h=350",headerImage:F.profiles.header_image_url||"https://images.pexels.com/photos/1323550/pexels-photo-1323550.jpeg?auto=compress&cs=tinysrgb&w=800&h=300",bio:F.profiles.bio||"",writersTag:F.profiles.writers_tag,email:F.profiles.email,twoFactorEnabled:F.profiles.two_factor_enabled||!1,characters:[],followers:[],following:[],createdAt:new Date(F.profiles.created_at),role:F.profiles.role||"user",privacySettings:{profileVisibility:"public",messagePermissions:"everyone",tagNotifications:!0,directMessageNotifications:!0}}))}catch(T){return console.error("Error loading following:",T),[]}},yl=async L=>[],wl=async L=>[],sa=async L=>{try{const{data:T,error:$}=await ae.from("comments").select(`
          *,
          profiles:user_id(id, username, display_name, avatar_url),
          characters:character_id(id, username, name, avatar_url)
        `).eq("post_id",L).order("created_at",{ascending:!0});if($)throw $;return T||[]}catch(T){return console.error("Error loading comments:",T),[]}};return o.jsx(bv.Provider,{value:{posts:n,characters:i,allUsers:l,chats:u,notifications:h,unreadNotifications:H,unreadMessages:G,bookmarkedPosts:p,bookmarkedCharacters:y,bookmarkedUsers:v,selectedCharacter:m,setSelectedCharacter:k,addPost:M,updatePost:V,deletePost:I,likePost:W,repostPost:q,pinPost:C,unpinPost:R,bookmarkPost:z,unbookmarkPost:O,addCharacter:Q,updateCharacter:J,deleteCharacter:ie,followCharacter:X,unfollowCharacter:Ue,bookmarkCharacter:$e,unbookmarkCharacter:Oe,followUser:wt,unfollowUser:ze,bookmarkUser:Fe,unbookmarkUser:Bt,sendMessage:ee,createChat:Ve,getChatMessages:bt,markMessagesAsRead:Zt,deleteChatForUser:jt,clearAllMessageNotifications:He,searchUsers:_e,addNotification:U,markNotificationAsRead:Z,clearAllNotifications:le,addComment:xe,searchContent:it,getRecommendations:gl,getFilteredPosts:ea,getAllUsersAdmin:ta,deleteUserAdmin:jr,resetPasswordAdmin:an,updateUserRoleAdmin:vl,getUserFollowers:ra,getUserFollowing:na,getCharacterFollowers:yl,getCharacterFollowing:wl,getPostComments:sa},children:e})};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var wC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bC=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),te=(e,t)=>{const r=N.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:l="",children:c,...u},d)=>N.createElement("svg",{ref:d,...wC,width:s,height:s,stroke:n,strokeWidth:a?Number(i)*24/Number(s):i,className:["lucide",`lucide-${bC(e)}`,l].join(" "),...u},[...t.map(([h,f])=>N.createElement(h,f)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jC=te("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wd=te("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CC=te("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _C=te("AtSign",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8",key:"7n84p3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bo=te("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jo=te("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ol=te("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jv=te("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dp=te("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kC=te("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cv=te("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EC=te("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hp=te("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NC=te("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bd=te("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jd=te("Feather",[["path",{d:"M20.24 12.24a6 6 0 0 0-8.49-8.49L5 10.5V19h8.5z",key:"u4sw5n"}],["line",{x1:"16",x2:"2",y1:"8",y2:"22",key:"1c47m2"}],["line",{x1:"17.5",x2:"9",y1:"15",y2:"15",key:"2fj3pr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SC=te("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _v=te("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oc=te("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kv=te("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AC=te("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ev=te("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ha=te("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Co=te("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PC=te("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nv=te("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sv=te("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t0=te("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Av=te("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cd=te("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DC=te("PinOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["line",{x1:"12",x2:"12",y1:"17",y2:"22",key:"1jrz49"}],["path",{d:"M9 9v1.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V17h12",key:"13x2n8"}],["path",{d:"M15 9.34V6h1a2 2 0 0 0 0-4H7.89",key:"reo3ki"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pv=te("Pin",[["line",{x1:"12",x2:"12",y1:"17",y2:"22",key:"1jrz49"}],["path",{d:"M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z",key:"13yl11"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ll=te("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BC=te("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dv=te("Repeat2",[["path",{d:"m2 9 3-3 3 3",key:"1ltn5i"}],["path",{d:"M13 18H7a2 2 0 0 1-2-2V6",key:"1r6tfw"}],["path",{d:"m22 15-3 3-3-3",key:"4rnwn2"}],["path",{d:"M11 6h6a2 2 0 0 1 2 2v10",key:"2f72bc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kr=te("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bv=te("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FC=te("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TC=te("Share",[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ns=te("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RC=te("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LC=te("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OC=te("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yi=te("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fp=te("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _d=te("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ri=te("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ir=te("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kd=te("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fr=te("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fv=te("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nt=te("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Tv=()=>o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-purple-500 to-pink-500 rounded-2xl flex items-center justify-center mx-auto mb-4",children:o.jsx(jd,{className:"w-8 h-8 text-white animate-pulse"})}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("p",{className:"text-white text-lg font-medium",children:"Loading VERSE..."}),o.jsx("div",{className:"flex justify-center",children:o.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-purple-400"})})]})]})}),IC=()=>{const[e,t]=N.useState(!0),[r,n]=N.useState(!1),[s,i]=N.useState(!1),[a,l]=N.useState(""),[c,u]=N.useState({identifier:"",password:"",displayName:"",writersTag:"",email:""}),{login:d,register:h}=Pe(),f=async p=>{p.preventDefault(),i(!0),l("");try{if(e)await d(c.identifier,c.password);else{const g=c.identifier.includes("@")?c.identifier.split("@")[0]:c.identifier;await h(g,c.password,c.displayName,c.writersTag,c.email)}}catch(g){console.error("Authentication error:",g),l(g.message||"An error occurred. Please try again.")}finally{i(!1)}};return s?o.jsx(Tv,{}):o.jsxs("div",{className:"min-h-screen flex flex-col",children:[o.jsx("div",{className:"flex-1 flex items-center justify-center p-4",children:o.jsx("div",{className:"w-full max-w-md",children:o.jsxs("div",{className:"bg-gray-900/80 backdrop-blur-md rounded-2xl border border-gray-700/50 p-8 shadow-2xl",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-purple-500 to-pink-500 rounded-2xl flex items-center justify-center mx-auto mb-4",children:o.jsx(jd,{className:"w-8 h-8 text-white"})}),o.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"VERSE"}),o.jsx("p",{className:"text-gray-400",children:e?"Welcome back to the community":"Join the storytelling community"})]}),a&&o.jsx("div",{className:"mb-4 p-3 bg-red-900/20 border border-red-500/30 rounded-lg",children:o.jsx("p",{className:"text-red-400 text-sm",children:a})}),o.jsxs("form",{onSubmit:f,className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:e?"Username or Email":"Username"}),o.jsx("input",{type:"text",value:c.identifier,onChange:p=>u(g=>({...g,identifier:p.target.value})),className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white focus:border-purple-500 focus:outline-none",placeholder:e?"Enter username or email":"Choose a username",required:!0})]}),!e&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Display Name"}),o.jsx("input",{type:"text",value:c.displayName,onChange:p=>u(g=>({...g,displayName:p.target.value})),className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white focus:border-purple-500 focus:outline-none",placeholder:"Your display name",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Writer's Tag"}),o.jsx("input",{type:"text",value:c.writersTag,onChange:p=>u(g=>({...g,writersTag:p.target.value})),className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white focus:border-purple-500 focus:outline-none",placeholder:"e.g., fantasy, scifi, modern",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email"}),o.jsx("input",{type:"email",value:c.email,onChange:p=>u(g=>({...g,email:p.target.value})),className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white focus:border-purple-500 focus:outline-none",placeholder:"your@email.com",required:!0})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Password"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:r?"text":"password",value:c.password,onChange:p=>u(g=>({...g,password:p.target.value})),className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 pr-12 text-white focus:border-purple-500 focus:outline-none",placeholder:"Enter your password",required:!0}),o.jsx("button",{type:"button",onClick:()=>n(!r),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-300",children:r?o.jsx(NC,{className:"w-5 h-5"}):o.jsx(bd,{className:"w-5 h-5"})})]})]}),o.jsx("button",{type:"submit",className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white font-semibold py-3 rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all duration-200",children:e?"Sign In":"Create Account"})]}),o.jsx("div",{className:"mt-6 text-center",children:o.jsx("button",{onClick:()=>{t(!e),l(""),u({identifier:"",password:"",displayName:"",writersTag:"",email:""})},className:"text-purple-400 hover:text-purple-300 transition-colors",children:e?"Don't have an account? Sign up":"Already have an account? Sign in"})})]})})}),o.jsx("div",{className:"p-6 text-center border-t border-gray-700/50 bg-black/20",children:o.jsxs("p",{className:"text-gray-500 text-sm",children:["Verse © ",new Date().getFullYear()]})})]})};function _o(e){const r=new Date().getTime()-e.getTime(),n=Math.floor(r/(1e3*60)),s=Math.floor(r/(1e3*60*60)),i=Math.floor(r/(1e3*60*60*24));return n<1?"now":n<60?`${n}m`:s<24?`${s}h`:i<7?`${i}d`:e.toLocaleDateString()}const Ts=({post:e,onLike:t,onRepost:r,onBookmark:n,isBookmarked:s=!1,showReplies:i=!1,showPinOption:a=!1,onPin:l})=>{var O,Q,J,ie,X,Ue,$e,Oe,wt,ze,Fe,Bt;const{user:c}=Pe(),{updatePost:u,deletePost:d,addComment:h,characters:f}=Ze(),[p,g]=N.useState(!1),[y,w]=N.useState(!1),[v,x]=N.useState(!1),[m,b]=N.useState(e.content),[j,_]=N.useState(""),[k,E]=N.useState("user"),[D,S]=N.useState(!1),P=((O=e.character)==null?void 0:O.avatar)||((Q=e.user)==null?void 0:Q.avatar)||"https://images.pexels.com/photos/1239291/pexels-photo-1239291.jpeg?auto=compress&cs=tinysrgb&w=350&h=350",A=((J=e.character)==null?void 0:J.name)||((ie=e.user)==null?void 0:ie.displayName)||((X=e.user)==null?void 0:X.username)||"Unknown User",B=((Ue=e.character)==null?void 0:Ue.title)||"",H=($e=e.character)==null?void 0:$e.universe,G=((Oe=e.character)==null?void 0:Oe.username)||((wt=e.user)==null?void 0:wt.username)||"",M=e.userId===(c==null?void 0:c.id),V=f.filter(ee=>ee.userId===(c==null?void 0:c.id)),I=()=>{x(!0),g(!1)},W=()=>{u(e.id,{content:m}),x(!1)},q=()=>{window.confirm("Are you sure you want to delete this post?")&&d(e.id),g(!1)},C=()=>{w(!0)},R=async ee=>{if(ee.preventDefault(),!(!j.trim()||D)){S(!0);try{const Ve=k==="user"?void 0:k;await h(e.id,j.trim(),Ve),_(""),console.log("Reply submitted successfully")}catch(Ve){console.error("Error submitting reply:",Ve),alert("Failed to submit reply. Please try again.")}finally{S(!1)}}},z=()=>{l&&l(),g(!1)};return o.jsxs("article",{className:"bg-gray-800/30 rounded-xl border border-gray-700/50 overflow-hidden",children:[o.jsx("div",{className:"p-6 hover:bg-gray-800/20 transition-colors",children:o.jsxs("div",{className:"flex space-x-4",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx("img",{src:P,alt:A,className:"w-12 h-12 rounded-full object-cover ring-2 ring-purple-500/30"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("h3",{className:"font-bold text-white",children:A}),B&&o.jsx("span",{className:"text-purple-400 text-sm font-medium",children:B}),o.jsxs("span",{className:"text-gray-500",children:["@",G]})]}),o.jsx("span",{className:"text-gray-500",children:"·"}),o.jsx("time",{className:"text-gray-500 text-sm",children:_o(e.timestamp)}),o.jsxs("div",{className:"ml-auto relative",children:[o.jsx("button",{onClick:()=>g(!p),className:"text-gray-500 hover:text-gray-300 transition-colors",children:o.jsx(Av,{className:"w-5 h-5"})}),p&&o.jsxs("div",{className:"absolute right-0 top-8 bg-gray-800 border border-gray-700 rounded-lg shadow-lg z-10 min-w-[120px]",children:[n&&o.jsxs("button",{onClick:()=>{n(),g(!1)},className:"w-full text-left px-4 py-2 text-white hover:bg-gray-700 flex items-center space-x-2",children:[o.jsx(jo,{className:`w-4 h-4 ${s?"fill-current":""}`}),o.jsx("span",{children:s?"Remove Bookmark":"Bookmark"})]}),M&&o.jsxs(o.Fragment,{children:[a&&o.jsxs("button",{onClick:z,className:"w-full text-left px-4 py-2 text-white hover:bg-gray-700 flex items-center space-x-2",children:[e.isPinned?o.jsx(DC,{className:"w-4 h-4"}):o.jsx(Pv,{className:"w-4 h-4"}),o.jsx("span",{children:e.isPinned?"Unpin":"Pin to Profile"})]}),o.jsxs("button",{onClick:I,className:"w-full text-left px-4 py-2 text-white hover:bg-gray-700 flex items-center space-x-2",children:[o.jsx(Cd,{className:"w-4 h-4"}),o.jsx("span",{children:"Edit"})]}),o.jsxs("button",{onClick:q,className:"w-full text-left px-4 py-2 text-red-400 hover:bg-gray-700 flex items-center space-x-2",children:[o.jsx(Yi,{className:"w-4 h-4"}),o.jsx("span",{children:"Delete"})]})]}),o.jsx("button",{onClick:()=>g(!1),className:"w-full text-left px-4 py-2 text-gray-400 hover:bg-gray-700",children:"Cancel"})]})]})]}),H&&o.jsx("div",{className:"mb-3",children:o.jsxs("div",{className:"inline-flex items-center space-x-2 text-xs text-purple-300 bg-purple-900/30 px-2 py-1 rounded-full mb-2",children:[o.jsx("span",{children:"📖"}),o.jsx("span",{children:H})]})}),o.jsx("div",{className:"mb-4",children:v?o.jsxs("div",{className:"space-y-3",children:[o.jsx("textarea",{value:m,onChange:ee=>b(ee.target.value),className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white focus:border-purple-500 focus:outline-none resize-none",rows:3}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsx("button",{onClick:W,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Save"}),o.jsx("button",{onClick:()=>{x(!1),b(e.content)},className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Cancel"})]})]}):o.jsx("p",{className:"text-gray-100 leading-relaxed whitespace-pre-wrap",children:e.content})}),e.mediaUrls&&e.mediaUrls.length>0&&o.jsx("div",{className:"mb-4 grid grid-cols-2 gap-2",children:e.mediaUrls.map((ee,Ve)=>o.jsx("div",{className:"rounded-lg overflow-hidden",children:ee.includes(".mp4")||ee.includes(".mov")||ee.includes(".avi")?o.jsx("video",{src:ee,className:"w-full h-48 object-cover",controls:!0}):o.jsx("img",{src:ee,alt:"Post media",className:"w-full h-48 object-cover"})},Ve))}),o.jsxs("div",{className:"flex items-center justify-between max-w-md",children:[o.jsxs("button",{onClick:C,className:"flex items-center space-x-2 text-gray-500 hover:text-blue-400 transition-colors group",children:[o.jsx("div",{className:"p-2 rounded-full group-hover:bg-blue-400/10 transition-colors",children:o.jsx(t0,{className:"w-5 h-5"})}),o.jsx("span",{className:"text-sm",children:((ze=e.replies)==null?void 0:ze.length)||0})]}),o.jsxs("button",{onClick:r,className:`flex items-center space-x-2 transition-colors group ${e.isReposted?"text-green-400":"text-gray-500 hover:text-green-400"}`,children:[o.jsx("div",{className:"p-2 rounded-full group-hover:bg-green-400/10 transition-colors",children:o.jsx(Dv,{className:"w-5 h-5"})}),o.jsx("span",{className:"text-sm",children:e.reposts})]}),o.jsxs("button",{onClick:t,className:`flex items-center space-x-2 transition-colors group ${e.isLiked?"text-red-500":"text-gray-500 hover:text-red-400"}`,children:[o.jsx("div",{className:"p-2 rounded-full group-hover:bg-red-400/10 transition-colors",children:o.jsx(kv,{className:`w-5 h-5 ${e.isLiked?"fill-current":""}`})}),o.jsx("span",{className:"text-sm",children:e.likes})]}),n&&o.jsx("button",{onClick:n,className:`flex items-center space-x-2 transition-colors group ${s?"text-purple-400":"text-gray-500 hover:text-purple-400"}`,children:o.jsx("div",{className:"p-2 rounded-full group-hover:bg-purple-400/10 transition-colors",children:o.jsx(jo,{className:`w-5 h-5 ${s?"fill-current":""}`})})}),o.jsx("button",{className:"flex items-center space-x-2 text-gray-500 hover:text-blue-400 transition-colors group",children:o.jsx("div",{className:"p-2 rounded-full group-hover:bg-blue-400/10 transition-colors",children:o.jsx(TC,{className:"w-5 h-5"})})})]})]})]})}),e.replies&&e.replies.length>0&&o.jsxs("div",{className:"border-t border-gray-700/50 bg-gray-900/30",children:[o.jsx("div",{className:"p-4",children:o.jsxs("button",{onClick:()=>w(!y),className:"flex items-center space-x-2 text-gray-400 hover:text-white transition-colors text-sm",children:[y?o.jsx(EC,{className:"w-4 h-4"}):o.jsx(Cv,{className:"w-4 h-4"}),o.jsxs("span",{children:[y?"Hide":"Show"," ",e.replies.length," ",e.replies.length===1?"reply":"replies"]})]})}),y&&o.jsxs(o.Fragment,{children:[o.jsxs("form",{onSubmit:R,className:"p-4 border-b border-gray-700/30",children:[o.jsxs("div",{className:"flex space-x-3 mb-3",children:[o.jsx("img",{src:k==="user"?c==null?void 0:c.avatar:((Fe=V.find(ee=>ee.id===k))==null?void 0:Fe.avatar)||(c==null?void 0:c.avatar),alt:"Your avatar",className:"w-8 h-8 rounded-full object-cover"}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("select",{value:k,onChange:ee=>E(ee.target.value),className:"mb-2 bg-gray-800 text-white border border-gray-600 rounded-lg px-3 py-1 text-sm focus:border-purple-500 focus:outline-none",children:[o.jsx("option",{value:"user",children:"Reply as yourself"}),V.map(ee=>o.jsxs("option",{value:ee.id,children:[ee.name," - ",ee.title]},ee.id))]}),o.jsx("textarea",{value:j,onChange:ee=>_(ee.target.value),placeholder:"Write your reply...",className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-3 py-2 text-white focus:border-purple-500 focus:outline-none resize-none text-sm",rows:2,disabled:D})]})]}),o.jsx("div",{className:"flex justify-end",children:o.jsx("button",{type:"submit",disabled:!j.trim()||D,className:"bg-purple-600 hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed text-white px-4 py-1 rounded-lg transition-colors text-sm",children:D?"Replying...":"Reply"})})]}),o.jsx("div",{className:"divide-y divide-gray-700/30",children:e.replies.map(ee=>{var Ve,bt,Zt,jt,He,_e;return o.jsxs("div",{className:"p-4 flex space-x-3",children:[o.jsx("img",{src:((Ve=ee.character)==null?void 0:Ve.avatar)||((bt=ee.user)==null?void 0:bt.avatar),alt:((Zt=ee.character)==null?void 0:Zt.name)||((jt=ee.user)==null?void 0:jt.displayName),className:"w-6 h-6 rounded-full object-cover"}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[o.jsx("span",{className:"font-medium text-white text-sm",children:((He=ee.character)==null?void 0:He.name)||((_e=ee.user)==null?void 0:_e.displayName)}),o.jsx("span",{className:"text-gray-500 text-xs",children:_o(ee.timestamp)})]}),o.jsx("p",{className:"text-gray-100 text-sm",children:ee.content})]})]},ee.id)})})]})]}),(!e.replies||e.replies.length===0)&&y&&o.jsx("div",{className:"border-t border-gray-700/50 bg-gray-900/30",children:o.jsxs("form",{onSubmit:R,className:"p-4",children:[o.jsxs("div",{className:"flex space-x-3 mb-3",children:[o.jsx("img",{src:k==="user"?c==null?void 0:c.avatar:((Bt=V.find(ee=>ee.id===k))==null?void 0:Bt.avatar)||(c==null?void 0:c.avatar),alt:"Your avatar",className:"w-8 h-8 rounded-full object-cover"}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("select",{value:k,onChange:ee=>E(ee.target.value),className:"mb-2 bg-gray-800 text-white border border-gray-600 rounded-lg px-3 py-1 text-sm focus:border-purple-500 focus:outline-none",children:[o.jsx("option",{value:"user",children:"Reply as yourself"}),V.map(ee=>o.jsxs("option",{value:ee.id,children:[ee.name," - ",ee.title]},ee.id))]}),o.jsx("textarea",{value:j,onChange:ee=>_(ee.target.value),placeholder:"Write your reply...",className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-3 py-2 text-white focus:border-purple-500 focus:outline-none resize-none text-sm",rows:2,disabled:D})]})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("button",{type:"button",onClick:()=>w(!1),className:"text-gray-400 hover:text-white transition-colors text-sm",children:"Cancel"}),o.jsx("button",{type:"submit",disabled:!j.trim()||D,className:"bg-purple-600 hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed text-white px-4 py-1 rounded-lg transition-colors text-sm",children:D?"Replying...":"Reply"})]})]})})]})},MC=({post:e,onClose:t})=>{var v,x,m,b,j,_;const{user:r}=Pe(),{characters:n,getPostComments:s,addPost:i}=Ze(),[a,l]=N.useState([]),[c,u]=N.useState(""),[d,h]=N.useState(null),[f,p]=N.useState(!0),g=n.filter(k=>k.userId===(r==null?void 0:r.id));N.useEffect(()=>{y()},[e.id]);const y=async()=>{p(!0);const k=await s(e.id);l(k),p(!1)},w=async k=>{k.preventDefault(),!(!c.trim()||!r)&&(await i({content:c.trim(),characterId:d==null?void 0:d.id,character:d,userId:r.id,user:r,parentPostId:e.id,isThread:!1,visibility:"public",tags:c.match(/#\w+/g)||[]}),u(""),y())};return o.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-gray-900 rounded-2xl border border-gray-700/50 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"sticky top-0 bg-gray-900 border-b border-gray-700/50 p-4 flex items-center justify-between",children:[o.jsx("h2",{className:"text-lg font-bold text-white",children:"Replies"}),o.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-800 rounded-full transition-colors",children:o.jsx(nt,{className:"w-6 h-6 text-gray-400"})})]}),o.jsxs("div",{className:"p-6",children:[o.jsx("div",{className:"mb-6 p-4 bg-gray-800/30 rounded-lg border border-gray-700/50",children:o.jsxs("div",{className:"flex space-x-3",children:[o.jsx("img",{src:((v=e.character)==null?void 0:v.avatar)||((x=e.user)==null?void 0:x.avatar),alt:((m=e.character)==null?void 0:m.name)||((b=e.user)==null?void 0:b.displayName),className:"w-10 h-10 rounded-full object-cover"}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[o.jsx("span",{className:"font-bold text-white",children:((j=e.character)==null?void 0:j.name)||((_=e.user)==null?void 0:_.displayName)}),o.jsx("span",{className:"text-gray-500 text-sm",children:_o(e.timestamp)})]}),o.jsx("p",{className:"text-gray-100",children:e.content})]})]})}),o.jsxs("form",{onSubmit:w,className:"mb-6",children:[o.jsxs("div",{className:"flex space-x-3 mb-4",children:[o.jsx("img",{src:(d==null?void 0:d.avatar)||(r==null?void 0:r.avatar),alt:(d==null?void 0:d.name)||(r==null?void 0:r.displayName),className:"w-10 h-10 rounded-full object-cover"}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("select",{value:(d==null?void 0:d.id)||"user",onChange:k=>{if(k.target.value==="user")h(null);else{const E=g.find(D=>D.id===k.target.value);h(E||null)}},className:"mb-3 bg-gray-800 text-white border border-gray-600 rounded-lg px-3 py-1 text-sm focus:border-purple-500 focus:outline-none",children:[o.jsx("option",{value:"user",children:"Reply as yourself"}),g.map(k=>o.jsxs("option",{value:k.id,children:[k.name," - ",k.title]},k.id))]}),o.jsx("textarea",{value:c,onChange:k=>u(k.target.value),placeholder:"Write your reply...",className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white focus:border-purple-500 focus:outline-none resize-none",rows:3})]})]}),o.jsx("div",{className:"flex justify-end",children:o.jsxs("button",{type:"submit",disabled:!c.trim(),className:"flex items-center space-x-2 bg-purple-600 hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed text-white px-4 py-2 rounded-lg transition-colors",children:[o.jsx(Bv,{className:"w-4 h-4"}),o.jsx("span",{children:"Reply"})]})})]}),o.jsx("div",{className:"space-y-4",children:f?o.jsxs("div",{className:"text-center py-8",children:[o.jsx("div",{className:"animate-spin w-6 h-6 border-2 border-purple-500 border-t-transparent rounded-full mx-auto"}),o.jsx("p",{className:"text-gray-400 mt-2",children:"Loading replies..."})]}):a.length===0?o.jsx("div",{className:"text-center py-8",children:o.jsx("p",{className:"text-gray-400",children:"No replies yet. Be the first to reply!"})}):a.map(k=>{var E,D,S,P,A,B;return o.jsxs("div",{className:"flex space-x-3 p-4 bg-gray-800/20 rounded-lg",children:[o.jsx("img",{src:((E=k.character)==null?void 0:E.avatar_url)||((D=k.user)==null?void 0:D.avatar_url),alt:((S=k.character)==null?void 0:S.name)||((P=k.user)==null?void 0:P.display_name),className:"w-8 h-8 rounded-full object-cover"}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[o.jsx("span",{className:"font-medium text-white",children:((A=k.character)==null?void 0:A.name)||((B=k.user)==null?void 0:B.display_name)}),o.jsx("span",{className:"text-gray-500 text-sm",children:_o(k.timestamp)})]}),o.jsx("p",{className:"text-gray-100",children:k.content})]})]},k.id)})})]})]})})},UC=({posts:e,onLike:t,onRepost:r,onCreatePost:n})=>{const{user:s}=Pe(),{characters:i,getFilteredPosts:a,allUsers:l,bookmarkPost:c,unbookmarkPost:u,bookmarkedPosts:d,selectedCharacter:h,setSelectedCharacter:f}=Ze(),[p,g]=N.useState(!1),[y,w]=N.useState("for-you"),[v,x]=N.useState(null),[m,b]=N.useState([]),j=i.filter(A=>A.userId===(s==null?void 0:s.id));N.useEffect(()=>{const A=()=>{const H=_();b(H)};A();const B=setInterval(A,1e3);return()=>clearInterval(B)},[e,y,h,s]);const _=()=>y==="browse"?e.sort((A,B)=>B.timestamp.getTime()-A.timestamp.getTime()):a(h||"user"),k=A=>{f(A==="user"?null:A),g(!1)},E=A=>{d.includes(A)?u(A):c(A)},D=A=>{x(A)},S=()=>h?h.name:"Main Account",P=()=>h?h.avatar:s==null?void 0:s.avatar;return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"min-h-screen bg-black/10 backdrop-blur-sm",children:[o.jsxs("div",{className:"sticky top-0 bg-black/80 backdrop-blur-md border-b border-gray-700/50 p-4 z-10",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-bold text-white",children:"Home"}),o.jsx("p",{className:"text-gray-400 text-sm",children:"Character stories and adventures"})]}),o.jsxs("button",{onClick:n,className:"flex items-center space-x-2 bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-full transition-colors",children:[o.jsx(ll,{className:"w-4 h-4"}),o.jsx("span",{children:"Post"})]})]}),o.jsxs("div",{className:"flex space-x-1 mb-4 bg-gray-800/50 rounded-lg p-1",children:[o.jsxs("button",{onClick:()=>w("for-you"),className:`flex-1 flex items-center justify-center space-x-2 px-4 py-2 rounded-md transition-colors ${y==="for-you"?"bg-purple-600 text-white":"text-gray-400 hover:text-white"}`,children:[o.jsx(fr,{className:"w-4 h-4"}),o.jsx("span",{children:"For You"})]}),o.jsxs("button",{onClick:()=>w("browse"),className:`flex-1 flex items-center justify-center space-x-2 px-4 py-2 rounded-md transition-colors ${y==="browse"?"bg-purple-600 text-white":"text-gray-400 hover:text-white"}`,children:[o.jsx(_v,{className:"w-4 h-4"}),o.jsx("span",{children:"Browse"})]})]}),y==="for-you"&&o.jsxs("div",{className:"relative",children:[o.jsxs("button",{onClick:()=>g(!p),className:"flex items-center space-x-3 bg-gray-800/50 hover:bg-gray-700/50 rounded-lg px-4 py-3 transition-colors w-full",children:[o.jsx("img",{src:P(),alt:S(),className:"w-8 h-8 rounded-full object-cover"}),o.jsxs("div",{className:"flex-1 text-left",children:[o.jsx("p",{className:"text-white font-medium",children:"Viewing as"}),o.jsx("p",{className:"text-gray-400 text-sm",children:S()}),h&&o.jsxs("p",{className:"text-purple-300 text-xs",children:["#",h.verseTag]})]}),o.jsx(Cv,{className:`w-5 h-5 text-gray-400 transition-transform ${p?"rotate-180":""}`})]}),p&&o.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-gray-800 border border-gray-700 rounded-lg shadow-lg z-20",children:[o.jsxs("button",{onClick:()=>k("user"),className:`w-full flex items-center space-x-3 px-4 py-3 hover:bg-gray-700 transition-colors ${h?"":"bg-gray-700"}`,children:[o.jsx("img",{src:s==null?void 0:s.avatar,alt:s==null?void 0:s.displayName,className:"w-8 h-8 rounded-full object-cover"}),o.jsxs("div",{className:"text-left",children:[o.jsx("p",{className:"text-white font-medium",children:"Main Account"}),o.jsxs("p",{className:"text-gray-400 text-sm",children:["@",s==null?void 0:s.username]})]})]}),j.map(A=>o.jsxs("button",{onClick:()=>k(A),className:`w-full flex items-center space-x-3 px-4 py-3 hover:bg-gray-700 transition-colors ${(h==null?void 0:h.id)===A.id?"bg-gray-700":""}`,children:[o.jsx("img",{src:A.avatar,alt:A.name,className:"w-8 h-8 rounded-full object-cover"}),o.jsxs("div",{className:"text-left",children:[o.jsx("p",{className:"text-white font-medium",children:A.name}),o.jsxs("p",{className:"text-gray-400 text-sm",children:["@",A.username]}),o.jsxs("p",{className:"text-purple-300 text-xs",children:["#",A.verseTag]})]})]},A.id))]})]})]}),o.jsx("div",{className:"divide-y divide-gray-700/30",children:m.length===0?o.jsxs("div",{className:"p-12 text-center",children:[o.jsx("h3",{className:"text-xl font-semibold text-gray-400 mb-2",children:y==="browse"?"No posts available":"Welcome to CharacterVerse!"}),o.jsx("p",{className:"text-gray-500 mb-6",children:y==="browse"?"Check back later for new content from the community.":h?`Follow accounts or characters as ${S()} to see their posts here.`:"Follow other writers to see their posts here, or create your first post!"}),o.jsx("button",{onClick:n,className:"bg-purple-600 hover:bg-purple-700 text-white px-6 py-3 rounded-full transition-colors",children:"Create Your First Post"})]}):m.map(A=>o.jsx("div",{onClick:()=>D(A),className:"cursor-pointer",children:o.jsx(Ts,{post:A,onLike:()=>t(A.id),onRepost:()=>r(A.id),onBookmark:()=>E(A.id),isBookmarked:d.includes(A.id)})},A.id))}),o.jsx("div",{className:"p-6 text-center border-t border-gray-700/50 bg-black/20",children:o.jsxs("p",{className:"text-gray-500 text-sm",children:["Verse © ",new Date().getFullYear()]})})]}),v&&o.jsx(MC,{post:v,onClose:()=>x(null)})]})},$C=({characters:e,selectedCharacter:t,onCreatePost:r,onClose:n,replyToPost:s})=>{var B,H,G,M,V,I,W,q;const{user:i}=Pe(),[a,l]=N.useState(""),[c,u]=N.useState(t),[d,h]=N.useState("public"),[f,p]=N.useState(!1),[g,y]=N.useState([]),[w,v]=N.useState(!1),[x,m]=N.useState(!1),b=e.filter(C=>C.userId===(i==null?void 0:i.id)),j=async C=>{if(C.preventDefault(),!(!a.trim()||x)){m(!0);try{console.log("CreatePost: Submitting post with:",{content:a,activeCharacter:c,mediaUrls:g}),await r(a.trim(),c||void 0,g),console.log("CreatePost: Post submitted successfully"),l(""),y([])}catch(R){console.error("CreatePost: Error submitting post:",R),alert("Failed to create post. Please try again.")}finally{m(!1)}}},_=async(C,R)=>{if(i){v(!0);try{const z=R==="image"?"post-images":"post-videos",O=`${i.id}/${R}_${Date.now()}.${C.name.split(".").pop()}`,Q=await yd(C,z,O);Q?y(J=>[...J,Q]):alert("Failed to upload file")}catch(z){console.error("Upload error:",z),alert("Failed to upload file")}finally{v(!1)}}},k=()=>{const C=document.createElement("input");C.type="file",C.accept="image/*",C.onchange=R=>{var O;const z=(O=R.target.files)==null?void 0:O[0];z&&_(z,"image")},C.click()},E=()=>{const C=document.createElement("input");C.type="file",C.accept="video/*",C.onchange=R=>{var O;const z=(O=R.target.files)==null?void 0:O[0];z&&_(z,"video")},C.click()},D=C=>{y(R=>R.filter((z,O)=>O!==C))},S=a.length,P=280,A=[{value:"public",label:"Public",icon:_v,desc:"Anyone can see this post"},{value:"followers",label:"Followers",icon:fr,desc:"Only your followers can see this"},{value:"private",label:"Private",icon:Co,desc:"Only you can see this"}];return o.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-gray-900 rounded-2xl border border-gray-700/50 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"sticky top-0 bg-gray-900 border-b border-gray-700/50 p-4 flex items-center justify-between",children:[o.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-800 rounded-full transition-colors",children:o.jsx(nt,{className:"w-6 h-6 text-gray-400"})}),o.jsx("h2",{className:"text-lg font-bold text-white",children:s?"Reply to Post":"Create Post"}),o.jsx("div",{className:"w-10"})]}),s&&o.jsx("div",{className:"p-4 bg-gray-800/30 border-b border-gray-700/50",children:o.jsxs("div",{className:"flex space-x-3",children:[o.jsx("img",{src:((B=s.character)==null?void 0:B.avatar)||((H=s.user)==null?void 0:H.avatar),alt:((G=s.character)==null?void 0:G.name)||((M=s.user)==null?void 0:M.displayName),className:"w-8 h-8 rounded-full object-cover"}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[o.jsx("span",{className:"font-medium text-white",children:((V=s.character)==null?void 0:V.name)||((I=s.user)==null?void 0:I.displayName)}),o.jsxs("span",{className:"text-gray-500 text-sm",children:["@",((W=s.character)==null?void 0:W.username)||((q=s.user)==null?void 0:q.username)]})]}),o.jsx("p",{className:"text-gray-300 text-sm",children:s.content})]})]})}),o.jsxs("form",{onSubmit:j,className:"p-6",children:[o.jsxs("div",{className:"flex space-x-4 mb-4",children:[o.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center",children:c?o.jsx("img",{src:c.avatar,alt:c.name,className:"w-12 h-12 rounded-full object-cover"}):o.jsx("img",{src:i==null?void 0:i.avatar,alt:i==null?void 0:i.displayName,className:"w-12 h-12 rounded-full object-cover"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"flex items-center space-x-2 mb-2",children:o.jsxs("select",{value:(c==null?void 0:c.id)||"user",onChange:C=>{if(C.target.value==="user")u(null);else{const R=b.find(z=>z.id===C.target.value);u(R||null)}},className:"bg-gray-800 text-white border border-gray-600 rounded-lg px-3 py-1 text-sm focus:border-purple-500 focus:outline-none",children:[o.jsx("option",{value:"user",children:"Post as yourself"}),b.map(C=>o.jsxs("option",{value:C.id,children:[C.name," - ",C.title]},C.id))]})}),c&&o.jsxs("div",{className:"inline-flex items-center space-x-2 text-xs text-purple-300 bg-purple-900/30 px-2 py-1 rounded-full mb-3",children:[o.jsx("span",{children:"📖"}),o.jsx("span",{children:c.universe})]})]})]}),o.jsx("textarea",{value:a,onChange:C=>l(C.target.value),placeholder:s?"Write your reply...":c?`What's happening in ${c.name}'s world?`:"What's on your mind?",className:"w-full bg-transparent text-white text-xl placeholder-gray-500 resize-none border-none outline-none min-h-[120px]",maxLength:P,disabled:x}),g.length>0&&o.jsx("div",{className:"grid grid-cols-2 gap-2 mt-4",children:g.map((C,R)=>o.jsxs("div",{className:"relative",children:[C.includes(".mp4")||C.includes(".mov")||C.includes(".avi")?o.jsx("video",{src:C,className:"w-full h-32 object-cover rounded-lg",controls:!0}):o.jsx("img",{src:C,alt:"Upload",className:"w-full h-32 object-cover rounded-lg"}),o.jsx("button",{type:"button",onClick:()=>D(R),className:"absolute top-2 right-2 p-1 bg-black/50 hover:bg-black/70 rounded-full transition-colors",children:o.jsx(nt,{className:"w-4 h-4 text-white"})})]},R))}),o.jsxs("div",{className:"space-y-4 pt-4 border-t border-gray-700/50",children:[!s&&o.jsx("div",{className:"flex items-center space-x-4",children:o.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:f,onChange:C=>p(C.target.checked),className:"text-purple-600 focus:ring-purple-500 rounded"}),o.jsx("span",{className:"text-gray-300 text-sm",children:"Create as thread"})]})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-gray-300 text-sm mb-2",children:"Who can see this?"}),o.jsx("div",{className:"flex space-x-2",children:A.map(C=>o.jsxs("button",{type:"button",onClick:()=>h(C.value),className:`flex items-center space-x-2 px-3 py-2 rounded-lg text-sm transition-colors ${d===C.value?"bg-purple-600 text-white":"bg-gray-800 text-gray-300 hover:bg-gray-700"}`,children:[o.jsx(C.icon,{className:"w-4 h-4"}),o.jsx("span",{children:C.label})]},C.value))})]})]}),o.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-700/50",children:[o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx("button",{type:"button",onClick:k,disabled:w||x,className:"p-2 text-purple-400 hover:bg-purple-400/10 rounded-full transition-colors disabled:opacity-50",children:w?o.jsx(_d,{className:"w-5 h-5 animate-spin"}):o.jsx(Ev,{className:"w-5 h-5"})}),o.jsx("button",{type:"button",onClick:E,disabled:w||x,className:"p-2 text-purple-400 hover:bg-purple-400/10 rounded-full transition-colors disabled:opacity-50",children:o.jsx(Fv,{className:"w-5 h-5"})}),o.jsx("button",{type:"button",className:"p-2 text-purple-400 hover:bg-purple-400/10 rounded-full transition-colors",disabled:x,children:o.jsx(LC,{className:"w-5 h-5"})}),o.jsx("button",{type:"button",className:"p-2 text-purple-400 hover:bg-purple-400/10 rounded-full transition-colors",disabled:x,children:o.jsx(ol,{className:"w-5 h-5"})}),o.jsx("button",{type:"button",className:"p-2 text-purple-400 hover:bg-purple-400/10 rounded-full transition-colors",disabled:x,children:o.jsx(Nv,{className:"w-5 h-5"})})]}),o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:`w-8 h-8 rounded-full border-2 ${S>P*.8?S>=P?"border-red-500":"border-yellow-500":"border-gray-600"}`,children:o.jsx("svg",{className:"w-full h-full transform -rotate-90",children:o.jsx("circle",{cx:"16",cy:"16",r:"14",fill:"none",strokeWidth:"2",className:S>P*.8?S>=P?"stroke-red-500":"stroke-yellow-500":"stroke-purple-500",strokeDasharray:`${S/P*88} 88`})})}),o.jsx("span",{className:`text-sm ${S>=P?"text-red-400":"text-gray-500"}`,children:P-S})]}),o.jsx("button",{type:"submit",disabled:!a.trim()||S>P||w||x,className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white font-semibold px-6 py-2 rounded-full hover:from-purple-700 hover:to-pink-700 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:x?"Posting...":s?"Reply":f?"Start Thread":"Post"})]})]})]})]})})},zC=()=>{const{posts:e,characters:t,selectedCharacter:r,addPost:n,likePost:s,repostPost:i}=Ze(),{user:a}=Pe(),[l,c]=N.useState(!1),u=async(f,p,g)=>{if(a)try{console.log("HomePage: Creating post with:",{content:f,character:p,mediaUrls:g}),await n({content:f,characterId:p==null?void 0:p.id,character:p,userId:a.id,user:a,isThread:!1,visibility:"public",tags:f.match(/#\w+/g)||[],mediaUrls:g}),console.log("HomePage: Post created successfully"),c(!1)}catch(y){console.error("HomePage: Error creating post:",y),alert("Failed to create post. Please try again.")}},d=f=>{s(f)},h=f=>{i(f)};return o.jsxs(o.Fragment,{children:[o.jsx(UC,{posts:e,onLike:d,onRepost:h,onCreatePost:()=>c(!0)}),l&&o.jsx($C,{characters:t,selectedCharacter:r,onCreatePost:u,onClose:()=>c(!1)})]})},ko=({currentImage:e,onImageChange:t,type:r,className:n=""})=>{const{user:s}=Pe(),i=N.useRef(null),a=N.useRef(null),[l,c]=N.useState(!1),[u,d]=N.useState(!1),[h,f]=N.useState(!1),[p,g]=N.useState(null),[y,w]=N.useState({x:0,y:0,scale:1,rotation:0}),v=r==="avatar"?{width:350,height:350}:{width:1500,height:500},x=D=>new Promise(S=>{const P=a.current,A=P.getContext("2d"),B=new Image;B.onload=()=>{P.width=v.width,P.height=v.height,A.clearRect(0,0,P.width,P.height),A.save(),A.translate(P.width/2,P.height/2),A.rotate(y.rotation*Math.PI/180),A.scale(y.scale,y.scale);const H=B.width,G=B.height,M=-H/2+y.x,V=-G/2+y.y;A.drawImage(B,M,V,H,G),A.restore(),P.toBlob(I=>{if(I){const W=new File([I],D.name,{type:D.type,lastModified:Date.now()});S(W)}},D.type,.9)},B.src=URL.createObjectURL(D)}),m=async D=>{if(!(!s||!D)){if(!D.type.startsWith("image/")){alert("Please select an image file");return}if(D.size>10*1024*1024){alert("File size must be less than 10MB");return}g(D),f(!0)}},b=async()=>{if(!(!p||!s)){c(!0);try{const D=await x(p),S=r==="avatar"?"avatars":"headers",P=`${s.id}/${r}_${Date.now()}.${D.name.split(".").pop()}`,A=await yd(D,S,P);A?(t(A),f(!1),g(null),w({x:0,y:0,scale:1,rotation:0})):alert("Failed to upload image")}catch(D){console.error("Upload error:",D),alert("Failed to upload image")}finally{c(!1)}}},j=()=>{var D;(D=i.current)==null||D.click()},_=D=>{D.preventDefault(),d(!1);const S=Array.from(D.dataTransfer.files);S.length>0&&m(S[0])},k=D=>{D.preventDefault(),d(!0)},E=D=>{D.preventDefault(),d(!1)};return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:`relative group ${n}`,children:[o.jsxs("div",{onClick:j,onDrop:_,onDragOver:k,onDragLeave:E,className:`relative cursor-pointer transition-all duration-200 ${u?"scale-105 opacity-80":""} ${r==="avatar"?"w-32 h-32 rounded-full":"w-full h-48 rounded-lg"} overflow-hidden bg-gray-800 border-2 border-dashed border-gray-600 hover:border-purple-500`,children:[e?o.jsx("img",{src:e,alt:r,className:"w-full h-full object-cover"}):o.jsx("div",{className:"w-full h-full flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx(jv,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),o.jsx("p",{className:"text-gray-400 text-sm",children:r==="avatar"?"Upload Avatar":"Upload Header"}),o.jsx("p",{className:"text-gray-500 text-xs mt-1",children:r==="avatar"?"350x350":"1500x500"})]})}),o.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex items-center justify-center",children:l?o.jsxs("div",{className:"text-white text-center",children:[o.jsx("div",{className:"animate-spin w-6 h-6 border-2 border-white border-t-transparent rounded-full mx-auto mb-2"}),o.jsx("p",{className:"text-sm",children:"Uploading..."})]}):o.jsxs("div",{className:"text-white text-center",children:[o.jsx(_d,{className:"w-6 h-6 mx-auto mb-2"}),o.jsxs("p",{className:"text-sm",children:[e?"Change":"Upload"," ",r]})]})})]}),o.jsx("input",{ref:i,type:"file",accept:"image/*",onChange:D=>{var P;const S=(P=D.target.files)==null?void 0:P[0];S&&m(S)},className:"hidden"}),u&&o.jsx("div",{className:"absolute inset-0 bg-purple-500/20 border-2 border-purple-500 rounded-lg flex items-center justify-center",children:o.jsx("p",{className:"text-purple-300 font-medium",children:"Drop image here"})})]}),o.jsx("canvas",{ref:a,className:"hidden"}),h&&p&&o.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-gray-900 rounded-2xl border border-gray-700/50 w-full max-w-2xl",children:[o.jsxs("div",{className:"p-4 border-b border-gray-700/50 flex items-center justify-between",children:[o.jsx("h3",{className:"text-lg font-bold text-white",children:"Adjust Image"}),o.jsx("button",{onClick:()=>{f(!1),g(null),w({x:0,y:0,scale:1,rotation:0})},className:"p-2 hover:bg-gray-800 rounded-full transition-colors",children:o.jsx(nt,{className:"w-6 h-6 text-gray-400"})})]}),o.jsxs("div",{className:"p-6",children:[o.jsx("div",{className:"mb-6",children:o.jsx("div",{className:`relative mx-auto border-2 border-gray-600 overflow-hidden ${r==="avatar"?"w-64 h-64 rounded-full":"w-full h-40 rounded-lg"}`,style:{maxWidth:r==="avatar"?"256px":"100%"},children:o.jsx("img",{src:URL.createObjectURL(p),alt:"Preview",className:"w-full h-full object-cover",style:{transform:`translate(${y.x}px, ${y.y}px) scale(${y.scale}) rotate(${y.rotation}deg)`,transformOrigin:"center"}})})}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Position X: ",y.x,"px"]}),o.jsx("input",{type:"range",min:"-200",max:"200",value:y.x,onChange:D=>w(S=>({...S,x:parseInt(D.target.value)})),className:"w-full"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Position Y: ",y.y,"px"]}),o.jsx("input",{type:"range",min:"-200",max:"200",value:y.y,onChange:D=>w(S=>({...S,y:parseInt(D.target.value)})),className:"w-full"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Scale: ",y.scale.toFixed(1),"x"]}),o.jsx("input",{type:"range",min:"0.5",max:"3",step:"0.1",value:y.scale,onChange:D=>w(S=>({...S,scale:parseFloat(D.target.value)})),className:"w-full"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Rotation: ",y.rotation,"°"]}),o.jsx("input",{type:"range",min:"0",max:"360",value:y.rotation,onChange:D=>w(S=>({...S,rotation:parseInt(D.target.value)})),className:"w-full"})]})]}),o.jsxs("div",{className:"flex justify-end space-x-4 mt-6 pt-6 border-t border-gray-700/50",children:[o.jsx("button",{onClick:()=>{f(!1),g(null),w({x:0,y:0,scale:1,rotation:0})},className:"px-6 py-2 text-gray-400 hover:text-white transition-colors",children:"Cancel"}),o.jsx("button",{onClick:b,disabled:l,className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white font-semibold px-6 py-2 rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all duration-200 disabled:opacity-50",children:l?"Uploading...":"Apply & Upload"})]})]})]})})]})},VC=({character:e,onClose:t})=>{const{updateCharacter:r}=Ze(),[n,s]=N.useState({username:e.username,name:e.name,title:e.title,bio:e.bio,universe:e.universe,verseTag:e.verseTag,traits:e.traits.join(", "),customColor:e.customColor,customFont:e.customFont,avatar:e.avatar,headerImage:e.headerImage}),i=l=>{l.preventDefault();const c={username:n.username,name:n.name,title:n.title,bio:n.bio,universe:n.universe,verseTag:n.verseTag,traits:n.traits.split(",").map(u=>u.trim()).filter(u=>u),customColor:n.customColor,customFont:n.customFont,avatar:n.avatar,headerImage:n.headerImage};r(e.id,c),t()},a=["Inter","Roboto","Open Sans","Lato","Montserrat","Playfair Display","Crimson Text","Merriweather","Courier New","Georgia"];return o.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-gray-900 rounded-2xl border border-gray-700/50 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"sticky top-0 bg-gray-900 border-b border-gray-700/50 p-4 flex items-center justify-between",children:[o.jsx("h2",{className:"text-lg font-bold text-white",children:"Edit Character"}),o.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-800 rounded-full transition-colors",children:o.jsx(nt,{className:"w-6 h-6 text-gray-400"})})]}),o.jsxs("form",{onSubmit:i,className:"p-6 space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Header Image"}),o.jsx(ko,{currentImage:n.headerImage,onImageChange:l=>s(c=>({...c,headerImage:l})),type:"header"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Avatar"}),o.jsx(ko,{currentImage:n.avatar,onImageChange:l=>s(c=>({...c,avatar:l})),type:"avatar",className:"w-32"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Character Username *"}),o.jsx("input",{type:"text",value:n.username,onChange:l=>s(c=>({...c,username:l.target.value})),className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white focus:border-purple-500 focus:outline-none",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Character Name *"}),o.jsx("input",{type:"text",value:n.name,onChange:l=>s(c=>({...c,name:l.target.value})),className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white focus:border-purple-500 focus:outline-none",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Title/Role *"}),o.jsx("input",{type:"text",value:n.title,onChange:l=>s(c=>({...c,title:l.target.value})),className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white focus:border-purple-500 focus:outline-none",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Universe *"}),o.jsx("input",{type:"text",value:n.universe,onChange:l=>s(c=>({...c,universe:l.target.value})),className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white focus:border-purple-500 focus:outline-none",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Verse Tag *"}),o.jsx("input",{type:"text",value:n.verseTag,onChange:l=>s(c=>({...c,verseTag:l.target.value})),className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white focus:border-purple-500 focus:outline-none",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Character Color"}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"color",value:n.customColor,onChange:l=>s(c=>({...c,customColor:l.target.value})),className:"w-12 h-12 rounded-lg border border-gray-600 bg-gray-800"}),o.jsx("div",{className:"flex-1",children:o.jsx("input",{type:"text",value:n.customColor,onChange:l=>s(c=>({...c,customColor:l.target.value})),className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white focus:border-purple-500 focus:outline-none"})})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Bio *"}),o.jsx("textarea",{value:n.bio,onChange:l=>s(c=>({...c,bio:l.target.value})),rows:4,className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white focus:border-purple-500 focus:outline-none resize-none",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Traits (comma-separated)"}),o.jsx("input",{type:"text",value:n.traits,onChange:l=>s(c=>({...c,traits:l.target.value})),className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white focus:border-purple-500 focus:outline-none"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Custom Font"}),o.jsx("select",{value:n.customFont,onChange:l=>s(c=>({...c,customFont:l.target.value})),className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white focus:border-purple-500 focus:outline-none",children:a.map(l=>o.jsx("option",{value:l,style:{fontFamily:l},children:l},l))})]}),o.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-700/50",children:[o.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 text-gray-400 hover:text-white transition-colors",children:"Cancel"}),o.jsx("button",{type:"submit",className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white font-semibold px-6 py-2 rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all duration-200",children:"Save Changes"})]})]})]})})},Ed=({character:e,onClose:t})=>{const{user:r}=Pe(),{posts:n,followCharacter:s,unfollowCharacter:i,likePost:a,repostPost:l,getCharacterFollowers:c,getCharacterFollowing:u}=Ze(),[d,h]=N.useState("posts"),[f,p]=N.useState([]),[g,y]=N.useState([]),[w,v]=N.useState(e.followers.length),[x,m]=N.useState(e.following.length),b=e.userId===(r==null?void 0:r.id),j=e.followers.includes((r==null?void 0:r.id)||""),_=n.filter(B=>B.characterId===e.id);N.useEffect(()=>{d==="followers"?E():d==="following"&&D()},[d,e.id]),N.useEffect(()=>{const B=setInterval(()=>{k()},1e3);return()=>clearInterval(B)},[e.id]);const k=async()=>{const B=await c(e.id),H=await u(e.id);v(B.length),m(H.length)},E=async()=>{const B=await c(e.id);p(B),v(B.length)},D=async()=>{const B=await u(e.id);y(B),m(B.length)},S=()=>{j?i(e.id):s(e.id)},P=B=>{a(B)},A=B=>{l(B)};return o.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-gray-900 rounded-2xl border border-gray-700/50 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"sticky top-0 bg-gray-900 border-b border-gray-700/50 p-4 flex items-center justify-between",children:[o.jsx("h2",{className:"text-lg font-bold text-white",children:"Character Profile"}),o.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-800 rounded-full transition-colors",children:o.jsx(nt,{className:"w-6 h-6 text-gray-400"})})]}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"h-48 relative",style:{backgroundColor:`${e.customColor}30`},children:o.jsx("img",{src:e.headerImage,alt:"Character header",className:"w-full h-full object-cover"})}),o.jsxs("div",{className:"relative px-6 pb-6",children:[o.jsxs("div",{className:"flex items-end justify-between -mt-16 mb-4",children:[o.jsx("img",{src:e.avatar,alt:e.name,className:"w-32 h-32 rounded-full object-cover ring-4 ring-gray-900 bg-gray-900 relative z-10"}),!b&&o.jsx("button",{onClick:S,className:`flex items-center space-x-2 px-4 py-2 rounded-full transition-colors ${j?"bg-gray-600 text-white hover:bg-gray-700":"bg-purple-600 text-white hover:bg-purple-700"}`,children:j?o.jsxs(o.Fragment,{children:[o.jsx(Ri,{className:"w-4 h-4"}),o.jsx("span",{children:"Unfollow"})]}):o.jsxs(o.Fragment,{children:[o.jsx(Ir,{className:"w-4 h-4"}),o.jsx("span",{children:"Follow"})]})})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-white",children:e.name}),o.jsx("p",{className:"text-purple-300 text-lg",children:e.title}),o.jsxs("p",{className:"text-gray-400",children:["@",e.username]})]}),o.jsx("p",{className:"text-gray-300",children:e.bio}),o.jsxs("div",{className:"flex items-center space-x-4 text-gray-400 text-sm",children:[o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx(Nv,{className:"w-4 h-4"}),o.jsx("span",{children:e.universe})]}),o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx(ol,{className:"w-4 h-4"}),o.jsxs("span",{children:["Created ",e.createdAt.toLocaleDateString()]})]}),o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:e.customColor}}),o.jsxs("span",{children:["#",e.verseTag]})]})]}),o.jsx("div",{className:"flex flex-wrap gap-2",children:e.traits.map(B=>o.jsx("span",{className:"px-2 py-1 bg-gray-700/50 text-gray-300 text-xs rounded-full",children:B},B))}),o.jsxs("div",{className:"flex items-center space-x-6 text-sm",children:[o.jsxs("button",{onClick:()=>h("following"),className:"hover:text-white transition-colors",children:[o.jsx("span",{className:"font-bold text-white",children:x}),o.jsx("span",{className:"text-gray-400 ml-1",children:"Following"})]}),o.jsxs("button",{onClick:()=>h("followers"),className:"hover:text-white transition-colors",children:[o.jsx("span",{className:"font-bold text-white",children:w}),o.jsx("span",{className:"text-gray-400 ml-1",children:"Followers"})]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-bold text-white",children:_.length}),o.jsx("span",{className:"text-gray-400 ml-1",children:"Posts"})]})]})]})]})]}),o.jsx("div",{className:"border-b border-gray-700/50 bg-black/20 sticky top-16 z-10",children:o.jsx("div",{className:"flex",children:[{key:"posts",label:"Posts",count:_.length},{key:"followers",label:"Followers",count:w},{key:"following",label:"Following",count:x}].map(B=>o.jsxs("button",{onClick:()=>h(B.key),className:`flex-1 px-4 py-4 text-center transition-colors relative ${d===B.key?"text-purple-400 border-b-2 border-purple-400":"text-gray-400 hover:text-white"}`,children:[o.jsx("span",{className:"font-medium",children:B.label}),B.count>0&&o.jsx("span",{className:"ml-2 text-xs bg-gray-700 px-2 py-1 rounded-full",children:B.count})]},B.key))})}),o.jsxs("div",{className:"p-6",children:[d==="posts"&&o.jsx("div",{className:"space-y-4",children:_.length===0?o.jsx("div",{className:"text-center py-12",children:o.jsx("p",{className:"text-gray-400",children:"No posts yet"})}):_.map(B=>o.jsx(Ts,{post:B,onLike:()=>P(B.id),onRepost:()=>A(B.id)},B.id))}),d==="followers"&&o.jsx("div",{className:"space-y-4",children:f.length===0?o.jsx("div",{className:"text-center py-12",children:o.jsx("p",{className:"text-gray-400",children:"No followers yet"})}):f.map(B=>o.jsxs("div",{className:"flex items-center space-x-4 p-4 bg-gray-800/30 rounded-lg hover:bg-gray-700/30 transition-colors cursor-pointer",children:[o.jsx("img",{src:B.avatar,alt:B.displayName,className:"w-12 h-12 rounded-full object-cover"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-white font-medium",children:B.displayName}),o.jsxs("p",{className:"text-gray-400 text-sm",children:["@",B.username]}),o.jsxs("p",{className:"text-purple-300 text-sm",children:["#",B.writersTag]})]})]},B.id))}),d==="following"&&o.jsx("div",{className:"space-y-4",children:g.length===0?o.jsx("div",{className:"text-center py-12",children:o.jsx("p",{className:"text-gray-400",children:"Not following anyone yet"})}):g.map(B=>o.jsxs("div",{className:"flex items-center space-x-4 p-4 bg-gray-800/30 rounded-lg hover:bg-gray-700/30 transition-colors cursor-pointer",children:[o.jsx("img",{src:B.avatar,alt:"displayName"in B?B.displayName:B.name,className:"w-12 h-12 rounded-full object-cover"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-white font-medium",children:"displayName"in B?B.displayName:B.name}),o.jsxs("p",{className:"text-gray-400 text-sm",children:["@",B.username]}),o.jsxs("p",{className:"text-purple-300 text-sm",children:["#","writersTag"in B?B.writersTag:B.verseTag]})]})]},B.id))})]})]})})},ui=({character:e,onEdit:t,onDelete:r,showActions:n=!0,showFollowButton:s=!1})=>{const{user:i}=Pe(),{deleteCharacter:a,followCharacter:l,unfollowCharacter:c}=Ze(),[u,d]=N.useState(!1),[h,f]=N.useState(!1),p=e.userId===(i==null?void 0:i.id),g=e.followers.includes((i==null?void 0:i.id)||""),y=()=>{t?t():d(!0)},w=()=>{window.confirm("Are you sure you want to delete this character?")&&(r?r():a(e.id))},v=()=>{g?c(e.id):l(e.id)},x=()=>{f(!0)};return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"rounded-2xl border border-gray-700/50 overflow-hidden hover:bg-gray-700/30 transition-colors cursor-pointer relative",style:{backgroundColor:`${e.customColor}50`},onClick:x,children:[o.jsxs("div",{className:"relative h-32",children:[o.jsx("img",{src:e.headerImage,alt:`${e.name} header`,className:"w-full h-full object-cover"}),n&&p&&o.jsxs("div",{className:"absolute top-3 right-3 flex space-x-2",children:[o.jsx("button",{onClick:m=>{m.stopPropagation(),y()},className:"p-2 bg-black/50 hover:bg-black/70 rounded-full transition-colors",children:o.jsx(Cd,{className:"w-4 h-4 text-white"})}),o.jsx("button",{onClick:m=>{m.stopPropagation(),w()},className:"p-2 bg-black/50 hover:bg-red-600/70 rounded-full transition-colors",children:o.jsx(Yi,{className:"w-4 h-4 text-white"})})]})]}),o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex items-center space-x-4 -mt-16 mb-4 relative z-10",children:[o.jsx("img",{src:e.avatar,alt:e.name,className:"w-16 h-16 rounded-full object-cover ring-4 ring-gray-800 bg-gray-800"}),o.jsx("div",{className:"flex items-center space-x-2 mt-8",children:o.jsxs("span",{className:"text-purple-300 text-sm",children:["#",e.verseTag]})})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-white font-bold text-lg",children:e.name}),o.jsx("p",{className:"text-purple-300",children:e.title}),o.jsxs("p",{className:"text-gray-400 text-sm",children:["@",e.username]})]}),o.jsx("p",{className:"text-gray-300 text-sm line-clamp-3",children:e.bio}),o.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.traits.slice(0,3).map(m=>o.jsx("span",{className:"px-2 py-1 bg-gray-700/50 text-gray-300 text-xs rounded-full",children:m},m)),e.traits.length>3&&o.jsxs("span",{className:"px-2 py-1 bg-gray-700/50 text-gray-400 text-xs rounded-full",children:["+",e.traits.length-3," more"]})]}),o.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-gray-700/50",children:[o.jsxs("div",{className:"flex items-center space-x-4 text-gray-400 text-sm",children:[o.jsxs("span",{children:[e.followers.length," followers"]}),o.jsxs("span",{children:[e.following.length," following"]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[s&&!p&&o.jsx("button",{onClick:m=>{m.stopPropagation(),v()},className:`flex items-center space-x-1 px-3 py-1 rounded-full text-sm transition-colors ${g?"bg-gray-600 text-white hover:bg-gray-700":"bg-purple-600 text-white hover:bg-purple-700"}`,children:g?o.jsxs(o.Fragment,{children:[o.jsx(Ri,{className:"w-3 h-3"}),o.jsx("span",{children:"Unfollow"})]}):o.jsxs(o.Fragment,{children:[o.jsx(Ir,{className:"w-3 h-3"}),o.jsx("span",{children:"Follow"})]})}),o.jsxs("button",{onClick:m=>{m.stopPropagation(),x()},className:"flex items-center space-x-1 px-3 py-1 bg-gray-700 text-white rounded-full text-sm hover:bg-gray-600 transition-colors",children:[o.jsx(bd,{className:"w-3 h-3"}),o.jsx("span",{children:"View"})]})]})]})]})]})]}),u&&o.jsx(VC,{character:e,onClose:()=>d(!1)}),h&&o.jsx(Ed,{character:e,onClose:()=>f(!1)})]})},Rv=({user:e,onClose:t})=>{const{user:r}=Pe(),{posts:n,followUser:s,unfollowUser:i,likePost:a,repostPost:l,getUserFollowers:c,getUserFollowing:u}=Ze(),[d,h]=N.useState("posts"),[f,p]=N.useState([]),[g,y]=N.useState([]),w=e.id===(r==null?void 0:r.id),v=(r==null?void 0:r.following.includes(e.id))||!1,x=n.filter(E=>E.userId===e.id);N.useEffect(()=>{d==="followers"?m():d==="following"&&b()},[d,e.id]);const m=async()=>{const E=await c(e.id);p(E)},b=async()=>{const E=await u(e.id);y(E)},j=()=>{s(e.id)},_=E=>{a(E)},k=E=>{l(E)};return o.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-gray-900 rounded-2xl border border-gray-700/50 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"sticky top-0 bg-gray-900 border-b border-gray-700/50 p-4 flex items-center justify-between",children:[o.jsx("h2",{className:"text-lg font-bold text-white",children:"Profile"}),o.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-800 rounded-full transition-colors",children:o.jsx(nt,{className:"w-6 h-6 text-gray-400"})})]}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"h-48 relative bg-gradient-to-r from-purple-600 via-pink-600 to-purple-800",children:o.jsx("img",{src:e.headerImage,alt:"Profile header",className:"w-full h-full object-cover"})}),o.jsxs("div",{className:"relative px-6 pb-6",children:[o.jsxs("div",{className:"flex items-end justify-between -mt-16 mb-4",children:[o.jsx("img",{src:e.avatar,alt:e.displayName,className:"w-32 h-32 rounded-full object-cover ring-4 ring-gray-900 bg-gray-900 relative z-10"}),!w&&o.jsx("button",{onClick:j,className:`flex items-center space-x-2 px-4 py-2 rounded-full transition-colors ${v?"bg-gray-600 text-white hover:bg-gray-700":"bg-purple-600 text-white hover:bg-purple-700"}`,children:v?o.jsxs(o.Fragment,{children:[o.jsx(Ri,{className:"w-4 h-4"}),o.jsx("span",{children:"Unfollow"})]}):o.jsxs(o.Fragment,{children:[o.jsx(Ir,{className:"w-4 h-4"}),o.jsx("span",{children:"Follow"})]})})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-white",children:e.displayName}),o.jsxs("p",{className:"text-gray-400",children:["@",e.username]})]}),o.jsx("p",{className:"text-gray-300",children:e.bio}),o.jsxs("div",{className:"flex items-center space-x-4 text-gray-400 text-sm",children:[o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx(ol,{className:"w-4 h-4"}),o.jsxs("span",{children:["Joined ",e.createdAt.toLocaleDateString()]})]}),o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx("span",{className:"w-2 h-2 bg-purple-500 rounded-full"}),o.jsxs("span",{children:["#",e.writersTag]})]})]}),o.jsxs("div",{className:"flex items-center space-x-6 text-sm",children:[o.jsxs("button",{onClick:()=>h("following"),className:"hover:text-white transition-colors",children:[o.jsx("span",{className:"font-bold text-white",children:e.following.length}),o.jsx("span",{className:"text-gray-400 ml-1",children:"Following"})]}),o.jsxs("button",{onClick:()=>h("followers"),className:"hover:text-white transition-colors",children:[o.jsx("span",{className:"font-bold text-white",children:e.followers.length}),o.jsx("span",{className:"text-gray-400 ml-1",children:"Followers"})]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-bold text-white",children:x.length}),o.jsx("span",{className:"text-gray-400 ml-1",children:"Posts"})]})]})]})]})]}),o.jsx("div",{className:"border-b border-gray-700/50 bg-black/20 sticky top-16 z-10",children:o.jsx("div",{className:"flex",children:[{key:"posts",label:"Posts",count:x.length},{key:"followers",label:"Followers",count:e.followers.length},{key:"following",label:"Following",count:e.following.length}].map(E=>o.jsxs("button",{onClick:()=>h(E.key),className:`flex-1 px-4 py-4 text-center transition-colors relative ${d===E.key?"text-purple-400 border-b-2 border-purple-400":"text-gray-400 hover:text-white"}`,children:[o.jsx("span",{className:"font-medium",children:E.label}),E.count>0&&o.jsx("span",{className:"ml-2 text-xs bg-gray-700 px-2 py-1 rounded-full",children:E.count})]},E.key))})}),o.jsxs("div",{className:"p-6",children:[d==="posts"&&o.jsx("div",{className:"space-y-4",children:x.length===0?o.jsx("div",{className:"text-center py-12",children:o.jsx("p",{className:"text-gray-400",children:"No posts yet"})}):x.map(E=>o.jsx(Ts,{post:E,onLike:()=>_(E.id),onRepost:()=>k(E.id)},E.id))}),d==="followers"&&o.jsx("div",{className:"space-y-4",children:f.length===0?o.jsx("div",{className:"text-center py-12",children:o.jsx("p",{className:"text-gray-400",children:"No followers yet"})}):f.map(E=>o.jsxs("div",{className:"flex items-center space-x-4 p-4 bg-gray-800/30 rounded-lg hover:bg-gray-700/30 transition-colors cursor-pointer",children:[o.jsx("img",{src:E.avatar,alt:E.displayName,className:"w-12 h-12 rounded-full object-cover"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-white font-medium",children:E.displayName}),o.jsxs("p",{className:"text-gray-400 text-sm",children:["@",E.username]}),o.jsxs("p",{className:"text-purple-300 text-sm",children:["#",E.writersTag]})]})]},E.id))}),d==="following"&&o.jsx("div",{className:"space-y-4",children:g.length===0?o.jsx("div",{className:"text-center py-12",children:o.jsx("p",{className:"text-gray-400",children:"Not following anyone yet"})}):g.map(E=>o.jsxs("div",{className:"flex items-center space-x-4 p-4 bg-gray-800/30 rounded-lg hover:bg-gray-700/30 transition-colors cursor-pointer",children:[o.jsx("img",{src:E.avatar,alt:E.displayName,className:"w-12 h-12 rounded-full object-cover"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-white font-medium",children:E.displayName}),o.jsxs("p",{className:"text-gray-400 text-sm",children:["@",E.username]}),o.jsxs("p",{className:"text-purple-300 text-sm",children:["#",E.writersTag]})]})]},E.id))})]})]})})},HC=()=>{const{user:e}=Pe(),{posts:t,characters:r,allUsers:n,searchContent:s,getRecommendations:i,likePost:a,repostPost:l,followUser:c,unfollowUser:u}=Ze(),[d,h]=N.useState(""),[f,p]=N.useState("trending"),[g,y]=N.useState({posts:[],characters:[],users:[]}),[w,v]=N.useState({writers:[],characters:[]}),[x,m]=N.useState(null),[b,j]=N.useState(null),[_,k]=N.useState({}),[E,D]=N.useState([]),[S,P]=N.useState([]),[A,B]=N.useState([]);N.useEffect(()=>{const C=()=>{const z=i();v(z);const O=t.flatMap(ie=>ie.tags).reduce((ie,X)=>(ie[X]=(ie[X]||0)+1,ie),{}),Q=Object.entries(O).sort(([,ie],[,X])=>X-ie).slice(0,10);D(Q);const J=r.map(ie=>ie.verseTag).filter((ie,X,Ue)=>Ue.indexOf(ie)===X).slice(0,8);if(P(J),B(n),e){const ie={};n.forEach(X=>{ie[X.id]=e.following.includes(X.id)}),k(ie)}d.trim()&&H()};C();const R=setInterval(C,1e3);return()=>clearInterval(R)},[t,r,n,e,d,i]);const H=()=>{if(!d.trim())return;const C=d.toLowerCase(),R=t.filter(Q=>{var J,ie;return Q.content.toLowerCase().includes(C)||((J=Q.character)==null?void 0:J.name.toLowerCase().includes(C))||((ie=Q.user)==null?void 0:ie.displayName.toLowerCase().includes(C))||Q.tags.some(X=>X.toLowerCase().includes(C))}),z=r.filter(Q=>Q.name.toLowerCase().includes(C)||Q.username.toLowerCase().includes(C)||Q.verseTag.toLowerCase().includes(C)||Q.universe.toLowerCase().includes(C)||Q.bio.toLowerCase().includes(C)||Q.traits.some(J=>J.toLowerCase().includes(C))),O=n.filter(Q=>Q.displayName.toLowerCase().includes(C)||Q.username.toLowerCase().includes(C)||Q.writersTag.toLowerCase().includes(C)||Q.bio.toLowerCase().includes(C));y({posts:R,characters:z,users:O})};N.useEffect(()=>{d.trim()&&(H(),p("search"))},[d]);const G=C=>{a(C)},M=C=>{l(C)},V=async C=>{await c(C),k(R=>({...R,[C]:!R[C]}))},I=C=>_[C]||!1,W=C=>{m(C)},q=C=>{j(C)};return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"min-h-screen bg-black/10 backdrop-blur-sm",children:[o.jsxs("div",{className:"sticky top-0 bg-black/80 backdrop-blur-md border-b border-gray-700/50 p-4 z-10",children:[o.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Explore"}),o.jsxs("div",{className:"relative mb-4",children:[o.jsx(Kr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),o.jsx("input",{type:"text",value:d,onChange:C=>h(C.target.value),placeholder:"Search posts, characters, tags, or writers...",className:"w-full bg-gray-800 border border-gray-600 rounded-full pl-10 pr-4 py-3 text-white focus:border-purple-500 focus:outline-none"})]}),o.jsx("div",{className:"flex space-x-1 overflow-x-auto",children:[{key:"trending",label:"Trending",icon:fp},{key:"tags",label:"Tags",icon:Oc},{key:"characters",label:"Characters",icon:fr},{key:"writers",label:"Writers",icon:Ir},...d?[{key:"search",label:"Search Results",icon:Kr}]:[]].map(C=>o.jsxs("button",{onClick:()=>p(C.key),className:`flex items-center space-x-2 px-4 py-2 rounded-full transition-colors whitespace-nowrap ${f===C.key?"bg-purple-600 text-white":"text-gray-400 hover:text-white hover:bg-gray-800"}`,children:[o.jsx(C.icon,{className:"w-4 h-4"}),o.jsx("span",{children:C.label})]},C.key))})]}),o.jsxs("div",{className:"p-6",children:[f==="trending"&&o.jsxs("div",{className:"space-y-6",children:[w.characters.length>0&&o.jsxs("div",{className:"bg-gray-800/50 rounded-2xl p-6 border border-gray-700/50",children:[o.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center space-x-2",children:[o.jsx(OC,{className:"w-5 h-5 text-purple-400"}),o.jsx("span",{children:"Recommended for You"})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:w.characters.slice(0,4).map(C=>o.jsx("div",{onClick:()=>q(C),children:o.jsx(ui,{character:C,showActions:!1,showFollowButton:!0})},C.id))})]}),o.jsxs("div",{className:"bg-gray-800/50 rounded-2xl p-6 border border-gray-700/50",children:[o.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center space-x-2",children:[o.jsx(fp,{className:"w-5 h-5 text-purple-400"}),o.jsx("span",{children:"Trending Now"})]}),o.jsx("div",{className:"space-y-3",children:E.length>0?E.map(([C,R])=>o.jsx("div",{className:"flex items-center justify-between p-3 hover:bg-gray-700/30 rounded-lg cursor-pointer transition-colors",children:o.jsxs("div",{children:[o.jsxs("p",{className:"text-purple-400 font-medium",children:["#",C]}),o.jsxs("p",{className:"text-gray-500 text-sm",children:[R," posts"]})]})},C)):o.jsx("p",{className:"text-gray-400 text-center py-4",children:"No trending tags yet"})})]}),o.jsxs("div",{className:"bg-gray-800/50 rounded-2xl p-6 border border-gray-700/50",children:[o.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Popular Verses"}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:S.map(C=>o.jsxs("div",{className:"bg-purple-900/30 rounded-lg p-3 hover:bg-purple-900/50 cursor-pointer transition-colors",children:[o.jsxs("p",{className:"text-purple-300 font-medium",children:["#",C]}),o.jsxs("p",{className:"text-gray-400 text-sm",children:[r.filter(R=>R.verseTag===C).length," characters"]})]},C))})]})]}),f==="tags"&&o.jsx("div",{className:"space-y-4",children:E.length>0?E.map(([C,R])=>o.jsx("div",{className:"bg-gray-800/50 rounded-xl p-4 border border-gray-700/50 hover:bg-gray-700/30 cursor-pointer transition-colors",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsxs("h4",{className:"text-purple-400 font-bold text-lg",children:["#",C]}),o.jsxs("p",{className:"text-gray-400",children:[R," posts"]})]}),o.jsx(Oc,{className:"w-6 h-6 text-purple-400"})]})},C)):o.jsxs("div",{className:"text-center py-12",children:[o.jsx(Oc,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-400",children:"No tags found"})]})}),f==="characters"&&o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:r.length>0?r.map(C=>o.jsx("div",{onClick:()=>q(C),children:o.jsx(ui,{character:C,showActions:!1,showFollowButton:C.userId!==(e==null?void 0:e.id)})},C.id)):o.jsxs("div",{className:"col-span-full text-center py-12",children:[o.jsx(fr,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-400",children:"No characters found"})]})}),f==="writers"&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"All Writers"}),o.jsxs("p",{className:"text-gray-400 text-sm",children:["Discover writers from the entire community (",A.length," writers)"]})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:A.length>0?A.map(C=>o.jsxs("div",{onClick:()=>W(C),className:"bg-gray-800/50 rounded-2xl border border-gray-700/50 hover:bg-gray-700/30 transition-colors cursor-pointer overflow-hidden",children:[o.jsx("div",{className:"h-32 relative",children:o.jsx("img",{src:C.headerImage,alt:`${C.displayName} header`,className:"w-full h-full object-cover"})}),o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex items-center space-x-4 -mt-16 mb-4 relative z-10",children:[o.jsx("img",{src:C.avatar,alt:C.displayName,className:"w-16 h-16 rounded-full object-cover ring-4 ring-gray-800 bg-gray-800"}),o.jsxs("div",{className:"flex items-center space-x-2 mt-8",children:[o.jsxs("span",{className:"text-purple-300 text-sm",children:["#",C.writersTag]}),C.role==="admin"&&o.jsx("span",{className:"bg-red-500 text-white text-xs px-2 py-1 rounded-full",children:"ADMIN"})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-white font-bold text-lg",children:C.displayName}),o.jsxs("p",{className:"text-gray-400 text-sm",children:["@",C.username]})]}),o.jsx("p",{className:"text-gray-300 text-sm line-clamp-3",children:C.bio}),o.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-gray-700/50",children:[o.jsxs("div",{className:"flex items-center space-x-4 text-gray-400 text-sm",children:[o.jsxs("span",{children:[C.followers.length," followers"]}),o.jsxs("span",{children:[C.following.length," following"]})]}),C.id!==(e==null?void 0:e.id)&&o.jsx("button",{onClick:R=>{R.stopPropagation(),V(C.id)},className:`flex items-center space-x-1 px-3 py-1 rounded-full text-sm transition-colors ${I(C.id)?"bg-gray-600 text-white hover:bg-gray-700":"bg-purple-600 text-white hover:bg-purple-700"}`,children:I(C.id)?o.jsxs(o.Fragment,{children:[o.jsx(Ri,{className:"w-3 h-3"}),o.jsx("span",{children:"Unfollow"})]}):o.jsxs(o.Fragment,{children:[o.jsx(Ir,{className:"w-3 h-3"}),o.jsx("span",{children:"Follow"})]})})]})]})]})]},C.id)):o.jsxs("div",{className:"col-span-full text-center py-12",children:[o.jsx(Ir,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-400",children:"No writers found"})]})})]}),f==="search"&&d&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsxs("h3",{className:"text-lg font-bold text-white mb-2",children:['Search Results for "',d,'"']}),o.jsxs("p",{className:"text-gray-400 text-sm",children:["Found ",g.posts.length+g.characters.length+g.users.length," results"]})]}),g.posts.length>0&&o.jsxs("div",{children:[o.jsxs("h3",{className:"text-lg font-bold text-white mb-4",children:["Posts (",g.posts.length,")"]}),o.jsx("div",{className:"space-y-4",children:g.posts.map(C=>o.jsx(Ts,{post:C,onLike:()=>G(C.id),onRepost:()=>M(C.id)},C.id))})]}),g.characters.length>0&&o.jsxs("div",{children:[o.jsxs("h3",{className:"text-lg font-bold text-white mb-4",children:["Characters (",g.characters.length,")"]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:g.characters.map(C=>o.jsx("div",{onClick:()=>q(C),children:o.jsx(ui,{character:C,showActions:!1,showFollowButton:C.userId!==(e==null?void 0:e.id)})},C.id))})]}),g.users.length>0&&o.jsxs("div",{children:[o.jsxs("h3",{className:"text-lg font-bold text-white mb-4",children:["Writers (",g.users.length,")"]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:g.users.map(C=>o.jsxs("div",{onClick:()=>W(C),className:"bg-gray-800/50 rounded-2xl border border-gray-700/50 hover:bg-gray-700/30 transition-colors cursor-pointer overflow-hidden",children:[o.jsx("div",{className:"h-32 relative",children:o.jsx("img",{src:C.headerImage,alt:`${C.displayName} header`,className:"w-full h-full object-cover"})}),o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex items-center space-x-4 -mt-16 mb-4 relative z-10",children:[o.jsx("img",{src:C.avatar,alt:C.displayName,className:"w-16 h-16 rounded-full object-cover ring-4 ring-gray-800 bg-gray-800"}),o.jsxs("div",{className:"flex items-center space-x-2 mt-8",children:[o.jsxs("span",{className:"text-purple-300 text-sm",children:["#",C.writersTag]}),C.role==="admin"&&o.jsx("span",{className:"bg-red-500 text-white text-xs px-2 py-1 rounded-full",children:"ADMIN"})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-white font-bold text-lg",children:C.displayName}),o.jsxs("p",{className:"text-gray-400 text-sm",children:["@",C.username]})]}),o.jsx("p",{className:"text-gray-300 text-sm line-clamp-3",children:C.bio}),o.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-gray-700/50",children:[o.jsxs("div",{className:"flex items-center space-x-4 text-gray-400 text-sm",children:[o.jsxs("span",{children:[C.followers.length," followers"]}),o.jsxs("span",{children:[C.following.length," following"]})]}),C.id!==(e==null?void 0:e.id)&&o.jsx("button",{onClick:R=>{R.stopPropagation(),V(C.id)},className:`flex items-center space-x-1 px-3 py-1 rounded-full text-sm transition-colors ${I(C.id)?"bg-gray-600 text-white hover:bg-gray-700":"bg-purple-600 text-white hover:bg-purple-700"}`,children:I(C.id)?o.jsxs(o.Fragment,{children:[o.jsx(Ri,{className:"w-3 h-3"}),o.jsx("span",{children:"Unfollow"})]}):o.jsxs(o.Fragment,{children:[o.jsx(Ir,{className:"w-3 h-3"}),o.jsx("span",{children:"Follow"})]})})]})]})]})]},C.id))})]}),g.posts.length===0&&g.characters.length===0&&g.users.length===0&&o.jsxs("div",{className:"text-center py-12",children:[o.jsx(Kr,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),o.jsx("h3",{className:"text-xl font-semibold text-gray-400 mb-2",children:"No results found"}),o.jsx("p",{className:"text-gray-500",children:"Try adjusting your search terms"})]})]})]}),o.jsx("div",{className:"p-6 text-center border-t border-gray-700/50 bg-black/20",children:o.jsxs("p",{className:"text-gray-500 text-sm",children:["Verse © ",new Date().getFullYear()]})})]}),x&&o.jsx(Rv,{user:x,onClose:()=>m(null)}),b&&o.jsx(Ed,{character:b,onClose:()=>j(null)})]})},WC="Left",qC="Right",KC="Up",GC="Down",ss={delta:10,preventScrollOnSwipe:!1,rotationAngle:0,trackMouse:!1,trackTouch:!0,swipeDuration:1/0,touchEventOptions:{passive:!0}},r0={first:!0,initial:[0,0],start:0,swiping:!1,xy:[0,0]},pp="mousemove",xp="mouseup",YC="touchend",QC="touchmove",XC="touchstart";function ZC(e,t,r,n){return e>t?r>0?qC:WC:n>0?GC:KC}function mp(e,t){if(t===0)return e;const r=Math.PI/180*t,n=e[0]*Math.cos(r)+e[1]*Math.sin(r),s=e[1]*Math.cos(r)-e[0]*Math.sin(r);return[n,s]}function JC(e,t){const r=d=>{const h="touches"in d;h&&d.touches.length>1||e((f,p)=>{p.trackMouse&&!h&&(document.addEventListener(pp,n),document.addEventListener(xp,a));const{clientX:g,clientY:y}=h?d.touches[0]:d,w=mp([g,y],p.rotationAngle);return p.onTouchStartOrOnMouseDown&&p.onTouchStartOrOnMouseDown({event:d}),Object.assign(Object.assign(Object.assign({},f),r0),{initial:w.slice(),xy:w,start:d.timeStamp||0})})},n=d=>{e((h,f)=>{const p="touches"in d;if(p&&d.touches.length>1)return h;if(d.timeStamp-h.start>f.swipeDuration)return h.swiping?Object.assign(Object.assign({},h),{swiping:!1}):h;const{clientX:g,clientY:y}=p?d.touches[0]:d,[w,v]=mp([g,y],f.rotationAngle),x=w-h.xy[0],m=v-h.xy[1],b=Math.abs(x),j=Math.abs(m),_=(d.timeStamp||0)-h.start,k=Math.sqrt(b*b+j*j)/(_||1),E=[x/(_||1),m/(_||1)],D=ZC(b,j,x,m),S=typeof f.delta=="number"?f.delta:f.delta[D.toLowerCase()]||ss.delta;if(b<S&&j<S&&!h.swiping)return h;const P={absX:b,absY:j,deltaX:x,deltaY:m,dir:D,event:d,first:h.first,initial:h.initial,velocity:k,vxvy:E};P.first&&f.onSwipeStart&&f.onSwipeStart(P),f.onSwiping&&f.onSwiping(P);let A=!1;return(f.onSwiping||f.onSwiped||f[`onSwiped${D}`])&&(A=!0),A&&f.preventScrollOnSwipe&&f.trackTouch&&d.cancelable&&d.preventDefault(),Object.assign(Object.assign({},h),{first:!1,eventData:P,swiping:!0})})},s=d=>{e((h,f)=>{let p;if(h.swiping&&h.eventData){if(d.timeStamp-h.start<f.swipeDuration){p=Object.assign(Object.assign({},h.eventData),{event:d}),f.onSwiped&&f.onSwiped(p);const g=f[`onSwiped${p.dir}`];g&&g(p)}}else f.onTap&&f.onTap({event:d});return f.onTouchEndOrOnMouseUp&&f.onTouchEndOrOnMouseUp({event:d}),Object.assign(Object.assign(Object.assign({},h),r0),{eventData:p})})},i=()=>{document.removeEventListener(pp,n),document.removeEventListener(xp,a)},a=d=>{i(),s(d)},l=(d,h)=>{let f=()=>{};if(d&&d.addEventListener){const p=Object.assign(Object.assign({},ss.touchEventOptions),h.touchEventOptions),g=[[XC,r,p],[QC,n,Object.assign(Object.assign({},p),h.preventScrollOnSwipe?{passive:!1}:{})],[YC,s,p]];g.forEach(([y,w,v])=>d.addEventListener(y,w,v)),f=()=>g.forEach(([y,w])=>d.removeEventListener(y,w))}return f},u={ref:d=>{d!==null&&e((h,f)=>{if(h.el===d)return h;const p={};return h.el&&h.el!==d&&h.cleanUpTouch&&(h.cleanUpTouch(),p.cleanUpTouch=void 0),f.trackTouch&&d&&(p.cleanUpTouch=l(d,f)),Object.assign(Object.assign(Object.assign({},h),{el:d}),p)})}};return t.trackMouse&&(u.onMouseDown=r),[u,l]}function e_(e,t,r,n){return!t.trackTouch||!e.el?(e.cleanUpTouch&&e.cleanUpTouch(),Object.assign(Object.assign({},e),{cleanUpTouch:void 0})):e.cleanUpTouch?t.preventScrollOnSwipe!==r.preventScrollOnSwipe||t.touchEventOptions.passive!==r.touchEventOptions.passive?(e.cleanUpTouch(),Object.assign(Object.assign({},e),{cleanUpTouch:n(e.el,t)})):e:Object.assign(Object.assign({},e),{cleanUpTouch:n(e.el,t)})}function t_(e){const{trackMouse:t}=e,r=N.useRef(Object.assign({},r0)),n=N.useRef(Object.assign({},ss)),s=N.useRef(Object.assign({},n.current));s.current=Object.assign({},n.current),n.current=Object.assign(Object.assign({},ss),e);let i;for(i in ss)n.current[i]===void 0&&(n.current[i]=ss[i]);const[a,l]=N.useMemo(()=>JC(c=>r.current=c(r.current,n.current),{trackMouse:t}),[t]);return r.current=e_(r.current,n.current,s.current,l),a}const Lv=N.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),cl=N.createContext({}),ul=N.createContext(null),dl=typeof document<"u",Nd=dl?N.useLayoutEffect:N.useEffect,Ov=N.createContext({strict:!1}),Sd=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),r_="framerAppearId",Iv="data-"+Sd(r_);function n_(e,t,r,n){const{visualElement:s}=N.useContext(cl),i=N.useContext(Ov),a=N.useContext(ul),l=N.useContext(Lv).reducedMotion,c=N.useRef();n=n||i.renderer,!c.current&&n&&(c.current=n(e,{visualState:t,parent:s,props:r,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const u=c.current;N.useInsertionEffect(()=>{u&&u.update(r,a)});const d=N.useRef(!!(r[Iv]&&!window.HandoffComplete));return Nd(()=>{u&&(u.render(),d.current&&u.animationState&&u.animationState.animateChanges())}),N.useEffect(()=>{u&&(u.updateFeatures(),!d.current&&u.animationState&&u.animationState.animateChanges(),d.current&&(d.current=!1,window.HandoffComplete=!0))}),u}function is(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function s_(e,t,r){return N.useCallback(n=>{n&&e.mount&&e.mount(n),t&&(n?t.mount(n):t.unmount()),r&&(typeof r=="function"?r(n):is(r)&&(r.current=n))},[t])}function Li(e){return typeof e=="string"||Array.isArray(e)}function hl(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const Ad=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Pd=["initial",...Ad];function fl(e){return hl(e.animate)||Pd.some(t=>Li(e[t]))}function Mv(e){return!!(fl(e)||e.variants)}function i_(e,t){if(fl(e)){const{initial:r,animate:n}=e;return{initial:r===!1||Li(r)?r:void 0,animate:Li(n)?n:void 0}}return e.inherit!==!1?t:{}}function a_(e){const{initial:t,animate:r}=i_(e,N.useContext(cl));return N.useMemo(()=>({initial:t,animate:r}),[gp(t),gp(r)])}function gp(e){return Array.isArray(e)?e.join(" "):e}const vp={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Oi={};for(const e in vp)Oi[e]={isEnabled:t=>vp[e].some(r=>!!t[r])};function o_(e){for(const t in e)Oi[t]={...Oi[t],...e[t]}}const Dd=N.createContext({}),Uv=N.createContext({}),l_=Symbol.for("motionComponentSymbol");function c_({preloadedFeatures:e,createVisualElement:t,useRender:r,useVisualState:n,Component:s}){e&&o_(e);function i(l,c){let u;const d={...N.useContext(Lv),...l,layoutId:u_(l)},{isStatic:h}=d,f=a_(l),p=n(l,h);if(!h&&dl){f.visualElement=n_(s,p,d,t);const g=N.useContext(Uv),y=N.useContext(Ov).strict;f.visualElement&&(u=f.visualElement.loadFeatures(d,y,e,g))}return N.createElement(cl.Provider,{value:f},u&&f.visualElement?N.createElement(u,{visualElement:f.visualElement,...d}):null,r(s,l,s_(p,f.visualElement,c),p,h,f.visualElement))}const a=N.forwardRef(i);return a[l_]=s,a}function u_({layoutId:e}){const t=N.useContext(Dd).id;return t&&e!==void 0?t+"-"+e:e}function d_(e){function t(n,s={}){return c_(e(n,s))}if(typeof Proxy>"u")return t;const r=new Map;return new Proxy(t,{get:(n,s)=>(r.has(s)||r.set(s,t(s)),r.get(s))})}const h_=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Bd(e){return typeof e!="string"||e.includes("-")?!1:!!(h_.indexOf(e)>-1||/[A-Z]/.test(e))}const Eo={};function f_(e){Object.assign(Eo,e)}const Qi=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],On=new Set(Qi);function $v(e,{layout:t,layoutId:r}){return On.has(e)||e.startsWith("origin")||(t||r!==void 0)&&(!!Eo[e]||e==="opacity")}const yt=e=>!!(e&&e.getVelocity),p_={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},x_=Qi.length;function m_(e,{enableHardwareAcceleration:t=!0,allowTransformNone:r=!0},n,s){let i="";for(let a=0;a<x_;a++){const l=Qi[a];if(e[l]!==void 0){const c=p_[l]||l;i+=`${c}(${e[l]}) `}}return t&&!e.z&&(i+="translateZ(0)"),i=i.trim(),s?i=s(e,n?"":i):r&&n&&(i="none"),i}const zv=e=>t=>typeof t=="string"&&t.startsWith(e),Vv=zv("--"),n0=zv("var(--"),g_=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,v_=(e,t)=>t&&typeof e=="number"?t.transform(e):e,Xr=(e,t,r)=>Math.min(Math.max(r,e),t),In={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},di={...In,transform:e=>Xr(0,1,e)},Sa={...In,default:1},hi=e=>Math.round(e*1e5)/1e5,pl=/(-)?([\d]*\.?[\d])+/g,Hv=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,y_=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Xi(e){return typeof e=="string"}const Zi=e=>({test:t=>Xi(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Nr=Zi("deg"),sr=Zi("%"),ne=Zi("px"),w_=Zi("vh"),b_=Zi("vw"),yp={...sr,parse:e=>sr.parse(e)/100,transform:e=>sr.transform(e*100)},wp={...In,transform:Math.round},Wv={borderWidth:ne,borderTopWidth:ne,borderRightWidth:ne,borderBottomWidth:ne,borderLeftWidth:ne,borderRadius:ne,radius:ne,borderTopLeftRadius:ne,borderTopRightRadius:ne,borderBottomRightRadius:ne,borderBottomLeftRadius:ne,width:ne,maxWidth:ne,height:ne,maxHeight:ne,size:ne,top:ne,right:ne,bottom:ne,left:ne,padding:ne,paddingTop:ne,paddingRight:ne,paddingBottom:ne,paddingLeft:ne,margin:ne,marginTop:ne,marginRight:ne,marginBottom:ne,marginLeft:ne,rotate:Nr,rotateX:Nr,rotateY:Nr,rotateZ:Nr,scale:Sa,scaleX:Sa,scaleY:Sa,scaleZ:Sa,skew:Nr,skewX:Nr,skewY:Nr,distance:ne,translateX:ne,translateY:ne,translateZ:ne,x:ne,y:ne,z:ne,perspective:ne,transformPerspective:ne,opacity:di,originX:yp,originY:yp,originZ:ne,zIndex:wp,fillOpacity:di,strokeOpacity:di,numOctaves:wp};function Fd(e,t,r,n){const{style:s,vars:i,transform:a,transformOrigin:l}=e;let c=!1,u=!1,d=!0;for(const h in t){const f=t[h];if(Vv(h)){i[h]=f;continue}const p=Wv[h],g=v_(f,p);if(On.has(h)){if(c=!0,a[h]=g,!d)continue;f!==(p.default||0)&&(d=!1)}else h.startsWith("origin")?(u=!0,l[h]=g):s[h]=g}if(t.transform||(c||n?s.transform=m_(e.transform,r,d,n):s.transform&&(s.transform="none")),u){const{originX:h="50%",originY:f="50%",originZ:p=0}=l;s.transformOrigin=`${h} ${f} ${p}`}}const Td=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function qv(e,t,r){for(const n in t)!yt(t[n])&&!$v(n,r)&&(e[n]=t[n])}function j_({transformTemplate:e},t,r){return N.useMemo(()=>{const n=Td();return Fd(n,t,{enableHardwareAcceleration:!r},e),Object.assign({},n.vars,n.style)},[t])}function C_(e,t,r){const n=e.style||{},s={};return qv(s,n,e),Object.assign(s,j_(e,t,r)),e.transformValues?e.transformValues(s):s}function __(e,t,r){const n={},s=C_(e,t,r);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=s,n}const k_=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function No(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||k_.has(e)}let Kv=e=>!No(e);function E_(e){e&&(Kv=t=>t.startsWith("on")?!No(t):e(t))}try{E_(require("@emotion/is-prop-valid").default)}catch{}function N_(e,t,r){const n={};for(const s in e)s==="values"&&typeof e.values=="object"||(Kv(s)||r===!0&&No(s)||!t&&!No(s)||e.draggable&&s.startsWith("onDrag"))&&(n[s]=e[s]);return n}function bp(e,t,r){return typeof e=="string"?e:ne.transform(t+r*e)}function S_(e,t,r){const n=bp(t,e.x,e.width),s=bp(r,e.y,e.height);return`${n} ${s}`}const A_={offset:"stroke-dashoffset",array:"stroke-dasharray"},P_={offset:"strokeDashoffset",array:"strokeDasharray"};function D_(e,t,r=1,n=0,s=!0){e.pathLength=1;const i=s?A_:P_;e[i.offset]=ne.transform(-n);const a=ne.transform(t),l=ne.transform(r);e[i.array]=`${a} ${l}`}function Rd(e,{attrX:t,attrY:r,attrScale:n,originX:s,originY:i,pathLength:a,pathSpacing:l=1,pathOffset:c=0,...u},d,h,f){if(Fd(e,u,d,f),h){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:p,style:g,dimensions:y}=e;p.transform&&(y&&(g.transform=p.transform),delete p.transform),y&&(s!==void 0||i!==void 0||g.transform)&&(g.transformOrigin=S_(y,s!==void 0?s:.5,i!==void 0?i:.5)),t!==void 0&&(p.x=t),r!==void 0&&(p.y=r),n!==void 0&&(p.scale=n),a!==void 0&&D_(p,a,l,c,!1)}const Gv=()=>({...Td(),attrs:{}}),Ld=e=>typeof e=="string"&&e.toLowerCase()==="svg";function B_(e,t,r,n){const s=N.useMemo(()=>{const i=Gv();return Rd(i,t,{enableHardwareAcceleration:!1},Ld(n),e.transformTemplate),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};qv(i,e.style,e),s.style={...i,...s.style}}return s}function F_(e=!1){return(r,n,s,{latestValues:i},a)=>{const c=(Bd(r)?B_:__)(n,i,a,r),d={...N_(n,typeof r=="string",e),...c,ref:s},{children:h}=n,f=N.useMemo(()=>yt(h)?h.get():h,[h]);return N.createElement(r,{...d,children:f})}}function Yv(e,{style:t,vars:r},n,s){Object.assign(e.style,t,s&&s.getProjectionStyles(n));for(const i in r)e.style.setProperty(i,r[i])}const Qv=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Xv(e,t,r,n){Yv(e,t,void 0,n);for(const s in t.attrs)e.setAttribute(Qv.has(s)?s:Sd(s),t.attrs[s])}function Od(e,t){const{style:r}=e,n={};for(const s in r)(yt(r[s])||t.style&&yt(t.style[s])||$v(s,e))&&(n[s]=r[s]);return n}function Zv(e,t){const r=Od(e,t);for(const n in e)if(yt(e[n])||yt(t[n])){const s=Qi.indexOf(n)!==-1?"attr"+n.charAt(0).toUpperCase()+n.substring(1):n;r[s]=e[n]}return r}function Id(e,t,r,n={},s={}){return typeof t=="function"&&(t=t(r!==void 0?r:e.custom,n,s)),typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"&&(t=t(r!==void 0?r:e.custom,n,s)),t}function Jv(e){const t=N.useRef(null);return t.current===null&&(t.current=e()),t.current}const So=e=>Array.isArray(e),T_=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),R_=e=>So(e)?e[e.length-1]||0:e;function Wa(e){const t=yt(e)?e.get():e;return T_(t)?t.toValue():t}function L_({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:r},n,s,i){const a={latestValues:O_(n,s,i,e),renderState:t()};return r&&(a.mount=l=>r(n,l,a)),a}const ey=e=>(t,r)=>{const n=N.useContext(cl),s=N.useContext(ul),i=()=>L_(e,t,n,s);return r?i():Jv(i)};function O_(e,t,r,n){const s={},i=n(e,{});for(const f in i)s[f]=Wa(i[f]);let{initial:a,animate:l}=e;const c=fl(e),u=Mv(e);t&&u&&!c&&e.inherit!==!1&&(a===void 0&&(a=t.initial),l===void 0&&(l=t.animate));let d=r?r.initial===!1:!1;d=d||a===!1;const h=d?l:a;return h&&typeof h!="boolean"&&!hl(h)&&(Array.isArray(h)?h:[h]).forEach(p=>{const g=Id(e,p);if(!g)return;const{transitionEnd:y,transition:w,...v}=g;for(const x in v){let m=v[x];if(Array.isArray(m)){const b=d?m.length-1:0;m=m[b]}m!==null&&(s[x]=m)}for(const x in y)s[x]=y[x]}),s}const Be=e=>e;class jp{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const r=this.order.indexOf(t);r!==-1&&(this.order.splice(r,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}function I_(e){let t=new jp,r=new jp,n=0,s=!1,i=!1;const a=new WeakSet,l={schedule:(c,u=!1,d=!1)=>{const h=d&&s,f=h?t:r;return u&&a.add(c),f.add(c)&&h&&s&&(n=t.order.length),c},cancel:c=>{r.remove(c),a.delete(c)},process:c=>{if(s){i=!0;return}if(s=!0,[t,r]=[r,t],r.clear(),n=t.order.length,n)for(let u=0;u<n;u++){const d=t.order[u];d(c),a.has(d)&&(l.schedule(d),e())}s=!1,i&&(i=!1,l.process(c))}};return l}const Aa=["prepare","read","update","preRender","render","postRender"],M_=40;function U_(e,t){let r=!1,n=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=Aa.reduce((h,f)=>(h[f]=I_(()=>r=!0),h),{}),a=h=>i[h].process(s),l=()=>{const h=performance.now();r=!1,s.delta=n?1e3/60:Math.max(Math.min(h-s.timestamp,M_),1),s.timestamp=h,s.isProcessing=!0,Aa.forEach(a),s.isProcessing=!1,r&&t&&(n=!1,e(l))},c=()=>{r=!0,n=!0,s.isProcessing||e(l)};return{schedule:Aa.reduce((h,f)=>{const p=i[f];return h[f]=(g,y=!1,w=!1)=>(r||c(),p.schedule(g,y,w)),h},{}),cancel:h=>Aa.forEach(f=>i[f].cancel(h)),state:s,steps:i}}const{schedule:ye,cancel:wr,state:tt,steps:Ic}=U_(typeof requestAnimationFrame<"u"?requestAnimationFrame:Be,!0),$_={useVisualState:ey({scrapeMotionValuesFromProps:Zv,createRenderState:Gv,onMount:(e,t,{renderState:r,latestValues:n})=>{ye.read(()=>{try{r.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{r.dimensions={x:0,y:0,width:0,height:0}}}),ye.render(()=>{Rd(r,n,{enableHardwareAcceleration:!1},Ld(t.tagName),e.transformTemplate),Xv(t,r)})}})},z_={useVisualState:ey({scrapeMotionValuesFromProps:Od,createRenderState:Td})};function V_(e,{forwardMotionProps:t=!1},r,n){return{...Bd(e)?$_:z_,preloadedFeatures:r,useRender:F_(t),createVisualElement:n,Component:e}}function dr(e,t,r,n={passive:!0}){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r)}const ty=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function xl(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const H_=e=>t=>ty(t)&&e(t,xl(t));function pr(e,t,r,n){return dr(e,t,H_(r),n)}const W_=(e,t)=>r=>t(e(r)),Gr=(...e)=>e.reduce(W_);function ry(e){let t=null;return()=>{const r=()=>{t=null};return t===null?(t=e,r):!1}}const Cp=ry("dragHorizontal"),_p=ry("dragVertical");function ny(e){let t=!1;if(e==="y")t=_p();else if(e==="x")t=Cp();else{const r=Cp(),n=_p();r&&n?t=()=>{r(),n()}:(r&&r(),n&&n())}return t}function sy(){const e=ny(!0);return e?(e(),!1):!0}class sn{constructor(t){this.isMounted=!1,this.node=t}update(){}}function kp(e,t){const r="pointer"+(t?"enter":"leave"),n="onHover"+(t?"Start":"End"),s=(i,a)=>{if(i.pointerType==="touch"||sy())return;const l=e.getProps();e.animationState&&l.whileHover&&e.animationState.setActive("whileHover",t),l[n]&&ye.update(()=>l[n](i,a))};return pr(e.current,r,s,{passive:!e.getProps()[n]})}class q_ extends sn{mount(){this.unmount=Gr(kp(this.node,!0),kp(this.node,!1))}unmount(){}}class K_ extends sn{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Gr(dr(this.node.current,"focus",()=>this.onFocus()),dr(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const iy=(e,t)=>t?e===t?!0:iy(e,t.parentElement):!1;function Mc(e,t){if(!t)return;const r=new PointerEvent("pointer"+e);t(r,xl(r))}class G_ extends sn{constructor(){super(...arguments),this.removeStartListeners=Be,this.removeEndListeners=Be,this.removeAccessibleListeners=Be,this.startPointerPress=(t,r)=>{if(this.isPressing)return;this.removeEndListeners();const n=this.node.getProps(),i=pr(window,"pointerup",(l,c)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:d,globalTapTarget:h}=this.node.getProps();ye.update(()=>{!h&&!iy(this.node.current,l.target)?d&&d(l,c):u&&u(l,c)})},{passive:!(n.onTap||n.onPointerUp)}),a=pr(window,"pointercancel",(l,c)=>this.cancelPress(l,c),{passive:!(n.onTapCancel||n.onPointerCancel)});this.removeEndListeners=Gr(i,a),this.startPress(t,r)},this.startAccessiblePress=()=>{const t=i=>{if(i.key!=="Enter"||this.isPressing)return;const a=l=>{l.key!=="Enter"||!this.checkPressEnd()||Mc("up",(c,u)=>{const{onTap:d}=this.node.getProps();d&&ye.update(()=>d(c,u))})};this.removeEndListeners(),this.removeEndListeners=dr(this.node.current,"keyup",a),Mc("down",(l,c)=>{this.startPress(l,c)})},r=dr(this.node.current,"keydown",t),n=()=>{this.isPressing&&Mc("cancel",(i,a)=>this.cancelPress(i,a))},s=dr(this.node.current,"blur",n);this.removeAccessibleListeners=Gr(r,s)}}startPress(t,r){this.isPressing=!0;const{onTapStart:n,whileTap:s}=this.node.getProps();s&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),n&&ye.update(()=>n(t,r))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!sy()}cancelPress(t,r){if(!this.checkPressEnd())return;const{onTapCancel:n}=this.node.getProps();n&&ye.update(()=>n(t,r))}mount(){const t=this.node.getProps(),r=pr(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),n=dr(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Gr(r,n)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const s0=new WeakMap,Uc=new WeakMap,Y_=e=>{const t=s0.get(e.target);t&&t(e)},Q_=e=>{e.forEach(Y_)};function X_({root:e,...t}){const r=e||document;Uc.has(r)||Uc.set(r,{});const n=Uc.get(r),s=JSON.stringify(t);return n[s]||(n[s]=new IntersectionObserver(Q_,{root:e,...t})),n[s]}function Z_(e,t,r){const n=X_(t);return s0.set(e,r),n.observe(e),()=>{s0.delete(e),n.unobserve(e)}}const J_={some:0,all:1};class e3 extends sn{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:r,margin:n,amount:s="some",once:i}=t,a={root:r?r.current:void 0,rootMargin:n,threshold:typeof s=="number"?s:J_[s]},l=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),f=u?d:h;f&&f(c)};return Z_(this.node.current,a,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:r}=this.node;["amount","margin","root"].some(t3(t,r))&&this.startObserver()}unmount(){}}function t3({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}const r3={inView:{Feature:e3},tap:{Feature:G_},focus:{Feature:K_},hover:{Feature:q_}};function ay(e,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==e.length)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}function n3(e){const t={};return e.values.forEach((r,n)=>t[n]=r.get()),t}function s3(e){const t={};return e.values.forEach((r,n)=>t[n]=r.getVelocity()),t}function ml(e,t,r){const n=e.getProps();return Id(n,t,r!==void 0?r:n.custom,n3(e),s3(e))}let Ao=Be;const kn=e=>e*1e3,xr=e=>e/1e3,i3={current:!1},oy=e=>Array.isArray(e)&&typeof e[0]=="number";function ly(e){return!!(!e||typeof e=="string"&&cy[e]||oy(e)||Array.isArray(e)&&e.every(ly))}const Xs=([e,t,r,n])=>`cubic-bezier(${e}, ${t}, ${r}, ${n})`,cy={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Xs([0,.65,.55,1]),circOut:Xs([.55,0,1,.45]),backIn:Xs([.31,.01,.66,-.59]),backOut:Xs([.33,1.53,.69,.99])};function uy(e){if(e)return oy(e)?Xs(e):Array.isArray(e)?e.map(uy):cy[e]}function a3(e,t,r,{delay:n=0,duration:s,repeat:i=0,repeatType:a="loop",ease:l,times:c}={}){const u={[t]:r};c&&(u.offset=c);const d=uy(l);return Array.isArray(d)&&(u.easing=d),e.animate(u,{delay:n,duration:s,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:i+1,direction:a==="reverse"?"alternate":"normal"})}function o3(e,{repeat:t,repeatType:r="loop"}){const n=t&&r!=="loop"&&t%2===1?0:e.length-1;return e[n]}const dy=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e,l3=1e-7,c3=12;function u3(e,t,r,n,s){let i,a,l=0;do a=t+(r-t)/2,i=dy(a,n,s)-e,i>0?r=a:t=a;while(Math.abs(i)>l3&&++l<c3);return a}function Ji(e,t,r,n){if(e===t&&r===n)return Be;const s=i=>u3(i,0,1,e,r);return i=>i===0||i===1?i:dy(s(i),t,n)}const d3=Ji(.42,0,1,1),h3=Ji(0,0,.58,1),hy=Ji(.42,0,.58,1),f3=e=>Array.isArray(e)&&typeof e[0]!="number",fy=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,py=e=>t=>1-e(1-t),Md=e=>1-Math.sin(Math.acos(e)),xy=py(Md),p3=fy(Md),my=Ji(.33,1.53,.69,.99),Ud=py(my),x3=fy(Ud),m3=e=>(e*=2)<1?.5*Ud(e):.5*(2-Math.pow(2,-10*(e-1))),Ep={linear:Be,easeIn:d3,easeInOut:hy,easeOut:h3,circIn:Md,circInOut:p3,circOut:xy,backIn:Ud,backInOut:x3,backOut:my,anticipate:m3},Np=e=>{if(Array.isArray(e)){Ao(e.length===4);const[t,r,n,s]=e;return Ji(t,r,n,s)}else if(typeof e=="string")return Ao(Ep[e]!==void 0),Ep[e];return e},$d=(e,t)=>r=>!!(Xi(r)&&y_.test(r)&&r.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(r,t)),gy=(e,t,r)=>n=>{if(!Xi(n))return n;const[s,i,a,l]=n.match(pl);return{[e]:parseFloat(s),[t]:parseFloat(i),[r]:parseFloat(a),alpha:l!==void 0?parseFloat(l):1}},g3=e=>Xr(0,255,e),$c={...In,transform:e=>Math.round(g3(e))},bn={test:$d("rgb","red"),parse:gy("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:n=1})=>"rgba("+$c.transform(e)+", "+$c.transform(t)+", "+$c.transform(r)+", "+hi(di.transform(n))+")"};function v3(e){let t="",r="",n="",s="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),n=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),n=e.substring(3,4),s=e.substring(4,5),t+=t,r+=r,n+=n,s+=s),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:s?parseInt(s,16)/255:1}}const i0={test:$d("#"),parse:v3,transform:bn.transform},as={test:$d("hsl","hue"),parse:gy("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:n=1})=>"hsla("+Math.round(e)+", "+sr.transform(hi(t))+", "+sr.transform(hi(r))+", "+hi(di.transform(n))+")"},ot={test:e=>bn.test(e)||i0.test(e)||as.test(e),parse:e=>bn.test(e)?bn.parse(e):as.test(e)?as.parse(e):i0.parse(e),transform:e=>Xi(e)?e:e.hasOwnProperty("red")?bn.transform(e):as.transform(e)},Ee=(e,t,r)=>-r*e+r*t+e;function zc(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function y3({hue:e,saturation:t,lightness:r,alpha:n}){e/=360,t/=100,r/=100;let s=0,i=0,a=0;if(!t)s=i=a=r;else{const l=r<.5?r*(1+t):r+t-r*t,c=2*r-l;s=zc(c,l,e+1/3),i=zc(c,l,e),a=zc(c,l,e-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(a*255),alpha:n}}const Vc=(e,t,r)=>{const n=e*e;return Math.sqrt(Math.max(0,r*(t*t-n)+n))},w3=[i0,bn,as],b3=e=>w3.find(t=>t.test(e));function Sp(e){const t=b3(e);let r=t.parse(e);return t===as&&(r=y3(r)),r}const vy=(e,t)=>{const r=Sp(e),n=Sp(t),s={...r};return i=>(s.red=Vc(r.red,n.red,i),s.green=Vc(r.green,n.green,i),s.blue=Vc(r.blue,n.blue,i),s.alpha=Ee(r.alpha,n.alpha,i),bn.transform(s))};function j3(e){var t,r;return isNaN(e)&&Xi(e)&&(((t=e.match(pl))===null||t===void 0?void 0:t.length)||0)+(((r=e.match(Hv))===null||r===void 0?void 0:r.length)||0)>0}const yy={regex:g_,countKey:"Vars",token:"${v}",parse:Be},wy={regex:Hv,countKey:"Colors",token:"${c}",parse:ot.parse},by={regex:pl,countKey:"Numbers",token:"${n}",parse:In.parse};function Hc(e,{regex:t,countKey:r,token:n,parse:s}){const i=e.tokenised.match(t);i&&(e["num"+r]=i.length,e.tokenised=e.tokenised.replace(t,n),e.values.push(...i.map(s)))}function Po(e){const t=e.toString(),r={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return r.value.includes("var(--")&&Hc(r,yy),Hc(r,wy),Hc(r,by),r}function jy(e){return Po(e).values}function Cy(e){const{values:t,numColors:r,numVars:n,tokenised:s}=Po(e),i=t.length;return a=>{let l=s;for(let c=0;c<i;c++)c<n?l=l.replace(yy.token,a[c]):c<n+r?l=l.replace(wy.token,ot.transform(a[c])):l=l.replace(by.token,hi(a[c]));return l}}const C3=e=>typeof e=="number"?0:e;function _3(e){const t=jy(e);return Cy(e)(t.map(C3))}const Zr={test:j3,parse:jy,createTransformer:Cy,getAnimatableNone:_3},_y=(e,t)=>r=>`${r>0?t:e}`;function ky(e,t){return typeof e=="number"?r=>Ee(e,t,r):ot.test(e)?vy(e,t):e.startsWith("var(")?_y(e,t):Ny(e,t)}const Ey=(e,t)=>{const r=[...e],n=r.length,s=e.map((i,a)=>ky(i,t[a]));return i=>{for(let a=0;a<n;a++)r[a]=s[a](i);return r}},k3=(e,t)=>{const r={...e,...t},n={};for(const s in r)e[s]!==void 0&&t[s]!==void 0&&(n[s]=ky(e[s],t[s]));return s=>{for(const i in n)r[i]=n[i](s);return r}},Ny=(e,t)=>{const r=Zr.createTransformer(t),n=Po(e),s=Po(t);return n.numVars===s.numVars&&n.numColors===s.numColors&&n.numNumbers>=s.numNumbers?Gr(Ey(n.values,s.values),r):_y(e,t)},Ii=(e,t,r)=>{const n=t-e;return n===0?1:(r-e)/n},Ap=(e,t)=>r=>Ee(e,t,r);function E3(e){return typeof e=="number"?Ap:typeof e=="string"?ot.test(e)?vy:Ny:Array.isArray(e)?Ey:typeof e=="object"?k3:Ap}function N3(e,t,r){const n=[],s=r||E3(e[0]),i=e.length-1;for(let a=0;a<i;a++){let l=s(e[a],e[a+1]);if(t){const c=Array.isArray(t)?t[a]||Be:t;l=Gr(c,l)}n.push(l)}return n}function Sy(e,t,{clamp:r=!0,ease:n,mixer:s}={}){const i=e.length;if(Ao(i===t.length),i===1)return()=>t[0];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const a=N3(t,n,s),l=a.length,c=u=>{let d=0;if(l>1)for(;d<e.length-2&&!(u<e[d+1]);d++);const h=Ii(e[d],e[d+1],u);return a[d](h)};return r?u=>c(Xr(e[0],e[i-1],u)):c}function S3(e,t){const r=e[e.length-1];for(let n=1;n<=t;n++){const s=Ii(0,t,n);e.push(Ee(r,1,s))}}function A3(e){const t=[0];return S3(t,e.length-1),t}function P3(e,t){return e.map(r=>r*t)}function D3(e,t){return e.map(()=>t||hy).splice(0,e.length-1)}function Do({duration:e=300,keyframes:t,times:r,ease:n="easeInOut"}){const s=f3(n)?n.map(Np):Np(n),i={done:!1,value:t[0]},a=P3(r&&r.length===t.length?r:A3(t),e),l=Sy(a,t,{ease:Array.isArray(s)?s:D3(t,s)});return{calculatedDuration:e,next:c=>(i.value=l(c),i.done=c>=e,i)}}function Ay(e,t){return t?e*(1e3/t):0}const B3=5;function Py(e,t,r){const n=Math.max(t-B3,0);return Ay(r-e(n),t-n)}const Wc=.001,F3=.01,T3=10,R3=.05,L3=1;function O3({duration:e=800,bounce:t=.25,velocity:r=0,mass:n=1}){let s,i,a=1-t;a=Xr(R3,L3,a),e=Xr(F3,T3,xr(e)),a<1?(s=u=>{const d=u*a,h=d*e,f=d-r,p=a0(u,a),g=Math.exp(-h);return Wc-f/p*g},i=u=>{const h=u*a*e,f=h*r+r,p=Math.pow(a,2)*Math.pow(u,2)*e,g=Math.exp(-h),y=a0(Math.pow(u,2),a);return(-s(u)+Wc>0?-1:1)*((f-p)*g)/y}):(s=u=>{const d=Math.exp(-u*e),h=(u-r)*e+1;return-Wc+d*h},i=u=>{const d=Math.exp(-u*e),h=(r-u)*(e*e);return d*h});const l=5/e,c=M3(s,i,l);if(e=kn(e),isNaN(c))return{stiffness:100,damping:10,duration:e};{const u=Math.pow(c,2)*n;return{stiffness:u,damping:a*2*Math.sqrt(n*u),duration:e}}}const I3=12;function M3(e,t,r){let n=r;for(let s=1;s<I3;s++)n=n-e(n)/t(n);return n}function a0(e,t){return e*Math.sqrt(1-t*t)}const U3=["duration","bounce"],$3=["stiffness","damping","mass"];function Pp(e,t){return t.some(r=>e[r]!==void 0)}function z3(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!Pp(e,$3)&&Pp(e,U3)){const r=O3(e);t={...t,...r,mass:1},t.isResolvedFromDuration=!0}return t}function Dy({keyframes:e,restDelta:t,restSpeed:r,...n}){const s=e[0],i=e[e.length-1],a={done:!1,value:s},{stiffness:l,damping:c,mass:u,duration:d,velocity:h,isResolvedFromDuration:f}=z3({...n,velocity:-xr(n.velocity||0)}),p=h||0,g=c/(2*Math.sqrt(l*u)),y=i-s,w=xr(Math.sqrt(l/u)),v=Math.abs(y)<5;r||(r=v?.01:2),t||(t=v?.005:.5);let x;if(g<1){const m=a0(w,g);x=b=>{const j=Math.exp(-g*w*b);return i-j*((p+g*w*y)/m*Math.sin(m*b)+y*Math.cos(m*b))}}else if(g===1)x=m=>i-Math.exp(-w*m)*(y+(p+w*y)*m);else{const m=w*Math.sqrt(g*g-1);x=b=>{const j=Math.exp(-g*w*b),_=Math.min(m*b,300);return i-j*((p+g*w*y)*Math.sinh(_)+m*y*Math.cosh(_))/m}}return{calculatedDuration:f&&d||null,next:m=>{const b=x(m);if(f)a.done=m>=d;else{let j=p;m!==0&&(g<1?j=Py(x,m,b):j=0);const _=Math.abs(j)<=r,k=Math.abs(i-b)<=t;a.done=_&&k}return a.value=a.done?i:b,a}}}function Dp({keyframes:e,velocity:t=0,power:r=.8,timeConstant:n=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:a,min:l,max:c,restDelta:u=.5,restSpeed:d}){const h=e[0],f={done:!1,value:h},p=E=>l!==void 0&&E<l||c!==void 0&&E>c,g=E=>l===void 0?c:c===void 0||Math.abs(l-E)<Math.abs(c-E)?l:c;let y=r*t;const w=h+y,v=a===void 0?w:a(w);v!==w&&(y=v-h);const x=E=>-y*Math.exp(-E/n),m=E=>v+x(E),b=E=>{const D=x(E),S=m(E);f.done=Math.abs(D)<=u,f.value=f.done?v:S};let j,_;const k=E=>{p(f.value)&&(j=E,_=Dy({keyframes:[f.value,g(f.value)],velocity:Py(m,E,f.value),damping:s,stiffness:i,restDelta:u,restSpeed:d}))};return k(0),{calculatedDuration:null,next:E=>{let D=!1;return!_&&j===void 0&&(D=!0,b(E),k(E)),j!==void 0&&E>j?_.next(E-j):(!D&&b(E),f)}}}const V3=e=>{const t=({timestamp:r})=>e(r);return{start:()=>ye.update(t,!0),stop:()=>wr(t),now:()=>tt.isProcessing?tt.timestamp:performance.now()}},Bp=2e4;function Fp(e){let t=0;const r=50;let n=e.next(t);for(;!n.done&&t<Bp;)t+=r,n=e.next(t);return t>=Bp?1/0:t}const H3={decay:Dp,inertia:Dp,tween:Do,keyframes:Do,spring:Dy};function Bo({autoplay:e=!0,delay:t=0,driver:r=V3,keyframes:n,type:s="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:l="loop",onPlay:c,onStop:u,onComplete:d,onUpdate:h,...f}){let p=1,g=!1,y,w;const v=()=>{w=new Promise(C=>{y=C})};v();let x;const m=H3[s]||Do;let b;m!==Do&&typeof n[0]!="number"&&(b=Sy([0,100],n,{clamp:!1}),n=[0,100]);const j=m({...f,keyframes:n});let _;l==="mirror"&&(_=m({...f,keyframes:[...n].reverse(),velocity:-(f.velocity||0)}));let k="idle",E=null,D=null,S=null;j.calculatedDuration===null&&i&&(j.calculatedDuration=Fp(j));const{calculatedDuration:P}=j;let A=1/0,B=1/0;P!==null&&(A=P+a,B=A*(i+1)-a);let H=0;const G=C=>{if(D===null)return;p>0&&(D=Math.min(D,C)),p<0&&(D=Math.min(C-B/p,D)),E!==null?H=E:H=Math.round(C-D)*p;const R=H-t*(p>=0?1:-1),z=p>=0?R<0:R>B;H=Math.max(R,0),k==="finished"&&E===null&&(H=B);let O=H,Q=j;if(i){const Ue=Math.min(H,B)/A;let $e=Math.floor(Ue),Oe=Ue%1;!Oe&&Ue>=1&&(Oe=1),Oe===1&&$e--,$e=Math.min($e,i+1),!!($e%2)&&(l==="reverse"?(Oe=1-Oe,a&&(Oe-=a/A)):l==="mirror"&&(Q=_)),O=Xr(0,1,Oe)*A}const J=z?{done:!1,value:n[0]}:Q.next(O);b&&(J.value=b(J.value));let{done:ie}=J;!z&&P!==null&&(ie=p>=0?H>=B:H<=0);const X=E===null&&(k==="finished"||k==="running"&&ie);return h&&h(J.value),X&&I(),J},M=()=>{x&&x.stop(),x=void 0},V=()=>{k="idle",M(),y(),v(),D=S=null},I=()=>{k="finished",d&&d(),M(),y()},W=()=>{if(g)return;x||(x=r(G));const C=x.now();c&&c(),E!==null?D=C-E:(!D||k==="finished")&&(D=C),k==="finished"&&v(),S=D,E=null,k="running",x.start()};e&&W();const q={then(C,R){return w.then(C,R)},get time(){return xr(H)},set time(C){C=kn(C),H=C,E!==null||!x||p===0?E=C:D=x.now()-C/p},get duration(){const C=j.calculatedDuration===null?Fp(j):j.calculatedDuration;return xr(C)},get speed(){return p},set speed(C){C===p||!x||(p=C,q.time=xr(H))},get state(){return k},play:W,pause:()=>{k="paused",E=H},stop:()=>{g=!0,k!=="idle"&&(k="idle",u&&u(),V())},cancel:()=>{S!==null&&G(S),V()},complete:()=>{k="finished"},sample:C=>(D=0,G(C))};return q}function W3(e){let t;return()=>(t===void 0&&(t=e()),t)}const q3=W3(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),K3=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Pa=10,G3=2e4,Y3=(e,t)=>t.type==="spring"||e==="backgroundColor"||!ly(t.ease);function Q3(e,t,{onUpdate:r,onComplete:n,...s}){if(!(q3()&&K3.has(t)&&!s.repeatDelay&&s.repeatType!=="mirror"&&s.damping!==0&&s.type!=="inertia"))return!1;let a=!1,l,c,u=!1;const d=()=>{c=new Promise(m=>{l=m})};d();let{keyframes:h,duration:f=300,ease:p,times:g}=s;if(Y3(t,s)){const m=Bo({...s,repeat:0,delay:0});let b={done:!1,value:h[0]};const j=[];let _=0;for(;!b.done&&_<G3;)b=m.sample(_),j.push(b.value),_+=Pa;g=void 0,h=j,f=_-Pa,p="linear"}const y=a3(e.owner.current,t,h,{...s,duration:f,ease:p,times:g}),w=()=>{u=!1,y.cancel()},v=()=>{u=!0,ye.update(w),l(),d()};return y.onfinish=()=>{u||(e.set(o3(h,s)),n&&n(),v())},{then(m,b){return c.then(m,b)},attachTimeline(m){return y.timeline=m,y.onfinish=null,Be},get time(){return xr(y.currentTime||0)},set time(m){y.currentTime=kn(m)},get speed(){return y.playbackRate},set speed(m){y.playbackRate=m},get duration(){return xr(f)},play:()=>{a||(y.play(),wr(w))},pause:()=>y.pause(),stop:()=>{if(a=!0,y.playState==="idle")return;const{currentTime:m}=y;if(m){const b=Bo({...s,autoplay:!1});e.setWithVelocity(b.sample(m-Pa).value,b.sample(m).value,Pa)}v()},complete:()=>{u||y.finish()},cancel:v}}function X3({keyframes:e,delay:t,onUpdate:r,onComplete:n}){const s=()=>(r&&r(e[e.length-1]),n&&n(),{time:0,speed:1,duration:0,play:Be,pause:Be,stop:Be,then:i=>(i(),Promise.resolve()),cancel:Be,complete:Be});return t?Bo({keyframes:[0,1],duration:0,delay:t,onComplete:s}):s()}const Z3={type:"spring",stiffness:500,damping:25,restSpeed:10},J3=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),ek={type:"keyframes",duration:.8},tk={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},rk=(e,{keyframes:t})=>t.length>2?ek:On.has(e)?e.startsWith("scale")?J3(t[1]):Z3:tk,o0=(e,t)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Zr.test(t)||t==="0")&&!t.startsWith("url(")),nk=new Set(["brightness","contrast","saturate","opacity"]);function sk(e){const[t,r]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[n]=r.match(pl)||[];if(!n)return e;const s=r.replace(n,"");let i=nk.has(t)?1:0;return n!==r&&(i*=100),t+"("+i+s+")"}const ik=/([a-z-]*)\(.*?\)/g,l0={...Zr,getAnimatableNone:e=>{const t=e.match(ik);return t?t.map(sk).join(" "):e}},ak={...Wv,color:ot,backgroundColor:ot,outlineColor:ot,fill:ot,stroke:ot,borderColor:ot,borderTopColor:ot,borderRightColor:ot,borderBottomColor:ot,borderLeftColor:ot,filter:l0,WebkitFilter:l0},zd=e=>ak[e];function By(e,t){let r=zd(e);return r!==l0&&(r=Zr),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const Fy=e=>/^0[^.\s]+$/.test(e);function ok(e){if(typeof e=="number")return e===0;if(e!==null)return e==="none"||e==="0"||Fy(e)}function lk(e,t,r,n){const s=o0(t,r);let i;Array.isArray(r)?i=[...r]:i=[null,r];const a=n.from!==void 0?n.from:e.get();let l;const c=[];for(let u=0;u<i.length;u++)i[u]===null&&(i[u]=u===0?a:i[u-1]),ok(i[u])&&c.push(u),typeof i[u]=="string"&&i[u]!=="none"&&i[u]!=="0"&&(l=i[u]);if(s&&c.length&&l)for(let u=0;u<c.length;u++){const d=c[u];i[d]=By(t,l)}return i}function ck({when:e,delay:t,delayChildren:r,staggerChildren:n,staggerDirection:s,repeat:i,repeatType:a,repeatDelay:l,from:c,elapsed:u,...d}){return!!Object.keys(d).length}function Vd(e,t){return e[t]||e.default||e}const uk={skipAnimations:!1},Hd=(e,t,r,n={})=>s=>{const i=Vd(n,e)||{},a=i.delay||n.delay||0;let{elapsed:l=0}=n;l=l-kn(a);const c=lk(t,e,r,i),u=c[0],d=c[c.length-1],h=o0(e,u),f=o0(e,d);let p={keyframes:c,velocity:t.getVelocity(),ease:"easeOut",...i,delay:-l,onUpdate:g=>{t.set(g),i.onUpdate&&i.onUpdate(g)},onComplete:()=>{s(),i.onComplete&&i.onComplete()}};if(ck(i)||(p={...p,...rk(e,p)}),p.duration&&(p.duration=kn(p.duration)),p.repeatDelay&&(p.repeatDelay=kn(p.repeatDelay)),!h||!f||i3.current||i.type===!1||uk.skipAnimations)return X3(p);if(!n.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const g=Q3(t,e,p);if(g)return g}return Bo(p)};function Fo(e){return!!(yt(e)&&e.add)}const Ty=e=>/^\-?\d*\.?\d+$/.test(e);function Wd(e,t){e.indexOf(t)===-1&&e.push(t)}function qd(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}class Kd{constructor(){this.subscriptions=[]}add(t){return Wd(this.subscriptions,t),()=>qd(this.subscriptions,t)}notify(t,r,n){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,r,n);else for(let i=0;i<s;i++){const a=this.subscriptions[i];a&&a(t,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const dk=e=>!isNaN(parseFloat(e));class hk{constructor(t,r={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(n,s=!0)=>{this.prev=this.current,this.current=n;const{delta:i,timestamp:a}=tt;this.lastUpdated!==a&&(this.timeDelta=i,this.lastUpdated=a,ye.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>ye.postRender(this.velocityCheck),this.velocityCheck=({timestamp:n})=>{n!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=dk(this.current),this.owner=r.owner}onChange(t){return this.on("change",t)}on(t,r){this.events[t]||(this.events[t]=new Kd);const n=this.events[t].add(r);return t==="change"?()=>{n(),ye.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,r){this.passiveEffect=t,this.stopPassiveEffect=r}set(t,r=!0){!r||!this.passiveEffect?this.updateAndNotify(t,r):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,r,n){this.set(r),this.prev=t,this.timeDelta=n}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?Ay(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=t(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ks(e,t){return new hk(e,t)}const Ry=e=>t=>t.test(e),fk={test:e=>e==="auto",parse:e=>e},Ly=[In,ne,sr,Nr,b_,w_,fk],Hs=e=>Ly.find(Ry(e)),pk=[...Ly,ot,Zr],xk=e=>pk.find(Ry(e));function mk(e,t,r){e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,ks(r))}function gk(e,t){const r=ml(e,t);let{transitionEnd:n={},transition:s={},...i}=r?e.makeTargetAnimatable(r,!1):{};i={...i,...n};for(const a in i){const l=R_(i[a]);mk(e,a,l)}}function vk(e,t,r){var n,s;const i=Object.keys(t).filter(l=>!e.hasValue(l)),a=i.length;if(a)for(let l=0;l<a;l++){const c=i[l],u=t[c];let d=null;Array.isArray(u)&&(d=u[0]),d===null&&(d=(s=(n=r[c])!==null&&n!==void 0?n:e.readValue(c))!==null&&s!==void 0?s:t[c]),d!=null&&(typeof d=="string"&&(Ty(d)||Fy(d))?d=parseFloat(d):!xk(d)&&Zr.test(u)&&(d=By(c,u)),e.addValue(c,ks(d,{owner:e})),r[c]===void 0&&(r[c]=d),d!==null&&e.setBaseTarget(c,d))}}function yk(e,t){return t?(t[e]||t.default||t).from:void 0}function wk(e,t,r){const n={};for(const s in e){const i=yk(s,t);if(i!==void 0)n[s]=i;else{const a=r.getValue(s);a&&(n[s]=a.get())}}return n}function bk({protectedKeys:e,needsAnimating:t},r){const n=e.hasOwnProperty(r)&&t[r]!==!0;return t[r]=!1,n}function jk(e,t){const r=e.get();if(Array.isArray(t)){for(let n=0;n<t.length;n++)if(t[n]!==r)return!0}else return r!==t}function Oy(e,t,{delay:r=0,transitionOverride:n,type:s}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:a,...l}=e.makeTargetAnimatable(t);const c=e.getValue("willChange");n&&(i=n);const u=[],d=s&&e.animationState&&e.animationState.getState()[s];for(const h in l){const f=e.getValue(h),p=l[h];if(!f||p===void 0||d&&bk(d,h))continue;const g={delay:r,elapsed:0,...Vd(i||{},h)};if(window.HandoffAppearAnimations){const v=e.getProps()[Iv];if(v){const x=window.HandoffAppearAnimations(v,h,f,ye);x!==null&&(g.elapsed=x,g.isHandoff=!0)}}let y=!g.isHandoff&&!jk(f,p);if(g.type==="spring"&&(f.getVelocity()||g.velocity)&&(y=!1),f.animation&&(y=!1),y)continue;f.start(Hd(h,f,p,e.shouldReduceMotion&&On.has(h)?{type:!1}:g));const w=f.animation;Fo(c)&&(c.add(h),w.then(()=>c.remove(h))),u.push(w)}return a&&Promise.all(u).then(()=>{a&&gk(e,a)}),u}function c0(e,t,r={}){const n=ml(e,t,r.custom);let{transition:s=e.getDefaultTransition()||{}}=n||{};r.transitionOverride&&(s=r.transitionOverride);const i=n?()=>Promise.all(Oy(e,n,r)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:h}=s;return Ck(e,t,u+c,d,h,r)}:()=>Promise.resolve(),{when:l}=s;if(l){const[c,u]=l==="beforeChildren"?[i,a]:[a,i];return c().then(()=>u())}else return Promise.all([i(),a(r.delay)])}function Ck(e,t,r=0,n=0,s=1,i){const a=[],l=(e.variantChildren.size-1)*n,c=s===1?(u=0)=>u*n:(u=0)=>l-u*n;return Array.from(e.variantChildren).sort(_k).forEach((u,d)=>{u.notify("AnimationStart",t),a.push(c0(u,t,{...i,delay:r+c(d)}).then(()=>u.notify("AnimationComplete",t)))}),Promise.all(a)}function _k(e,t){return e.sortNodePosition(t)}function kk(e,t,r={}){e.notify("AnimationStart",t);let n;if(Array.isArray(t)){const s=t.map(i=>c0(e,i,r));n=Promise.all(s)}else if(typeof t=="string")n=c0(e,t,r);else{const s=typeof t=="function"?ml(e,t,r.custom):t;n=Promise.all(Oy(e,s,r))}return n.then(()=>e.notify("AnimationComplete",t))}const Ek=[...Ad].reverse(),Nk=Ad.length;function Sk(e){return t=>Promise.all(t.map(({animation:r,options:n})=>kk(e,r,n)))}function Ak(e){let t=Sk(e);const r=Dk();let n=!0;const s=(c,u)=>{const d=ml(e,u);if(d){const{transition:h,transitionEnd:f,...p}=d;c={...c,...p,...f}}return c};function i(c){t=c(e)}function a(c,u){const d=e.getProps(),h=e.getVariantContext(!0)||{},f=[],p=new Set;let g={},y=1/0;for(let v=0;v<Nk;v++){const x=Ek[v],m=r[x],b=d[x]!==void 0?d[x]:h[x],j=Li(b),_=x===u?m.isActive:null;_===!1&&(y=v);let k=b===h[x]&&b!==d[x]&&j;if(k&&n&&e.manuallyAnimateOnMount&&(k=!1),m.protectedKeys={...g},!m.isActive&&_===null||!b&&!m.prevProp||hl(b)||typeof b=="boolean")continue;let D=Pk(m.prevProp,b)||x===u&&m.isActive&&!k&&j||v>y&&j,S=!1;const P=Array.isArray(b)?b:[b];let A=P.reduce(s,{});_===!1&&(A={});const{prevResolvedValues:B={}}=m,H={...B,...A},G=M=>{D=!0,p.has(M)&&(S=!0,p.delete(M)),m.needsAnimating[M]=!0};for(const M in H){const V=A[M],I=B[M];if(g.hasOwnProperty(M))continue;let W=!1;So(V)&&So(I)?W=!ay(V,I):W=V!==I,W?V!==void 0?G(M):p.add(M):V!==void 0&&p.has(M)?G(M):m.protectedKeys[M]=!0}m.prevProp=b,m.prevResolvedValues=A,m.isActive&&(g={...g,...A}),n&&e.blockInitialAnimation&&(D=!1),D&&(!k||S)&&f.push(...P.map(M=>({animation:M,options:{type:x,...c}})))}if(p.size){const v={};p.forEach(x=>{const m=e.getBaseTarget(x);m!==void 0&&(v[x]=m)}),f.push({animation:v})}let w=!!f.length;return n&&(d.initial===!1||d.initial===d.animate)&&!e.manuallyAnimateOnMount&&(w=!1),n=!1,w?t(f):Promise.resolve()}function l(c,u,d){var h;if(r[c].isActive===u)return Promise.resolve();(h=e.variantChildren)===null||h===void 0||h.forEach(p=>{var g;return(g=p.animationState)===null||g===void 0?void 0:g.setActive(c,u)}),r[c].isActive=u;const f=a(d,c);for(const p in r)r[p].protectedKeys={};return f}return{animateChanges:a,setActive:l,setAnimateFunction:i,getState:()=>r}}function Pk(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!ay(t,e):!1}function un(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Dk(){return{animate:un(!0),whileInView:un(),whileHover:un(),whileTap:un(),whileDrag:un(),whileFocus:un(),exit:un()}}class Bk extends sn{constructor(t){super(t),t.animationState||(t.animationState=Ak(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),hl(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:r}=this.node.prevProps||{};t!==r&&this.updateAnimationControlsSubscription()}unmount(){}}let Fk=0;class Tk extends sn{constructor(){super(...arguments),this.id=Fk++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:r,custom:n}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===s)return;const i=this.node.animationState.setActive("exit",!t,{custom:n??this.node.getProps().custom});r&&!t&&i.then(()=>r(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const Rk={animation:{Feature:Bk},exit:{Feature:Tk}},Tp=(e,t)=>Math.abs(e-t);function Lk(e,t){const r=Tp(e.x,t.x),n=Tp(e.y,t.y);return Math.sqrt(r**2+n**2)}class Iy{constructor(t,r,{transformPagePoint:n,contextWindow:s,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=Kc(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,p=Lk(h.offset,{x:0,y:0})>=3;if(!f&&!p)return;const{point:g}=h,{timestamp:y}=tt;this.history.push({...g,timestamp:y});const{onStart:w,onMove:v}=this.handlers;f||(w&&w(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,h)},this.handlePointerMove=(h,f)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=qc(f,this.transformPagePoint),ye.update(this.updatePoint,!0)},this.handlePointerUp=(h,f)=>{this.end();const{onEnd:p,onSessionEnd:g,resumeAnimation:y}=this.handlers;if(this.dragSnapToOrigin&&y&&y(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=Kc(h.type==="pointercancel"?this.lastMoveEventInfo:qc(f,this.transformPagePoint),this.history);this.startEvent&&p&&p(h,w),g&&g(h,w)},!ty(t))return;this.dragSnapToOrigin=i,this.handlers=r,this.transformPagePoint=n,this.contextWindow=s||window;const a=xl(t),l=qc(a,this.transformPagePoint),{point:c}=l,{timestamp:u}=tt;this.history=[{...c,timestamp:u}];const{onSessionStart:d}=r;d&&d(t,Kc(l,this.history)),this.removeListeners=Gr(pr(this.contextWindow,"pointermove",this.handlePointerMove),pr(this.contextWindow,"pointerup",this.handlePointerUp),pr(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),wr(this.updatePoint)}}function qc(e,t){return t?{point:t(e.point)}:e}function Rp(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Kc({point:e},t){return{point:e,delta:Rp(e,My(t)),offset:Rp(e,Ok(t)),velocity:Ik(t,.1)}}function Ok(e){return e[0]}function My(e){return e[e.length-1]}function Ik(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,n=null;const s=My(e);for(;r>=0&&(n=e[r],!(s.timestamp-n.timestamp>kn(t)));)r--;if(!n)return{x:0,y:0};const i=xr(s.timestamp-n.timestamp);if(i===0)return{x:0,y:0};const a={x:(s.x-n.x)/i,y:(s.y-n.y)/i};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function At(e){return e.max-e.min}function u0(e,t=0,r=.01){return Math.abs(e-t)<=r}function Lp(e,t,r,n=.5){e.origin=n,e.originPoint=Ee(t.min,t.max,e.origin),e.scale=At(r)/At(t),(u0(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=Ee(r.min,r.max,e.origin)-e.originPoint,(u0(e.translate)||isNaN(e.translate))&&(e.translate=0)}function fi(e,t,r,n){Lp(e.x,t.x,r.x,n?n.originX:void 0),Lp(e.y,t.y,r.y,n?n.originY:void 0)}function Op(e,t,r){e.min=r.min+t.min,e.max=e.min+At(t)}function Mk(e,t,r){Op(e.x,t.x,r.x),Op(e.y,t.y,r.y)}function Ip(e,t,r){e.min=t.min-r.min,e.max=e.min+At(t)}function pi(e,t,r){Ip(e.x,t.x,r.x),Ip(e.y,t.y,r.y)}function Uk(e,{min:t,max:r},n){return t!==void 0&&e<t?e=n?Ee(t,e,n.min):Math.max(e,t):r!==void 0&&e>r&&(e=n?Ee(r,e,n.max):Math.min(e,r)),e}function Mp(e,t,r){return{min:t!==void 0?e.min+t:void 0,max:r!==void 0?e.max+r-(e.max-e.min):void 0}}function $k(e,{top:t,left:r,bottom:n,right:s}){return{x:Mp(e.x,r,s),y:Mp(e.y,t,n)}}function Up(e,t){let r=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,n]=[n,r]),{min:r,max:n}}function zk(e,t){return{x:Up(e.x,t.x),y:Up(e.y,t.y)}}function Vk(e,t){let r=.5;const n=At(e),s=At(t);return s>n?r=Ii(t.min,t.max-n,e.min):n>s&&(r=Ii(e.min,e.max-s,t.min)),Xr(0,1,r)}function Hk(e,t){const r={};return t.min!==void 0&&(r.min=t.min-e.min),t.max!==void 0&&(r.max=t.max-e.min),r}const d0=.35;function Wk(e=d0){return e===!1?e=0:e===!0&&(e=d0),{x:$p(e,"left","right"),y:$p(e,"top","bottom")}}function $p(e,t,r){return{min:zp(e,t),max:zp(e,r)}}function zp(e,t){return typeof e=="number"?e:e[t]||0}const Vp=()=>({translate:0,scale:1,origin:0,originPoint:0}),os=()=>({x:Vp(),y:Vp()}),Hp=()=>({min:0,max:0}),Te=()=>({x:Hp(),y:Hp()});function Tt(e){return[e("x"),e("y")]}function Uy({top:e,left:t,right:r,bottom:n}){return{x:{min:t,max:r},y:{min:e,max:n}}}function qk({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function Kk(e,t){if(!t)return e;const r=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function Gc(e){return e===void 0||e===1}function h0({scale:e,scaleX:t,scaleY:r}){return!Gc(e)||!Gc(t)||!Gc(r)}function pn(e){return h0(e)||$y(e)||e.z||e.rotate||e.rotateX||e.rotateY}function $y(e){return Wp(e.x)||Wp(e.y)}function Wp(e){return e&&e!=="0%"}function To(e,t,r){const n=e-r,s=t*n;return r+s}function qp(e,t,r,n,s){return s!==void 0&&(e=To(e,s,n)),To(e,r,n)+t}function f0(e,t=0,r=1,n,s){e.min=qp(e.min,t,r,n,s),e.max=qp(e.max,t,r,n,s)}function zy(e,{x:t,y:r}){f0(e.x,t.translate,t.scale,t.originPoint),f0(e.y,r.translate,r.scale,r.originPoint)}function Gk(e,t,r,n=!1){const s=r.length;if(!s)return;t.x=t.y=1;let i,a;for(let l=0;l<s;l++){i=r[l],a=i.projectionDelta;const c=i.instance;c&&c.style&&c.style.display==="contents"||(n&&i.options.layoutScroll&&i.scroll&&i!==i.root&&ls(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),a&&(t.x*=a.x.scale,t.y*=a.y.scale,zy(e,a)),n&&pn(i.latestValues)&&ls(e,i.latestValues))}t.x=Kp(t.x),t.y=Kp(t.y)}function Kp(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function Dr(e,t){e.min=e.min+t,e.max=e.max+t}function Gp(e,t,[r,n,s]){const i=t[s]!==void 0?t[s]:.5,a=Ee(e.min,e.max,i);f0(e,t[r],t[n],a,t.scale)}const Yk=["x","scaleX","originX"],Qk=["y","scaleY","originY"];function ls(e,t){Gp(e.x,t,Yk),Gp(e.y,t,Qk)}function Vy(e,t){return Uy(Kk(e.getBoundingClientRect(),t))}function Xk(e,t,r){const n=Vy(e,r),{scroll:s}=t;return s&&(Dr(n.x,s.offset.x),Dr(n.y,s.offset.y)),n}const Hy=({current:e})=>e?e.ownerDocument.defaultView:null,Zk=new WeakMap;class Jk{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Te(),this.visualElement=t}start(t,{snapToCursor:r=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const s=d=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(xl(d,"page").point)},i=(d,h)=>{const{drag:f,dragPropagation:p,onDragStart:g}=this.getProps();if(f&&!p&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=ny(f),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Tt(w=>{let v=this.getAxisMotionValue(w).get()||0;if(sr.test(v)){const{projection:x}=this.visualElement;if(x&&x.layout){const m=x.layout.layoutBox[w];m&&(v=At(m)*(parseFloat(v)/100))}}this.originPoint[w]=v}),g&&ye.update(()=>g(d,h),!1,!0);const{animationState:y}=this.visualElement;y&&y.setActive("whileDrag",!0)},a=(d,h)=>{const{dragPropagation:f,dragDirectionLock:p,onDirectionLock:g,onDrag:y}=this.getProps();if(!f&&!this.openGlobalLock)return;const{offset:w}=h;if(p&&this.currentDirection===null){this.currentDirection=e8(w),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",h.point,w),this.updateAxis("y",h.point,w),this.visualElement.render(),y&&y(d,h)},l=(d,h)=>this.stop(d,h),c=()=>Tt(d=>{var h;return this.getAnimationState(d)==="paused"&&((h=this.getAxisMotionValue(d).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new Iy(t,{onSessionStart:s,onStart:i,onMove:a,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:Hy(this.visualElement)})}stop(t,r){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:s}=r;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&ye.update(()=>i(t,r))}cancel(){this.isDragging=!1;const{projection:t,animationState:r}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(t,r,n){const{drag:s}=this.getProps();if(!n||!Da(t,s,this.currentDirection))return;const i=this.getAxisMotionValue(t);let a=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(a=Uk(a,this.constraints[t],this.elastic[t])),i.set(a)}resolveConstraints(){var t;const{dragConstraints:r,dragElastic:n}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,i=this.constraints;r&&is(r)?this.constraints||(this.constraints=this.resolveRefConstraints()):r&&s?this.constraints=$k(s.layoutBox,r):this.constraints=!1,this.elastic=Wk(n),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&Tt(a=>{this.getAxisMotionValue(a)&&(this.constraints[a]=Hk(s.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!is(t))return!1;const n=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=Xk(n,s.root,this.visualElement.getTransformPagePoint());let a=zk(s.layout.layoutBox,i);if(r){const l=r(qk(a));this.hasMutatedConstraints=!!l,l&&(a=Uy(l))}return a}startAnimation(t){const{drag:r,dragMomentum:n,dragElastic:s,dragTransition:i,dragSnapToOrigin:a,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},u=Tt(d=>{if(!Da(d,r,this.currentDirection))return;let h=c&&c[d]||{};a&&(h={min:0,max:0});const f=s?200:1e6,p=s?40:1e7,g={type:"inertia",velocity:n?t[d]:0,bounceStiffness:f,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(d,g)});return Promise.all(u).then(l)}startAxisValueAnimation(t,r){const n=this.getAxisMotionValue(t);return n.start(Hd(t,n,0,r))}stopAnimation(){Tt(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Tt(t=>{var r;return(r=this.getAxisMotionValue(t).animation)===null||r===void 0?void 0:r.pause()})}getAnimationState(t){var r;return(r=this.getAxisMotionValue(t).animation)===null||r===void 0?void 0:r.state}getAxisMotionValue(t){const r="_drag"+t.toUpperCase(),n=this.visualElement.getProps(),s=n[r];return s||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){Tt(r=>{const{drag:n}=this.getProps();if(!Da(r,n,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(r);if(s&&s.layout){const{min:a,max:l}=s.layout.layoutBox[r];i.set(t[r]-Ee(a,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!is(r)||!n||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Tt(a=>{const l=this.getAxisMotionValue(a);if(l){const c=l.get();s[a]=Vk({min:c,max:c},this.constraints[a])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Tt(a=>{if(!Da(a,t,null))return;const l=this.getAxisMotionValue(a),{min:c,max:u}=this.constraints[a];l.set(Ee(c,u,s[a]))})}addListeners(){if(!this.visualElement.current)return;Zk.set(this.visualElement,this);const t=this.visualElement.current,r=pr(t,"pointerdown",c=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(c)}),n=()=>{const{dragConstraints:c}=this.getProps();is(c)&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",n);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),n();const a=dr(window,"resize",()=>this.scalePositionWithinConstraints()),l=s.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(Tt(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=c[d].translate,h.set(h.get()+c[d].translate))}),this.visualElement.render())});return()=>{a(),r(),i(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:a=d0,dragMomentum:l=!0}=t;return{...t,drag:r,dragDirectionLock:n,dragPropagation:s,dragConstraints:i,dragElastic:a,dragMomentum:l}}}function Da(e,t,r){return(t===!0||t===e)&&(r===null||r===e)}function e8(e,t=10){let r=null;return Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x"),r}class t8 extends sn{constructor(t){super(t),this.removeGroupControls=Be,this.removeListeners=Be,this.controls=new Jk(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Be}unmount(){this.removeGroupControls(),this.removeListeners()}}const Yp=e=>(t,r)=>{e&&ye.update(()=>e(t,r))};class r8 extends sn{constructor(){super(...arguments),this.removePointerDownListener=Be}onPointerDown(t){this.session=new Iy(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Hy(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:r,onPan:n,onPanEnd:s}=this.node.getProps();return{onSessionStart:Yp(t),onStart:Yp(r),onMove:n,onEnd:(i,a)=>{delete this.session,s&&ye.update(()=>s(i,a))}}}mount(){this.removePointerDownListener=pr(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function n8(){const e=N.useContext(ul);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:n}=e,s=N.useId();return N.useEffect(()=>n(s),[]),!t&&r?[!1,()=>r&&r(s)]:[!0]}const qa={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Qp(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Ws={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(ne.test(e))e=parseFloat(e);else return e;const r=Qp(e,t.target.x),n=Qp(e,t.target.y);return`${r}% ${n}%`}},s8={correct:(e,{treeScale:t,projectionDelta:r})=>{const n=e,s=Zr.parse(e);if(s.length>5)return n;const i=Zr.createTransformer(e),a=typeof s[0]!="number"?1:0,l=r.x.scale*t.x,c=r.y.scale*t.y;s[0+a]/=l,s[1+a]/=c;const u=Ee(l,c,.5);return typeof s[2+a]=="number"&&(s[2+a]/=u),typeof s[3+a]=="number"&&(s[3+a]/=u),i(s)}};class i8 extends w0.Component{componentDidMount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n,layoutId:s}=this.props,{projection:i}=t;f_(a8),i&&(r.group&&r.group.add(i),n&&n.register&&s&&n.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),qa.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:r,visualElement:n,drag:s,isPresent:i}=this.props,a=n.projection;return a&&(a.isPresent=i,s||t.layoutDependency!==r||r===void 0?a.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?a.promote():a.relegate()||ye.postRender(()=>{const l=a.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),queueMicrotask(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:s}=t;s&&(s.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(s),n&&n.deregister&&n.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function Wy(e){const[t,r]=n8(),n=N.useContext(Dd);return w0.createElement(i8,{...e,layoutGroup:n,switchLayoutGroup:N.useContext(Uv),isPresent:t,safeToRemove:r})}const a8={borderRadius:{...Ws,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ws,borderTopRightRadius:Ws,borderBottomLeftRadius:Ws,borderBottomRightRadius:Ws,boxShadow:s8},qy=["TopLeft","TopRight","BottomLeft","BottomRight"],o8=qy.length,Xp=e=>typeof e=="string"?parseFloat(e):e,Zp=e=>typeof e=="number"||ne.test(e);function l8(e,t,r,n,s,i){s?(e.opacity=Ee(0,r.opacity!==void 0?r.opacity:1,c8(n)),e.opacityExit=Ee(t.opacity!==void 0?t.opacity:1,0,u8(n))):i&&(e.opacity=Ee(t.opacity!==void 0?t.opacity:1,r.opacity!==void 0?r.opacity:1,n));for(let a=0;a<o8;a++){const l=`border${qy[a]}Radius`;let c=Jp(t,l),u=Jp(r,l);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||Zp(c)===Zp(u)?(e[l]=Math.max(Ee(Xp(c),Xp(u),n),0),(sr.test(u)||sr.test(c))&&(e[l]+="%")):e[l]=u}(t.rotate||r.rotate)&&(e.rotate=Ee(t.rotate||0,r.rotate||0,n))}function Jp(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const c8=Ky(0,.5,xy),u8=Ky(.5,.95,Be);function Ky(e,t,r){return n=>n<e?0:n>t?1:r(Ii(e,t,n))}function ex(e,t){e.min=t.min,e.max=t.max}function Ft(e,t){ex(e.x,t.x),ex(e.y,t.y)}function tx(e,t,r,n,s){return e-=t,e=To(e,1/r,n),s!==void 0&&(e=To(e,1/s,n)),e}function d8(e,t=0,r=1,n=.5,s,i=e,a=e){if(sr.test(t)&&(t=parseFloat(t),t=Ee(a.min,a.max,t/100)-a.min),typeof t!="number")return;let l=Ee(i.min,i.max,n);e===i&&(l-=t),e.min=tx(e.min,t,r,l,s),e.max=tx(e.max,t,r,l,s)}function rx(e,t,[r,n,s],i,a){d8(e,t[r],t[n],t[s],t.scale,i,a)}const h8=["x","scaleX","originX"],f8=["y","scaleY","originY"];function nx(e,t,r,n){rx(e.x,t,h8,r?r.x:void 0,n?n.x:void 0),rx(e.y,t,f8,r?r.y:void 0,n?n.y:void 0)}function sx(e){return e.translate===0&&e.scale===1}function Gy(e){return sx(e.x)&&sx(e.y)}function p8(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function Yy(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function ix(e){return At(e.x)/At(e.y)}class x8{constructor(){this.members=[]}add(t){Wd(this.members,t),t.scheduleRender()}remove(t){if(qd(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(t){const r=this.members.findIndex(s=>t===s);if(r===0)return!1;let n;for(let s=r;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){n=i;break}}return n?(this.promote(n),!0):!1}promote(t,r){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,r&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:r,resumingFrom:n}=t;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function ax(e,t,r){let n="";const s=e.x.translate/t.x,i=e.y.translate/t.y;if((s||i)&&(n=`translate3d(${s}px, ${i}px, 0) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),r){const{rotate:c,rotateX:u,rotateY:d}=r;c&&(n+=`rotate(${c}deg) `),u&&(n+=`rotateX(${u}deg) `),d&&(n+=`rotateY(${d}deg) `)}const a=e.x.scale*t.x,l=e.y.scale*t.y;return(a!==1||l!==1)&&(n+=`scale(${a}, ${l})`),n||"none"}const m8=(e,t)=>e.depth-t.depth;class g8{constructor(){this.children=[],this.isDirty=!1}add(t){Wd(this.children,t),this.isDirty=!0}remove(t){qd(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(m8),this.isDirty=!1,this.children.forEach(t)}}function v8(e,t){const r=performance.now(),n=({timestamp:s})=>{const i=s-r;i>=t&&(wr(n),e(i-t))};return ye.read(n,!0),()=>wr(n)}function y8(e){window.MotionDebug&&window.MotionDebug.record(e)}function w8(e){return e instanceof SVGElement&&e.tagName!=="svg"}function b8(e,t,r){const n=yt(e)?e:ks(e);return n.start(Hd("",n,t,r)),n.animation}const ox=["","X","Y","Z"],j8={visibility:"hidden"},lx=1e3;let C8=0;const xn={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function Qy({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:n,resetTransform:s}){return class{constructor(a={},l=t==null?void 0:t()){this.id=C8++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,xn.totalNodes=xn.resolvedTargetDeltas=xn.recalculatedProjection=0,this.nodes.forEach(E8),this.nodes.forEach(D8),this.nodes.forEach(B8),this.nodes.forEach(N8),y8(xn)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new g8)}addEventListener(a,l){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new Kd),this.eventHandlers.get(a).add(l)}notifyListeners(a,...l){const c=this.eventHandlers.get(a);c&&c.notify(...l)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=w8(a),this.instance=a;const{layoutId:c,layout:u,visualElement:d}=this.options;if(d&&!d.current&&d.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(u||c)&&(this.isLayoutDirty=!0),e){let h;const f=()=>this.root.updateBlockedByResize=!1;e(a,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=v8(f,250),qa.hasAnimatedSinceResize&&(qa.hasAnimatedSinceResize=!1,this.nodes.forEach(ux))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&d&&(c||u)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f,hasRelativeTargetChanged:p,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const y=this.options.transition||d.getDefaultTransition()||O8,{onLayoutAnimationStart:w,onLayoutAnimationComplete:v}=d.getProps(),x=!this.targetLayout||!Yy(this.targetLayout,g)||p,m=!f&&p;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||m||f&&(x||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,m);const b={...Vd(y,"layout"),onPlay:w,onComplete:v};(d.shouldReduceMotion||this.options.layoutRoot)&&(b.delay=0,b.type=!1),this.startAnimation(b)}else f||ux(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,wr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(F8),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(cx);return}this.isUpdating||this.nodes.forEach(A8),this.isUpdating=!1,this.nodes.forEach(P8),this.nodes.forEach(_8),this.nodes.forEach(k8),this.clearAllSnapshots();const l=performance.now();tt.delta=Xr(0,1e3/60,l-tt.timestamp),tt.timestamp=l,tt.isProcessing=!0,Ic.update.process(tt),Ic.preRender.process(tt),Ic.render.process(tt),tt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(S8),this.sharedNodes.forEach(T8)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ye.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ye.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Te(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let l=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(l=!1),l&&(this.scroll={animationId:this.root.animationId,phase:a,isRoot:n(this.instance),offset:r(this.instance)})}resetTransform(){if(!s)return;const a=this.isLayoutDirty||this.shouldResetTransform,l=this.projectionDelta&&!Gy(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;a&&(l||pn(this.latestValues)||d)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return a&&(c=this.removeTransform(c)),I8(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:a}=this.options;if(!a)return Te();const l=a.measureViewportBox(),{scroll:c}=this.root;return c&&(Dr(l.x,c.offset.x),Dr(l.y,c.offset.y)),l}removeElementScroll(a){const l=Te();Ft(l,a);for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:d,options:h}=u;if(u!==this.root&&d&&h.layoutScroll){if(d.isRoot){Ft(l,a);const{scroll:f}=this.root;f&&(Dr(l.x,-f.offset.x),Dr(l.y,-f.offset.y))}Dr(l.x,d.offset.x),Dr(l.y,d.offset.y)}}return l}applyTransform(a,l=!1){const c=Te();Ft(c,a);for(let u=0;u<this.path.length;u++){const d=this.path[u];!l&&d.options.layoutScroll&&d.scroll&&d!==d.root&&ls(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),pn(d.latestValues)&&ls(c,d.latestValues)}return pn(this.latestValues)&&ls(c,this.latestValues),c}removeTransform(a){const l=Te();Ft(l,a);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!pn(u.latestValues))continue;h0(u.latestValues)&&u.updateSnapshot();const d=Te(),h=u.measurePageBox();Ft(d,h),nx(l,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return pn(this.latestValues)&&nx(l,this.latestValues),l}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==tt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var l;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(a||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:h,layoutId:f}=this.options;if(!(!this.layout||!(h||f))){if(this.resolvedRelativeTargetAt=tt.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Te(),this.relativeTargetOrigin=Te(),pi(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),Ft(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Te(),this.targetWithTransforms=Te()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Mk(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ft(this.target,this.layout.layoutBox),zy(this.target,this.targetDelta)):Ft(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Te(),this.relativeTargetOrigin=Te(),pi(this.relativeTargetOrigin,this.target,p.target),Ft(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}xn.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||h0(this.parent.latestValues)||$y(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const l=this.getLead(),c=!!this.resumingFrom||this!==l;let u=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===tt.timestamp&&(u=!1),u)return;const{layout:d,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||h))return;Ft(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,p=this.treeScale.y;Gk(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox);const{target:g}=l;if(!g){this.projectionTransform&&(this.projectionDelta=os(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=os(),this.projectionDeltaWithTransform=os());const y=this.projectionTransform;fi(this.projectionDelta,this.layoutCorrected,g,this.latestValues),this.projectionTransform=ax(this.projectionDelta,this.treeScale),(this.projectionTransform!==y||this.treeScale.x!==f||this.treeScale.y!==p)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g)),xn.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(a,l=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},h=os();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const f=Te(),p=c?c.source:void 0,g=this.layout?this.layout.source:void 0,y=p!==g,w=this.getStack(),v=!w||w.members.length<=1,x=!!(y&&!v&&this.options.crossfade===!0&&!this.path.some(L8));this.animationProgress=0;let m;this.mixTargetDelta=b=>{const j=b/1e3;dx(h.x,a.x,j),dx(h.y,a.y,j),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(pi(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),R8(this.relativeTarget,this.relativeTargetOrigin,f,j),m&&p8(this.relativeTarget,m)&&(this.isProjectionDirty=!1),m||(m=Te()),Ft(m,this.relativeTarget)),y&&(this.animationValues=d,l8(d,u,this.latestValues,j,x,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=j},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(wr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ye.update(()=>{qa.hasAnimatedSinceResize=!0,this.currentAnimation=b8(0,lx,{...a,onUpdate:l=>{this.mixTargetDelta(l),a.onUpdate&&a.onUpdate(l)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(lx),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:l,target:c,layout:u,latestValues:d}=a;if(!(!l||!c||!u)){if(this!==a&&this.layout&&u&&Xy(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||Te();const h=At(this.layout.layoutBox.x);c.x.min=a.target.x.min,c.x.max=c.x.min+h;const f=At(this.layout.layoutBox.y);c.y.min=a.target.y.min,c.y.max=c.y.min+f}Ft(l,c),ls(l,d),fi(this.projectionDeltaWithTransform,this.layoutCorrected,l,d)}}registerSharedNode(a,l){this.sharedNodes.has(a)||this.sharedNodes.set(a,new x8),this.sharedNodes.get(a).add(l);const u=l.options.initialPromotionConfig;l.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(l):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:l}=this.options;return l?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:l}=this.options;return l?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:l,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),a&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetRotation(){const{visualElement:a}=this.options;if(!a)return;let l=!1;const{latestValues:c}=a;if((c.rotate||c.rotateX||c.rotateY||c.rotateZ)&&(l=!0),!l)return;const u={};for(let d=0;d<ox.length;d++){const h="rotate"+ox[d];c[h]&&(u[h]=c[h],a.setStaticValue(h,0))}a.render();for(const d in u)a.setStaticValue(d,u[d]);a.scheduleRender()}getProjectionStyles(a){var l,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return j8;const u={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=Wa(a==null?void 0:a.pointerEvents)||"",u.transform=d?d(this.latestValues,""):"none",u;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const y={};return this.options.layoutId&&(y.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,y.pointerEvents=Wa(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!pn(this.latestValues)&&(y.transform=d?d({},""):"none",this.hasProjected=!1),y}const f=h.animationValues||h.latestValues;this.applyTransformsToTarget(),u.transform=ax(this.projectionDeltaWithTransform,this.treeScale,f),d&&(u.transform=d(f,u.transform));const{x:p,y:g}=this.projectionDelta;u.transformOrigin=`${p.origin*100}% ${g.origin*100}% 0`,h.animationValues?u.opacity=h===this?(c=(l=f.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:u.opacity=h===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const y in Eo){if(f[y]===void 0)continue;const{correct:w,applyTo:v}=Eo[y],x=u.transform==="none"?f[y]:w(f[y],h);if(v){const m=v.length;for(let b=0;b<m;b++)u[v[b]]=x}else u[y]=x}return this.options.layoutId&&(u.pointerEvents=h===this?Wa(a==null?void 0:a.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var l;return(l=a.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(cx),this.root.sharedNodes.clear()}}}function _8(e){e.updateLayout()}function k8(e){var t;const r=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&r&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:s}=e.layout,{animationType:i}=e.options,a=r.source!==e.layout.source;i==="size"?Tt(h=>{const f=a?r.measuredBox[h]:r.layoutBox[h],p=At(f);f.min=n[h].min,f.max=f.min+p}):Xy(i,r.layoutBox,n)&&Tt(h=>{const f=a?r.measuredBox[h]:r.layoutBox[h],p=At(n[h]);f.max=f.min+p,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[h].max=e.relativeTarget[h].min+p)});const l=os();fi(l,n,r.layoutBox);const c=os();a?fi(c,e.applyTransform(s,!0),r.measuredBox):fi(c,n,r.layoutBox);const u=!Gy(l);let d=!1;if(!e.resumeFrom){const h=e.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:p}=h;if(f&&p){const g=Te();pi(g,r.layoutBox,f.layoutBox);const y=Te();pi(y,n,p.layoutBox),Yy(g,y)||(d=!0),h.options.layoutRoot&&(e.relativeTarget=y,e.relativeTargetOrigin=g,e.relativeParent=h)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:r,delta:c,layoutDelta:l,hasLayoutChanged:u,hasRelativeTargetChanged:d})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function E8(e){xn.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function N8(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function S8(e){e.clearSnapshot()}function cx(e){e.clearMeasurements()}function A8(e){e.isLayoutDirty=!1}function P8(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function ux(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function D8(e){e.resolveTargetDelta()}function B8(e){e.calcProjection()}function F8(e){e.resetRotation()}function T8(e){e.removeLeadSnapshot()}function dx(e,t,r){e.translate=Ee(t.translate,0,r),e.scale=Ee(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function hx(e,t,r,n){e.min=Ee(t.min,r.min,n),e.max=Ee(t.max,r.max,n)}function R8(e,t,r,n){hx(e.x,t.x,r.x,n),hx(e.y,t.y,r.y,n)}function L8(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const O8={duration:.45,ease:[.4,0,.1,1]},fx=e=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(e),px=fx("applewebkit/")&&!fx("chrome/")?Math.round:Be;function xx(e){e.min=px(e.min),e.max=px(e.max)}function I8(e){xx(e.x),xx(e.y)}function Xy(e,t,r){return e==="position"||e==="preserve-aspect"&&!u0(ix(t),ix(r),.2)}const M8=Qy({attachResizeListener:(e,t)=>dr(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Yc={current:void 0},Zy=Qy({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Yc.current){const e=new M8({});e.mount(window),e.setOptions({layoutScroll:!0}),Yc.current=e}return Yc.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),U8={pan:{Feature:r8},drag:{Feature:t8,ProjectionNode:Zy,MeasureLayout:Wy}},$8=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function z8(e){const t=$8.exec(e);if(!t)return[,];const[,r,n]=t;return[r,n]}function p0(e,t,r=1){const[n,s]=z8(e);if(!n)return;const i=window.getComputedStyle(t).getPropertyValue(n);if(i){const a=i.trim();return Ty(a)?parseFloat(a):a}else return n0(s)?p0(s,t,r+1):s}function V8(e,{...t},r){const n=e.current;if(!(n instanceof Element))return{target:t,transitionEnd:r};r&&(r={...r}),e.values.forEach(s=>{const i=s.get();if(!n0(i))return;const a=p0(i,n);a&&s.set(a)});for(const s in t){const i=t[s];if(!n0(i))continue;const a=p0(i,n);a&&(t[s]=a,r||(r={}),r[s]===void 0&&(r[s]=i))}return{target:t,transitionEnd:r}}const H8=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),Jy=e=>H8.has(e),W8=e=>Object.keys(e).some(Jy),mx=e=>e===In||e===ne,gx=(e,t)=>parseFloat(e.split(", ")[t]),vx=(e,t)=>(r,{transform:n})=>{if(n==="none"||!n)return 0;const s=n.match(/^matrix3d\((.+)\)$/);if(s)return gx(s[1],t);{const i=n.match(/^matrix\((.+)\)$/);return i?gx(i[1],e):0}},q8=new Set(["x","y","z"]),K8=Qi.filter(e=>!q8.has(e));function G8(e){const t=[];return K8.forEach(r=>{const n=e.getValue(r);n!==void 0&&(t.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),t.length&&e.render(),t}const Es={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:vx(4,13),y:vx(5,14)};Es.translateX=Es.x;Es.translateY=Es.y;const Y8=(e,t,r)=>{const n=t.measureViewportBox(),s=t.current,i=getComputedStyle(s),{display:a}=i,l={};a==="none"&&t.setStaticValue("display",e.display||"block"),r.forEach(u=>{l[u]=Es[u](n,i)}),t.render();const c=t.measureViewportBox();return r.forEach(u=>{const d=t.getValue(u);d&&d.jump(l[u]),e[u]=Es[u](c,i)}),e},Q8=(e,t,r={},n={})=>{t={...t},n={...n};const s=Object.keys(t).filter(Jy);let i=[],a=!1;const l=[];if(s.forEach(c=>{const u=e.getValue(c);if(!e.hasValue(c))return;let d=r[c],h=Hs(d);const f=t[c];let p;if(So(f)){const g=f.length,y=f[0]===null?1:0;d=f[y],h=Hs(d);for(let w=y;w<g&&f[w]!==null;w++)p?Ao(Hs(f[w])===p):p=Hs(f[w])}else p=Hs(f);if(h!==p)if(mx(h)&&mx(p)){const g=u.get();typeof g=="string"&&u.set(parseFloat(g)),typeof f=="string"?t[c]=parseFloat(f):Array.isArray(f)&&p===ne&&(t[c]=f.map(parseFloat))}else h!=null&&h.transform&&(p!=null&&p.transform)&&(d===0||f===0)?d===0?u.set(p.transform(d)):t[c]=h.transform(f):(a||(i=G8(e),a=!0),l.push(c),n[c]=n[c]!==void 0?n[c]:t[c],u.jump(f))}),l.length){const c=l.indexOf("height")>=0?window.pageYOffset:null,u=Y8(t,e,l);return i.length&&i.forEach(([d,h])=>{e.getValue(d).set(h)}),e.render(),dl&&c!==null&&window.scrollTo({top:c}),{target:u,transitionEnd:n}}else return{target:t,transitionEnd:n}};function X8(e,t,r,n){return W8(t)?Q8(e,t,r,n):{target:t,transitionEnd:n}}const Z8=(e,t,r,n)=>{const s=V8(e,t,n);return t=s.target,n=s.transitionEnd,X8(e,t,r,n)},x0={current:null},e1={current:!1};function J8(){if(e1.current=!0,!!dl)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>x0.current=e.matches;e.addListener(t),t()}else x0.current=!1}function e5(e,t,r){const{willChange:n}=t;for(const s in t){const i=t[s],a=r[s];if(yt(i))e.addValue(s,i),Fo(n)&&n.add(s);else if(yt(a))e.addValue(s,ks(i,{owner:e})),Fo(n)&&n.remove(s);else if(a!==i)if(e.hasValue(s)){const l=e.getValue(s);!l.hasAnimated&&l.set(i)}else{const l=e.getStaticValue(s);e.addValue(s,ks(l!==void 0?l:i,{owner:e}))}}for(const s in r)t[s]===void 0&&e.removeValue(s);return t}const yx=new WeakMap,t1=Object.keys(Oi),t5=t1.length,wx=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],r5=Pd.length;class n5{constructor({parent:t,props:r,presenceContext:n,reducedMotionConfig:s,visualState:i},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>ye.render(this.render,!1,!0);const{latestValues:l,renderState:c}=i;this.latestValues=l,this.baseTarget={...l},this.initialValues=r.initial?{...l}:{},this.renderState=c,this.parent=t,this.props=r,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=a,this.isControllingVariants=fl(r),this.isVariantNode=Mv(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:u,...d}=this.scrapeMotionValuesFromProps(r,{});for(const h in d){const f=d[h];l[h]!==void 0&&yt(f)&&(f.set(l[h],!1),Fo(u)&&u.add(h))}}scrapeMotionValuesFromProps(t,r){return{}}mount(t){this.current=t,yx.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,n)=>this.bindToMotionValue(n,r)),e1.current||J8(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:x0.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){yx.delete(this.current),this.projection&&this.projection.unmount(),wr(this.notifyUpdate),wr(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,r){const n=On.has(t),s=r.on("change",a=>{this.latestValues[t]=a,this.props.onUpdate&&ye.update(this.notifyUpdate,!1,!0),n&&this.projection&&(this.projection.isTransformDirty=!0)}),i=r.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{s(),i()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...r},n,s,i){let a,l;for(let c=0;c<t5;c++){const u=t1[c],{isEnabled:d,Feature:h,ProjectionNode:f,MeasureLayout:p}=Oi[u];f&&(a=f),d(r)&&(!this.features[u]&&h&&(this.features[u]=new h(this)),p&&(l=p))}if((this.type==="html"||this.type==="svg")&&!this.projection&&a){this.projection=new a(this.latestValues,this.parent&&this.parent.projection);const{layoutId:c,layout:u,drag:d,dragConstraints:h,layoutScroll:f,layoutRoot:p}=r;this.projection.setOptions({layoutId:c,layout:u,alwaysMeasureLayout:!!d||h&&is(h),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof u=="string"?u:"both",initialPromotionConfig:i,layoutScroll:f,layoutRoot:p})}return l}updateFeatures(){for(const t in this.features){const r=this.features[t];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Te()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,r){this.latestValues[t]=r}makeTargetAnimatable(t,r=!0){return this.makeTargetAnimatableFromInstance(t,this.props,r)}update(t,r){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<wx.length;n++){const s=wx[n];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i=t["on"+s];i&&(this.propEventSubscriptions[s]=this.on(s,i))}this.prevMotionValues=e5(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const n=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(n.initial=this.props.initial),n}const r={};for(let n=0;n<r5;n++){const s=Pd[n],i=this.props[s];(Li(i)||i===!1)&&(r[s]=i)}return r}addVariantChild(t){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(t),()=>r.variantChildren.delete(t)}addValue(t,r){r!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,r)),this.values.set(t,r),this.latestValues[t]=r.get()}removeValue(t){this.values.delete(t);const r=this.valueSubscriptions.get(t);r&&(r(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,r){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&r!==void 0&&(n=ks(r,{owner:this}),this.addValue(t,n)),n}readValue(t){var r;return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(r=this.getBaseTargetFromProps(this.props,t))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,r){this.baseTarget[t]=r}getBaseTarget(t){var r;const{initial:n}=this.props,s=typeof n=="string"||typeof n=="object"?(r=Id(this.props,n))===null||r===void 0?void 0:r[t]:void 0;if(n&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!yt(i)?i:this.initialValues[t]!==void 0&&s===void 0?void 0:this.baseTarget[t]}on(t,r){return this.events[t]||(this.events[t]=new Kd),this.events[t].add(r)}notify(t,...r){this.events[t]&&this.events[t].notify(...r)}}class r1 extends n5{sortInstanceNodePosition(t,r){return t.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(t,r){return t.style?t.style[r]:void 0}removeValueFromRenderState(t,{vars:r,style:n}){delete r[t],delete n[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:r,...n},{transformValues:s},i){let a=wk(n,t||{},this);if(s&&(r&&(r=s(r)),n&&(n=s(n)),a&&(a=s(a))),i){vk(this,n,a);const l=Z8(this,n,a,r);r=l.transitionEnd,n=l.target}return{transition:t,transitionEnd:r,...n}}}function s5(e){return window.getComputedStyle(e)}class i5 extends r1{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,r){if(On.has(r)){const n=zd(r);return n&&n.default||0}else{const n=s5(t),s=(Vv(r)?n.getPropertyValue(r):n[r])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:r}){return Vy(t,r)}build(t,r,n,s){Fd(t,r,n,s.transformTemplate)}scrapeMotionValuesFromProps(t,r){return Od(t,r)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;yt(t)&&(this.childSubscription=t.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}renderInstance(t,r,n,s){Yv(t,r,n,s)}}class a5 extends r1{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,r){return t[r]}readValueFromInstance(t,r){if(On.has(r)){const n=zd(r);return n&&n.default||0}return r=Qv.has(r)?r:Sd(r),t.getAttribute(r)}measureInstanceViewportBox(){return Te()}scrapeMotionValuesFromProps(t,r){return Zv(t,r)}build(t,r,n,s){Rd(t,r,n,this.isSVGTag,s.transformTemplate)}renderInstance(t,r,n,s){Xv(t,r,n,s)}mount(t){this.isSVGTag=Ld(t.tagName),super.mount(t)}}const o5=(e,t)=>Bd(e)?new a5(t,{enableHardwareAcceleration:!1}):new i5(t,{enableHardwareAcceleration:!0}),l5={layout:{ProjectionNode:Zy,MeasureLayout:Wy}},c5={...Rk,...r3,...U8,...l5},Qc=d_((e,t)=>V_(e,t,c5,o5));function n1(){const e=N.useRef(!1);return Nd(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function u5(){const e=n1(),[t,r]=N.useState(0),n=N.useCallback(()=>{e.current&&r(t+1)},[t]);return[N.useCallback(()=>ye.postRender(n),[n]),t]}class d5 extends N.Component{getSnapshotBeforeUpdate(t){const r=this.props.childRef.current;if(r&&t.isPresent&&!this.props.isPresent){const n=this.props.sizeRef.current;n.height=r.offsetHeight||0,n.width=r.offsetWidth||0,n.top=r.offsetTop,n.left=r.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function h5({children:e,isPresent:t}){const r=N.useId(),n=N.useRef(null),s=N.useRef({width:0,height:0,top:0,left:0});return N.useInsertionEffect(()=>{const{width:i,height:a,top:l,left:c}=s.current;if(t||!n.current||!i||!a)return;n.current.dataset.motionPopId=r;const u=document.createElement("style");return document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${a}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[t]),N.createElement(d5,{isPresent:t,childRef:n,sizeRef:s},N.cloneElement(e,{ref:n}))}const Xc=({children:e,initial:t,isPresent:r,onExitComplete:n,custom:s,presenceAffectsLayout:i,mode:a})=>{const l=Jv(f5),c=N.useId(),u=N.useMemo(()=>({id:c,initial:t,isPresent:r,custom:s,onExitComplete:d=>{l.set(d,!0);for(const h of l.values())if(!h)return;n&&n()},register:d=>(l.set(d,!1),()=>l.delete(d))}),i?void 0:[r]);return N.useMemo(()=>{l.forEach((d,h)=>l.set(h,!1))},[r]),N.useEffect(()=>{!r&&!l.size&&n&&n()},[r]),a==="popLayout"&&(e=N.createElement(h5,{isPresent:r},e)),N.createElement(ul.Provider,{value:u},e)};function f5(){return new Map}function p5(e){return N.useEffect(()=>()=>e(),[])}const mn=e=>e.key||"";function x5(e,t){e.forEach(r=>{const n=mn(r);t.set(n,r)})}function m5(e){const t=[];return N.Children.forEach(e,r=>{N.isValidElement(r)&&t.push(r)}),t}const bx=({children:e,custom:t,initial:r=!0,onExitComplete:n,exitBeforeEnter:s,presenceAffectsLayout:i=!0,mode:a="sync"})=>{const l=N.useContext(Dd).forceRender||u5()[0],c=n1(),u=m5(e);let d=u;const h=N.useRef(new Map).current,f=N.useRef(d),p=N.useRef(new Map).current,g=N.useRef(!0);if(Nd(()=>{g.current=!1,x5(u,p),f.current=d}),p5(()=>{g.current=!0,p.clear(),h.clear()}),g.current)return N.createElement(N.Fragment,null,d.map(x=>N.createElement(Xc,{key:mn(x),isPresent:!0,initial:r?void 0:!1,presenceAffectsLayout:i,mode:a},x)));d=[...d];const y=f.current.map(mn),w=u.map(mn),v=y.length;for(let x=0;x<v;x++){const m=y[x];w.indexOf(m)===-1&&!h.has(m)&&h.set(m,void 0)}return a==="wait"&&h.size&&(d=[]),h.forEach((x,m)=>{if(w.indexOf(m)!==-1)return;const b=p.get(m);if(!b)return;const j=y.indexOf(m);let _=x;if(!_){const k=()=>{h.delete(m);const E=Array.from(p.keys()).filter(D=>!w.includes(D));if(E.forEach(D=>p.delete(D)),f.current=u.filter(D=>{const S=mn(D);return S===m||E.includes(S)}),!h.size){if(c.current===!1)return;l(),n&&n()}};_=N.createElement(Xc,{key:mn(b),isPresent:!1,onExitComplete:k,custom:t,presenceAffectsLayout:i,mode:a},b),h.set(m,_)}d.splice(j,0,_)}),d=d.map(x=>{const m=x.key;return h.has(m)?x:N.createElement(Xc,{key:mn(x),isPresent:!0,presenceAffectsLayout:i,mode:a},x)}),N.createElement(N.Fragment,null,h.size?d:d.map(x=>N.cloneElement(x)))},s1=({children:e,onSwipeLeft:t,onSwipeRight:r,leftAction:n={icon:o.jsx(wd,{className:"w-5 h-5"}),color:"bg-blue-500",label:"Archive"},rightAction:s={icon:o.jsx(Yi,{className:"w-5 h-5"}),color:"bg-red-500",label:"Delete"},className:i=""})=>{const[a,l]=N.useState(0),[c,u]=N.useState(!1),d=t_({onSwiping:h=>{const f=h.deltaX,p=100,g=Math.max(-p,Math.min(p,f));l(g),u(Math.abs(g)>20)},onSwipedLeft:()=>{Math.abs(a)>50&&t&&t(),l(0),u(!1)},onSwipedRight:()=>{Math.abs(a)>50&&r&&r(),l(0),u(!1)},onSwiped:()=>{l(0),u(!1)},trackMouse:!0,trackTouch:!0});return o.jsxs("div",{className:`relative overflow-hidden ${i}`,...d,children:[o.jsx(bx,{children:a>20&&o.jsx(Qc.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:`absolute left-0 top-0 h-full flex items-center px-4 ${s.color}`,style:{width:Math.abs(a)},children:o.jsxs("div",{className:"flex items-center space-x-2 text-white",children:[s.icon,Math.abs(a)>60&&o.jsx("span",{className:"text-sm font-medium",children:s.label})]})})}),o.jsx(bx,{children:a<-20&&o.jsx(Qc.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:`absolute right-0 top-0 h-full flex items-center justify-end px-4 ${n.color}`,style:{width:Math.abs(a)},children:o.jsxs("div",{className:"flex items-center space-x-2 text-white",children:[Math.abs(a)>60&&o.jsx("span",{className:"text-sm font-medium",children:n.label}),n.icon]})})}),o.jsx(Qc.div,{animate:{x:a},transition:{type:"spring",stiffness:300,damping:30},className:`relative z-10 ${c?"shadow-lg":""}`,children:e})]})},g5=()=>{const{notifications:e,markNotificationAsRead:t,clearAllNotifications:r,posts:n,allUsers:s}=Ze();Pe();const i=Zo(),a=f=>{switch(f){case"like":return o.jsx(kv,{className:"w-5 h-5 text-red-400"});case"repost":return o.jsx(Dv,{className:"w-5 h-5 text-green-400"});case"comment":return o.jsx(t0,{className:"w-5 h-5 text-blue-400"});case"follow":return o.jsx(Ir,{className:"w-5 h-5 text-purple-400"});case"mention":return o.jsx(_C,{className:"w-5 h-5 text-yellow-400"});case"message":return o.jsx(t0,{className:"w-5 h-5 text-pink-400"});default:return o.jsx(bo,{className:"w-5 h-5 text-gray-400"})}},l=f=>{switch(f.type){case"like":return"liked your post";case"repost":return"reposted your post";case"comment":return"commented on your post";case"follow":return"started following you";case"mention":return"mentioned you in a post";case"message":return"sent you a message";default:return"interacted with your content"}},c=f=>{switch(t(f.id),f.type){case"like":case"repost":case"comment":case"mention":f.postId&&i("/");break;case"follow":f.fromUserId&&i("/explore");break;case"message":i("/messages");break}},u=f=>{t(f)},d=f=>{console.log("Archive notification:",f)},h=f=>{console.log("Delete notification:",f)};return o.jsxs("div",{className:"min-h-screen bg-black/10 backdrop-blur-sm",children:[o.jsx("div",{className:"sticky top-0 bg-black/80 backdrop-blur-md border-b border-gray-700/50 p-4 z-10",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-bold text-white",children:"Notifications"}),o.jsx("p",{className:"text-gray-400 text-sm",children:"Stay updated with your community"})]}),e.length>0&&o.jsxs("button",{onClick:r,className:"flex items-center space-x-2 px-4 py-2 bg-gray-800 hover:bg-gray-700 rounded-lg transition-colors text-gray-300 hover:text-white",children:[o.jsx(nt,{className:"w-4 h-4"}),o.jsx("span",{children:"Clear All"})]})]})}),o.jsx("div",{className:"divide-y divide-gray-700/30",children:e.length===0?o.jsxs("div",{className:"p-12 text-center",children:[o.jsx(bo,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),o.jsx("h3",{className:"text-xl font-semibold text-gray-400 mb-2",children:"No notifications yet"}),o.jsx("p",{className:"text-gray-500",children:"When someone interacts with your content, you'll see it here."})]}):e.map(f=>{var p;return o.jsx(s1,{onSwipeLeft:()=>d(f.id),onSwipeRight:()=>h(f.id),leftAction:{icon:o.jsx(wd,{className:"w-5 h-5"}),color:"bg-blue-500",label:"Archive"},rightAction:{icon:o.jsx(nt,{className:"w-5 h-5"}),color:"bg-red-500",label:"Delete"},children:o.jsx("div",{onClick:()=>c(f),className:`p-6 hover:bg-gray-800/20 transition-colors cursor-pointer ${f.read?"":"bg-purple-900/10 border-l-4 border-purple-500"}`,children:o.jsxs("div",{className:"flex space-x-4",children:[o.jsx("div",{className:"flex-shrink-0",children:a(f.type)}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[f.fromUser&&o.jsx("img",{src:f.fromUser.avatar,alt:f.fromUser.displayName,className:"w-8 h-8 rounded-full object-cover"}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("p",{className:"text-white",children:[o.jsx("span",{className:"font-semibold",children:((p=f.fromUser)==null?void 0:p.displayName)||"Someone"})," ",o.jsx("span",{className:"text-gray-300",children:l(f)})]}),o.jsx("p",{className:"text-gray-500 text-sm",children:f.timestamp.toLocaleString()})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[!f.read&&o.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),o.jsx("button",{onClick:g=>{g.stopPropagation(),u(f.id)},className:"p-1 text-gray-400 hover:text-green-400 transition-colors",children:o.jsx(kC,{className:"w-4 h-4"})})]})]}),f.message&&o.jsx("p",{className:"text-gray-400 text-sm mt-2 bg-gray-800/30 rounded-lg p-3",children:f.message})]})]})})},f.id)})})]})},v5=()=>{const{chats:e,sendMessage:t,createChat:r,getChatMessages:n,markMessagesAsRead:s,deleteChatForUser:i,clearAllMessageNotifications:a,searchUsers:l}=Ze(),{user:c}=Pe(),[u,d]=N.useState(null),[h,f]=N.useState(""),[p,g]=N.useState(!1),[y,w]=N.useState(""),[v,x]=N.useState(""),[m,b]=N.useState([]),[j,_]=N.useState([]),[k,E]=N.useState(""),[D,S]=N.useState(!1),[P,A]=N.useState(!1),[B,H]=N.useState(null),[G,M]=N.useState(window.innerWidth<768),[V,I]=N.useState(!1),[W,q]=N.useState([]),[C,R]=N.useState([]),[z,O]=N.useState(!1);N.useEffect(()=>{const U=()=>{q([...e]),u&&Q(u.id)};U();const Z=setInterval(U,1e3);return()=>clearInterval(Z)},[e,u]),N.useEffect(()=>{const U=()=>{M(window.innerWidth<768)};return window.addEventListener("resize",U),()=>window.removeEventListener("resize",U)},[]),N.useEffect(()=>{u&&(Q(u.id),s(u.id))},[u]),N.useEffect(()=>{const Z=setTimeout(async()=>{if(v.trim().length>0){O(!0);try{const xe=(await l(v)).filter(it=>it.id!==(c==null?void 0:c.id)&&!j.includes(it.id));R(xe)}catch(le){console.error("Error searching users:",le),R([])}finally{O(!1)}}else R([])},300);return()=>clearTimeout(Z)},[v,j,c==null?void 0:c.id]);const Q=async U=>{const Z=await n(U);b(Z)},J=async U=>{if(U.preventDefault(),h.trim()&&u&&c){await t(u.id,h.trim(),c.id);const Z={id:Date.now().toString(),content:h.trim(),senderId:c.id,senderInfo:{username:c.username,displayName:c.displayName,avatar:c.avatar},chatId:u.id,timestamp:new Date,isEncrypted:!0,readBy:[c.id]};b(le=>[...le,Z]),f("")}},ie=async()=>{if(j.length!==0)try{const U=await r(j,D,k||void 0);d(U),g(!1),_([]),E(""),S(!1),x(""),R([])}catch(U){console.error("Error creating chat:",U)}},X=U=>{console.log("Archive chat:",U)},Ue=U=>{H(U)},$e=async U=>{c&&(await i(U,c.id),H(null),(u==null?void 0:u.id)===U&&d(null))},Oe=async(U,Z)=>{if(!(!c||!u)){A(!0);try{const le=Z==="image"?"message-images":"message-videos",xe=`${c.id}/${Z}_${Date.now()}.${U.name.split(".").pop()}`,it=await yd(U,le,xe);it?(await t(u.id,`Sent ${Z==="image"?"an image":"a video"}`,c.id,it),Q(u.id)):alert("Failed to upload file")}catch(le){console.error("Upload error:",le),alert("Failed to upload file")}finally{A(!1)}}},wt=()=>{const U=document.createElement("input");U.type="file",U.accept="image/*",U.onchange=Z=>{var xe;const le=(xe=Z.target.files)==null?void 0:xe[0];le&&Oe(le,"image")},U.click()},ze=()=>{const U=document.createElement("input");U.type="file",U.accept="video/*",U.onchange=Z=>{var xe;const le=(xe=Z.target.files)==null?void 0:xe[0];le&&Oe(le,"video")},U.click()},Fe=U=>{d(U),s(U.id)},Bt=()=>{a()},ee=W.filter(U=>{var le;if(!y)return!0;const Z=y.toLowerCase();return(le=U.name)!=null&&le.toLowerCase().includes(Z)?!0:U.participantInfo?U.participantInfo.some(xe=>xe.displayName.toLowerCase().includes(Z)||xe.username.toLowerCase().includes(Z)):!1}),Ve=U=>{if(U.name)return U.name;if(U.participantInfo){const Z=U.participantInfo.filter(le=>le.id!==(c==null?void 0:c.id));if(Z.length===1)return Z[0].displayName;if(Z.length>1)return`${Z[0].displayName} and ${Z.length-1} others`}return"Chat"},bt=U=>{if(U.isGroup)return"https://images.pexels.com/photos/1239291/pexels-photo-1239291.jpeg?auto=compress&cs=tinysrgb&w=350&h=350";if(U.participantInfo){const Z=U.participantInfo.find(le=>le.id!==(c==null?void 0:c.id));return(Z==null?void 0:Z.avatar)||"https://images.pexels.com/photos/1239291/pexels-photo-1239291.jpeg?auto=compress&cs=tinysrgb&w=350&h=350"}return"https://images.pexels.com/photos/1239291/pexels-photo-1239291.jpeg?auto=compress&cs=tinysrgb&w=350&h=350"},Zt=U=>{if(U.senderInfo)return{name:U.senderId===(c==null?void 0:c.id)?"You":U.senderInfo.displayName,avatar:U.senderInfo.avatar};if(u!=null&&u.participantInfo){const Z=u.participantInfo.find(le=>le.id===U.senderId);if(Z)return{name:U.senderId===(c==null?void 0:c.id)?"You":Z.displayName,avatar:Z.avatar}}return{name:U.senderId===(c==null?void 0:c.id)?"You":"Unknown User",avatar:"https://images.pexels.com/photos/1239291/pexels-photo-1239291.jpeg?auto=compress&cs=tinysrgb&w=350&h=350"}},jt=U=>U===(c==null?void 0:c.id),He=(U,Z)=>!(u!=null&&u.isGroup)||jt(U.senderId)?!1:Z===0?!0:m[Z-1].senderId!==U.senderId,_e=e.reduce((U,Z)=>Z.lastMessage&&!Z.lastMessage.readBy.includes((c==null?void 0:c.id)||"")?U+1:U,0);return o.jsxs(o.Fragment,{children:[G&&!u&&o.jsx("button",{onClick:()=>I(!V),className:"fixed top-4 left-4 z-50 p-2 bg-gray-900 rounded-full border border-gray-700",children:V?o.jsx(nt,{className:"w-6 h-6 text-white"}):o.jsx(Sv,{className:"w-6 h-6 text-white"})}),o.jsxs("div",{className:"min-h-screen bg-black/10 backdrop-blur-sm flex relative",children:[o.jsxs("div",{className:`${G?u?"hidden":"w-full":"w-80"} border-r border-gray-700/50 bg-black/20 ${G?"absolute inset-0 z-10":""}`,children:[o.jsxs("div",{className:"p-4 border-b border-gray-700/50",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-bold text-white",children:"Messages"}),_e>0&&o.jsxs("p",{className:"text-purple-400 text-sm",children:[_e," unread messages"]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[_e>0&&o.jsx("button",{onClick:Bt,className:"p-2 text-purple-400 hover:bg-purple-400/10 rounded-full transition-colors",title:"Clear all message notifications",children:o.jsx(dp,{className:"w-5 h-5"})}),o.jsx("button",{onClick:()=>g(!0),className:"p-2 bg-purple-600 hover:bg-purple-700 rounded-full transition-colors",children:o.jsx(ll,{className:"w-5 h-5 text-white"})})]})]}),o.jsxs("div",{className:"relative",children:[o.jsx(Kr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),o.jsx("input",{type:"text",value:y,onChange:U=>w(U.target.value),placeholder:"Search conversations...",className:"w-full bg-gray-800 border border-gray-600 rounded-full pl-9 pr-4 py-2 text-white text-sm focus:border-purple-500 focus:outline-none"})]})]}),o.jsx("div",{className:"overflow-y-auto",children:ee.length===0?o.jsxs("div",{className:"p-6 text-center",children:[o.jsx(fr,{className:"w-12 h-12 text-gray-600 mx-auto mb-3"}),o.jsx("p",{className:"text-gray-400",children:"No conversations yet"}),o.jsx("p",{className:"text-gray-500 text-sm",children:"Start a new chat to connect with other writers"})]}):ee.map(U=>{var Z;return o.jsx(s1,{onSwipeLeft:()=>X(U.id),onSwipeRight:()=>Ue(U.id),leftAction:{icon:o.jsx(wd,{className:"w-5 h-5"}),color:"bg-blue-500",label:"Archive"},rightAction:{icon:o.jsx(Yi,{className:"w-5 h-5"}),color:"bg-red-500",label:"Delete"},children:o.jsx("button",{onClick:()=>Fe(U),className:`w-full p-4 text-left hover:bg-gray-800/30 transition-colors border-b border-gray-700/20 ${(u==null?void 0:u.id)===U.id?"bg-purple-900/20":""}`,children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsxs("div",{className:"relative",children:[o.jsx("img",{src:bt(U),alt:"Chat avatar",className:"w-12 h-12 rounded-full object-cover"}),U.isEncrypted&&o.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 rounded-full flex items-center justify-center",children:o.jsx(Co,{className:"w-2 h-2 text-white"})})]}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-white font-medium truncate",children:Ve(U)}),o.jsx("p",{className:"text-gray-400 text-sm truncate",children:((Z=U.lastMessage)==null?void 0:Z.content)||"No messages yet"})]}),U.lastMessage&&!U.lastMessage.readBy.includes((c==null?void 0:c.id)||"")&&o.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"})]})})},U.id)})})]}),o.jsx("div",{className:`flex-1 flex flex-col ${G&&u?"absolute inset-0 z-20 bg-gray-900":""}`,children:u?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"p-4 border-b border-gray-700/50 bg-black/20",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[G&&o.jsx("button",{onClick:()=>d(null),className:"p-2 text-gray-400 hover:text-white transition-colors",children:o.jsx(CC,{className:"w-5 h-5"})}),o.jsx("img",{src:bt(u),alt:"Chat avatar",className:"w-10 h-10 rounded-full object-cover"}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-white font-semibold",children:Ve(u)}),o.jsxs("div",{className:"flex items-center space-x-2",children:[u.isEncrypted&&o.jsxs("div",{className:"flex items-center space-x-1 text-green-400 text-xs",children:[o.jsx(Co,{className:"w-3 h-3"}),o.jsx("span",{children:"Encrypted"})]}),o.jsxs("span",{className:"text-gray-400 text-sm",children:[u.participants.length," participants"]})]})]})]}),o.jsx("button",{className:"p-2 text-gray-400 hover:text-white transition-colors",children:o.jsx(Av,{className:"w-5 h-5"})})]})}),o.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:m.map((U,Z)=>{const le=Zt(U),xe=jt(U.senderId),it=He(U,Z);return o.jsx("div",{className:`flex ${xe?"justify-end":"justify-start"}`,children:o.jsxs("div",{className:`max-w-xs ${xe?"order-2":"order-1"}`,children:[it&&o.jsxs("div",{className:"flex items-center space-x-2 mb-1 px-3",children:[o.jsx("img",{src:le.avatar,alt:le.name,className:"w-4 h-4 rounded-full object-cover"}),o.jsx("span",{className:"text-xs text-gray-400 font-medium",children:le.name})]}),o.jsxs("div",{className:`rounded-2xl p-3 ${xe?"bg-purple-600 rounded-br-md":"bg-gray-800 rounded-bl-md"}`,children:[U.mediaUrl&&o.jsx("div",{className:"mb-2",children:U.mediaUrl.includes(".mp4")||U.mediaUrl.includes(".mov")||U.mediaUrl.includes(".avi")?o.jsx("video",{src:U.mediaUrl,className:"w-full max-w-xs rounded-lg",controls:!0}):o.jsx("img",{src:U.mediaUrl,alt:"Shared media",className:"w-full max-w-xs rounded-lg"})}),o.jsx("p",{className:"text-white text-sm",children:U.content}),o.jsx("p",{className:`text-xs mt-1 ${xe?"text-purple-200":"text-gray-400"}`,children:U.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]})},U.id)})}),o.jsx("form",{onSubmit:J,className:"p-4 border-t border-gray-700/50 bg-black/20",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("button",{type:"button",onClick:wt,disabled:P,className:"p-2 text-gray-400 hover:text-purple-400 transition-colors disabled:opacity-50",children:P?o.jsx(_d,{className:"w-5 h-5 animate-spin"}):o.jsx(Ev,{className:"w-5 h-5"})}),o.jsx("button",{type:"button",onClick:ze,disabled:P,className:"p-2 text-gray-400 hover:text-purple-400 transition-colors disabled:opacity-50",children:o.jsx(Fv,{className:"w-5 h-5"})}),o.jsx("input",{type:"text",value:h,onChange:U=>f(U.target.value),placeholder:"Type a message...",className:"flex-1 bg-gray-800 border border-gray-600 rounded-full px-4 py-2 text-white focus:border-purple-500 focus:outline-none"}),o.jsx("button",{type:"submit",disabled:!h.trim()||P,className:"p-2 bg-purple-600 hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed rounded-full transition-colors",children:o.jsx(Bv,{className:"w-5 h-5 text-white"})})]})})]}):o.jsx("div",{className:"flex-1 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx(fr,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),o.jsx("h3",{className:"text-xl font-semibold text-gray-400 mb-2",children:"Select a conversation"}),o.jsx("p",{className:"text-gray-500",children:"Choose from your existing conversations or start a new one"}),_e>0&&o.jsx("div",{className:"mt-4",children:o.jsxs("button",{onClick:Bt,className:"flex items-center space-x-2 bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-full transition-colors mx-auto",children:[o.jsx(dp,{className:"w-4 h-4"}),o.jsxs("span",{children:["Clear All Notifications (",_e,")"]})]})})]})})})]}),B&&o.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-gray-900 rounded-2xl border border-gray-700/50 p-6 mx-4 max-w-sm w-full",children:[o.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Delete Conversation"}),o.jsx("p",{className:"text-gray-300 mb-6",children:"Are you sure you want to delete this conversation? This will only remove it from your view. Other participants will still be able to see the conversation."}),o.jsxs("div",{className:"flex space-x-3",children:[o.jsx("button",{onClick:()=>$e(B),className:"flex-1 bg-red-600 hover:bg-red-700 text-white font-semibold py-2 rounded-lg transition-colors",children:"Delete for Me"}),o.jsx("button",{onClick:()=>H(null),className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white font-semibold py-2 rounded-lg transition-colors",children:"Cancel"})]})]})}),p&&o.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",children:o.jsx("div",{className:"bg-gray-900 rounded-2xl border border-gray-700/50 w-full max-w-md mx-4 max-h-[80vh] overflow-y-auto",children:o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-lg font-bold text-white",children:"Start New Conversation"}),o.jsx("button",{onClick:()=>{g(!1),_([]),E(""),S(!1),x(""),R([])},className:"p-2 text-gray-400 hover:text-white transition-colors",children:o.jsx(nt,{className:"w-5 h-5"})})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[o.jsx("input",{type:"checkbox",id:"groupChat",checked:D,onChange:U=>S(U.target.checked),className:"text-purple-600 focus:ring-purple-500 rounded"}),o.jsx("label",{htmlFor:"groupChat",className:"text-white text-sm",children:"Create group chat"})]}),D&&o.jsx("input",{type:"text",value:k,onChange:U=>E(U.target.value),placeholder:"Group name (optional)",className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white focus:border-purple-500 focus:outline-none"}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-white text-sm mb-2",children:"Search users by username:"}),o.jsxs("div",{className:"relative",children:[o.jsx(Kr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),o.jsx("input",{type:"text",value:v,onChange:U=>x(U.target.value),placeholder:"Type username to search...",className:"w-full bg-gray-800 border border-gray-600 rounded-lg pl-9 pr-4 py-3 text-white focus:border-purple-500 focus:outline-none"})]})]}),j.length>0&&o.jsxs("div",{children:[o.jsx("p",{className:"text-white text-sm mb-2",children:"Selected users:"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:j.map(U=>{const Z=C.find(le=>le.id===U);return o.jsxs("div",{className:"flex items-center space-x-2 bg-purple-600/20 rounded-full px-3 py-1",children:[o.jsxs("span",{className:"text-purple-300 text-sm",children:["@",(Z==null?void 0:Z.username)||"Unknown"]}),o.jsx("button",{onClick:()=>_(le=>le.filter(xe=>xe!==U)),className:"text-purple-300 hover:text-white",children:o.jsx(nt,{className:"w-3 h-3"})})]},U)})})]}),v&&o.jsxs("div",{children:[o.jsx("p",{className:"text-white text-sm mb-2",children:"Search results:"}),o.jsx("div",{className:"max-h-48 overflow-y-auto space-y-2",children:z?o.jsxs("div",{className:"text-center py-4",children:[o.jsx("div",{className:"animate-spin w-6 h-6 border-2 border-purple-500 border-t-transparent rounded-full mx-auto"}),o.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Searching..."})]}):C.length>0?C.map(U=>o.jsxs("button",{onClick:()=>{_(D?Z=>[...Z,U.id]:[U.id])},disabled:j.includes(U.id),className:"w-full flex items-center space-x-3 p-3 hover:bg-gray-800 rounded-lg cursor-pointer transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[o.jsx("img",{src:U.avatar,alt:U.displayName,className:"w-8 h-8 rounded-full object-cover"}),o.jsxs("div",{className:"text-left",children:[o.jsx("p",{className:"text-white text-sm font-medium",children:U.displayName}),o.jsxs("p",{className:"text-gray-400 text-xs",children:["@",U.username]})]})]},U.id)):v.length>0?o.jsx("p",{className:"text-gray-400 text-sm text-center py-4",children:"No users found"}):null})]}),o.jsxs("div",{className:"flex space-x-3 pt-4",children:[o.jsx("button",{onClick:ie,disabled:j.length===0,className:"flex-1 bg-purple-600 hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed text-white font-semibold py-3 rounded-lg transition-colors",children:"Create Chat"}),o.jsx("button",{onClick:()=>{g(!1),_([]),E(""),S(!1),x(""),R([])},className:"px-6 py-3 text-gray-400 hover:text-white transition-colors",children:"Cancel"})]})]})]})})})]})},y5=()=>{const{user:e}=Pe(),{posts:t,characters:r,allUsers:n,bookmarkedPosts:s,bookmarkedCharacters:i,bookmarkedUsers:a,likePost:l,repostPost:c}=Ze(),[u,d]=N.useState(""),[h,f]=N.useState("all"),[p,g]=N.useState(null),[y,w]=N.useState(null),v=t.filter(M=>s.includes(M.id)),x=r.filter(M=>i.includes(M.id)),m=n.filter(M=>a.includes(M.id)),b=()=>{const M=u.toLowerCase();let V=v,I=x,W=m;return u&&(V=V.filter(q=>{var C,R;return q.content.toLowerCase().includes(M)||((C=q.character)==null?void 0:C.name.toLowerCase().includes(M))||((R=q.user)==null?void 0:R.displayName.toLowerCase().includes(M))}),I=I.filter(q=>q.name.toLowerCase().includes(M)||q.username.toLowerCase().includes(M)||q.verseTag.toLowerCase().includes(M)),W=W.filter(q=>q.displayName.toLowerCase().includes(M)||q.username.toLowerCase().includes(M)||q.writersTag.toLowerCase().includes(M))),{filteredPosts:V,filteredCharacters:I,filteredUsers:W}},{filteredPosts:j,filteredCharacters:_,filteredUsers:k}=b(),E=M=>{l(M)},D=M=>{c(M)},S=M=>{g(M)},P=M=>{w(M)},A=h==="all"||h==="posts",B=h==="all"||h==="characters",H=h==="all"||h==="writers",G=A&&j.length>0||B&&_.length>0||H&&k.length>0;return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"min-h-screen bg-black/10 backdrop-blur-sm",children:[o.jsxs("div",{className:"sticky top-0 bg-black/80 backdrop-blur-md border-b border-gray-700/50 p-4 z-10",children:[o.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Bookmarks"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx(Kr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),o.jsx("input",{type:"text",value:u,onChange:M=>d(M.target.value),placeholder:"Search bookmarks...",className:"w-full bg-gray-800 border border-gray-600 rounded-full pl-10 pr-4 py-3 text-white focus:border-purple-500 focus:outline-none"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(SC,{className:"w-4 h-4 text-gray-400"}),o.jsx("div",{className:"flex space-x-1",children:[{key:"all",label:"All"},{key:"posts",label:"Posts"},{key:"characters",label:"Characters"},{key:"writers",label:"Writers"}].map(M=>o.jsx("button",{onClick:()=>f(M.key),className:`px-3 py-1 rounded-full text-sm transition-colors ${h===M.key?"bg-purple-600 text-white":"text-gray-400 hover:text-white hover:bg-gray-800"}`,children:M.label},M.key))})]})]})]}),o.jsx("div",{className:"p-6 space-y-8",children:G?o.jsxs(o.Fragment,{children:[A&&j.length>0&&o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Bookmarked Posts"}),o.jsx("div",{className:"space-y-4",children:j.map(M=>o.jsx(Ts,{post:M,onLike:()=>E(M.id),onRepost:()=>D(M.id)},M.id))})]}),B&&_.length>0&&o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Bookmarked Characters"}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:_.map(M=>o.jsx("div",{onClick:()=>P(M),children:o.jsx(ui,{character:M,showActions:!1,showFollowButton:M.userId!==(e==null?void 0:e.id)})},M.id))})]}),H&&k.length>0&&o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Bookmarked Writers"}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:k.map(M=>o.jsxs("div",{onClick:()=>S(M),className:"bg-gray-800/50 rounded-2xl p-6 border border-gray-700/50 hover:bg-gray-700/30 transition-colors cursor-pointer",children:[o.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[o.jsx("img",{src:M.avatar,alt:M.displayName,className:"w-16 h-16 rounded-full object-cover ring-2 ring-purple-500/30"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-white font-bold text-lg",children:M.displayName}),o.jsxs("p",{className:"text-gray-400",children:["@",M.username]}),o.jsxs("p",{className:"text-purple-300 text-sm",children:["#",M.writersTag]})]})]}),o.jsx("p",{className:"text-gray-300 text-sm",children:M.bio})]},M.id))})]})]}):o.jsxs("div",{className:"text-center py-12",children:[o.jsx(jo,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),o.jsx("h3",{className:"text-xl font-semibold text-gray-400 mb-2",children:u?"No matching bookmarks":"No bookmarks yet"}),o.jsx("p",{className:"text-gray-500",children:u?"Try adjusting your search or filter criteria":"Save posts, characters, and writers you want to revisit later"})]})}),o.jsx("div",{className:"p-6 text-center border-t border-gray-700/50 bg-black/20",children:o.jsxs("p",{className:"text-gray-500 text-sm",children:["Verse © ",new Date().getFullYear()," - UNWYRE TECH AND CONSULTING"]})})]}),p&&o.jsx(Rv,{user:p,onClose:()=>g(null)}),y&&o.jsx(Ed,{character:y,onClose:()=>w(null)})]})},w5=({onClose:e})=>{const{addCharacter:t,characters:r}=Ze(),{user:n}=Pe(),[s,i]=N.useState({username:"",name:"",title:"",bio:"",universe:"",verseTag:"",traits:"",customColor:"#8b5cf6",customFont:"Inter"}),[a,l]=N.useState(""),c=r.filter(p=>p.userId===(n==null?void 0:n.id)),u=10,d=c.length<u,h=p=>{if(p.preventDefault(),!n)return;if(!d){l(`You can only create up to ${u} characters.`);return}const g={id:Date.now().toString(),username:s.username,name:s.name,title:s.title,avatar:"https://images.pexels.com/photos/1382734/pexels-photo-1382734.jpeg?auto=compress&cs=tinysrgb&w=150&h=150",headerImage:"https://images.pexels.com/photos/1323550/pexels-photo-1323550.jpeg?auto=compress&cs=tinysrgb&w=800&h=300",bio:s.bio,universe:s.universe,verseTag:s.verseTag,traits:s.traits.split(",").map(y=>y.trim()).filter(y=>y),userId:n.id,customColor:s.customColor,customFont:s.customFont,followers:[],following:[],createdAt:new Date};t(g),e()},f=["Inter","Roboto","Open Sans","Lato","Montserrat","Playfair Display","Crimson Text","Merriweather","Courier New","Georgia"];return d?o.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-gray-900 rounded-2xl border border-gray-700/50 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"sticky top-0 bg-gray-900 border-b border-gray-700/50 p-4 flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg font-bold text-white",children:"Create New Character"}),o.jsxs("p",{className:"text-gray-400 text-sm",children:[c.length,"/",u," characters created"]})]}),o.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-800 rounded-full transition-colors",children:o.jsx(nt,{className:"w-6 h-6 text-gray-400"})})]}),o.jsxs("form",{onSubmit:h,className:"p-6 space-y-6",children:[a&&o.jsx("div",{className:"p-3 bg-red-900/20 border border-red-500/30 rounded-lg",children:o.jsx("p",{className:"text-red-400 text-sm",children:a})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Character Username *"}),o.jsx("input",{type:"text",value:s.username,onChange:p=>i(g=>({...g,username:p.target.value})),className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white focus:border-purple-500 focus:outline-none",placeholder:"character_username",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Character Name *"}),o.jsx("input",{type:"text",value:s.name,onChange:p=>i(g=>({...g,name:p.target.value})),className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white focus:border-purple-500 focus:outline-none",placeholder:"Character's full name",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Title/Role *"}),o.jsx("input",{type:"text",value:s.title,onChange:p=>i(g=>({...g,title:p.target.value})),className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white focus:border-purple-500 focus:outline-none",placeholder:"e.g., Elven Ranger, Detective, Wizard",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Universe *"}),o.jsx("input",{type:"text",value:s.universe,onChange:p=>i(g=>({...g,universe:p.target.value})),className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white focus:border-purple-500 focus:outline-none",placeholder:"e.g., Middle Earth, Marvel Universe",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Verse Tag *"}),o.jsx("input",{type:"text",value:s.verseTag,onChange:p=>i(g=>({...g,verseTag:p.target.value})),className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white focus:border-purple-500 focus:outline-none",placeholder:"e.g., Marvel, Fantasy, SciFi",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Character Color"}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"color",value:s.customColor,onChange:p=>i(g=>({...g,customColor:p.target.value})),className:"w-12 h-12 rounded-lg border border-gray-600 bg-gray-800"}),o.jsx("div",{className:"flex-1",children:o.jsx("input",{type:"text",value:s.customColor,onChange:p=>i(g=>({...g,customColor:p.target.value})),className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white focus:border-purple-500 focus:outline-none"})})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Bio *"}),o.jsx("textarea",{value:s.bio,onChange:p=>i(g=>({...g,bio:p.target.value})),rows:4,className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white focus:border-purple-500 focus:outline-none resize-none",placeholder:"Describe your character's background, personality, and story...",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Traits (comma-separated)"}),o.jsx("input",{type:"text",value:s.traits,onChange:p=>i(g=>({...g,traits:p.target.value})),className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white focus:border-purple-500 focus:outline-none",placeholder:"e.g., Brave, Mysterious, Loyal, Cunning"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Custom Font"}),o.jsx("select",{value:s.customFont,onChange:p=>i(g=>({...g,customFont:p.target.value})),className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white focus:border-purple-500 focus:outline-none",children:f.map(p=>o.jsx("option",{value:p,style:{fontFamily:p},children:p},p))})]}),o.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-700/50",children:[o.jsx("button",{type:"button",onClick:e,className:"px-6 py-2 text-gray-400 hover:text-white transition-colors",children:"Cancel"}),o.jsx("button",{type:"submit",className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white font-semibold px-6 py-2 rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all duration-200",children:"Create Character"})]})]})]})}):o.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",children:o.jsx("div",{className:"bg-gray-900 rounded-2xl border border-gray-700/50 p-6 mx-4 max-w-md w-full",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"w-16 h-16 bg-red-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(nt,{className:"w-8 h-8 text-red-400"})}),o.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"Character Limit Reached"}),o.jsxs("p",{className:"text-gray-300 mb-6",children:["You have reached the maximum limit of ",u," characters. You currently have ",c.length," characters."]}),o.jsx("button",{onClick:e,className:"bg-purple-600 hover:bg-purple-700 text-white font-semibold px-6 py-2 rounded-lg transition-colors",children:"Close"})]})})})},b5=({onClose:e})=>{const{user:t,updateUser:r}=Pe(),[n,s]=N.useState({displayName:(t==null?void 0:t.displayName)||"",bio:(t==null?void 0:t.bio)||"",writersTag:(t==null?void 0:t.writersTag)||"",avatar:(t==null?void 0:t.avatar)||"",headerImage:(t==null?void 0:t.headerImage)||""}),i=a=>{a.preventDefault(),r(n),e()};return o.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-gray-900 rounded-2xl border border-gray-700/50 w-full max-w-lg mx-4",children:[o.jsxs("div",{className:"p-4 border-b border-gray-700/50 flex items-center justify-between",children:[o.jsx("h2",{className:"text-lg font-bold text-white",children:"Edit Profile"}),o.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-800 rounded-full transition-colors",children:o.jsx(nt,{className:"w-6 h-6 text-gray-400"})})]}),o.jsxs("form",{onSubmit:i,className:"p-6 space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Header Image"}),o.jsx(ko,{currentImage:n.headerImage,onImageChange:a=>s(l=>({...l,headerImage:a})),type:"header"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Profile Picture"}),o.jsx(ko,{currentImage:n.avatar,onImageChange:a=>s(l=>({...l,avatar:a})),type:"avatar",className:"w-32"})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Display Name"}),o.jsx("input",{type:"text",value:n.displayName,onChange:a=>s(l=>({...l,displayName:a.target.value})),className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white focus:border-purple-500 focus:outline-none",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Bio"}),o.jsx("textarea",{value:n.bio,onChange:a=>s(l=>({...l,bio:a.target.value})),rows:3,className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white focus:border-purple-500 focus:outline-none resize-none",placeholder:"Tell us about yourself..."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Writer's Tag"}),o.jsx("input",{type:"text",value:n.writersTag,onChange:a=>s(l=>({...l,writersTag:a.target.value})),className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white focus:border-purple-500 focus:outline-none",placeholder:"e.g., fantasy, scifi, modern",required:!0})]})]}),o.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-700/50",children:[o.jsx("button",{type:"button",onClick:e,className:"px-6 py-2 text-gray-400 hover:text-white transition-colors",children:"Cancel"}),o.jsx("button",{type:"submit",className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white font-semibold px-6 py-2 rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all duration-200",children:"Save Changes"})]})]})]})})},j5=()=>{const{user:e,updateUser:t}=Pe(),{characters:r,posts:n,getUserFollowers:s,getUserFollowing:i,likePost:a,repostPost:l,pinPost:c,unpinPost:u}=Ze(),[d,h]=N.useState("posts"),[f,p]=N.useState(!1),[g,y]=N.useState(!1),[w,v]=N.useState([]),[x,m]=N.useState([]),[b,j]=N.useState(0),[_,k]=N.useState(0),E=n.filter(V=>V.userId===(e==null?void 0:e.id)),D=r.filter(V=>V.userId===(e==null?void 0:e.id)),S=E.sort((V,I)=>V.isPinned&&!I.isPinned?-1:!V.isPinned&&I.isPinned?1:I.timestamp.getTime()-V.timestamp.getTime());N.useEffect(()=>{e&&(d==="followers"?A():d==="following"&&B())},[d,e]),N.useEffect(()=>{if(!e)return;const V=setInterval(()=>{P()},1e3);return()=>clearInterval(V)},[e]);const P=async()=>{if(e){const V=await s(e.id),I=await i(e.id);j(V.length),k(I.length)}},A=async()=>{if(e){const V=await s(e.id);v(V),j(V.length)}},B=async()=>{if(e){const V=await i(e.id);m(V),k(V.length)}},H=V=>{a(V)},G=V=>{l(V)},M=V=>{const I=E.find(W=>W.id===V);I!=null&&I.isPinned?u(V):c(V)};return e?o.jsxs("div",{className:"min-h-screen bg-black/10 backdrop-blur-sm",children:[o.jsxs("div",{className:"relative",children:[o.jsxs("div",{className:"h-48 relative",children:[o.jsx("img",{src:e.headerImage,alt:"Profile header",className:"w-full h-full object-cover"}),o.jsx("button",{onClick:()=>y(!0),className:"absolute top-4 right-4 p-2 bg-black/50 hover:bg-black/70 rounded-full transition-colors",children:o.jsx(jv,{className:"w-5 h-5 text-white"})})]}),o.jsxs("div",{className:"relative px-6 pb-6",children:[o.jsxs("div",{className:"flex items-end justify-between -mt-16 mb-4",children:[o.jsx("img",{src:e.avatar,alt:e.displayName,className:"w-32 h-32 rounded-full object-cover ring-4 ring-gray-900 bg-gray-900 relative z-10"}),o.jsxs("button",{onClick:()=>y(!0),className:"flex items-center space-x-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 rounded-full transition-colors text-white",children:[o.jsx(Cd,{className:"w-4 h-4"}),o.jsx("span",{children:"Edit Profile"})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-white",children:e.displayName}),o.jsxs("p",{className:"text-gray-400",children:["@",e.username]}),e.role==="admin"&&o.jsx("p",{className:"text-red-400 text-sm font-medium",children:"Administrator"})]}),o.jsx("p",{className:"text-gray-300",children:e.bio}),o.jsxs("div",{className:"flex items-center space-x-4 text-gray-400 text-sm",children:[o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx(ol,{className:"w-4 h-4"}),o.jsxs("span",{children:["Joined ",e.createdAt.toLocaleDateString()]})]}),o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx("span",{className:"w-2 h-2 bg-purple-500 rounded-full"}),o.jsxs("span",{children:["#",e.writersTag]})]})]}),o.jsxs("div",{className:"flex items-center space-x-6 text-sm",children:[o.jsxs("button",{onClick:()=>h("following"),className:"hover:text-white transition-colors",children:[o.jsx("span",{className:"font-bold text-white",children:_}),o.jsx("span",{className:"text-gray-400 ml-1",children:"Following"})]}),o.jsxs("button",{onClick:()=>h("followers"),className:"hover:text-white transition-colors",children:[o.jsx("span",{className:"font-bold text-white",children:b}),o.jsx("span",{className:"text-gray-400 ml-1",children:"Followers"})]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-bold text-white",children:D.length}),o.jsx("span",{className:"text-gray-400 ml-1",children:"Characters"})]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-bold text-white",children:E.length}),o.jsx("span",{className:"text-gray-400 ml-1",children:"Posts"})]})]})]})]})]}),o.jsx("div",{className:"border-b border-gray-700/50 bg-black/20 sticky top-0 z-10",children:o.jsx("div",{className:"flex",children:[{key:"posts",label:"Posts",count:E.length},{key:"characters",label:"Characters",count:D.length},{key:"followers",label:"Followers",count:b},{key:"following",label:"Following",count:_}].map(V=>o.jsxs("button",{onClick:()=>h(V.key),className:`flex-1 px-4 py-4 text-center transition-colors relative ${d===V.key?"text-purple-400 border-b-2 border-purple-400":"text-gray-400 hover:text-white"}`,children:[o.jsx("span",{className:"font-medium",children:V.label}),V.count>0&&o.jsx("span",{className:"ml-2 text-xs bg-gray-700 px-2 py-1 rounded-full",children:V.count})]},V.key))})}),o.jsxs("div",{className:"p-6",children:[d==="posts"&&o.jsx("div",{className:"space-y-4",children:S.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx("p",{className:"text-gray-400 mb-4",children:"No posts yet"}),o.jsx("button",{className:"bg-purple-600 hover:bg-purple-700 text-white px-6 py-2 rounded-full transition-colors",children:"Create your first post"})]}):S.map(V=>o.jsxs("div",{className:"relative",children:[V.isPinned&&o.jsxs("div",{className:"flex items-center space-x-2 text-purple-400 text-sm mb-2",children:[o.jsx(Pv,{className:"w-4 h-4"}),o.jsx("span",{children:"Pinned Post"})]}),o.jsx(Ts,{post:V,onLike:()=>H(V.id),onRepost:()=>G(V.id),showPinOption:!0,onPin:()=>M(V.id)})]},V.id))}),d==="characters"&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:"text-lg font-bold text-white",children:"Your Characters"}),o.jsxs("button",{onClick:()=>p(!0),className:"flex items-center space-x-2 bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-full transition-colors",children:[o.jsx(ll,{className:"w-4 h-4"}),o.jsx("span",{children:"New Character"})]})]}),D.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx("p",{className:"text-gray-400 mb-4",children:"No characters created yet"}),o.jsx("button",{onClick:()=>p(!0),className:"bg-purple-600 hover:bg-purple-700 text-white px-6 py-2 rounded-full transition-colors",children:"Create your first character"})]}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:D.map(V=>o.jsx(ui,{character:V},V.id))})]}),d==="followers"&&o.jsx("div",{className:"space-y-4",children:w.length===0?o.jsx("div",{className:"text-center py-12",children:o.jsx("p",{className:"text-gray-400",children:"No followers yet"})}):w.map(V=>o.jsxs("div",{className:"flex items-center space-x-4 p-4 bg-gray-800/30 rounded-lg hover:bg-gray-700/30 transition-colors cursor-pointer",children:[o.jsx("img",{src:V.avatar,alt:V.displayName,className:"w-12 h-12 rounded-full object-cover"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-white font-medium",children:V.displayName}),o.jsxs("p",{className:"text-gray-400 text-sm",children:["@",V.username]}),o.jsxs("p",{className:"text-purple-300 text-sm",children:["#",V.writersTag]})]})]},V.id))}),d==="following"&&o.jsx("div",{className:"space-y-4",children:x.length===0?o.jsx("div",{className:"text-center py-12",children:o.jsx("p",{className:"text-gray-400",children:"Not following anyone yet"})}):x.map(V=>o.jsxs("div",{className:"flex items-center space-x-4 p-4 bg-gray-800/30 rounded-lg hover:bg-gray-700/30 transition-colors cursor-pointer",children:[o.jsx("img",{src:V.avatar,alt:V.displayName,className:"w-12 h-12 rounded-full object-cover"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-white font-medium",children:V.displayName}),o.jsxs("p",{className:"text-gray-400 text-sm",children:["@",V.username]}),o.jsxs("p",{className:"text-purple-300 text-sm",children:["#",V.writersTag]})]})]},V.id))})]}),f&&o.jsx(w5,{onClose:()=>p(!1)}),g&&o.jsx(b5,{onClose:()=>y(!1)})]}):null},C5=()=>{const{user:e,updateUser:t,enableTwoFactor:r,changePassword:n}=Pe(),[s,i]=N.useState("privacy"),[a,l]=N.useState({currentPassword:"",newPassword:"",confirmPassword:"",email:(e==null?void 0:e.email)||"",otpCode:"",username:(e==null?void 0:e.username)||""}),[c,u]=N.useState(!1),[d,h]=N.useState(""),f=[{key:"privacy",label:"Privacy & Safety",icon:ns},{key:"account",label:"Account",icon:kd},{key:"security",label:"Security",icon:Co},{key:"notifications",label:"Notifications",icon:bo}],p=async v=>{if(v.preventDefault(),a.newPassword!==a.confirmPassword){h("Passwords do not match");return}u(!0),h("");try{await n(a.currentPassword,a.newPassword),h("Password changed successfully"),l(x=>({...x,currentPassword:"",newPassword:"",confirmPassword:""}))}catch(x){h(x.message||"Failed to change password")}finally{u(!1)}},g=async()=>{if(!a.username.trim()){h("Username cannot be empty");return}u(!0),h("");try{await t({username:a.username}),h("Username updated successfully")}catch(v){h(v.message||"Failed to update username")}finally{u(!1)}},y=async()=>{a.email&&await r(a.email)},w=(v,x)=>{e&&t({privacySettings:{...e.privacySettings,[v]:x}})};return o.jsxs("div",{className:"min-h-screen bg-black/10 backdrop-blur-sm",children:[o.jsxs("div",{className:"sticky top-0 bg-black/80 backdrop-blur-md border-b border-gray-700/50 p-4 z-10",children:[o.jsx("h2",{className:"text-xl font-bold text-white",children:"Settings"}),o.jsx("p",{className:"text-gray-400 text-sm",children:"Manage your account and privacy preferences"})]}),o.jsxs("div",{className:"flex flex-col lg:flex-row min-h-0",children:[o.jsx("div",{className:"w-full lg:w-64 border-b lg:border-r lg:border-b-0 border-gray-700/50 bg-black/20 p-4",children:o.jsx("nav",{className:"space-y-2",children:f.map(v=>o.jsxs("button",{onClick:()=>i(v.key),className:`w-full flex items-center space-x-3 px-4 py-3 rounded-xl transition-colors ${s===v.key?"bg-purple-600/20 text-purple-300 border border-purple-500/30":"text-gray-300 hover:bg-gray-800/50 hover:text-white"}`,children:[o.jsx(v.icon,{className:"w-5 h-5"}),o.jsx("span",{children:v.label})]},v.key))})}),o.jsxs("div",{className:"flex-1 p-4 lg:p-6 overflow-y-auto",children:[d&&o.jsx("div",{className:`mb-4 p-3 rounded-lg ${d.includes("successfully")?"bg-green-900/20 border border-green-500/30 text-green-400":"bg-red-900/20 border border-red-500/30 text-red-400"}`,children:d}),s==="privacy"&&o.jsxs("div",{className:"space-y-6 max-w-2xl",children:[o.jsxs("div",{className:"bg-gray-800/50 rounded-2xl p-6 border border-gray-700/50",children:[o.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center space-x-2",children:[o.jsx(bd,{className:"w-5 h-5 text-purple-400"}),o.jsx("span",{children:"Profile Visibility"})]}),o.jsx("div",{className:"space-y-4",children:[{value:"public",label:"Public",desc:"Anyone can see your profile"},{value:"followers",label:"Followers Only",desc:"Only your followers can see your profile"},{value:"private",label:"Private",desc:"Only you can see your profile"}].map(v=>o.jsxs("label",{className:"flex items-start space-x-3 cursor-pointer",children:[o.jsx("input",{type:"radio",name:"profileVisibility",value:v.value,checked:(e==null?void 0:e.privacySettings.profileVisibility)===v.value,onChange:x=>w("profileVisibility",x.target.value),className:"text-purple-600 focus:ring-purple-500 mt-1"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-white font-medium",children:v.label}),o.jsx("p",{className:"text-gray-400 text-sm",children:v.desc})]})]},v.value))})]}),o.jsxs("div",{className:"bg-gray-800/50 rounded-2xl p-6 border border-gray-700/50",children:[o.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Message Permissions"}),o.jsx("div",{className:"space-y-4",children:[{value:"everyone",label:"Everyone",desc:"Anyone can send you messages"},{value:"followers",label:"Followers Only",desc:"Only your followers can message you"},{value:"none",label:"No One",desc:"Disable direct messages"}].map(v=>o.jsxs("label",{className:"flex items-start space-x-3 cursor-pointer",children:[o.jsx("input",{type:"radio",name:"messagePermissions",value:v.value,checked:(e==null?void 0:e.privacySettings.messagePermissions)===v.value,onChange:x=>w("messagePermissions",x.target.value),className:"text-purple-600 focus:ring-purple-500 mt-1"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-white font-medium",children:v.label}),o.jsx("p",{className:"text-gray-400 text-sm",children:v.desc})]})]},v.value))})]})]}),s==="account"&&o.jsx("div",{className:"space-y-6 max-w-2xl",children:o.jsxs("div",{className:"bg-gray-800/50 rounded-2xl p-6 border border-gray-700/50",children:[o.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Account Information"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Username"}),o.jsxs("div",{className:"flex space-x-3",children:[o.jsx("input",{type:"text",value:a.username,onChange:v=>l(x=>({...x,username:v.target.value})),className:"flex-1 bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white focus:border-purple-500 focus:outline-none"}),o.jsx("button",{onClick:g,disabled:c||a.username===(e==null?void 0:e.username),className:"bg-purple-600 hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed text-white font-semibold px-4 py-2 rounded-lg transition-colors",children:"Update"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Display Name"}),o.jsx("input",{type:"text",value:e==null?void 0:e.displayName,onChange:v=>t({displayName:v.target.value}),className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white focus:border-purple-500 focus:outline-none"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Writer's Tag"}),o.jsx("input",{type:"text",value:e==null?void 0:e.writersTag,onChange:v=>t({writersTag:v.target.value}),className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white focus:border-purple-500 focus:outline-none"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Bio"}),o.jsx("textarea",{value:e==null?void 0:e.bio,onChange:v=>t({bio:v.target.value}),rows:3,className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white focus:border-purple-500 focus:outline-none resize-none"})]})]})]})}),s==="security"&&o.jsxs("div",{className:"space-y-6 max-w-2xl",children:[o.jsxs("div",{className:"bg-gray-800/50 rounded-2xl p-6 border border-gray-700/50",children:[o.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center space-x-2",children:[o.jsx(Ha,{className:"w-5 h-5 text-purple-400"}),o.jsx("span",{children:"Change Password"})]}),o.jsxs("form",{onSubmit:p,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Current Password"}),o.jsx("input",{type:"password",value:a.currentPassword,onChange:v=>l(x=>({...x,currentPassword:v.target.value})),className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white focus:border-purple-500 focus:outline-none",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"New Password"}),o.jsx("input",{type:"password",value:a.newPassword,onChange:v=>l(x=>({...x,newPassword:v.target.value})),className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white focus:border-purple-500 focus:outline-none",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Confirm New Password"}),o.jsx("input",{type:"password",value:a.confirmPassword,onChange:v=>l(x=>({...x,confirmPassword:v.target.value})),className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white focus:border-purple-500 focus:outline-none",required:!0})]}),o.jsx("button",{type:"submit",disabled:c,className:"bg-purple-600 hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed text-white font-semibold px-6 py-2 rounded-lg transition-colors",children:c?"Updating...":"Update Password"})]})]}),o.jsxs("div",{className:"bg-gray-800/50 rounded-2xl p-6 border border-gray-700/50",children:[o.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center space-x-2",children:[o.jsx(RC,{className:"w-5 h-5 text-purple-400"}),o.jsx("span",{children:"Two-Factor Authentication"})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-white font-medium",children:"2FA Status"}),o.jsx("p",{className:"text-gray-400 text-sm",children:e!=null&&e.twoFactorEnabled?"Enabled":"Disabled"})]}),o.jsx("div",{className:`w-4 h-4 rounded-full ${e!=null&&e.twoFactorEnabled?"bg-green-500":"bg-red-500"}`})]}),!(e!=null&&e.twoFactorEnabled)&&o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email for 2FA"}),o.jsx("input",{type:"email",value:a.email,onChange:v=>l(x=>({...x,email:v.target.value})),className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white focus:border-purple-500 focus:outline-none",placeholder:"your@email.com"})]}),o.jsx("button",{onClick:y,className:"bg-green-600 hover:bg-green-700 text-white font-semibold px-6 py-2 rounded-lg transition-colors",children:"Enable 2FA"})]})]})]})]}),s==="notifications"&&o.jsx("div",{className:"space-y-6 max-w-2xl",children:o.jsxs("div",{className:"bg-gray-800/50 rounded-2xl p-6 border border-gray-700/50",children:[o.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Notification Preferences"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-white font-medium",children:"Tag Notifications"}),o.jsx("p",{className:"text-gray-400 text-sm",children:"Get notified when someone mentions you"})]}),o.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:e==null?void 0:e.privacySettings.tagNotifications,onChange:v=>w("tagNotifications",v.target.checked),className:"sr-only peer"}),o.jsx("div",{className:"w-11 h-6 bg-gray-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"})]})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-white font-medium",children:"Direct Message Notifications"}),o.jsx("p",{className:"text-gray-400 text-sm",children:"Get notified about new messages"})]}),o.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:e==null?void 0:e.privacySettings.directMessageNotifications,onChange:v=>w("directMessageNotifications",v.target.checked),className:"sr-only peer"}),o.jsx("div",{className:"w-11 h-6 bg-gray-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"})]})]})]})]})})]})]})]})},_5=()=>{const{user:e}=Pe(),{getAllUsersAdmin:t,deleteUserAdmin:r,resetPasswordAdmin:n,updateUserRoleAdmin:s}=Ze(),[i,a]=N.useState([]),[l,c]=N.useState(!0),[u,d]=N.useState("");N.useState(null);const[h,f]=N.useState(null),[p,g]=N.useState(null),[y,w]=N.useState(null),[v,x]=N.useState(""),[m,b]=N.useState(!1),[j,_]=N.useState("");N.useEffect(()=>{(e==null?void 0:e.role)==="admin"&&k()},[e]);const k=async()=>{try{c(!0);const A=await t();a(A)}catch(A){console.error("Error loading users:",A),_("Failed to load users")}finally{c(!1)}},E=async A=>{if(A===(e==null?void 0:e.id)){_("Cannot delete your own account");return}b(!0);try{await r(A),_("User deleted successfully"),f(null),k()}catch(B){_(B.message||"Failed to delete user")}finally{b(!1)}},D=async A=>{if(!v.trim()){_("Please enter a new password");return}b(!0);try{await n(A,v),_("Password reset successfully"),g(null),x("")}catch(B){_(B.message||"Failed to reset password")}finally{b(!1)}},S=async(A,B)=>{if(A===(e==null?void 0:e.id)){_("Cannot change your own role");return}b(!0);try{await s(A,B),_(`User role updated to ${B} successfully`),w(null),k()}catch(H){_(H.message||"Failed to update user role")}finally{b(!1)}},P=i.filter(A=>{var B;return A.username.toLowerCase().includes(u.toLowerCase())||A.displayName.toLowerCase().includes(u.toLowerCase())||((B=A.email)==null?void 0:B.toLowerCase().includes(u.toLowerCase()))});return!e||e.role!=="admin"?o.jsx("div",{className:"min-h-screen bg-black/10 backdrop-blur-sm flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx(ns,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),o.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Access Denied"}),o.jsx("p",{className:"text-gray-400",children:"You don't have permission to access this page."})]})}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"min-h-screen bg-black/10 backdrop-blur-sm",children:[o.jsx("div",{className:"sticky top-0 bg-black/80 backdrop-blur-md border-b border-gray-700/50 p-4 z-10",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsxs("h2",{className:"text-xl font-bold text-white flex items-center space-x-2",children:[o.jsx(ns,{className:"w-6 h-6 text-red-500"}),o.jsx("span",{children:"Admin Panel"})]}),o.jsx("p",{className:"text-gray-400 text-sm",children:"Manage users and system settings"})]}),o.jsxs("button",{onClick:k,disabled:l,className:"flex items-center space-x-2 bg-purple-600 hover:bg-purple-700 disabled:opacity-50 text-white px-4 py-2 rounded-lg transition-colors",children:[o.jsx(BC,{className:`w-4 h-4 ${l?"animate-spin":""}`}),o.jsx("span",{children:"Refresh"})]})]})}),o.jsxs("div",{className:"p-6",children:[j&&o.jsx("div",{className:`mb-4 p-3 rounded-lg ${j.includes("successfully")?"bg-green-900/20 border border-green-500/30 text-green-400":"bg-red-900/20 border border-red-500/30 text-red-400"}`,children:j}),o.jsxs("div",{className:"mb-6 space-y-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx(Kr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),o.jsx("input",{type:"text",value:u,onChange:A=>d(A.target.value),placeholder:"Search users by username, display name, or email...",className:"w-full bg-gray-800 border border-gray-600 rounded-lg pl-10 pr-4 py-3 text-white focus:border-purple-500 focus:outline-none"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[o.jsx("div",{className:"bg-gray-800/50 rounded-lg p-4 border border-gray-700/50",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(fr,{className:"w-8 h-8 text-blue-400"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-2xl font-bold text-white",children:i.length}),o.jsx("p",{className:"text-gray-400 text-sm",children:"Total Users"})]})]})}),o.jsx("div",{className:"bg-gray-800/50 rounded-lg p-4 border border-gray-700/50",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(ns,{className:"w-8 h-8 text-red-400"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-2xl font-bold text-white",children:i.filter(A=>A.role==="admin").length}),o.jsx("p",{className:"text-gray-400 text-sm",children:"Admins"})]})]})}),o.jsx("div",{className:"bg-gray-800/50 rounded-lg p-4 border border-gray-700/50",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(fr,{className:"w-8 h-8 text-green-400"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-2xl font-bold text-white",children:i.filter(A=>A.role==="user").length}),o.jsx("p",{className:"text-gray-400 text-sm",children:"Regular Users"})]})]})}),o.jsx("div",{className:"bg-gray-800/50 rounded-lg p-4 border border-gray-700/50",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(Ha,{className:"w-8 h-8 text-yellow-400"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-2xl font-bold text-white",children:i.filter(A=>A.twoFactorEnabled).length}),o.jsx("p",{className:"text-gray-400 text-sm",children:"2FA Enabled"})]})]})})]})]}),o.jsxs("div",{className:"bg-gray-800/50 rounded-2xl border border-gray-700/50 overflow-hidden",children:[o.jsx("div",{className:"p-4 border-b border-gray-700/50",children:o.jsx("h3",{className:"text-lg font-bold text-white",children:"User Management"})}),l?o.jsxs("div",{className:"p-8 text-center",children:[o.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-purple-500 border-t-transparent rounded-full mx-auto mb-4"}),o.jsx("p",{className:"text-gray-400",children:"Loading users..."})]}):o.jsxs("div",{className:"overflow-x-auto",children:[o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-gray-900/50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"text-left p-4 text-gray-300 font-medium",children:"User"}),o.jsx("th",{className:"text-left p-4 text-gray-300 font-medium",children:"Email"}),o.jsx("th",{className:"text-left p-4 text-gray-300 font-medium",children:"Role"}),o.jsx("th",{className:"text-left p-4 text-gray-300 font-medium",children:"2FA"}),o.jsx("th",{className:"text-left p-4 text-gray-300 font-medium",children:"Joined"}),o.jsx("th",{className:"text-left p-4 text-gray-300 font-medium",children:"Actions"})]})}),o.jsx("tbody",{className:"divide-y divide-gray-700/30",children:P.map(A=>o.jsxs("tr",{className:"hover:bg-gray-700/20 transition-colors",children:[o.jsx("td",{className:"p-4",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("img",{src:A.avatar,alt:A.displayName,className:"w-10 h-10 rounded-full object-cover"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-white font-medium",children:A.displayName}),o.jsxs("p",{className:"text-gray-400 text-sm",children:["@",A.username]})]})]})}),o.jsx("td",{className:"p-4 text-gray-300",children:A.email||"N/A"}),o.jsx("td",{className:"p-4",children:o.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${A.role==="admin"?"bg-red-900/30 text-red-400 border border-red-500/30":"bg-gray-700/50 text-gray-300"}`,children:A.role||"user"})}),o.jsx("td",{className:"p-4",children:o.jsx("div",{className:`w-3 h-3 rounded-full ${A.twoFactorEnabled?"bg-green-500":"bg-red-500"}`})}),o.jsx("td",{className:"p-4 text-gray-300 text-sm",children:A.createdAt.toLocaleDateString()}),o.jsx("td",{className:"p-4",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("button",{onClick:()=>w(A.id),disabled:A.id===e.id,className:"p-2 text-purple-400 hover:bg-purple-400/10 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Change Role",children:o.jsx(hp,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>g(A.id),disabled:A.id===e.id,className:"p-2 text-yellow-400 hover:bg-yellow-400/10 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Reset Password",children:o.jsx(Ha,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>f(A.id),disabled:A.id===e.id,className:"p-2 text-red-400 hover:bg-red-400/10 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Delete User",children:o.jsx(Yi,{className:"w-4 h-4"})})]})})]},A.id))})]}),P.length===0&&o.jsxs("div",{className:"p-8 text-center",children:[o.jsx(fr,{className:"w-12 h-12 text-gray-600 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-400",children:"No users found"})]})]})]})]})]}),y&&o.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-gray-900 rounded-2xl border border-gray-700/50 p-6 mx-4 max-w-md w-full",children:[o.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[o.jsx(hp,{className:"w-8 h-8 text-purple-500"}),o.jsx("h3",{className:"text-lg font-bold text-white",children:"Change User Role"})]}),o.jsx("p",{className:"text-gray-300 mb-6",children:"Select the new role for this user. Admin users have full access to the admin panel and can manage other users."}),o.jsxs("div",{className:"space-y-3 mb-6",children:[o.jsxs("button",{onClick:()=>S(y,"user"),disabled:m,className:"w-full flex items-center space-x-3 p-3 bg-gray-800 hover:bg-gray-700 rounded-lg transition-colors text-left",children:[o.jsx(kd,{className:"w-5 h-5 text-gray-400"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-white font-medium",children:"Regular User"}),o.jsx("p",{className:"text-gray-400 text-sm",children:"Standard user access"})]})]}),o.jsxs("button",{onClick:()=>S(y,"admin"),disabled:m,className:"w-full flex items-center space-x-3 p-3 bg-red-900/20 hover:bg-red-900/30 border border-red-500/30 rounded-lg transition-colors text-left",children:[o.jsx(ns,{className:"w-5 h-5 text-red-400"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-white font-medium",children:"Administrator"}),o.jsx("p",{className:"text-gray-400 text-sm",children:"Full admin access"})]})]})]}),o.jsx("div",{className:"flex space-x-3",children:o.jsx("button",{onClick:()=>w(null),disabled:m,className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white font-semibold py-2 rounded-lg transition-colors",children:"Cancel"})})]})}),h&&o.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-gray-900 rounded-2xl border border-gray-700/50 p-6 mx-4 max-w-md w-full",children:[o.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[o.jsx(jC,{className:"w-8 h-8 text-red-500"}),o.jsx("h3",{className:"text-lg font-bold text-white",children:"Delete User"})]}),o.jsx("p",{className:"text-gray-300 mb-6",children:"Are you sure you want to delete this user? This action cannot be undone and will remove all their data."}),o.jsxs("div",{className:"flex space-x-3",children:[o.jsx("button",{onClick:()=>E(h),disabled:m,className:"flex-1 bg-red-600 hover:bg-red-700 disabled:opacity-50 text-white font-semibold py-2 rounded-lg transition-colors",children:m?"Deleting...":"Delete User"}),o.jsx("button",{onClick:()=>f(null),disabled:m,className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white font-semibold py-2 rounded-lg transition-colors",children:"Cancel"})]})]})}),p&&o.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-gray-900 rounded-2xl border border-gray-700/50 p-6 mx-4 max-w-md w-full",children:[o.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[o.jsx(Ha,{className:"w-8 h-8 text-yellow-500"}),o.jsx("h3",{className:"text-lg font-bold text-white",children:"Reset Password"})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"New Password"}),o.jsx("input",{type:"password",value:v,onChange:A=>x(A.target.value),className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white focus:border-purple-500 focus:outline-none",placeholder:"Enter new password"})]}),o.jsxs("div",{className:"flex space-x-3",children:[o.jsx("button",{onClick:()=>D(p),disabled:m||!v.trim(),className:"flex-1 bg-yellow-600 hover:bg-yellow-700 disabled:opacity-50 text-white font-semibold py-2 rounded-lg transition-colors",children:m?"Resetting...":"Reset Password"}),o.jsx("button",{onClick:()=>{g(null),x("")},disabled:m,className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white font-semibold py-2 rounded-lg transition-colors",children:"Cancel"})]})]})]})})]})},k5=({unreadNotifications:e,isOpen:t=!0,onToggle:r,hideOnMobile:n=!1})=>{const s=Zo(),i=Ds(),{user:a,logout:l}=Pe(),{unreadMessages:c}=Ze(),u=[{icon:AC,label:"Home",path:"/"},{icon:Kr,label:"Explore",path:"/explore"},{icon:bo,label:"Notifications",path:"/notifications",badge:e},{icon:PC,label:"Messages",path:"/messages",badge:c},{icon:jo,label:"Bookmarks",path:"/bookmarks"},{icon:kd,label:"Profile",path:"/profile"},{icon:FC,label:"Settings",path:"/settings"},...(a==null?void 0:a.role)==="admin"?[{icon:ns,label:"Admin",path:"/admin"}]:[]],d=()=>{l()};return o.jsxs(o.Fragment,{children:[!n&&o.jsx("button",{onClick:r,className:"md:hidden fixed top-4 left-4 z-50 p-2 bg-gray-900 rounded-full border border-gray-700",children:t?o.jsx(nt,{className:"w-6 h-6 text-white"}):o.jsx(Sv,{className:"w-6 h-6 text-white"})}),o.jsxs("div",{className:`
        fixed md:sticky top-0 left-0 h-screen bg-black/20 backdrop-blur-sm border-r border-gray-700/50 z-40
        transition-transform duration-300 ease-in-out
        ${t?"translate-x-0":"-translate-x-full"}
        md:translate-x-0 w-64 md:w-64
      `,children:[o.jsxs("div",{className:"p-6 space-y-8",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg flex items-center justify-center",children:o.jsx(jd,{className:"w-5 h-5 text-white"})}),o.jsx("h1",{className:"text-xl font-bold text-white",children:"VERSE"})]}),o.jsx("nav",{className:"space-y-2",children:u.map(h=>o.jsxs("button",{onClick:()=>{s(h.path),r&&window.innerWidth<768&&r()},className:`w-full flex items-center space-x-4 px-4 py-3 rounded-xl transition-all duration-200 relative ${i.pathname===h.path?"bg-purple-600/20 text-purple-300 border border-purple-500/30":"text-gray-300 hover:bg-gray-800/50 hover:text-white"}`,children:[o.jsx(h.icon,{className:"w-6 h-6"}),o.jsx("span",{className:"font-medium",children:h.label}),h.badge&&h.badge>0&&o.jsx("span",{className:"absolute right-3 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:h.badge>99?"99+":h.badge}),h.label==="Admin"&&o.jsx("span",{className:"absolute right-3 bg-red-500 text-white text-xs rounded-full px-2 py-1",children:"ADMIN"})]},h.label))}),o.jsxs("button",{onClick:()=>{s("/"),r&&window.innerWidth<768&&r()},className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white font-semibold py-4 rounded-xl hover:from-purple-700 hover:to-pink-700 transition-all duration-200 flex items-center justify-center space-x-2 shadow-lg hover:shadow-purple-500/25",children:[o.jsx(ll,{className:"w-5 h-5"}),o.jsx("span",{children:"Create Post"})]}),o.jsx("div",{className:"pt-8 border-t border-gray-700/50",children:o.jsxs("div",{className:"flex items-center space-x-3 p-3 rounded-xl hover:bg-gray-800/50 transition-colors cursor-pointer group",children:[o.jsx("img",{src:a==null?void 0:a.avatar,alt:a==null?void 0:a.displayName,className:"w-12 h-12 rounded-full object-cover ring-2 ring-purple-500/30"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-white font-medium truncate",children:a==null?void 0:a.displayName}),o.jsxs("p",{className:"text-gray-400 text-sm truncate",children:["@",a==null?void 0:a.username]}),(a==null?void 0:a.role)==="admin"&&o.jsx("p",{className:"text-red-400 text-xs",children:"Administrator"})]}),o.jsx("button",{onClick:d,className:"opacity-0 group-hover:opacity-100 text-gray-400 hover:text-red-400 transition-all duration-200 text-sm",children:"Logout"})]})})]}),o.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 text-center border-t border-gray-700/50 bg-black/20",children:o.jsxs("p",{className:"text-gray-500 text-xs",children:["Verse © ",new Date().getFullYear()," - UNWYRE TECH AND CONSULTING"]})})]}),t&&!n&&o.jsx("div",{className:"md:hidden fixed inset-0 bg-black/50 z-30",onClick:r})]})},E5=({children:e})=>{const{unreadNotifications:t}=Ze(),[r,n]=N.useState(!1);return Ds().pathname,o.jsxs("div",{className:"max-w-7xl mx-auto flex min-h-screen",children:[o.jsx(k5,{unreadNotifications:t,isOpen:r,onToggle:()=>n(!r),hideOnMobile:!1}),o.jsx("main",{className:"flex-1 max-w-2xl border-x border-gray-700/50 md:ml-0",children:e}),o.jsx("div",{className:"hidden lg:block w-80 h-screen sticky top-0 p-6 bg-black/20 backdrop-blur-sm"})]})},N5=()=>{const{isAuthenticated:e,loading:t,user:r}=Pe(),n=Zo(),s=Ds();return N.useEffect(()=>{t||(e?e&&s.pathname==="/login"&&n("/",{replace:!0}):s.pathname!=="/login"&&n("/login",{replace:!0}))},[e,t,n,s.pathname]),t?o.jsx(Tv,{}):e?o.jsx(E5,{children:o.jsxs(uf,{children:[o.jsx(_t,{path:"/login",element:o.jsx(Gl,{to:"/",replace:!0})}),o.jsx(_t,{path:"/",element:o.jsx(zC,{})}),o.jsx(_t,{path:"/explore",element:o.jsx(HC,{})}),o.jsx(_t,{path:"/notifications",element:o.jsx(g5,{})}),o.jsx(_t,{path:"/messages",element:o.jsx(v5,{})}),o.jsx(_t,{path:"/bookmarks",element:o.jsx(y5,{})}),o.jsx(_t,{path:"/profile",element:o.jsx(j5,{})}),o.jsx(_t,{path:"/settings",element:o.jsx(C5,{})}),(r==null?void 0:r.role)==="admin"&&o.jsx(_t,{path:"/admin",element:o.jsx(_5,{})}),o.jsx(_t,{path:"*",element:o.jsx(Gl,{to:"/",replace:!0})})]})}):o.jsxs(uf,{children:[o.jsx(_t,{path:"/login",element:o.jsx(IC,{})}),o.jsx(_t,{path:"*",element:o.jsx(Gl,{to:"/login",replace:!0})})]})};function S5(){return o.jsx(vC,{children:o.jsx(yC,{children:o.jsx(_b,{children:o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900",children:o.jsx(N5,{})})})})})}Rg(document.getElementById("root")).render(o.jsx(N.StrictMode,{children:o.jsx(S5,{})}));
