function i1(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var J=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function a1(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function px(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return e[n]}})}),r}var xx={exports:{}},Co={},mx={exports:{}},oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Di=Symbol.for("react.element"),o1=Symbol.for("react.portal"),l1=Symbol.for("react.fragment"),c1=Symbol.for("react.strict_mode"),u1=Symbol.for("react.profiler"),d1=Symbol.for("react.provider"),h1=Symbol.for("react.context"),f1=Symbol.for("react.forward_ref"),p1=Symbol.for("react.suspense"),x1=Symbol.for("react.memo"),m1=Symbol.for("react.lazy"),$d=Symbol.iterator;function g1(e){return e===null||typeof e!="object"?null:(e=$d&&e[$d]||e["@@iterator"],typeof e=="function"?e:null)}var gx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},vx=Object.assign,yx={};function ys(e,t,r){this.props=e,this.context=t,this.refs=yx,this.updater=r||gx}ys.prototype.isReactComponent={};ys.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ys.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function wx(){}wx.prototype=ys.prototype;function r0(e,t,r){this.props=e,this.context=t,this.refs=yx,this.updater=r||gx}var n0=r0.prototype=new wx;n0.constructor=r0;vx(n0,ys.prototype);n0.isPureReactComponent=!0;var zd=Array.isArray,bx=Object.prototype.hasOwnProperty,s0={current:null},jx={key:!0,ref:!0,__self:!0,__source:!0};function Cx(e,t,r){var n,s={},i=null,a=null;if(t!=null)for(n in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(i=""+t.key),t)bx.call(t,n)&&!jx.hasOwnProperty(n)&&(s[n]=t[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:Di,type:e,key:i,ref:a,props:s,_owner:s0.current}}function v1(e,t){return{$$typeof:Di,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function i0(e){return typeof e=="object"&&e!==null&&e.$$typeof===Di}function y1(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Vd=/\/+/g;function ol(e,t){return typeof e=="object"&&e!==null&&e.key!=null?y1(""+e.key):t.toString(36)}function wa(e,t,r,n,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Di:case o1:a=!0}}if(a)return a=e,s=s(a),e=n===""?"."+ol(a,0):n,zd(s)?(r="",e!=null&&(r=e.replace(Vd,"$&/")+"/"),wa(s,t,r,"",function(u){return u})):s!=null&&(i0(s)&&(s=v1(s,r+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Vd,"$&/")+"/")+e)),t.push(s)),1;if(a=0,n=n===""?".":n+":",zd(e))for(var l=0;l<e.length;l++){i=e[l];var c=n+ol(i,l);a+=wa(i,t,r,c,s)}else if(c=g1(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=n+ol(i,l++),a+=wa(i,t,r,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Gi(e,t,r){if(e==null)return e;var n=[],s=0;return wa(e,n,"","",function(i){return t.call(r,i,s++)}),n}function w1(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var it={current:null},ba={transition:null},b1={ReactCurrentDispatcher:it,ReactCurrentBatchConfig:ba,ReactCurrentOwner:s0};function kx(){throw Error("act(...) is not supported in production builds of React.")}oe.Children={map:Gi,forEach:function(e,t,r){Gi(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Gi(e,function(){t++}),t},toArray:function(e){return Gi(e,function(t){return t})||[]},only:function(e){if(!i0(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};oe.Component=ys;oe.Fragment=l1;oe.Profiler=u1;oe.PureComponent=r0;oe.StrictMode=c1;oe.Suspense=p1;oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=b1;oe.act=kx;oe.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=vx({},e.props),s=e.key,i=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,a=s0.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)bx.call(t,c)&&!jx.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:Di,type:e.type,key:s,ref:i,props:n,_owner:a}};oe.createContext=function(e){return e={$$typeof:h1,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:d1,_context:e},e.Consumer=e};oe.createElement=Cx;oe.createFactory=function(e){var t=Cx.bind(null,e);return t.type=e,t};oe.createRef=function(){return{current:null}};oe.forwardRef=function(e){return{$$typeof:f1,render:e}};oe.isValidElement=i0;oe.lazy=function(e){return{$$typeof:m1,_payload:{_status:-1,_result:e},_init:w1}};oe.memo=function(e,t){return{$$typeof:x1,type:e,compare:t===void 0?null:t}};oe.startTransition=function(e){var t=ba.transition;ba.transition={};try{e()}finally{ba.transition=t}};oe.unstable_act=kx;oe.useCallback=function(e,t){return it.current.useCallback(e,t)};oe.useContext=function(e){return it.current.useContext(e)};oe.useDebugValue=function(){};oe.useDeferredValue=function(e){return it.current.useDeferredValue(e)};oe.useEffect=function(e,t){return it.current.useEffect(e,t)};oe.useId=function(){return it.current.useId()};oe.useImperativeHandle=function(e,t,r){return it.current.useImperativeHandle(e,t,r)};oe.useInsertionEffect=function(e,t){return it.current.useInsertionEffect(e,t)};oe.useLayoutEffect=function(e,t){return it.current.useLayoutEffect(e,t)};oe.useMemo=function(e,t){return it.current.useMemo(e,t)};oe.useReducer=function(e,t,r){return it.current.useReducer(e,t,r)};oe.useRef=function(e){return it.current.useRef(e)};oe.useState=function(e){return it.current.useState(e)};oe.useSyncExternalStore=function(e,t,r){return it.current.useSyncExternalStore(e,t,r)};oe.useTransition=function(){return it.current.useTransition()};oe.version="18.3.1";mx.exports=oe;var N=mx.exports;const a0=a1(N),j1=i1({__proto__:null,default:a0},[N]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C1=N,k1=Symbol.for("react.element"),_1=Symbol.for("react.fragment"),E1=Object.prototype.hasOwnProperty,N1=C1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,S1={key:!0,ref:!0,__self:!0,__source:!0};function _x(e,t,r){var n,s={},i=null,a=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(a=t.ref);for(n in t)E1.call(t,n)&&!S1.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:k1,type:e,key:i,ref:a,props:s,_owner:N1.current}}Co.Fragment=_1;Co.jsx=_x;Co.jsxs=_x;xx.exports=Co;var o=xx.exports,Ex={exports:{}},Ct={},Nx={exports:{}},Sx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(R,T){var z=R.length;R.push(T);e:for(;0<z;){var E=z-1>>>1,F=R[E];if(0<s(F,T))R[E]=T,R[z]=F,z=E;else break e}}function r(R){return R.length===0?null:R[0]}function n(R){if(R.length===0)return null;var T=R[0],z=R.pop();if(z!==T){R[0]=z;e:for(var E=0,F=R.length,I=F>>>1;E<I;){var O=2*(E+1)-1,Q=R[O],X=O+1,ce=R[X];if(0>s(Q,z))X<F&&0>s(ce,Q)?(R[E]=ce,R[X]=z,E=X):(R[E]=Q,R[O]=z,E=O);else if(X<F&&0>s(ce,z))R[E]=ce,R[X]=z,E=X;else break e}}return T}function s(R,T){var z=R.sortIndex-T.sortIndex;return z!==0?z:R.id-T.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,g=!1,y=!1,w=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m(R){for(var T=r(u);T!==null;){if(T.callback===null)n(u);else if(T.startTime<=R)n(u),T.sortIndex=T.expirationTime,t(c,T);else break;T=r(u)}}function b(R){if(y=!1,m(R),!g)if(r(c)!==null)g=!0,L(j);else{var T=r(u);T!==null&&U(b,T.startTime-R)}}function j(R,T){g=!1,y&&(y=!1,v(_),_=-1),p=!0;var z=f;try{for(m(T),h=r(c);h!==null&&(!(h.expirationTime>T)||R&&!B());){var E=h.callback;if(typeof E=="function"){h.callback=null,f=h.priorityLevel;var F=E(h.expirationTime<=T);T=e.unstable_now(),typeof F=="function"?h.callback=F:h===r(c)&&n(c),m(T)}else n(c);h=r(c)}if(h!==null)var I=!0;else{var O=r(u);O!==null&&U(b,O.startTime-T),I=!1}return I}finally{h=null,f=z,p=!1}}var k=!1,C=null,_=-1,P=5,S=-1;function B(){return!(e.unstable_now()-S<P)}function A(){if(C!==null){var R=e.unstable_now();S=R;var T=!0;try{T=C(!0,R)}finally{T?D():(k=!1,C=null)}}else k=!1}var D;if(typeof x=="function")D=function(){x(A)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,q=V.port2;V.port1.onmessage=A,D=function(){q.postMessage(null)}}else D=function(){w(A,0)};function L(R){C=R,k||(k=!0,D())}function U(R,T){_=w(function(){R(e.unstable_now())},T)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(R){R.callback=null},e.unstable_continueExecution=function(){g||p||(g=!0,L(j))},e.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<R?Math.floor(1e3/R):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(R){switch(f){case 1:case 2:case 3:var T=3;break;default:T=f}var z=f;f=T;try{return R()}finally{f=z}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(R,T){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var z=f;f=R;try{return T()}finally{f=z}},e.unstable_scheduleCallback=function(R,T,z){var E=e.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?E+z:E):z=E,R){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=z+F,R={id:d++,callback:T,priorityLevel:R,startTime:z,expirationTime:F,sortIndex:-1},z>E?(R.sortIndex=z,t(u,R),r(c)===null&&R===r(u)&&(y?(v(_),_=-1):y=!0,U(b,z-E))):(R.sortIndex=F,t(c,R),g||p||(g=!0,L(j))),R},e.unstable_shouldYield=B,e.unstable_wrapCallback=function(R){var T=f;return function(){var z=f;f=T;try{return R.apply(this,arguments)}finally{f=z}}}})(Sx);Nx.exports=Sx;var A1=Nx.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P1=N,bt=A1;function H(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ax=new Set,oi={};function jn(e,t){cs(e,t),cs(e+"Capture",t)}function cs(e,t){for(oi[e]=t,e=0;e<t.length;e++)Ax.add(t[e])}var ur=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ic=Object.prototype.hasOwnProperty,D1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Hd={},Wd={};function B1(e){return Ic.call(Wd,e)?!0:Ic.call(Hd,e)?!1:D1.test(e)?Wd[e]=!0:(Hd[e]=!0,!1)}function F1(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function T1(e,t,r,n){if(t===null||typeof t>"u"||F1(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function at(e,t,r,n,s,i,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var qe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){qe[e]=new at(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];qe[t]=new at(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){qe[e]=new at(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){qe[e]=new at(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){qe[e]=new at(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){qe[e]=new at(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){qe[e]=new at(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){qe[e]=new at(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){qe[e]=new at(e,5,!1,e.toLowerCase(),null,!1,!1)});var o0=/[\-:]([a-z])/g;function l0(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(o0,l0);qe[t]=new at(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(o0,l0);qe[t]=new at(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(o0,l0);qe[t]=new at(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){qe[e]=new at(e,1,!1,e.toLowerCase(),null,!1,!1)});qe.xlinkHref=new at("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){qe[e]=new at(e,1,!1,e.toLowerCase(),null,!0,!0)});function c0(e,t,r,n){var s=qe.hasOwnProperty(t)?qe[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(T1(t,r,s,n)&&(r=null),n||s===null?B1(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var xr=P1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Yi=Symbol.for("react.element"),On=Symbol.for("react.portal"),In=Symbol.for("react.fragment"),u0=Symbol.for("react.strict_mode"),Mc=Symbol.for("react.profiler"),Px=Symbol.for("react.provider"),Dx=Symbol.for("react.context"),d0=Symbol.for("react.forward_ref"),Uc=Symbol.for("react.suspense"),$c=Symbol.for("react.suspense_list"),h0=Symbol.for("react.memo"),br=Symbol.for("react.lazy"),Bx=Symbol.for("react.offscreen"),qd=Symbol.iterator;function Ns(e){return e===null||typeof e!="object"?null:(e=qd&&e[qd]||e["@@iterator"],typeof e=="function"?e:null)}var _e=Object.assign,ll;function Is(e){if(ll===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);ll=t&&t[1]||""}return`
`+ll+e}var cl=!1;function ul(e,t){if(!e||cl)return"";cl=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=n.stack.split(`
`),a=s.length-1,l=i.length-1;1<=a&&0<=l&&s[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==i[l]){var c=`
`+s[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=l);break}}}finally{cl=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Is(e):""}function R1(e){switch(e.tag){case 5:return Is(e.type);case 16:return Is("Lazy");case 13:return Is("Suspense");case 19:return Is("SuspenseList");case 0:case 2:case 15:return e=ul(e.type,!1),e;case 11:return e=ul(e.type.render,!1),e;case 1:return e=ul(e.type,!0),e;default:return""}}function zc(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case In:return"Fragment";case On:return"Portal";case Mc:return"Profiler";case u0:return"StrictMode";case Uc:return"Suspense";case $c:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Dx:return(e.displayName||"Context")+".Consumer";case Px:return(e._context.displayName||"Context")+".Provider";case d0:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case h0:return t=e.displayName||null,t!==null?t:zc(e.type)||"Memo";case br:t=e._payload,e=e._init;try{return zc(e(t))}catch{}}return null}function L1(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return zc(t);case 8:return t===u0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function $r(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Fx(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function O1(e){var t=Fx(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){n=""+a,i.call(this,a)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Qi(e){e._valueTracker||(e._valueTracker=O1(e))}function Tx(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=Fx(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Ra(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Vc(e,t){var r=t.checked;return _e({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Kd(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=$r(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Rx(e,t){t=t.checked,t!=null&&c0(e,"checked",t,!1)}function Hc(e,t){Rx(e,t);var r=$r(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Wc(e,t.type,r):t.hasOwnProperty("defaultValue")&&Wc(e,t.type,$r(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Gd(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Wc(e,t,r){(t!=="number"||Ra(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Ms=Array.isArray;function rs(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+$r(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function qc(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(H(91));return _e({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Yd(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(H(92));if(Ms(r)){if(1<r.length)throw Error(H(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:$r(r)}}function Lx(e,t){var r=$r(t.value),n=$r(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Qd(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Ox(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Kc(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Ox(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Xi,Ix=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Xi=Xi||document.createElement("div"),Xi.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Xi.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function li(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Hs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},I1=["Webkit","ms","Moz","O"];Object.keys(Hs).forEach(function(e){I1.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Hs[t]=Hs[e]})});function Mx(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Hs.hasOwnProperty(e)&&Hs[e]?(""+t).trim():t+"px"}function Ux(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=Mx(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var M1=_e({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Gc(e,t){if(t){if(M1[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(H(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(H(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(H(61))}if(t.style!=null&&typeof t.style!="object")throw Error(H(62))}}function Yc(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qc=null;function f0(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Xc=null,ns=null,ss=null;function Xd(e){if(e=Ti(e)){if(typeof Xc!="function")throw Error(H(280));var t=e.stateNode;t&&(t=So(t),Xc(e.stateNode,e.type,t))}}function $x(e){ns?ss?ss.push(e):ss=[e]:ns=e}function zx(){if(ns){var e=ns,t=ss;if(ss=ns=null,Xd(e),t)for(e=0;e<t.length;e++)Xd(t[e])}}function Vx(e,t){return e(t)}function Hx(){}var dl=!1;function Wx(e,t,r){if(dl)return e(t,r);dl=!0;try{return Vx(e,t,r)}finally{dl=!1,(ns!==null||ss!==null)&&(Hx(),zx())}}function ci(e,t){var r=e.stateNode;if(r===null)return null;var n=So(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(H(231,t,typeof r));return r}var Zc=!1;if(ur)try{var Ss={};Object.defineProperty(Ss,"passive",{get:function(){Zc=!0}}),window.addEventListener("test",Ss,Ss),window.removeEventListener("test",Ss,Ss)}catch{Zc=!1}function U1(e,t,r,n,s,i,a,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var Ws=!1,La=null,Oa=!1,Jc=null,$1={onError:function(e){Ws=!0,La=e}};function z1(e,t,r,n,s,i,a,l,c){Ws=!1,La=null,U1.apply($1,arguments)}function V1(e,t,r,n,s,i,a,l,c){if(z1.apply(this,arguments),Ws){if(Ws){var u=La;Ws=!1,La=null}else throw Error(H(198));Oa||(Oa=!0,Jc=u)}}function Cn(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function qx(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Zd(e){if(Cn(e)!==e)throw Error(H(188))}function H1(e){var t=e.alternate;if(!t){if(t=Cn(e),t===null)throw Error(H(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return Zd(s),e;if(i===n)return Zd(s),t;i=i.sibling}throw Error(H(188))}if(r.return!==n.return)r=s,n=i;else{for(var a=!1,l=s.child;l;){if(l===r){a=!0,r=s,n=i;break}if(l===n){a=!0,n=s,r=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===r){a=!0,r=i,n=s;break}if(l===n){a=!0,n=i,r=s;break}l=l.sibling}if(!a)throw Error(H(189))}}if(r.alternate!==n)throw Error(H(190))}if(r.tag!==3)throw Error(H(188));return r.stateNode.current===r?e:t}function Kx(e){return e=H1(e),e!==null?Gx(e):null}function Gx(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Gx(e);if(t!==null)return t;e=e.sibling}return null}var Yx=bt.unstable_scheduleCallback,Jd=bt.unstable_cancelCallback,W1=bt.unstable_shouldYield,q1=bt.unstable_requestPaint,Ae=bt.unstable_now,K1=bt.unstable_getCurrentPriorityLevel,p0=bt.unstable_ImmediatePriority,Qx=bt.unstable_UserBlockingPriority,Ia=bt.unstable_NormalPriority,G1=bt.unstable_LowPriority,Xx=bt.unstable_IdlePriority,ko=null,Yt=null;function Y1(e){if(Yt&&typeof Yt.onCommitFiberRoot=="function")try{Yt.onCommitFiberRoot(ko,e,void 0,(e.current.flags&128)===128)}catch{}}var zt=Math.clz32?Math.clz32:Z1,Q1=Math.log,X1=Math.LN2;function Z1(e){return e>>>=0,e===0?32:31-(Q1(e)/X1|0)|0}var Zi=64,Ji=4194304;function Us(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ma(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,i=e.pingedLanes,a=r&268435455;if(a!==0){var l=a&~s;l!==0?n=Us(l):(i&=a,i!==0&&(n=Us(i)))}else a=r&~s,a!==0?n=Us(a):i!==0&&(n=Us(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-zt(t),s=1<<r,n|=e[r],t&=~s;return n}function J1(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ew(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-zt(i),l=1<<a,c=s[a];c===-1?(!(l&r)||l&n)&&(s[a]=J1(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function eu(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Zx(){var e=Zi;return Zi<<=1,!(Zi&4194240)&&(Zi=64),e}function hl(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Bi(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-zt(t),e[t]=r}function tw(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-zt(r),i=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~i}}function x0(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-zt(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var de=0;function Jx(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var em,m0,tm,rm,nm,tu=!1,ea=[],Br=null,Fr=null,Tr=null,ui=new Map,di=new Map,_r=[],rw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function eh(e,t){switch(e){case"focusin":case"focusout":Br=null;break;case"dragenter":case"dragleave":Fr=null;break;case"mouseover":case"mouseout":Tr=null;break;case"pointerover":case"pointerout":ui.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":di.delete(t.pointerId)}}function As(e,t,r,n,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},t!==null&&(t=Ti(t),t!==null&&m0(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function nw(e,t,r,n,s){switch(t){case"focusin":return Br=As(Br,e,t,r,n,s),!0;case"dragenter":return Fr=As(Fr,e,t,r,n,s),!0;case"mouseover":return Tr=As(Tr,e,t,r,n,s),!0;case"pointerover":var i=s.pointerId;return ui.set(i,As(ui.get(i)||null,e,t,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,di.set(i,As(di.get(i)||null,e,t,r,n,s)),!0}return!1}function sm(e){var t=ln(e.target);if(t!==null){var r=Cn(t);if(r!==null){if(t=r.tag,t===13){if(t=qx(r),t!==null){e.blockedOn=t,nm(e.priority,function(){tm(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ja(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=ru(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Qc=n,r.target.dispatchEvent(n),Qc=null}else return t=Ti(r),t!==null&&m0(t),e.blockedOn=r,!1;t.shift()}return!0}function th(e,t,r){ja(e)&&r.delete(t)}function sw(){tu=!1,Br!==null&&ja(Br)&&(Br=null),Fr!==null&&ja(Fr)&&(Fr=null),Tr!==null&&ja(Tr)&&(Tr=null),ui.forEach(th),di.forEach(th)}function Ps(e,t){e.blockedOn===t&&(e.blockedOn=null,tu||(tu=!0,bt.unstable_scheduleCallback(bt.unstable_NormalPriority,sw)))}function hi(e){function t(s){return Ps(s,e)}if(0<ea.length){Ps(ea[0],e);for(var r=1;r<ea.length;r++){var n=ea[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Br!==null&&Ps(Br,e),Fr!==null&&Ps(Fr,e),Tr!==null&&Ps(Tr,e),ui.forEach(t),di.forEach(t),r=0;r<_r.length;r++)n=_r[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<_r.length&&(r=_r[0],r.blockedOn===null);)sm(r),r.blockedOn===null&&_r.shift()}var is=xr.ReactCurrentBatchConfig,Ua=!0;function iw(e,t,r,n){var s=de,i=is.transition;is.transition=null;try{de=1,g0(e,t,r,n)}finally{de=s,is.transition=i}}function aw(e,t,r,n){var s=de,i=is.transition;is.transition=null;try{de=4,g0(e,t,r,n)}finally{de=s,is.transition=i}}function g0(e,t,r,n){if(Ua){var s=ru(e,t,r,n);if(s===null)jl(e,t,n,$a,r),eh(e,n);else if(nw(s,e,t,r,n))n.stopPropagation();else if(eh(e,n),t&4&&-1<rw.indexOf(e)){for(;s!==null;){var i=Ti(s);if(i!==null&&em(i),i=ru(e,t,r,n),i===null&&jl(e,t,n,$a,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else jl(e,t,n,null,r)}}var $a=null;function ru(e,t,r,n){if($a=null,e=f0(n),e=ln(e),e!==null)if(t=Cn(e),t===null)e=null;else if(r=t.tag,r===13){if(e=qx(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return $a=e,null}function im(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(K1()){case p0:return 1;case Qx:return 4;case Ia:case G1:return 16;case Xx:return 536870912;default:return 16}default:return 16}}var Sr=null,v0=null,Ca=null;function am(){if(Ca)return Ca;var e,t=v0,r=t.length,n,s="value"in Sr?Sr.value:Sr.textContent,i=s.length;for(e=0;e<r&&t[e]===s[e];e++);var a=r-e;for(n=1;n<=a&&t[r-n]===s[i-n];n++);return Ca=s.slice(e,1<n?1-n:void 0)}function ka(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ta(){return!0}function rh(){return!1}function kt(e){function t(r,n,s,i,a){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ta:rh,this.isPropagationStopped=rh,this}return _e(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ta)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ta)},persist:function(){},isPersistent:ta}),t}var ws={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},y0=kt(ws),Fi=_e({},ws,{view:0,detail:0}),ow=kt(Fi),fl,pl,Ds,_o=_e({},Fi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:w0,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ds&&(Ds&&e.type==="mousemove"?(fl=e.screenX-Ds.screenX,pl=e.screenY-Ds.screenY):pl=fl=0,Ds=e),fl)},movementY:function(e){return"movementY"in e?e.movementY:pl}}),nh=kt(_o),lw=_e({},_o,{dataTransfer:0}),cw=kt(lw),uw=_e({},Fi,{relatedTarget:0}),xl=kt(uw),dw=_e({},ws,{animationName:0,elapsedTime:0,pseudoElement:0}),hw=kt(dw),fw=_e({},ws,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),pw=kt(fw),xw=_e({},ws,{data:0}),sh=kt(xw),mw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yw(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=vw[e])?!!t[e]:!1}function w0(){return yw}var ww=_e({},Fi,{key:function(e){if(e.key){var t=mw[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ka(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?gw[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:w0,charCode:function(e){return e.type==="keypress"?ka(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ka(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),bw=kt(ww),jw=_e({},_o,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ih=kt(jw),Cw=_e({},Fi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:w0}),kw=kt(Cw),_w=_e({},ws,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ew=kt(_w),Nw=_e({},_o,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Sw=kt(Nw),Aw=[9,13,27,32],b0=ur&&"CompositionEvent"in window,qs=null;ur&&"documentMode"in document&&(qs=document.documentMode);var Pw=ur&&"TextEvent"in window&&!qs,om=ur&&(!b0||qs&&8<qs&&11>=qs),ah=" ",oh=!1;function lm(e,t){switch(e){case"keyup":return Aw.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cm(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Mn=!1;function Dw(e,t){switch(e){case"compositionend":return cm(t);case"keypress":return t.which!==32?null:(oh=!0,ah);case"textInput":return e=t.data,e===ah&&oh?null:e;default:return null}}function Bw(e,t){if(Mn)return e==="compositionend"||!b0&&lm(e,t)?(e=am(),Ca=v0=Sr=null,Mn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return om&&t.locale!=="ko"?null:t.data;default:return null}}var Fw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function lh(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Fw[e.type]:t==="textarea"}function um(e,t,r,n){$x(n),t=za(t,"onChange"),0<t.length&&(r=new y0("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Ks=null,fi=null;function Tw(e){bm(e,0)}function Eo(e){var t=zn(e);if(Tx(t))return e}function Rw(e,t){if(e==="change")return t}var dm=!1;if(ur){var ml;if(ur){var gl="oninput"in document;if(!gl){var ch=document.createElement("div");ch.setAttribute("oninput","return;"),gl=typeof ch.oninput=="function"}ml=gl}else ml=!1;dm=ml&&(!document.documentMode||9<document.documentMode)}function uh(){Ks&&(Ks.detachEvent("onpropertychange",hm),fi=Ks=null)}function hm(e){if(e.propertyName==="value"&&Eo(fi)){var t=[];um(t,fi,e,f0(e)),Wx(Tw,t)}}function Lw(e,t,r){e==="focusin"?(uh(),Ks=t,fi=r,Ks.attachEvent("onpropertychange",hm)):e==="focusout"&&uh()}function Ow(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Eo(fi)}function Iw(e,t){if(e==="click")return Eo(t)}function Mw(e,t){if(e==="input"||e==="change")return Eo(t)}function Uw(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ht=typeof Object.is=="function"?Object.is:Uw;function pi(e,t){if(Ht(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Ic.call(t,s)||!Ht(e[s],t[s]))return!1}return!0}function dh(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function hh(e,t){var r=dh(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=dh(r)}}function fm(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?fm(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function pm(){for(var e=window,t=Ra();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Ra(e.document)}return t}function j0(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function $w(e){var t=pm(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&fm(r.ownerDocument.documentElement,r)){if(n!==null&&j0(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!e.extend&&i>n&&(s=n,n=i,i=s),s=hh(r,i);var a=hh(r,n);s&&a&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var zw=ur&&"documentMode"in document&&11>=document.documentMode,Un=null,nu=null,Gs=null,su=!1;function fh(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;su||Un==null||Un!==Ra(n)||(n=Un,"selectionStart"in n&&j0(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Gs&&pi(Gs,n)||(Gs=n,n=za(nu,"onSelect"),0<n.length&&(t=new y0("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Un)))}function ra(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var $n={animationend:ra("Animation","AnimationEnd"),animationiteration:ra("Animation","AnimationIteration"),animationstart:ra("Animation","AnimationStart"),transitionend:ra("Transition","TransitionEnd")},vl={},xm={};ur&&(xm=document.createElement("div").style,"AnimationEvent"in window||(delete $n.animationend.animation,delete $n.animationiteration.animation,delete $n.animationstart.animation),"TransitionEvent"in window||delete $n.transitionend.transition);function No(e){if(vl[e])return vl[e];if(!$n[e])return e;var t=$n[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in xm)return vl[e]=t[r];return e}var mm=No("animationend"),gm=No("animationiteration"),vm=No("animationstart"),ym=No("transitionend"),wm=new Map,ph="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Wr(e,t){wm.set(e,t),jn(t,[e])}for(var yl=0;yl<ph.length;yl++){var wl=ph[yl],Vw=wl.toLowerCase(),Hw=wl[0].toUpperCase()+wl.slice(1);Wr(Vw,"on"+Hw)}Wr(mm,"onAnimationEnd");Wr(gm,"onAnimationIteration");Wr(vm,"onAnimationStart");Wr("dblclick","onDoubleClick");Wr("focusin","onFocus");Wr("focusout","onBlur");Wr(ym,"onTransitionEnd");cs("onMouseEnter",["mouseout","mouseover"]);cs("onMouseLeave",["mouseout","mouseover"]);cs("onPointerEnter",["pointerout","pointerover"]);cs("onPointerLeave",["pointerout","pointerover"]);jn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));jn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));jn("onBeforeInput",["compositionend","keypress","textInput","paste"]);jn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));jn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));jn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $s="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ww=new Set("cancel close invalid load scroll toggle".split(" ").concat($s));function xh(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,V1(n,t,void 0,e),e.currentTarget=null}function bm(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var a=n.length-1;0<=a;a--){var l=n[a],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;xh(s,l,u),i=c}else for(a=0;a<n.length;a++){if(l=n[a],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;xh(s,l,u),i=c}}}if(Oa)throw e=Jc,Oa=!1,Jc=null,e}function ve(e,t){var r=t[cu];r===void 0&&(r=t[cu]=new Set);var n=e+"__bubble";r.has(n)||(jm(t,e,2,!1),r.add(n))}function bl(e,t,r){var n=0;t&&(n|=4),jm(r,e,n,t)}var na="_reactListening"+Math.random().toString(36).slice(2);function xi(e){if(!e[na]){e[na]=!0,Ax.forEach(function(r){r!=="selectionchange"&&(Ww.has(r)||bl(r,!1,e),bl(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[na]||(t[na]=!0,bl("selectionchange",!1,t))}}function jm(e,t,r,n){switch(im(t)){case 1:var s=iw;break;case 4:s=aw;break;default:s=g0}r=s.bind(null,t,r,e),s=void 0,!Zc||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function jl(e,t,r,n,s){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=n.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;l!==null;){if(a=ln(l),a===null)return;if(c=a.tag,c===5||c===6){n=i=a;continue e}l=l.parentNode}}n=n.return}Wx(function(){var u=i,d=f0(r),h=[];e:{var f=wm.get(e);if(f!==void 0){var p=y0,g=e;switch(e){case"keypress":if(ka(r)===0)break e;case"keydown":case"keyup":p=bw;break;case"focusin":g="focus",p=xl;break;case"focusout":g="blur",p=xl;break;case"beforeblur":case"afterblur":p=xl;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=nh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=cw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=kw;break;case mm:case gm:case vm:p=hw;break;case ym:p=Ew;break;case"scroll":p=ow;break;case"wheel":p=Sw;break;case"copy":case"cut":case"paste":p=pw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=ih}var y=(t&4)!==0,w=!y&&e==="scroll",v=y?f!==null?f+"Capture":null:f;y=[];for(var x=u,m;x!==null;){m=x;var b=m.stateNode;if(m.tag===5&&b!==null&&(m=b,v!==null&&(b=ci(x,v),b!=null&&y.push(mi(x,b,m)))),w)break;x=x.return}0<y.length&&(f=new p(f,g,null,r,d),h.push({event:f,listeners:y}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",f&&r!==Qc&&(g=r.relatedTarget||r.fromElement)&&(ln(g)||g[dr]))break e;if((p||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,p?(g=r.relatedTarget||r.toElement,p=u,g=g?ln(g):null,g!==null&&(w=Cn(g),g!==w||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=u),p!==g)){if(y=nh,b="onMouseLeave",v="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(y=ih,b="onPointerLeave",v="onPointerEnter",x="pointer"),w=p==null?f:zn(p),m=g==null?f:zn(g),f=new y(b,x+"leave",p,r,d),f.target=w,f.relatedTarget=m,b=null,ln(d)===u&&(y=new y(v,x+"enter",g,r,d),y.target=m,y.relatedTarget=w,b=y),w=b,p&&g)t:{for(y=p,v=g,x=0,m=y;m;m=Dn(m))x++;for(m=0,b=v;b;b=Dn(b))m++;for(;0<x-m;)y=Dn(y),x--;for(;0<m-x;)v=Dn(v),m--;for(;x--;){if(y===v||v!==null&&y===v.alternate)break t;y=Dn(y),v=Dn(v)}y=null}else y=null;p!==null&&mh(h,f,p,y,!1),g!==null&&w!==null&&mh(h,w,g,y,!0)}}e:{if(f=u?zn(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var j=Rw;else if(lh(f))if(dm)j=Mw;else{j=Ow;var k=Lw}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(j=Iw);if(j&&(j=j(e,u))){um(h,j,r,d);break e}k&&k(e,f,u),e==="focusout"&&(k=f._wrapperState)&&k.controlled&&f.type==="number"&&Wc(f,"number",f.value)}switch(k=u?zn(u):window,e){case"focusin":(lh(k)||k.contentEditable==="true")&&(Un=k,nu=u,Gs=null);break;case"focusout":Gs=nu=Un=null;break;case"mousedown":su=!0;break;case"contextmenu":case"mouseup":case"dragend":su=!1,fh(h,r,d);break;case"selectionchange":if(zw)break;case"keydown":case"keyup":fh(h,r,d)}var C;if(b0)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Mn?lm(e,r)&&(_="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(_="onCompositionStart");_&&(om&&r.locale!=="ko"&&(Mn||_!=="onCompositionStart"?_==="onCompositionEnd"&&Mn&&(C=am()):(Sr=d,v0="value"in Sr?Sr.value:Sr.textContent,Mn=!0)),k=za(u,_),0<k.length&&(_=new sh(_,e,null,r,d),h.push({event:_,listeners:k}),C?_.data=C:(C=cm(r),C!==null&&(_.data=C)))),(C=Pw?Dw(e,r):Bw(e,r))&&(u=za(u,"onBeforeInput"),0<u.length&&(d=new sh("onBeforeInput","beforeinput",null,r,d),h.push({event:d,listeners:u}),d.data=C))}bm(h,t)})}function mi(e,t,r){return{instance:e,listener:t,currentTarget:r}}function za(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=ci(e,r),i!=null&&n.unshift(mi(e,i,s)),i=ci(e,t),i!=null&&n.push(mi(e,i,s))),e=e.return}return n}function Dn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function mh(e,t,r,n,s){for(var i=t._reactName,a=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,s?(c=ci(r,i),c!=null&&a.unshift(mi(r,c,l))):s||(c=ci(r,i),c!=null&&a.push(mi(r,c,l)))),r=r.return}a.length!==0&&e.push({event:t,listeners:a})}var qw=/\r\n?/g,Kw=/\u0000|\uFFFD/g;function gh(e){return(typeof e=="string"?e:""+e).replace(qw,`
`).replace(Kw,"")}function sa(e,t,r){if(t=gh(t),gh(e)!==t&&r)throw Error(H(425))}function Va(){}var iu=null,au=null;function ou(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var lu=typeof setTimeout=="function"?setTimeout:void 0,Gw=typeof clearTimeout=="function"?clearTimeout:void 0,vh=typeof Promise=="function"?Promise:void 0,Yw=typeof queueMicrotask=="function"?queueMicrotask:typeof vh<"u"?function(e){return vh.resolve(null).then(e).catch(Qw)}:lu;function Qw(e){setTimeout(function(){throw e})}function Cl(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),hi(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);hi(t)}function Rr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function yh(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var bs=Math.random().toString(36).slice(2),Gt="__reactFiber$"+bs,gi="__reactProps$"+bs,dr="__reactContainer$"+bs,cu="__reactEvents$"+bs,Xw="__reactListeners$"+bs,Zw="__reactHandles$"+bs;function ln(e){var t=e[Gt];if(t)return t;for(var r=e.parentNode;r;){if(t=r[dr]||r[Gt]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=yh(e);e!==null;){if(r=e[Gt])return r;e=yh(e)}return t}e=r,r=e.parentNode}return null}function Ti(e){return e=e[Gt]||e[dr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function zn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(H(33))}function So(e){return e[gi]||null}var uu=[],Vn=-1;function qr(e){return{current:e}}function ye(e){0>Vn||(e.current=uu[Vn],uu[Vn]=null,Vn--)}function me(e,t){Vn++,uu[Vn]=e.current,e.current=t}var zr={},Ze=qr(zr),ht=qr(!1),gn=zr;function us(e,t){var r=e.type.contextTypes;if(!r)return zr;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function ft(e){return e=e.childContextTypes,e!=null}function Ha(){ye(ht),ye(Ze)}function wh(e,t,r){if(Ze.current!==zr)throw Error(H(168));me(Ze,t),me(ht,r)}function Cm(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(H(108,L1(e)||"Unknown",s));return _e({},r,n)}function Wa(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||zr,gn=Ze.current,me(Ze,e),me(ht,ht.current),!0}function bh(e,t,r){var n=e.stateNode;if(!n)throw Error(H(169));r?(e=Cm(e,t,gn),n.__reactInternalMemoizedMergedChildContext=e,ye(ht),ye(Ze),me(Ze,e)):ye(ht),me(ht,r)}var rr=null,Ao=!1,kl=!1;function km(e){rr===null?rr=[e]:rr.push(e)}function Jw(e){Ao=!0,km(e)}function Kr(){if(!kl&&rr!==null){kl=!0;var e=0,t=de;try{var r=rr;for(de=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}rr=null,Ao=!1}catch(s){throw rr!==null&&(rr=rr.slice(e+1)),Yx(p0,Kr),s}finally{de=t,kl=!1}}return null}var Hn=[],Wn=0,qa=null,Ka=0,Pt=[],Dt=0,vn=null,nr=1,sr="";function en(e,t){Hn[Wn++]=Ka,Hn[Wn++]=qa,qa=e,Ka=t}function _m(e,t,r){Pt[Dt++]=nr,Pt[Dt++]=sr,Pt[Dt++]=vn,vn=e;var n=nr;e=sr;var s=32-zt(n)-1;n&=~(1<<s),r+=1;var i=32-zt(t)+s;if(30<i){var a=s-s%5;i=(n&(1<<a)-1).toString(32),n>>=a,s-=a,nr=1<<32-zt(t)+s|r<<s|n,sr=i+e}else nr=1<<i|r<<s|n,sr=e}function C0(e){e.return!==null&&(en(e,1),_m(e,1,0))}function k0(e){for(;e===qa;)qa=Hn[--Wn],Hn[Wn]=null,Ka=Hn[--Wn],Hn[Wn]=null;for(;e===vn;)vn=Pt[--Dt],Pt[Dt]=null,sr=Pt[--Dt],Pt[Dt]=null,nr=Pt[--Dt],Pt[Dt]=null}var wt=null,yt=null,we=!1,$t=null;function Em(e,t){var r=Bt(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function jh(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,wt=e,yt=Rr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,wt=e,yt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=vn!==null?{id:nr,overflow:sr}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Bt(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,wt=e,yt=null,!0):!1;default:return!1}}function du(e){return(e.mode&1)!==0&&(e.flags&128)===0}function hu(e){if(we){var t=yt;if(t){var r=t;if(!jh(e,t)){if(du(e))throw Error(H(418));t=Rr(r.nextSibling);var n=wt;t&&jh(e,t)?Em(n,r):(e.flags=e.flags&-4097|2,we=!1,wt=e)}}else{if(du(e))throw Error(H(418));e.flags=e.flags&-4097|2,we=!1,wt=e}}}function Ch(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;wt=e}function ia(e){if(e!==wt)return!1;if(!we)return Ch(e),we=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ou(e.type,e.memoizedProps)),t&&(t=yt)){if(du(e))throw Nm(),Error(H(418));for(;t;)Em(e,t),t=Rr(t.nextSibling)}if(Ch(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(H(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){yt=Rr(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}yt=null}}else yt=wt?Rr(e.stateNode.nextSibling):null;return!0}function Nm(){for(var e=yt;e;)e=Rr(e.nextSibling)}function ds(){yt=wt=null,we=!1}function _0(e){$t===null?$t=[e]:$t.push(e)}var e2=xr.ReactCurrentBatchConfig;function Bs(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(H(309));var n=r.stateNode}if(!n)throw Error(H(147,e));var s=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(a){var l=s.refs;a===null?delete l[i]:l[i]=a},t._stringRef=i,t)}if(typeof e!="string")throw Error(H(284));if(!r._owner)throw Error(H(290,e))}return e}function aa(e,t){throw e=Object.prototype.toString.call(t),Error(H(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function kh(e){var t=e._init;return t(e._payload)}function Sm(e){function t(v,x){if(e){var m=v.deletions;m===null?(v.deletions=[x],v.flags|=16):m.push(x)}}function r(v,x){if(!e)return null;for(;x!==null;)t(v,x),x=x.sibling;return null}function n(v,x){for(v=new Map;x!==null;)x.key!==null?v.set(x.key,x):v.set(x.index,x),x=x.sibling;return v}function s(v,x){return v=Mr(v,x),v.index=0,v.sibling=null,v}function i(v,x,m){return v.index=m,e?(m=v.alternate,m!==null?(m=m.index,m<x?(v.flags|=2,x):m):(v.flags|=2,x)):(v.flags|=1048576,x)}function a(v){return e&&v.alternate===null&&(v.flags|=2),v}function l(v,x,m,b){return x===null||x.tag!==6?(x=Dl(m,v.mode,b),x.return=v,x):(x=s(x,m),x.return=v,x)}function c(v,x,m,b){var j=m.type;return j===In?d(v,x,m.props.children,b,m.key):x!==null&&(x.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===br&&kh(j)===x.type)?(b=s(x,m.props),b.ref=Bs(v,x,m),b.return=v,b):(b=Da(m.type,m.key,m.props,null,v.mode,b),b.ref=Bs(v,x,m),b.return=v,b)}function u(v,x,m,b){return x===null||x.tag!==4||x.stateNode.containerInfo!==m.containerInfo||x.stateNode.implementation!==m.implementation?(x=Bl(m,v.mode,b),x.return=v,x):(x=s(x,m.children||[]),x.return=v,x)}function d(v,x,m,b,j){return x===null||x.tag!==7?(x=fn(m,v.mode,b,j),x.return=v,x):(x=s(x,m),x.return=v,x)}function h(v,x,m){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Dl(""+x,v.mode,m),x.return=v,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Yi:return m=Da(x.type,x.key,x.props,null,v.mode,m),m.ref=Bs(v,null,x),m.return=v,m;case On:return x=Bl(x,v.mode,m),x.return=v,x;case br:var b=x._init;return h(v,b(x._payload),m)}if(Ms(x)||Ns(x))return x=fn(x,v.mode,m,null),x.return=v,x;aa(v,x)}return null}function f(v,x,m,b){var j=x!==null?x.key:null;if(typeof m=="string"&&m!==""||typeof m=="number")return j!==null?null:l(v,x,""+m,b);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Yi:return m.key===j?c(v,x,m,b):null;case On:return m.key===j?u(v,x,m,b):null;case br:return j=m._init,f(v,x,j(m._payload),b)}if(Ms(m)||Ns(m))return j!==null?null:d(v,x,m,b,null);aa(v,m)}return null}function p(v,x,m,b,j){if(typeof b=="string"&&b!==""||typeof b=="number")return v=v.get(m)||null,l(x,v,""+b,j);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Yi:return v=v.get(b.key===null?m:b.key)||null,c(x,v,b,j);case On:return v=v.get(b.key===null?m:b.key)||null,u(x,v,b,j);case br:var k=b._init;return p(v,x,m,k(b._payload),j)}if(Ms(b)||Ns(b))return v=v.get(m)||null,d(x,v,b,j,null);aa(x,b)}return null}function g(v,x,m,b){for(var j=null,k=null,C=x,_=x=0,P=null;C!==null&&_<m.length;_++){C.index>_?(P=C,C=null):P=C.sibling;var S=f(v,C,m[_],b);if(S===null){C===null&&(C=P);break}e&&C&&S.alternate===null&&t(v,C),x=i(S,x,_),k===null?j=S:k.sibling=S,k=S,C=P}if(_===m.length)return r(v,C),we&&en(v,_),j;if(C===null){for(;_<m.length;_++)C=h(v,m[_],b),C!==null&&(x=i(C,x,_),k===null?j=C:k.sibling=C,k=C);return we&&en(v,_),j}for(C=n(v,C);_<m.length;_++)P=p(C,v,_,m[_],b),P!==null&&(e&&P.alternate!==null&&C.delete(P.key===null?_:P.key),x=i(P,x,_),k===null?j=P:k.sibling=P,k=P);return e&&C.forEach(function(B){return t(v,B)}),we&&en(v,_),j}function y(v,x,m,b){var j=Ns(m);if(typeof j!="function")throw Error(H(150));if(m=j.call(m),m==null)throw Error(H(151));for(var k=j=null,C=x,_=x=0,P=null,S=m.next();C!==null&&!S.done;_++,S=m.next()){C.index>_?(P=C,C=null):P=C.sibling;var B=f(v,C,S.value,b);if(B===null){C===null&&(C=P);break}e&&C&&B.alternate===null&&t(v,C),x=i(B,x,_),k===null?j=B:k.sibling=B,k=B,C=P}if(S.done)return r(v,C),we&&en(v,_),j;if(C===null){for(;!S.done;_++,S=m.next())S=h(v,S.value,b),S!==null&&(x=i(S,x,_),k===null?j=S:k.sibling=S,k=S);return we&&en(v,_),j}for(C=n(v,C);!S.done;_++,S=m.next())S=p(C,v,_,S.value,b),S!==null&&(e&&S.alternate!==null&&C.delete(S.key===null?_:S.key),x=i(S,x,_),k===null?j=S:k.sibling=S,k=S);return e&&C.forEach(function(A){return t(v,A)}),we&&en(v,_),j}function w(v,x,m,b){if(typeof m=="object"&&m!==null&&m.type===In&&m.key===null&&(m=m.props.children),typeof m=="object"&&m!==null){switch(m.$$typeof){case Yi:e:{for(var j=m.key,k=x;k!==null;){if(k.key===j){if(j=m.type,j===In){if(k.tag===7){r(v,k.sibling),x=s(k,m.props.children),x.return=v,v=x;break e}}else if(k.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===br&&kh(j)===k.type){r(v,k.sibling),x=s(k,m.props),x.ref=Bs(v,k,m),x.return=v,v=x;break e}r(v,k);break}else t(v,k);k=k.sibling}m.type===In?(x=fn(m.props.children,v.mode,b,m.key),x.return=v,v=x):(b=Da(m.type,m.key,m.props,null,v.mode,b),b.ref=Bs(v,x,m),b.return=v,v=b)}return a(v);case On:e:{for(k=m.key;x!==null;){if(x.key===k)if(x.tag===4&&x.stateNode.containerInfo===m.containerInfo&&x.stateNode.implementation===m.implementation){r(v,x.sibling),x=s(x,m.children||[]),x.return=v,v=x;break e}else{r(v,x);break}else t(v,x);x=x.sibling}x=Bl(m,v.mode,b),x.return=v,v=x}return a(v);case br:return k=m._init,w(v,x,k(m._payload),b)}if(Ms(m))return g(v,x,m,b);if(Ns(m))return y(v,x,m,b);aa(v,m)}return typeof m=="string"&&m!==""||typeof m=="number"?(m=""+m,x!==null&&x.tag===6?(r(v,x.sibling),x=s(x,m),x.return=v,v=x):(r(v,x),x=Dl(m,v.mode,b),x.return=v,v=x),a(v)):r(v,x)}return w}var hs=Sm(!0),Am=Sm(!1),Ga=qr(null),Ya=null,qn=null,E0=null;function N0(){E0=qn=Ya=null}function S0(e){var t=Ga.current;ye(Ga),e._currentValue=t}function fu(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function as(e,t){Ya=e,E0=qn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(dt=!0),e.firstContext=null)}function Tt(e){var t=e._currentValue;if(E0!==e)if(e={context:e,memoizedValue:t,next:null},qn===null){if(Ya===null)throw Error(H(308));qn=e,Ya.dependencies={lanes:0,firstContext:e}}else qn=qn.next=e;return t}var cn=null;function A0(e){cn===null?cn=[e]:cn.push(e)}function Pm(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,A0(t)):(r.next=s.next,s.next=r),t.interleaved=r,hr(e,n)}function hr(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var jr=!1;function P0(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Dm(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ar(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Lr(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,ue&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,hr(e,r)}return s=n.interleaved,s===null?(t.next=t,A0(n)):(t.next=s.next,s.next=t),n.interleaved=t,hr(e,r)}function _a(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,x0(e,r)}}function _h(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=a:i=i.next=a,r=r.next}while(r!==null);i===null?s=i=t:i=i.next=t}else s=i=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Qa(e,t,r,n){var s=e.updateQueue;jr=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,a===null?i=u:a.next=u,a=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var h=s.baseState;a=0,d=u=c=null,l=i;do{var f=l.lane,p=l.eventTime;if((n&f)===f){d!==null&&(d=d.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var g=e,y=l;switch(f=t,p=r,y.tag){case 1:if(g=y.payload,typeof g=="function"){h=g.call(p,h,f);break e}h=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=y.payload,f=typeof g=="function"?g.call(p,h,f):g,f==null)break e;h=_e({},h,f);break e;case 2:jr=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,f=s.effects,f===null?s.effects=[l]:f.push(l))}else p={eventTime:p,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=p,c=h):d=d.next=p,a|=f;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;f=l,l=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(c=h),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do a|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);wn|=a,e.lanes=a,e.memoizedState=h}}function Eh(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(H(191,s));s.call(n)}}}var Ri={},Qt=qr(Ri),vi=qr(Ri),yi=qr(Ri);function un(e){if(e===Ri)throw Error(H(174));return e}function D0(e,t){switch(me(yi,t),me(vi,e),me(Qt,Ri),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Kc(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Kc(t,e)}ye(Qt),me(Qt,t)}function fs(){ye(Qt),ye(vi),ye(yi)}function Bm(e){un(yi.current);var t=un(Qt.current),r=Kc(t,e.type);t!==r&&(me(vi,e),me(Qt,r))}function B0(e){vi.current===e&&(ye(Qt),ye(vi))}var je=qr(0);function Xa(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var _l=[];function F0(){for(var e=0;e<_l.length;e++)_l[e]._workInProgressVersionPrimary=null;_l.length=0}var Ea=xr.ReactCurrentDispatcher,El=xr.ReactCurrentBatchConfig,yn=0,ke=null,Le=null,$e=null,Za=!1,Ys=!1,wi=0,t2=0;function Ge(){throw Error(H(321))}function T0(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Ht(e[r],t[r]))return!1;return!0}function R0(e,t,r,n,s,i){if(yn=i,ke=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ea.current=e===null||e.memoizedState===null?i2:a2,e=r(n,s),Ys){i=0;do{if(Ys=!1,wi=0,25<=i)throw Error(H(301));i+=1,$e=Le=null,t.updateQueue=null,Ea.current=o2,e=r(n,s)}while(Ys)}if(Ea.current=Ja,t=Le!==null&&Le.next!==null,yn=0,$e=Le=ke=null,Za=!1,t)throw Error(H(300));return e}function L0(){var e=wi!==0;return wi=0,e}function Kt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $e===null?ke.memoizedState=$e=e:$e=$e.next=e,$e}function Rt(){if(Le===null){var e=ke.alternate;e=e!==null?e.memoizedState:null}else e=Le.next;var t=$e===null?ke.memoizedState:$e.next;if(t!==null)$e=t,Le=e;else{if(e===null)throw Error(H(310));Le=e,e={memoizedState:Le.memoizedState,baseState:Le.baseState,baseQueue:Le.baseQueue,queue:Le.queue,next:null},$e===null?ke.memoizedState=$e=e:$e=$e.next=e}return $e}function bi(e,t){return typeof t=="function"?t(e):t}function Nl(e){var t=Rt(),r=t.queue;if(r===null)throw Error(H(311));r.lastRenderedReducer=e;var n=Le,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var l=a=null,c=null,u=i;do{var d=u.lane;if((yn&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,a=n):c=c.next=h,ke.lanes|=d,wn|=d}u=u.next}while(u!==null&&u!==i);c===null?a=n:c.next=l,Ht(n,t.memoizedState)||(dt=!0),t.memoizedState=n,t.baseState=a,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do i=s.lane,ke.lanes|=i,wn|=i,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Sl(e){var t=Rt(),r=t.queue;if(r===null)throw Error(H(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,i=t.memoizedState;if(s!==null){r.pending=null;var a=s=s.next;do i=e(i,a.action),a=a.next;while(a!==s);Ht(i,t.memoizedState)||(dt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function Fm(){}function Tm(e,t){var r=ke,n=Rt(),s=t(),i=!Ht(n.memoizedState,s);if(i&&(n.memoizedState=s,dt=!0),n=n.queue,O0(Om.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||$e!==null&&$e.memoizedState.tag&1){if(r.flags|=2048,ji(9,Lm.bind(null,r,n,s,t),void 0,null),ze===null)throw Error(H(349));yn&30||Rm(r,t,s)}return s}function Rm(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=ke.updateQueue,t===null?(t={lastEffect:null,stores:null},ke.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Lm(e,t,r,n){t.value=r,t.getSnapshot=n,Im(t)&&Mm(e)}function Om(e,t,r){return r(function(){Im(t)&&Mm(e)})}function Im(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Ht(e,r)}catch{return!0}}function Mm(e){var t=hr(e,1);t!==null&&Vt(t,e,1,-1)}function Nh(e){var t=Kt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bi,lastRenderedState:e},t.queue=e,e=e.dispatch=s2.bind(null,ke,e),[t.memoizedState,e]}function ji(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=ke.updateQueue,t===null?(t={lastEffect:null,stores:null},ke.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function Um(){return Rt().memoizedState}function Na(e,t,r,n){var s=Kt();ke.flags|=e,s.memoizedState=ji(1|t,r,void 0,n===void 0?null:n)}function Po(e,t,r,n){var s=Rt();n=n===void 0?null:n;var i=void 0;if(Le!==null){var a=Le.memoizedState;if(i=a.destroy,n!==null&&T0(n,a.deps)){s.memoizedState=ji(t,r,i,n);return}}ke.flags|=e,s.memoizedState=ji(1|t,r,i,n)}function Sh(e,t){return Na(8390656,8,e,t)}function O0(e,t){return Po(2048,8,e,t)}function $m(e,t){return Po(4,2,e,t)}function zm(e,t){return Po(4,4,e,t)}function Vm(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Hm(e,t,r){return r=r!=null?r.concat([e]):null,Po(4,4,Vm.bind(null,t,e),r)}function I0(){}function Wm(e,t){var r=Rt();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&T0(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function qm(e,t){var r=Rt();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&T0(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Km(e,t,r){return yn&21?(Ht(r,t)||(r=Zx(),ke.lanes|=r,wn|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,dt=!0),e.memoizedState=r)}function r2(e,t){var r=de;de=r!==0&&4>r?r:4,e(!0);var n=El.transition;El.transition={};try{e(!1),t()}finally{de=r,El.transition=n}}function Gm(){return Rt().memoizedState}function n2(e,t,r){var n=Ir(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Ym(e))Qm(t,r);else if(r=Pm(e,t,r,n),r!==null){var s=nt();Vt(r,e,n,s),Xm(r,t,n)}}function s2(e,t,r){var n=Ir(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Ym(e))Qm(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var a=t.lastRenderedState,l=i(a,r);if(s.hasEagerState=!0,s.eagerState=l,Ht(l,a)){var c=t.interleaved;c===null?(s.next=s,A0(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}r=Pm(e,t,s,n),r!==null&&(s=nt(),Vt(r,e,n,s),Xm(r,t,n))}}function Ym(e){var t=e.alternate;return e===ke||t!==null&&t===ke}function Qm(e,t){Ys=Za=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Xm(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,x0(e,r)}}var Ja={readContext:Tt,useCallback:Ge,useContext:Ge,useEffect:Ge,useImperativeHandle:Ge,useInsertionEffect:Ge,useLayoutEffect:Ge,useMemo:Ge,useReducer:Ge,useRef:Ge,useState:Ge,useDebugValue:Ge,useDeferredValue:Ge,useTransition:Ge,useMutableSource:Ge,useSyncExternalStore:Ge,useId:Ge,unstable_isNewReconciler:!1},i2={readContext:Tt,useCallback:function(e,t){return Kt().memoizedState=[e,t===void 0?null:t],e},useContext:Tt,useEffect:Sh,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Na(4194308,4,Vm.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Na(4194308,4,e,t)},useInsertionEffect:function(e,t){return Na(4,2,e,t)},useMemo:function(e,t){var r=Kt();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Kt();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=n2.bind(null,ke,e),[n.memoizedState,e]},useRef:function(e){var t=Kt();return e={current:e},t.memoizedState=e},useState:Nh,useDebugValue:I0,useDeferredValue:function(e){return Kt().memoizedState=e},useTransition:function(){var e=Nh(!1),t=e[0];return e=r2.bind(null,e[1]),Kt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=ke,s=Kt();if(we){if(r===void 0)throw Error(H(407));r=r()}else{if(r=t(),ze===null)throw Error(H(349));yn&30||Rm(n,t,r)}s.memoizedState=r;var i={value:r,getSnapshot:t};return s.queue=i,Sh(Om.bind(null,n,i,e),[e]),n.flags|=2048,ji(9,Lm.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=Kt(),t=ze.identifierPrefix;if(we){var r=sr,n=nr;r=(n&~(1<<32-zt(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=wi++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=t2++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},a2={readContext:Tt,useCallback:Wm,useContext:Tt,useEffect:O0,useImperativeHandle:Hm,useInsertionEffect:$m,useLayoutEffect:zm,useMemo:qm,useReducer:Nl,useRef:Um,useState:function(){return Nl(bi)},useDebugValue:I0,useDeferredValue:function(e){var t=Rt();return Km(t,Le.memoizedState,e)},useTransition:function(){var e=Nl(bi)[0],t=Rt().memoizedState;return[e,t]},useMutableSource:Fm,useSyncExternalStore:Tm,useId:Gm,unstable_isNewReconciler:!1},o2={readContext:Tt,useCallback:Wm,useContext:Tt,useEffect:O0,useImperativeHandle:Hm,useInsertionEffect:$m,useLayoutEffect:zm,useMemo:qm,useReducer:Sl,useRef:Um,useState:function(){return Sl(bi)},useDebugValue:I0,useDeferredValue:function(e){var t=Rt();return Le===null?t.memoizedState=e:Km(t,Le.memoizedState,e)},useTransition:function(){var e=Sl(bi)[0],t=Rt().memoizedState;return[e,t]},useMutableSource:Fm,useSyncExternalStore:Tm,useId:Gm,unstable_isNewReconciler:!1};function It(e,t){if(e&&e.defaultProps){t=_e({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function pu(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:_e({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Do={isMounted:function(e){return(e=e._reactInternals)?Cn(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=nt(),s=Ir(e),i=ar(n,s);i.payload=t,r!=null&&(i.callback=r),t=Lr(e,i,s),t!==null&&(Vt(t,e,s,n),_a(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=nt(),s=Ir(e),i=ar(n,s);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=Lr(e,i,s),t!==null&&(Vt(t,e,s,n),_a(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=nt(),n=Ir(e),s=ar(r,n);s.tag=2,t!=null&&(s.callback=t),t=Lr(e,s,n),t!==null&&(Vt(t,e,n,r),_a(t,e,n))}};function Ah(e,t,r,n,s,i,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,a):t.prototype&&t.prototype.isPureReactComponent?!pi(r,n)||!pi(s,i):!0}function Zm(e,t,r){var n=!1,s=zr,i=t.contextType;return typeof i=="object"&&i!==null?i=Tt(i):(s=ft(t)?gn:Ze.current,n=t.contextTypes,i=(n=n!=null)?us(e,s):zr),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Do,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function Ph(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Do.enqueueReplaceState(t,t.state,null)}function xu(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},P0(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=Tt(i):(i=ft(t)?gn:Ze.current,s.context=us(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(pu(e,t,i,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Do.enqueueReplaceState(s,s.state,null),Qa(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function ps(e,t){try{var r="",n=t;do r+=R1(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function Al(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function mu(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var l2=typeof WeakMap=="function"?WeakMap:Map;function Jm(e,t,r){r=ar(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){to||(to=!0,Eu=n),mu(e,t)},r}function eg(e,t,r){r=ar(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){mu(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){mu(e,t),typeof n!="function"&&(Or===null?Or=new Set([this]):Or.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),r}function Dh(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new l2;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=j2.bind(null,e,t,r),t.then(e,e))}function Bh(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Fh(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=ar(-1,1),t.tag=2,Lr(r,t,1))),r.lanes|=1),e)}var c2=xr.ReactCurrentOwner,dt=!1;function rt(e,t,r,n){t.child=e===null?Am(t,null,r,n):hs(t,e.child,r,n)}function Th(e,t,r,n,s){r=r.render;var i=t.ref;return as(t,s),n=R0(e,t,r,n,i,s),r=L0(),e!==null&&!dt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,fr(e,t,s)):(we&&r&&C0(t),t.flags|=1,rt(e,t,n,s),t.child)}function Rh(e,t,r,n,s){if(e===null){var i=r.type;return typeof i=="function"&&!q0(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,tg(e,t,i,n,s)):(e=Da(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var a=i.memoizedProps;if(r=r.compare,r=r!==null?r:pi,r(a,n)&&e.ref===t.ref)return fr(e,t,s)}return t.flags|=1,e=Mr(i,n),e.ref=t.ref,e.return=t,t.child=e}function tg(e,t,r,n,s){if(e!==null){var i=e.memoizedProps;if(pi(i,n)&&e.ref===t.ref)if(dt=!1,t.pendingProps=n=i,(e.lanes&s)!==0)e.flags&131072&&(dt=!0);else return t.lanes=e.lanes,fr(e,t,s)}return gu(e,t,r,n,s)}function rg(e,t,r){var n=t.pendingProps,s=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},me(Gn,vt),vt|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,me(Gn,vt),vt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,me(Gn,vt),vt|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,me(Gn,vt),vt|=n;return rt(e,t,s,r),t.child}function ng(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function gu(e,t,r,n,s){var i=ft(r)?gn:Ze.current;return i=us(t,i),as(t,s),r=R0(e,t,r,n,i,s),n=L0(),e!==null&&!dt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,fr(e,t,s)):(we&&n&&C0(t),t.flags|=1,rt(e,t,r,s),t.child)}function Lh(e,t,r,n,s){if(ft(r)){var i=!0;Wa(t)}else i=!1;if(as(t,s),t.stateNode===null)Sa(e,t),Zm(t,r,n),xu(t,r,n,s),n=!0;else if(e===null){var a=t.stateNode,l=t.memoizedProps;a.props=l;var c=a.context,u=r.contextType;typeof u=="object"&&u!==null?u=Tt(u):(u=ft(r)?gn:Ze.current,u=us(t,u));var d=r.getDerivedStateFromProps,h=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==n||c!==u)&&Ph(t,a,n,u),jr=!1;var f=t.memoizedState;a.state=f,Qa(t,n,a,s),c=t.memoizedState,l!==n||f!==c||ht.current||jr?(typeof d=="function"&&(pu(t,r,d,n),c=t.memoizedState),(l=jr||Ah(t,r,l,n,f,c,u))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),a.props=n,a.state=c,a.context=u,n=l):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{a=t.stateNode,Dm(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:It(t.type,l),a.props=u,h=t.pendingProps,f=a.context,c=r.contextType,typeof c=="object"&&c!==null?c=Tt(c):(c=ft(r)?gn:Ze.current,c=us(t,c));var p=r.getDerivedStateFromProps;(d=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==h||f!==c)&&Ph(t,a,n,c),jr=!1,f=t.memoizedState,a.state=f,Qa(t,n,a,s);var g=t.memoizedState;l!==h||f!==g||ht.current||jr?(typeof p=="function"&&(pu(t,r,p,n),g=t.memoizedState),(u=jr||Ah(t,r,u,n,f,g,c)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,g,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,g,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=g),a.props=n,a.state=g,a.context=c,n=u):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),n=!1)}return vu(e,t,r,n,i,s)}function vu(e,t,r,n,s,i){ng(e,t);var a=(t.flags&128)!==0;if(!n&&!a)return s&&bh(t,r,!1),fr(e,t,i);n=t.stateNode,c2.current=t;var l=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&a?(t.child=hs(t,e.child,null,i),t.child=hs(t,null,l,i)):rt(e,t,l,i),t.memoizedState=n.state,s&&bh(t,r,!0),t.child}function sg(e){var t=e.stateNode;t.pendingContext?wh(e,t.pendingContext,t.pendingContext!==t.context):t.context&&wh(e,t.context,!1),D0(e,t.containerInfo)}function Oh(e,t,r,n,s){return ds(),_0(s),t.flags|=256,rt(e,t,r,n),t.child}var yu={dehydrated:null,treeContext:null,retryLane:0};function wu(e){return{baseLanes:e,cachePool:null,transitions:null}}function ig(e,t,r){var n=t.pendingProps,s=je.current,i=!1,a=(t.flags&128)!==0,l;if((l=a)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),me(je,s&1),e===null)return hu(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=n.children,e=n.fallback,i?(n=t.mode,i=t.child,a={mode:"hidden",children:a},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=To(a,n,0,null),e=fn(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=wu(r),t.memoizedState=yu,e):M0(t,a));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return u2(e,t,a,n,l,s,r);if(i){i=n.fallback,a=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:n.children};return!(a&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=Mr(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Mr(l,i):(i=fn(i,a,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,a=e.child.memoizedState,a=a===null?wu(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=e.childLanes&~r,t.memoizedState=yu,n}return i=e.child,e=i.sibling,n=Mr(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function M0(e,t){return t=To({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function oa(e,t,r,n){return n!==null&&_0(n),hs(t,e.child,null,r),e=M0(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function u2(e,t,r,n,s,i,a){if(r)return t.flags&256?(t.flags&=-257,n=Al(Error(H(422))),oa(e,t,a,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,s=t.mode,n=To({mode:"visible",children:n.children},s,0,null),i=fn(i,s,a,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&hs(t,e.child,null,a),t.child.memoizedState=wu(a),t.memoizedState=yu,i);if(!(t.mode&1))return oa(e,t,a,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(H(419)),n=Al(i,n,void 0),oa(e,t,a,n)}if(l=(a&e.childLanes)!==0,dt||l){if(n=ze,n!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,hr(e,s),Vt(n,e,s,-1))}return W0(),n=Al(Error(H(421))),oa(e,t,a,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=C2.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,yt=Rr(s.nextSibling),wt=t,we=!0,$t=null,e!==null&&(Pt[Dt++]=nr,Pt[Dt++]=sr,Pt[Dt++]=vn,nr=e.id,sr=e.overflow,vn=t),t=M0(t,n.children),t.flags|=4096,t)}function Ih(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),fu(e.return,t,r)}function Pl(e,t,r,n,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function ag(e,t,r){var n=t.pendingProps,s=n.revealOrder,i=n.tail;if(rt(e,t,n.children,r),n=je.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ih(e,r,t);else if(e.tag===19)Ih(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(me(je,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&Xa(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),Pl(t,!1,s,r,i);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Xa(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}Pl(t,!0,r,null,i);break;case"together":Pl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Sa(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function fr(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),wn|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(H(153));if(t.child!==null){for(e=t.child,r=Mr(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Mr(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function d2(e,t,r){switch(t.tag){case 3:sg(t),ds();break;case 5:Bm(t);break;case 1:ft(t.type)&&Wa(t);break;case 4:D0(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;me(Ga,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(me(je,je.current&1),t.flags|=128,null):r&t.child.childLanes?ig(e,t,r):(me(je,je.current&1),e=fr(e,t,r),e!==null?e.sibling:null);me(je,je.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return ag(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),me(je,je.current),n)break;return null;case 22:case 23:return t.lanes=0,rg(e,t,r)}return fr(e,t,r)}var og,bu,lg,cg;og=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};bu=function(){};lg=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,un(Qt.current);var i=null;switch(r){case"input":s=Vc(e,s),n=Vc(e,n),i=[];break;case"select":s=_e({},s,{value:void 0}),n=_e({},n,{value:void 0}),i=[];break;case"textarea":s=qc(e,s),n=qc(e,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Va)}Gc(r,n);var a;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(a in l)l.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(oi.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var c=n[u];if(l=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(r||(r={}),r[a]=c[a])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(oi.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&ve("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};cg=function(e,t,r,n){r!==n&&(t.flags|=4)};function Fs(e,t){if(!we)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Ye(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function h2(e,t,r){var n=t.pendingProps;switch(k0(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ye(t),null;case 1:return ft(t.type)&&Ha(),Ye(t),null;case 3:return n=t.stateNode,fs(),ye(ht),ye(Ze),F0(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(ia(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,$t!==null&&(Au($t),$t=null))),bu(e,t),Ye(t),null;case 5:B0(t);var s=un(yi.current);if(r=t.type,e!==null&&t.stateNode!=null)lg(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(H(166));return Ye(t),null}if(e=un(Qt.current),ia(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[Gt]=t,n[gi]=i,e=(t.mode&1)!==0,r){case"dialog":ve("cancel",n),ve("close",n);break;case"iframe":case"object":case"embed":ve("load",n);break;case"video":case"audio":for(s=0;s<$s.length;s++)ve($s[s],n);break;case"source":ve("error",n);break;case"img":case"image":case"link":ve("error",n),ve("load",n);break;case"details":ve("toggle",n);break;case"input":Kd(n,i),ve("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},ve("invalid",n);break;case"textarea":Yd(n,i),ve("invalid",n)}Gc(r,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&sa(n.textContent,l,e),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&sa(n.textContent,l,e),s=["children",""+l]):oi.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&ve("scroll",n)}switch(r){case"input":Qi(n),Gd(n,i,!0);break;case"textarea":Qi(n),Qd(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Va)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Ox(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=a.createElement(r,{is:n.is}):(e=a.createElement(r),r==="select"&&(a=e,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):e=a.createElementNS(e,r),e[Gt]=t,e[gi]=n,og(e,t,!1,!1),t.stateNode=e;e:{switch(a=Yc(r,n),r){case"dialog":ve("cancel",e),ve("close",e),s=n;break;case"iframe":case"object":case"embed":ve("load",e),s=n;break;case"video":case"audio":for(s=0;s<$s.length;s++)ve($s[s],e);s=n;break;case"source":ve("error",e),s=n;break;case"img":case"image":case"link":ve("error",e),ve("load",e),s=n;break;case"details":ve("toggle",e),s=n;break;case"input":Kd(e,n),s=Vc(e,n),ve("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=_e({},n,{value:void 0}),ve("invalid",e);break;case"textarea":Yd(e,n),s=qc(e,n),ve("invalid",e);break;default:s=n}Gc(r,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?Ux(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Ix(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&li(e,c):typeof c=="number"&&li(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(oi.hasOwnProperty(i)?c!=null&&i==="onScroll"&&ve("scroll",e):c!=null&&c0(e,i,c,a))}switch(r){case"input":Qi(e),Gd(e,n,!1);break;case"textarea":Qi(e),Qd(e);break;case"option":n.value!=null&&e.setAttribute("value",""+$r(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?rs(e,!!n.multiple,i,!1):n.defaultValue!=null&&rs(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Va)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ye(t),null;case 6:if(e&&t.stateNode!=null)cg(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(H(166));if(r=un(yi.current),un(Qt.current),ia(t)){if(n=t.stateNode,r=t.memoizedProps,n[Gt]=t,(i=n.nodeValue!==r)&&(e=wt,e!==null))switch(e.tag){case 3:sa(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&sa(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Gt]=t,t.stateNode=n}return Ye(t),null;case 13:if(ye(je),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(we&&yt!==null&&t.mode&1&&!(t.flags&128))Nm(),ds(),t.flags|=98560,i=!1;else if(i=ia(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(H(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(H(317));i[Gt]=t}else ds(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ye(t),i=!1}else $t!==null&&(Au($t),$t=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||je.current&1?Oe===0&&(Oe=3):W0())),t.updateQueue!==null&&(t.flags|=4),Ye(t),null);case 4:return fs(),bu(e,t),e===null&&xi(t.stateNode.containerInfo),Ye(t),null;case 10:return S0(t.type._context),Ye(t),null;case 17:return ft(t.type)&&Ha(),Ye(t),null;case 19:if(ye(je),i=t.memoizedState,i===null)return Ye(t),null;if(n=(t.flags&128)!==0,a=i.rendering,a===null)if(n)Fs(i,!1);else{if(Oe!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Xa(e),a!==null){for(t.flags|=128,Fs(i,!1),n=a.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,e=a.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return me(je,je.current&1|2),t.child}e=e.sibling}i.tail!==null&&Ae()>xs&&(t.flags|=128,n=!0,Fs(i,!1),t.lanes=4194304)}else{if(!n)if(e=Xa(a),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Fs(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!we)return Ye(t),null}else 2*Ae()-i.renderingStartTime>xs&&r!==1073741824&&(t.flags|=128,n=!0,Fs(i,!1),t.lanes=4194304);i.isBackwards?(a.sibling=t.child,t.child=a):(r=i.last,r!==null?r.sibling=a:t.child=a,i.last=a)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Ae(),t.sibling=null,r=je.current,me(je,n?r&1|2:r&1),t):(Ye(t),null);case 22:case 23:return H0(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?vt&1073741824&&(Ye(t),t.subtreeFlags&6&&(t.flags|=8192)):Ye(t),null;case 24:return null;case 25:return null}throw Error(H(156,t.tag))}function f2(e,t){switch(k0(t),t.tag){case 1:return ft(t.type)&&Ha(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return fs(),ye(ht),ye(Ze),F0(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return B0(t),null;case 13:if(ye(je),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(H(340));ds()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ye(je),null;case 4:return fs(),null;case 10:return S0(t.type._context),null;case 22:case 23:return H0(),null;case 24:return null;default:return null}}var la=!1,Xe=!1,p2=typeof WeakSet=="function"?WeakSet:Set,Y=null;function Kn(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Ee(e,t,n)}else r.current=null}function ju(e,t,r){try{r()}catch(n){Ee(e,t,n)}}var Mh=!1;function x2(e,t){if(iu=Ua,e=pm(),j0(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var a=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==r||s!==0&&h.nodeType!==3||(l=a+s),h!==i||n!==0&&h.nodeType!==3||(c=a+n),h.nodeType===3&&(a+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===e)break t;if(f===r&&++u===s&&(l=a),f===i&&++d===n&&(c=a),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(au={focusedElem:e,selectionRange:r},Ua=!1,Y=t;Y!==null;)if(t=Y,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Y=e;else for(;Y!==null;){t=Y;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var y=g.memoizedProps,w=g.memoizedState,v=t.stateNode,x=v.getSnapshotBeforeUpdate(t.elementType===t.type?y:It(t.type,y),w);v.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var m=t.stateNode.containerInfo;m.nodeType===1?m.textContent="":m.nodeType===9&&m.documentElement&&m.removeChild(m.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(H(163))}}catch(b){Ee(t,t.return,b)}if(e=t.sibling,e!==null){e.return=t.return,Y=e;break}Y=t.return}return g=Mh,Mh=!1,g}function Qs(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&ju(t,r,i)}s=s.next}while(s!==n)}}function Bo(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Cu(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function ug(e){var t=e.alternate;t!==null&&(e.alternate=null,ug(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Gt],delete t[gi],delete t[cu],delete t[Xw],delete t[Zw])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function dg(e){return e.tag===5||e.tag===3||e.tag===4}function Uh(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||dg(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ku(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Va));else if(n!==4&&(e=e.child,e!==null))for(ku(e,t,r),e=e.sibling;e!==null;)ku(e,t,r),e=e.sibling}function _u(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(_u(e,t,r),e=e.sibling;e!==null;)_u(e,t,r),e=e.sibling}var He=null,Mt=!1;function vr(e,t,r){for(r=r.child;r!==null;)hg(e,t,r),r=r.sibling}function hg(e,t,r){if(Yt&&typeof Yt.onCommitFiberUnmount=="function")try{Yt.onCommitFiberUnmount(ko,r)}catch{}switch(r.tag){case 5:Xe||Kn(r,t);case 6:var n=He,s=Mt;He=null,vr(e,t,r),He=n,Mt=s,He!==null&&(Mt?(e=He,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):He.removeChild(r.stateNode));break;case 18:He!==null&&(Mt?(e=He,r=r.stateNode,e.nodeType===8?Cl(e.parentNode,r):e.nodeType===1&&Cl(e,r),hi(e)):Cl(He,r.stateNode));break;case 4:n=He,s=Mt,He=r.stateNode.containerInfo,Mt=!0,vr(e,t,r),He=n,Mt=s;break;case 0:case 11:case 14:case 15:if(!Xe&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&ju(r,t,a),s=s.next}while(s!==n)}vr(e,t,r);break;case 1:if(!Xe&&(Kn(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){Ee(r,t,l)}vr(e,t,r);break;case 21:vr(e,t,r);break;case 22:r.mode&1?(Xe=(n=Xe)||r.memoizedState!==null,vr(e,t,r),Xe=n):vr(e,t,r);break;default:vr(e,t,r)}}function $h(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new p2),t.forEach(function(n){var s=k2.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Lt(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=e,a=t,l=a;e:for(;l!==null;){switch(l.tag){case 5:He=l.stateNode,Mt=!1;break e;case 3:He=l.stateNode.containerInfo,Mt=!0;break e;case 4:He=l.stateNode.containerInfo,Mt=!0;break e}l=l.return}if(He===null)throw Error(H(160));hg(i,a,s),He=null,Mt=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){Ee(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)fg(t,e),t=t.sibling}function fg(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Lt(t,e),qt(e),n&4){try{Qs(3,e,e.return),Bo(3,e)}catch(y){Ee(e,e.return,y)}try{Qs(5,e,e.return)}catch(y){Ee(e,e.return,y)}}break;case 1:Lt(t,e),qt(e),n&512&&r!==null&&Kn(r,r.return);break;case 5:if(Lt(t,e),qt(e),n&512&&r!==null&&Kn(r,r.return),e.flags&32){var s=e.stateNode;try{li(s,"")}catch(y){Ee(e,e.return,y)}}if(n&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,a=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Rx(s,i),Yc(l,a);var u=Yc(l,i);for(a=0;a<c.length;a+=2){var d=c[a],h=c[a+1];d==="style"?Ux(s,h):d==="dangerouslySetInnerHTML"?Ix(s,h):d==="children"?li(s,h):c0(s,d,h,u)}switch(l){case"input":Hc(s,i);break;case"textarea":Lx(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?rs(s,!!i.multiple,p,!1):f!==!!i.multiple&&(i.defaultValue!=null?rs(s,!!i.multiple,i.defaultValue,!0):rs(s,!!i.multiple,i.multiple?[]:"",!1))}s[gi]=i}catch(y){Ee(e,e.return,y)}}break;case 6:if(Lt(t,e),qt(e),n&4){if(e.stateNode===null)throw Error(H(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(y){Ee(e,e.return,y)}}break;case 3:if(Lt(t,e),qt(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{hi(t.containerInfo)}catch(y){Ee(e,e.return,y)}break;case 4:Lt(t,e),qt(e);break;case 13:Lt(t,e),qt(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(z0=Ae())),n&4&&$h(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(Xe=(u=Xe)||d,Lt(t,e),Xe=u):Lt(t,e),qt(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(Y=e,d=e.child;d!==null;){for(h=Y=d;Y!==null;){switch(f=Y,p=f.child,f.tag){case 0:case 11:case 14:case 15:Qs(4,f,f.return);break;case 1:Kn(f,f.return);var g=f.stateNode;if(typeof g.componentWillUnmount=="function"){n=f,r=f.return;try{t=n,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(y){Ee(n,r,y)}}break;case 5:Kn(f,f.return);break;case 22:if(f.memoizedState!==null){Vh(h);continue}}p!==null?(p.return=f,Y=p):Vh(h)}d=d.sibling}e:for(d=null,h=e;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Mx("display",a))}catch(y){Ee(e,e.return,y)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(y){Ee(e,e.return,y)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Lt(t,e),qt(e),n&4&&$h(e);break;case 21:break;default:Lt(t,e),qt(e)}}function qt(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(dg(r)){var n=r;break e}r=r.return}throw Error(H(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(li(s,""),n.flags&=-33);var i=Uh(e);_u(e,i,s);break;case 3:case 4:var a=n.stateNode.containerInfo,l=Uh(e);ku(e,l,a);break;default:throw Error(H(161))}}catch(c){Ee(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function m2(e,t,r){Y=e,pg(e)}function pg(e,t,r){for(var n=(e.mode&1)!==0;Y!==null;){var s=Y,i=s.child;if(s.tag===22&&n){var a=s.memoizedState!==null||la;if(!a){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Xe;l=la;var u=Xe;if(la=a,(Xe=c)&&!u)for(Y=s;Y!==null;)a=Y,c=a.child,a.tag===22&&a.memoizedState!==null?Hh(s):c!==null?(c.return=a,Y=c):Hh(s);for(;i!==null;)Y=i,pg(i),i=i.sibling;Y=s,la=l,Xe=u}zh(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Y=i):zh(e)}}function zh(e){for(;Y!==null;){var t=Y;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Xe||Bo(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Xe)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:It(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Eh(t,i,n);break;case 3:var a=t.updateQueue;if(a!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Eh(t,a,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&hi(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(H(163))}Xe||t.flags&512&&Cu(t)}catch(f){Ee(t,t.return,f)}}if(t===e){Y=null;break}if(r=t.sibling,r!==null){r.return=t.return,Y=r;break}Y=t.return}}function Vh(e){for(;Y!==null;){var t=Y;if(t===e){Y=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Y=r;break}Y=t.return}}function Hh(e){for(;Y!==null;){var t=Y;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Bo(4,t)}catch(c){Ee(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(c){Ee(t,s,c)}}var i=t.return;try{Cu(t)}catch(c){Ee(t,i,c)}break;case 5:var a=t.return;try{Cu(t)}catch(c){Ee(t,a,c)}}}catch(c){Ee(t,t.return,c)}if(t===e){Y=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Y=l;break}Y=t.return}}var g2=Math.ceil,eo=xr.ReactCurrentDispatcher,U0=xr.ReactCurrentOwner,Ft=xr.ReactCurrentBatchConfig,ue=0,ze=null,Te=null,We=0,vt=0,Gn=qr(0),Oe=0,Ci=null,wn=0,Fo=0,$0=0,Xs=null,ct=null,z0=0,xs=1/0,er=null,to=!1,Eu=null,Or=null,ca=!1,Ar=null,ro=0,Zs=0,Nu=null,Aa=-1,Pa=0;function nt(){return ue&6?Ae():Aa!==-1?Aa:Aa=Ae()}function Ir(e){return e.mode&1?ue&2&&We!==0?We&-We:e2.transition!==null?(Pa===0&&(Pa=Zx()),Pa):(e=de,e!==0||(e=window.event,e=e===void 0?16:im(e.type)),e):1}function Vt(e,t,r,n){if(50<Zs)throw Zs=0,Nu=null,Error(H(185));Bi(e,r,n),(!(ue&2)||e!==ze)&&(e===ze&&(!(ue&2)&&(Fo|=r),Oe===4&&Er(e,We)),pt(e,n),r===1&&ue===0&&!(t.mode&1)&&(xs=Ae()+500,Ao&&Kr()))}function pt(e,t){var r=e.callbackNode;ew(e,t);var n=Ma(e,e===ze?We:0);if(n===0)r!==null&&Jd(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&Jd(r),t===1)e.tag===0?Jw(Wh.bind(null,e)):km(Wh.bind(null,e)),Yw(function(){!(ue&6)&&Kr()}),r=null;else{switch(Jx(n)){case 1:r=p0;break;case 4:r=Qx;break;case 16:r=Ia;break;case 536870912:r=Xx;break;default:r=Ia}r=jg(r,xg.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function xg(e,t){if(Aa=-1,Pa=0,ue&6)throw Error(H(327));var r=e.callbackNode;if(os()&&e.callbackNode!==r)return null;var n=Ma(e,e===ze?We:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=no(e,n);else{t=n;var s=ue;ue|=2;var i=gg();(ze!==e||We!==t)&&(er=null,xs=Ae()+500,hn(e,t));do try{w2();break}catch(l){mg(e,l)}while(!0);N0(),eo.current=i,ue=s,Te!==null?t=0:(ze=null,We=0,t=Oe)}if(t!==0){if(t===2&&(s=eu(e),s!==0&&(n=s,t=Su(e,s))),t===1)throw r=Ci,hn(e,0),Er(e,n),pt(e,Ae()),r;if(t===6)Er(e,n);else{if(s=e.current.alternate,!(n&30)&&!v2(s)&&(t=no(e,n),t===2&&(i=eu(e),i!==0&&(n=i,t=Su(e,i))),t===1))throw r=Ci,hn(e,0),Er(e,n),pt(e,Ae()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(H(345));case 2:tn(e,ct,er);break;case 3:if(Er(e,n),(n&130023424)===n&&(t=z0+500-Ae(),10<t)){if(Ma(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){nt(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=lu(tn.bind(null,e,ct,er),t);break}tn(e,ct,er);break;case 4:if(Er(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var a=31-zt(n);i=1<<a,a=t[a],a>s&&(s=a),n&=~i}if(n=s,n=Ae()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*g2(n/1960))-n,10<n){e.timeoutHandle=lu(tn.bind(null,e,ct,er),n);break}tn(e,ct,er);break;case 5:tn(e,ct,er);break;default:throw Error(H(329))}}}return pt(e,Ae()),e.callbackNode===r?xg.bind(null,e):null}function Su(e,t){var r=Xs;return e.current.memoizedState.isDehydrated&&(hn(e,t).flags|=256),e=no(e,t),e!==2&&(t=ct,ct=r,t!==null&&Au(t)),e}function Au(e){ct===null?ct=e:ct.push.apply(ct,e)}function v2(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!Ht(i(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Er(e,t){for(t&=~$0,t&=~Fo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-zt(t),n=1<<r;e[r]=-1,t&=~n}}function Wh(e){if(ue&6)throw Error(H(327));os();var t=Ma(e,0);if(!(t&1))return pt(e,Ae()),null;var r=no(e,t);if(e.tag!==0&&r===2){var n=eu(e);n!==0&&(t=n,r=Su(e,n))}if(r===1)throw r=Ci,hn(e,0),Er(e,t),pt(e,Ae()),r;if(r===6)throw Error(H(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,tn(e,ct,er),pt(e,Ae()),null}function V0(e,t){var r=ue;ue|=1;try{return e(t)}finally{ue=r,ue===0&&(xs=Ae()+500,Ao&&Kr())}}function bn(e){Ar!==null&&Ar.tag===0&&!(ue&6)&&os();var t=ue;ue|=1;var r=Ft.transition,n=de;try{if(Ft.transition=null,de=1,e)return e()}finally{de=n,Ft.transition=r,ue=t,!(ue&6)&&Kr()}}function H0(){vt=Gn.current,ye(Gn)}function hn(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Gw(r)),Te!==null)for(r=Te.return;r!==null;){var n=r;switch(k0(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Ha();break;case 3:fs(),ye(ht),ye(Ze),F0();break;case 5:B0(n);break;case 4:fs();break;case 13:ye(je);break;case 19:ye(je);break;case 10:S0(n.type._context);break;case 22:case 23:H0()}r=r.return}if(ze=e,Te=e=Mr(e.current,null),We=vt=t,Oe=0,Ci=null,$0=Fo=wn=0,ct=Xs=null,cn!==null){for(t=0;t<cn.length;t++)if(r=cn[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var a=i.next;i.next=s,n.next=a}r.pending=n}cn=null}return e}function mg(e,t){do{var r=Te;try{if(N0(),Ea.current=Ja,Za){for(var n=ke.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Za=!1}if(yn=0,$e=Le=ke=null,Ys=!1,wi=0,U0.current=null,r===null||r.return===null){Oe=1,Ci=t,Te=null;break}e:{var i=e,a=r.return,l=r,c=t;if(t=We,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=Bh(a);if(p!==null){p.flags&=-257,Fh(p,a,l,i,t),p.mode&1&&Dh(i,u,t),t=p,c=u;var g=t.updateQueue;if(g===null){var y=new Set;y.add(c),t.updateQueue=y}else g.add(c);break e}else{if(!(t&1)){Dh(i,u,t),W0();break e}c=Error(H(426))}}else if(we&&l.mode&1){var w=Bh(a);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Fh(w,a,l,i,t),_0(ps(c,l));break e}}i=c=ps(c,l),Oe!==4&&(Oe=2),Xs===null?Xs=[i]:Xs.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var v=Jm(i,c,t);_h(i,v);break e;case 1:l=c;var x=i.type,m=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Or===null||!Or.has(m)))){i.flags|=65536,t&=-t,i.lanes|=t;var b=eg(i,l,t);_h(i,b);break e}}i=i.return}while(i!==null)}yg(r)}catch(j){t=j,Te===r&&r!==null&&(Te=r=r.return);continue}break}while(!0)}function gg(){var e=eo.current;return eo.current=Ja,e===null?Ja:e}function W0(){(Oe===0||Oe===3||Oe===2)&&(Oe=4),ze===null||!(wn&268435455)&&!(Fo&268435455)||Er(ze,We)}function no(e,t){var r=ue;ue|=2;var n=gg();(ze!==e||We!==t)&&(er=null,hn(e,t));do try{y2();break}catch(s){mg(e,s)}while(!0);if(N0(),ue=r,eo.current=n,Te!==null)throw Error(H(261));return ze=null,We=0,Oe}function y2(){for(;Te!==null;)vg(Te)}function w2(){for(;Te!==null&&!W1();)vg(Te)}function vg(e){var t=bg(e.alternate,e,vt);e.memoizedProps=e.pendingProps,t===null?yg(e):Te=t,U0.current=null}function yg(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=f2(r,t),r!==null){r.flags&=32767,Te=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Oe=6,Te=null;return}}else if(r=h2(r,t,vt),r!==null){Te=r;return}if(t=t.sibling,t!==null){Te=t;return}Te=t=e}while(t!==null);Oe===0&&(Oe=5)}function tn(e,t,r){var n=de,s=Ft.transition;try{Ft.transition=null,de=1,b2(e,t,r,n)}finally{Ft.transition=s,de=n}return null}function b2(e,t,r,n){do os();while(Ar!==null);if(ue&6)throw Error(H(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(H(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(tw(e,i),e===ze&&(Te=ze=null,We=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||ca||(ca=!0,jg(Ia,function(){return os(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Ft.transition,Ft.transition=null;var a=de;de=1;var l=ue;ue|=4,U0.current=null,x2(e,r),fg(r,e),$w(au),Ua=!!iu,au=iu=null,e.current=r,m2(r),q1(),ue=l,de=a,Ft.transition=i}else e.current=r;if(ca&&(ca=!1,Ar=e,ro=s),i=e.pendingLanes,i===0&&(Or=null),Y1(r.stateNode),pt(e,Ae()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(to)throw to=!1,e=Eu,Eu=null,e;return ro&1&&e.tag!==0&&os(),i=e.pendingLanes,i&1?e===Nu?Zs++:(Zs=0,Nu=e):Zs=0,Kr(),null}function os(){if(Ar!==null){var e=Jx(ro),t=Ft.transition,r=de;try{if(Ft.transition=null,de=16>e?16:e,Ar===null)var n=!1;else{if(e=Ar,Ar=null,ro=0,ue&6)throw Error(H(331));var s=ue;for(ue|=4,Y=e.current;Y!==null;){var i=Y,a=i.child;if(Y.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(Y=u;Y!==null;){var d=Y;switch(d.tag){case 0:case 11:case 15:Qs(8,d,i)}var h=d.child;if(h!==null)h.return=d,Y=h;else for(;Y!==null;){d=Y;var f=d.sibling,p=d.return;if(ug(d),d===u){Y=null;break}if(f!==null){f.return=p,Y=f;break}Y=p}}}var g=i.alternate;if(g!==null){var y=g.child;if(y!==null){g.child=null;do{var w=y.sibling;y.sibling=null,y=w}while(y!==null)}}Y=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,Y=a;else e:for(;Y!==null;){if(i=Y,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Qs(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,Y=v;break e}Y=i.return}}var x=e.current;for(Y=x;Y!==null;){a=Y;var m=a.child;if(a.subtreeFlags&2064&&m!==null)m.return=a,Y=m;else e:for(a=x;Y!==null;){if(l=Y,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Bo(9,l)}}catch(j){Ee(l,l.return,j)}if(l===a){Y=null;break e}var b=l.sibling;if(b!==null){b.return=l.return,Y=b;break e}Y=l.return}}if(ue=s,Kr(),Yt&&typeof Yt.onPostCommitFiberRoot=="function")try{Yt.onPostCommitFiberRoot(ko,e)}catch{}n=!0}return n}finally{de=r,Ft.transition=t}}return!1}function qh(e,t,r){t=ps(r,t),t=Jm(e,t,1),e=Lr(e,t,1),t=nt(),e!==null&&(Bi(e,1,t),pt(e,t))}function Ee(e,t,r){if(e.tag===3)qh(e,e,r);else for(;t!==null;){if(t.tag===3){qh(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Or===null||!Or.has(n))){e=ps(r,e),e=eg(t,e,1),t=Lr(t,e,1),e=nt(),t!==null&&(Bi(t,1,e),pt(t,e));break}}t=t.return}}function j2(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=nt(),e.pingedLanes|=e.suspendedLanes&r,ze===e&&(We&r)===r&&(Oe===4||Oe===3&&(We&130023424)===We&&500>Ae()-z0?hn(e,0):$0|=r),pt(e,t)}function wg(e,t){t===0&&(e.mode&1?(t=Ji,Ji<<=1,!(Ji&130023424)&&(Ji=4194304)):t=1);var r=nt();e=hr(e,t),e!==null&&(Bi(e,t,r),pt(e,r))}function C2(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),wg(e,r)}function k2(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(H(314))}n!==null&&n.delete(t),wg(e,r)}var bg;bg=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||ht.current)dt=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return dt=!1,d2(e,t,r);dt=!!(e.flags&131072)}else dt=!1,we&&t.flags&1048576&&_m(t,Ka,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Sa(e,t),e=t.pendingProps;var s=us(t,Ze.current);as(t,r),s=R0(null,t,n,e,s,r);var i=L0();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ft(n)?(i=!0,Wa(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,P0(t),s.updater=Do,t.stateNode=s,s._reactInternals=t,xu(t,n,e,r),t=vu(null,t,n,!0,i,r)):(t.tag=0,we&&i&&C0(t),rt(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Sa(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=E2(n),e=It(n,e),s){case 0:t=gu(null,t,n,e,r);break e;case 1:t=Lh(null,t,n,e,r);break e;case 11:t=Th(null,t,n,e,r);break e;case 14:t=Rh(null,t,n,It(n.type,e),r);break e}throw Error(H(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:It(n,s),gu(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:It(n,s),Lh(e,t,n,s,r);case 3:e:{if(sg(t),e===null)throw Error(H(387));n=t.pendingProps,i=t.memoizedState,s=i.element,Dm(e,t),Qa(t,n,null,r);var a=t.memoizedState;if(n=a.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=ps(Error(H(423)),t),t=Oh(e,t,n,r,s);break e}else if(n!==s){s=ps(Error(H(424)),t),t=Oh(e,t,n,r,s);break e}else for(yt=Rr(t.stateNode.containerInfo.firstChild),wt=t,we=!0,$t=null,r=Am(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(ds(),n===s){t=fr(e,t,r);break e}rt(e,t,n,r)}t=t.child}return t;case 5:return Bm(t),e===null&&hu(t),n=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,a=s.children,ou(n,s)?a=null:i!==null&&ou(n,i)&&(t.flags|=32),ng(e,t),rt(e,t,a,r),t.child;case 6:return e===null&&hu(t),null;case 13:return ig(e,t,r);case 4:return D0(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=hs(t,null,n,r):rt(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:It(n,s),Th(e,t,n,s,r);case 7:return rt(e,t,t.pendingProps,r),t.child;case 8:return rt(e,t,t.pendingProps.children,r),t.child;case 12:return rt(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,i=t.memoizedProps,a=s.value,me(Ga,n._currentValue),n._currentValue=a,i!==null)if(Ht(i.value,a)){if(i.children===s.children&&!ht.current){t=fr(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=ar(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),fu(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)a=i.type===t.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(H(341));a.lanes|=r,l=a.alternate,l!==null&&(l.lanes|=r),fu(a,r,t),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===t){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}rt(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,as(t,r),s=Tt(s),n=n(s),t.flags|=1,rt(e,t,n,r),t.child;case 14:return n=t.type,s=It(n,t.pendingProps),s=It(n.type,s),Rh(e,t,n,s,r);case 15:return tg(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:It(n,s),Sa(e,t),t.tag=1,ft(n)?(e=!0,Wa(t)):e=!1,as(t,r),Zm(t,n,s),xu(t,n,s,r),vu(null,t,n,!0,e,r);case 19:return ag(e,t,r);case 22:return rg(e,t,r)}throw Error(H(156,t.tag))};function jg(e,t){return Yx(e,t)}function _2(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bt(e,t,r,n){return new _2(e,t,r,n)}function q0(e){return e=e.prototype,!(!e||!e.isReactComponent)}function E2(e){if(typeof e=="function")return q0(e)?1:0;if(e!=null){if(e=e.$$typeof,e===d0)return 11;if(e===h0)return 14}return 2}function Mr(e,t){var r=e.alternate;return r===null?(r=Bt(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Da(e,t,r,n,s,i){var a=2;if(n=e,typeof e=="function")q0(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case In:return fn(r.children,s,i,t);case u0:a=8,s|=8;break;case Mc:return e=Bt(12,r,t,s|2),e.elementType=Mc,e.lanes=i,e;case Uc:return e=Bt(13,r,t,s),e.elementType=Uc,e.lanes=i,e;case $c:return e=Bt(19,r,t,s),e.elementType=$c,e.lanes=i,e;case Bx:return To(r,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Px:a=10;break e;case Dx:a=9;break e;case d0:a=11;break e;case h0:a=14;break e;case br:a=16,n=null;break e}throw Error(H(130,e==null?e:typeof e,""))}return t=Bt(a,r,t,s),t.elementType=e,t.type=n,t.lanes=i,t}function fn(e,t,r,n){return e=Bt(7,e,n,t),e.lanes=r,e}function To(e,t,r,n){return e=Bt(22,e,n,t),e.elementType=Bx,e.lanes=r,e.stateNode={isHidden:!1},e}function Dl(e,t,r){return e=Bt(6,e,null,t),e.lanes=r,e}function Bl(e,t,r){return t=Bt(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function N2(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=hl(0),this.expirationTimes=hl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hl(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function K0(e,t,r,n,s,i,a,l,c){return e=new N2(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Bt(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},P0(i),e}function S2(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:On,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function Cg(e){if(!e)return zr;e=e._reactInternals;e:{if(Cn(e)!==e||e.tag!==1)throw Error(H(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ft(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(H(171))}if(e.tag===1){var r=e.type;if(ft(r))return Cm(e,r,t)}return t}function kg(e,t,r,n,s,i,a,l,c){return e=K0(r,n,!0,e,s,i,a,l,c),e.context=Cg(null),r=e.current,n=nt(),s=Ir(r),i=ar(n,s),i.callback=t??null,Lr(r,i,s),e.current.lanes=s,Bi(e,s,n),pt(e,n),e}function Ro(e,t,r,n){var s=t.current,i=nt(),a=Ir(s);return r=Cg(r),t.context===null?t.context=r:t.pendingContext=r,t=ar(i,a),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Lr(s,t,a),e!==null&&(Vt(e,s,a,i),_a(e,s,a)),a}function so(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Kh(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function G0(e,t){Kh(e,t),(e=e.alternate)&&Kh(e,t)}function A2(){return null}var _g=typeof reportError=="function"?reportError:function(e){console.error(e)};function Y0(e){this._internalRoot=e}Lo.prototype.render=Y0.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(H(409));Ro(e,t,null,null)};Lo.prototype.unmount=Y0.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;bn(function(){Ro(null,e,null,null)}),t[dr]=null}};function Lo(e){this._internalRoot=e}Lo.prototype.unstable_scheduleHydration=function(e){if(e){var t=rm();e={blockedOn:null,target:e,priority:t};for(var r=0;r<_r.length&&t!==0&&t<_r[r].priority;r++);_r.splice(r,0,e),r===0&&sm(e)}};function Q0(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Oo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Gh(){}function P2(e,t,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var u=so(a);i.call(u)}}var a=kg(t,n,e,0,null,!1,!1,"",Gh);return e._reactRootContainer=a,e[dr]=a.current,xi(e.nodeType===8?e.parentNode:e),bn(),a}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var u=so(c);l.call(u)}}var c=K0(e,0,!1,null,null,!1,!1,"",Gh);return e._reactRootContainer=c,e[dr]=c.current,xi(e.nodeType===8?e.parentNode:e),bn(function(){Ro(t,c,r,n)}),c}function Io(e,t,r,n,s){var i=r._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var l=s;s=function(){var c=so(a);l.call(c)}}Ro(t,a,e,s)}else a=P2(r,t,e,s,n);return so(a)}em=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Us(t.pendingLanes);r!==0&&(x0(t,r|1),pt(t,Ae()),!(ue&6)&&(xs=Ae()+500,Kr()))}break;case 13:bn(function(){var n=hr(e,1);if(n!==null){var s=nt();Vt(n,e,1,s)}}),G0(e,1)}};m0=function(e){if(e.tag===13){var t=hr(e,134217728);if(t!==null){var r=nt();Vt(t,e,134217728,r)}G0(e,134217728)}};tm=function(e){if(e.tag===13){var t=Ir(e),r=hr(e,t);if(r!==null){var n=nt();Vt(r,e,t,n)}G0(e,t)}};rm=function(){return de};nm=function(e,t){var r=de;try{return de=e,t()}finally{de=r}};Xc=function(e,t,r){switch(t){case"input":if(Hc(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=So(n);if(!s)throw Error(H(90));Tx(n),Hc(n,s)}}}break;case"textarea":Lx(e,r);break;case"select":t=r.value,t!=null&&rs(e,!!r.multiple,t,!1)}};Vx=V0;Hx=bn;var D2={usingClientEntryPoint:!1,Events:[Ti,zn,So,$x,zx,V0]},Ts={findFiberByHostInstance:ln,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},B2={bundleType:Ts.bundleType,version:Ts.version,rendererPackageName:Ts.rendererPackageName,rendererConfig:Ts.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:xr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Kx(e),e===null?null:e.stateNode},findFiberByHostInstance:Ts.findFiberByHostInstance||A2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ua=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ua.isDisabled&&ua.supportsFiber)try{ko=ua.inject(B2),Yt=ua}catch{}}Ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D2;Ct.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Q0(t))throw Error(H(200));return S2(e,t,null,r)};Ct.createRoot=function(e,t){if(!Q0(e))throw Error(H(299));var r=!1,n="",s=_g;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=K0(e,1,!1,null,null,r,!1,n,s),e[dr]=t.current,xi(e.nodeType===8?e.parentNode:e),new Y0(t)};Ct.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(H(188)):(e=Object.keys(e).join(","),Error(H(268,e)));return e=Kx(t),e=e===null?null:e.stateNode,e};Ct.flushSync=function(e){return bn(e)};Ct.hydrate=function(e,t,r){if(!Oo(t))throw Error(H(200));return Io(null,e,t,!0,r)};Ct.hydrateRoot=function(e,t,r){if(!Q0(e))throw Error(H(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",a=_g;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),t=kg(t,null,e,1,r??null,s,!1,i,a),e[dr]=t.current,xi(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new Lo(t)};Ct.render=function(e,t,r){if(!Oo(t))throw Error(H(200));return Io(null,e,t,!1,r)};Ct.unmountComponentAtNode=function(e){if(!Oo(e))throw Error(H(40));return e._reactRootContainer?(bn(function(){Io(null,null,e,!1,function(){e._reactRootContainer=null,e[dr]=null})}),!0):!1};Ct.unstable_batchedUpdates=V0;Ct.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Oo(r))throw Error(H(200));if(e==null||e._reactInternals===void 0)throw Error(H(38));return Io(e,t,r,!1,n)};Ct.version="18.3.1-next-f1338f8080-20240426";function Eg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Eg)}catch(e){console.error(e)}}Eg(),Ex.exports=Ct;var F2=Ex.exports,Ng,Yh=F2;Ng=Yh.createRoot,Yh.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ki(){return ki=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ki.apply(this,arguments)}var Pr;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Pr||(Pr={}));const Qh="popstate";function T2(e){e===void 0&&(e={});function t(n,s){let{pathname:i,search:a,hash:l}=n.location;return Pu("",{pathname:i,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:Ag(s)}return L2(t,r,null,e)}function Re(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Sg(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function R2(){return Math.random().toString(36).substr(2,8)}function Xh(e,t){return{usr:e.state,key:e.key,idx:t}}function Pu(e,t,r,n){return r===void 0&&(r=null),ki({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?js(t):t,{state:r,key:t&&t.key||n||R2()})}function Ag(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function js(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function L2(e,t,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:i=!1}=n,a=s.history,l=Pr.Pop,c=null,u=d();u==null&&(u=0,a.replaceState(ki({},a.state,{idx:u}),""));function d(){return(a.state||{idx:null}).idx}function h(){l=Pr.Pop;let w=d(),v=w==null?null:w-u;u=w,c&&c({action:l,location:y.location,delta:v})}function f(w,v){l=Pr.Push;let x=Pu(y.location,w,v);u=d()+1;let m=Xh(x,u),b=y.createHref(x);try{a.pushState(m,"",b)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;s.location.assign(b)}i&&c&&c({action:l,location:y.location,delta:1})}function p(w,v){l=Pr.Replace;let x=Pu(y.location,w,v);u=d();let m=Xh(x,u),b=y.createHref(x);a.replaceState(m,"",b),i&&c&&c({action:l,location:y.location,delta:0})}function g(w){let v=s.location.origin!=="null"?s.location.origin:s.location.href,x=typeof w=="string"?w:Ag(w);return x=x.replace(/ $/,"%20"),Re(v,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,v)}let y={get action(){return l},get location(){return e(s,a)},listen(w){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Qh,h),c=w,()=>{s.removeEventListener(Qh,h),c=null}},createHref(w){return t(s,w)},createURL:g,encodeLocation(w){let v=g(w);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:f,replace:p,go(w){return a.go(w)}};return y}var Zh;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Zh||(Zh={}));function O2(e,t,r){return r===void 0&&(r="/"),I2(e,t,r,!1)}function I2(e,t,r,n){let s=typeof t=="string"?js(t):t,i=Bg(s.pathname||"/",r);if(i==null)return null;let a=Pg(e);M2(a);let l=null;for(let c=0;l==null&&c<a.length;++c){let u=Q2(i);l=G2(a[c],u,n)}return l}function Pg(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(i,a,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};c.relativePath.startsWith("/")&&(Re(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=pn([n,c.relativePath]),d=r.concat(c);i.children&&i.children.length>0&&(Re(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Pg(i.children,t,d,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:q2(u,i.index),routesMeta:d})};return e.forEach((i,a)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,a);else for(let c of Dg(i.path))s(i,a,c)}),t}function Dg(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let a=Dg(n.join("/")),l=[];return l.push(...a.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...a),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function M2(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:K2(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const U2=/^:[\w-]+$/,$2=3,z2=2,V2=1,H2=10,W2=-2,Jh=e=>e==="*";function q2(e,t){let r=e.split("/"),n=r.length;return r.some(Jh)&&(n+=W2),t&&(n+=z2),r.filter(s=>!Jh(s)).reduce((s,i)=>s+(U2.test(i)?$2:i===""?V2:H2),n)}function K2(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function G2(e,t,r){let{routesMeta:n}=e,s={},i="/",a=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,d=i==="/"?t:t.slice(i.length)||"/",h=ef({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),f=c.route;if(!h&&u&&r&&!n[n.length-1].route.index&&(h=ef({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!h)return null;Object.assign(s,h.params),a.push({params:s,pathname:pn([i,h.pathname]),pathnameBase:eb(pn([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=pn([i,h.pathnameBase]))}return a}function ef(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=Y2(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((u,d,h)=>{let{paramName:f,isOptional:p}=d;if(f==="*"){let y=l[h]||"";a=i.slice(0,i.length-y.length).replace(/(.)\/+$/,"$1")}const g=l[h];return p&&!g?u[f]=void 0:u[f]=(g||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:a,pattern:e}}function Y2(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),Sg(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function Q2(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Sg(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Bg(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function X2(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?js(e):e;return{pathname:r?r.startsWith("/")?r:Z2(r,t):t,search:tb(n),hash:rb(s)}}function Z2(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function Fl(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function J2(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Fg(e,t){let r=J2(e);return t?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function Tg(e,t,r,n){n===void 0&&(n=!1);let s;typeof e=="string"?s=js(e):(s=ki({},e),Re(!s.pathname||!s.pathname.includes("?"),Fl("?","pathname","search",s)),Re(!s.pathname||!s.pathname.includes("#"),Fl("#","pathname","hash",s)),Re(!s.search||!s.search.includes("#"),Fl("#","search","hash",s)));let i=e===""||s.pathname==="",a=i?"/":s.pathname,l;if(a==null)l=r;else{let h=t.length-1;if(!n&&a.startsWith("..")){let f=a.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}l=h>=0?t[h]:"/"}let c=X2(s,l),u=a&&a!=="/"&&a.endsWith("/"),d=(i||a===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const pn=e=>e.join("/").replace(/\/\/+/g,"/"),eb=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),tb=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,rb=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function nb(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Rg=["post","put","patch","delete"];new Set(Rg);const sb=["get",...Rg];new Set(sb);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _i(){return _i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_i.apply(this,arguments)}const X0=N.createContext(null),ib=N.createContext(null),Li=N.createContext(null),Mo=N.createContext(null),kn=N.createContext({outlet:null,matches:[],isDataRoute:!1}),Lg=N.createContext(null);function Oi(){return N.useContext(Mo)!=null}function Cs(){return Oi()||Re(!1),N.useContext(Mo).location}function Og(e){N.useContext(Li).static||N.useLayoutEffect(e)}function Uo(){let{isDataRoute:e}=N.useContext(kn);return e?vb():ab()}function ab(){Oi()||Re(!1);let e=N.useContext(X0),{basename:t,future:r,navigator:n}=N.useContext(Li),{matches:s}=N.useContext(kn),{pathname:i}=Cs(),a=JSON.stringify(Fg(s,r.v7_relativeSplatPath)),l=N.useRef(!1);return Og(()=>{l.current=!0}),N.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){n.go(u);return}let h=Tg(u,JSON.parse(a),i,d.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:pn([t,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[t,n,a,i,e])}function ob(e,t){return lb(e,t)}function lb(e,t,r,n){Oi()||Re(!1);let{navigator:s}=N.useContext(Li),{matches:i}=N.useContext(kn),a=i[i.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let u=Cs(),d;if(t){var h;let w=typeof t=="string"?js(t):t;c==="/"||(h=w.pathname)!=null&&h.startsWith(c)||Re(!1),d=w}else d=u;let f=d.pathname||"/",p=f;if(c!=="/"){let w=c.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(w.length).join("/")}let g=O2(e,{pathname:p}),y=fb(g&&g.map(w=>Object.assign({},w,{params:Object.assign({},l,w.params),pathname:pn([c,s.encodeLocation?s.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:pn([c,s.encodeLocation?s.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,r,n);return t&&y?N.createElement(Mo.Provider,{value:{location:_i({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Pr.Pop}},y):y}function cb(){let e=gb(),t=nb(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},t),r?N.createElement("pre",{style:s},r):null,null)}const ub=N.createElement(cb,null);class db extends N.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?N.createElement(kn.Provider,{value:this.props.routeContext},N.createElement(Lg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function hb(e){let{routeContext:t,match:r,children:n}=e,s=N.useContext(X0);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),N.createElement(kn.Provider,{value:t},n)}function fb(e,t,r,n){var s;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let a=e,l=(s=r)==null?void 0:s.errors;if(l!=null){let d=a.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);d>=0||Re(!1),a=a.slice(0,Math.min(a.length,d+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<a.length;d++){let h=a[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:f,errors:p}=r,g=h.route.loader&&f[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||g){c=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((d,h,f)=>{let p,g=!1,y=null,w=null;r&&(p=l&&h.route.id?l[h.route.id]:void 0,y=h.route.errorElement||ub,c&&(u<0&&f===0?(g=!0,w=null):u===f&&(g=!0,w=h.route.hydrateFallbackElement||null)));let v=t.concat(a.slice(0,f+1)),x=()=>{let m;return p?m=y:g?m=w:h.route.Component?m=N.createElement(h.route.Component,null):h.route.element?m=h.route.element:m=d,N.createElement(hb,{match:h,routeContext:{outlet:d,matches:v,isDataRoute:r!=null},children:m})};return r&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?N.createElement(db,{location:r.location,revalidation:r.revalidation,component:y,error:p,children:x(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):x()},null)}var Ig=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Ig||{}),io=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(io||{});function pb(e){let t=N.useContext(X0);return t||Re(!1),t}function xb(e){let t=N.useContext(ib);return t||Re(!1),t}function mb(e){let t=N.useContext(kn);return t||Re(!1),t}function Mg(e){let t=mb(),r=t.matches[t.matches.length-1];return r.route.id||Re(!1),r.route.id}function gb(){var e;let t=N.useContext(Lg),r=xb(io.UseRouteError),n=Mg(io.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function vb(){let{router:e}=pb(Ig.UseNavigateStable),t=Mg(io.UseNavigateStable),r=N.useRef(!1);return Og(()=>{r.current=!0}),N.useCallback(function(s,i){i===void 0&&(i={}),r.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,_i({fromRouteId:t},i)))},[e,t])}function yb(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Tl(e){let{to:t,replace:r,state:n,relative:s}=e;Oi()||Re(!1);let{future:i,static:a}=N.useContext(Li),{matches:l}=N.useContext(kn),{pathname:c}=Cs(),u=Uo(),d=Tg(t,Fg(l,i.v7_relativeSplatPath),c,s==="path"),h=JSON.stringify(d);return N.useEffect(()=>u(JSON.parse(h),{replace:r,state:n,relative:s}),[u,h,s,r,n]),null}function gt(e){Re(!1)}function wb(e){let{basename:t="/",children:r=null,location:n,navigationType:s=Pr.Pop,navigator:i,static:a=!1,future:l}=e;Oi()&&Re(!1);let c=t.replace(/^\/*/,"/"),u=N.useMemo(()=>({basename:c,navigator:i,static:a,future:_i({v7_relativeSplatPath:!1},l)}),[c,l,i,a]);typeof n=="string"&&(n=js(n));let{pathname:d="/",search:h="",hash:f="",state:p=null,key:g="default"}=n,y=N.useMemo(()=>{let w=Bg(d,c);return w==null?null:{location:{pathname:w,search:h,hash:f,state:p,key:g},navigationType:s}},[c,d,h,f,p,g,s]);return y==null?null:N.createElement(Li.Provider,{value:u},N.createElement(Mo.Provider,{children:r,value:y}))}function tf(e){let{children:t,location:r}=e;return ob(Du(t),r)}new Promise(()=>{});function Du(e,t){t===void 0&&(t=[]);let r=[];return N.Children.forEach(e,(n,s)=>{if(!N.isValidElement(n))return;let i=[...t,s];if(n.type===N.Fragment){r.push.apply(r,Du(n.props.children,i));return}n.type!==gt&&Re(!1),!n.props.index||!n.props.children||Re(!1);let a={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=Du(n.props.children,i)),r.push(a)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const bb="6";try{window.__reactRouterVersion=bb}catch{}const jb="startTransition",rf=j1[jb];function Cb(e){let{basename:t,children:r,future:n,window:s}=e,i=N.useRef();i.current==null&&(i.current=T2({window:s,v5Compat:!0}));let a=i.current,[l,c]=N.useState({action:a.action,location:a.location}),{v7_startTransition:u}=n||{},d=N.useCallback(h=>{u&&rf?rf(()=>c(h)):c(h)},[c,u]);return N.useLayoutEffect(()=>a.listen(d),[a,d]),N.useEffect(()=>yb(n),[n]),N.createElement(wb,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:a,future:n})}var nf;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(nf||(nf={}));var sf;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(sf||(sf={}));const kb="modulepreload",_b=function(e){return"/"+e},af={},Ii=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(r.map(c=>{if(c=_b(c),c in af)return;af[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":kb,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((f,p)=>{h.addEventListener("load",f),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return s.then(a=>{for(const l of a||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})},Eb=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Ii(async()=>{const{default:n}=await Promise.resolve().then(()=>ks);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class Z0 extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class Nb extends Z0{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Sb extends Z0{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Ab extends Z0{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Bu;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Bu||(Bu={}));var Pb=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function l(d){try{u(n.next(d))}catch(h){a(h)}}function c(d){try{u(n.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class Db{constructor(t,{headers:r={},customFetch:n,region:s=Bu.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=Eb(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var n;return Pb(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:a}=r;let l={},{region:c}=r;c||(c=this.region),c&&c!=="any"&&(l["x-region"]=c);let u;a&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",u=a):typeof a=="string"?(l["Content-Type"]="text/plain",u=a):typeof FormData<"u"&&a instanceof FormData?u=a:(l["Content-Type"]="application/json",u=JSON.stringify(a)));const d=yield this.fetch(`${this.url}/${t}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:u}).catch(g=>{throw new Nb(g)}),h=d.headers.get("x-relay-error");if(h&&h==="true")throw new Sb(d);if(!d.ok)throw new Ab(d);let f=((n=d.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),p;return f==="application/json"?p=yield d.json():f==="application/octet-stream"?p=yield d.blob():f==="text/event-stream"?p=d:f==="multipart/form-data"?p=yield d.formData():p=yield d.text(),{data:p,error:null}}catch(s){return{data:null,error:s}}})}}var ut={},J0={},$o={},Mi={},zo={},Vo={},Bb=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},ms=Bb();const Fb=ms.fetch,Ug=ms.fetch.bind(ms),$g=ms.Headers,Tb=ms.Request,Rb=ms.Response,ks=Object.freeze(Object.defineProperty({__proto__:null,Headers:$g,Request:Tb,Response:Rb,default:Ug,fetch:Fb},Symbol.toStringTag,{value:"Module"})),Lb=px(ks);var Ho={};Object.defineProperty(Ho,"__esModule",{value:!0});let Ob=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Ho.default=Ob;var zg=J&&J.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Vo,"__esModule",{value:!0});const Ib=zg(Lb),Mb=zg(Ho);let Ub=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=Ib.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=Object.assign({},this.headers),this.headers[t]=r,this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var a,l,c;let u=null,d=null,h=null,f=i.status,p=i.statusText;if(i.ok){if(this.method!=="HEAD"){const v=await i.text();v===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=v:d=JSON.parse(v))}const y=(a=this.headers.Prefer)===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),w=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");y&&w&&w.length>1&&(h=parseInt(w[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,h=null,f=406,p="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const y=await i.text();try{u=JSON.parse(y),Array.isArray(u)&&i.status===404&&(d=[],u=null,f=200,p="OK")}catch{i.status===404&&y===""?(f=204,p="No Content"):u={message:y}}if(u&&this.isMaybeSingle&&(!((c=u==null?void 0:u.details)===null||c===void 0)&&c.includes("0 rows"))&&(u=null,f=200,p="OK"),u&&this.shouldThrowOnError)throw new Mb.default(u)}return{error:u,data:d,count:h,status:f,statusText:p}});return this.shouldThrowOnError||(s=s.catch(i=>{var a,l,c;return{error:{message:`${(a=i==null?void 0:i.name)!==null&&a!==void 0?a:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,r)}returns(){return this}overrideTypes(){return this}};Vo.default=Ub;var $b=J&&J.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(zo,"__esModule",{value:!0});const zb=$b(Vo);let Vb=class extends zb.default{select(t){let r=!1;const n=(t??"*").split("").map(s=>/\s/.test(s)&&!r?"":(s==='"'&&(r=!r),s)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:r=!0,nullsFirst:n,foreignTable:s,referencedTable:i=s}={}){const a=i?`${i}.order`:"order",l=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${l?`${l},`:""}${t}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,r,{foreignTable:n,referencedTable:s=n}={}){const i=typeof s>"u"?"offset":`${s}.offset`,a=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(a,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:r=!1,settings:n=!1,buffers:s=!1,wal:i=!1,format:a="text"}={}){var l;const c=[t?"analyze":null,r?"verbose":null,n?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${a}; for="${u}"; options=${c};`,a==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};zo.default=Vb;var Hb=J&&J.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Mi,"__esModule",{value:!0});const Wb=Hb(zo);let qb=class extends Wb.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const n=Array.from(new Set(r)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:n,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const a=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${i}fts${a}.${r}`),this}match(t){return Object.entries(t).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(t,r,n){return this.url.searchParams.append(t,`not.${r}.${n}`),this}or(t,{foreignTable:r,referencedTable:n=r}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,r,n){return this.url.searchParams.append(t,`${r}.${n}`),this}};Mi.default=qb;var Kb=J&&J.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty($o,"__esModule",{value:!0});const Rs=Kb(Mi);let Gb=class{constructor(t,{headers:r={},schema:n,fetch:s}){this.url=t,this.headers=r,this.schema=n,this.fetch=s}select(t,{head:r=!1,count:n}={}){const s=r?"HEAD":"GET";let i=!1;const a=(t??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",a),n&&(this.headers.Prefer=`count=${n}`),new Rs.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:r,defaultToNull:n=!0}={}){const s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),r&&i.push(`count=${r}`),n||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(t)){const a=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(a.length>0){const l=[...new Set(a)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Rs.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:r,ignoreDuplicates:n=!1,count:s,defaultToNull:i=!0}={}){const a="POST",l=[`resolution=${n?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&l.push(this.headers.Prefer),s&&l.push(`count=${s}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(t)){const c=t.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new Rs.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:r}={}){const n="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),r&&s.push(`count=${r}`),this.headers.Prefer=s.join(","),new Rs.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const r="DELETE",n=[];return t&&n.push(`count=${t}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new Rs.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};$o.default=Gb;var Wo={},qo={};Object.defineProperty(qo,"__esModule",{value:!0});qo.version=void 0;qo.version="0.0.0-automated";Object.defineProperty(Wo,"__esModule",{value:!0});Wo.DEFAULT_HEADERS=void 0;const Yb=qo;Wo.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Yb.version}`};var Vg=J&&J.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(J0,"__esModule",{value:!0});const Qb=Vg($o),Xb=Vg(Mi),Zb=Wo;let Jb=class Hg{constructor(t,{headers:r={},schema:n,fetch:s}={}){this.url=t,this.headers=Object.assign(Object.assign({},Zb.DEFAULT_HEADERS),r),this.schemaName=n,this.fetch=s}from(t){const r=new URL(`${this.url}/${t}`);return new Qb.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new Hg(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:s=!1,count:i}={}){let a;const l=new URL(`${this.url}/rpc/${t}`);let c;n||s?(a=n?"HEAD":"GET",Object.entries(r).filter(([d,h])=>h!==void 0).map(([d,h])=>[d,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([d,h])=>{l.searchParams.append(d,h)})):(a="POST",c=r);const u=Object.assign({},this.headers);return i&&(u.Prefer=`count=${i}`),new Xb.default({method:a,url:l,headers:u,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};J0.default=Jb;var _s=J&&J.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ut,"__esModule",{value:!0});ut.PostgrestError=ut.PostgrestBuilder=ut.PostgrestTransformBuilder=ut.PostgrestFilterBuilder=ut.PostgrestQueryBuilder=ut.PostgrestClient=void 0;const Wg=_s(J0);ut.PostgrestClient=Wg.default;const qg=_s($o);ut.PostgrestQueryBuilder=qg.default;const Kg=_s(Mi);ut.PostgrestFilterBuilder=Kg.default;const Gg=_s(zo);ut.PostgrestTransformBuilder=Gg.default;const Yg=_s(Vo);ut.PostgrestBuilder=Yg.default;const Qg=_s(Ho);ut.PostgrestError=Qg.default;var e4=ut.default={PostgrestClient:Wg.default,PostgrestQueryBuilder:qg.default,PostgrestFilterBuilder:Kg.default,PostgrestTransformBuilder:Gg.default,PostgrestBuilder:Yg.default,PostgrestError:Qg.default};const{PostgrestClient:t4,PostgrestQueryBuilder:T5,PostgrestFilterBuilder:R5,PostgrestTransformBuilder:L5,PostgrestBuilder:O5,PostgrestError:I5}=e4;let Fu;typeof window>"u"?Fu=require("ws"):Fu=window.WebSocket;const r4=Fu,n4="2.11.10",s4={"X-Client-Info":`realtime-js/${n4}`},i4="1.0.0",Xg=1e4,a4=1e3;var ls;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(ls||(ls={}));var et;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(et||(et={}));var Ut;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Ut||(Ut={}));var Tu;(function(e){e.websocket="websocket"})(Tu||(Tu={}));var on;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(on||(on={}));class o4{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const s=r.getUint8(1),i=r.getUint8(2);let a=this.HEADER_LENGTH+2;const l=n.decode(t.slice(a,a+s));a=a+s;const c=n.decode(t.slice(a,a+i));a=a+i;const u=JSON.parse(n.decode(t.slice(a,t.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class Zg{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var xe;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(xe||(xe={}));const of=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((i,a)=>(i[a]=l4(a,e,t,s),i),{})},l4=(e,t,r,n)=>{const s=t.find(l=>l.name===e),i=s==null?void 0:s.type,a=r[e];return i&&!n.includes(i)?Jg(i,a):Ru(a)},Jg=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return h4(t,r)}switch(e){case xe.bool:return c4(t);case xe.float4:case xe.float8:case xe.int2:case xe.int4:case xe.int8:case xe.numeric:case xe.oid:return u4(t);case xe.json:case xe.jsonb:return d4(t);case xe.timestamp:return f4(t);case xe.abstime:case xe.date:case xe.daterange:case xe.int4range:case xe.int8range:case xe.money:case xe.reltime:case xe.text:case xe.time:case xe.timestamptz:case xe.timetz:case xe.tsrange:case xe.tstzrange:return Ru(t);default:return Ru(t)}},Ru=e=>e,c4=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},u4=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},d4=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},h4=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const a=e.slice(1,r);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(l=>Jg(t,l))}return e},f4=e=>typeof e=="string"?e.replace(" ","T"):e,ev=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class Rl{constructor(t,r,n={},s=Xg){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var lf;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(lf||(lf={}));class Js{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Js.syncState(this.state,s,i,a),this.pendingDiffs.forEach(c=>{this.state=Js.syncDiff(this.state,c,i,a)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Js.syncDiff(this.state,s,i,a),l())}),this.onJoin((s,i,a)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:a})}),this.onLeave((s,i,a)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const i=this.cloneDeep(t),a=this.transformState(r),l={},c={};return this.map(i,(u,d)=>{a[u]||(c[u]=d)}),this.map(a,(u,d)=>{const h=i[u];if(h){const f=d.map(w=>w.presence_ref),p=h.map(w=>w.presence_ref),g=d.filter(w=>p.indexOf(w.presence_ref)<0),y=h.filter(w=>f.indexOf(w.presence_ref)<0);g.length>0&&(l[u]=g),y.length>0&&(c[u]=y)}else l[u]=d}),this.syncDiff(i,{joins:l,leaves:c},n,s)}static syncDiff(t,r,n,s){const{joins:i,leaves:a}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(l,c)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),d.length>0){const h=t[l].map(p=>p.presence_ref),f=d.filter(p=>h.indexOf(p.presence_ref)<0);t[l].unshift(...f)}n(l,d,c)}),this.map(a,(l,c)=>{let u=t[l];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),t[l]=u,s(l,u,c),u.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var cf;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(cf||(cf={}));var uf;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(uf||(uf={}));var tr;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(tr||(tr={}));class ed{constructor(t,r={config:{}},n){this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=et.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Rl(this,Ut.join,this.params,this.timeout),this.rejoinTimer=new Zg(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=et.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=et.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=et.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=et.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ut.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new Js(this),this.broadcastEndpointURL=ev(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var n,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:a,private:l}}=this.params;this._onError(d=>t==null?void 0:t(tr.CHANNEL_ERROR,d)),this._onClose(()=>t==null?void 0:t(tr.CLOSED));const c={},u={broadcast:i,presence:a,postgres_changes:(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(d=>d.filter))!==null&&s!==void 0?s:[],private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},c)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:d})=>{var h;if(this.socket.setAuth(),d===void 0){t==null||t(tr.SUBSCRIBED);return}else{const f=this.bindings.postgres_changes,p=(h=f==null?void 0:f.length)!==null&&h!==void 0?h:0,g=[];for(let y=0;y<p;y++){const w=f[y],{filter:{event:v,schema:x,table:m,filter:b}}=w,j=d&&d[y];if(j&&j.event===v&&j.schema===x&&j.table===m&&j.filter===b)g.push(Object.assign(Object.assign({},w),{id:j.id}));else{this.unsubscribe(),this.state=et.errored,t==null||t(tr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,t&&t(tr.SUBSCRIBED);return}}).receive("error",d=>{this.state=et.errored,t==null||t(tr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(tr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this._on(t,r,n)}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:a}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,l,c;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=et.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ut.close,"leave",this._joinRef())};return this.joinPush.destroy(),new Promise(n=>{const s=new Rl(this,Ut.leave,{},t);s.receive("ok",()=>{r(),n("ok")}).receive("timeout",()=>{r(),n("timed out")}).receive("error",()=>{n("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(t,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),a=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),a}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Rl(this,t,r,n);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,i;const a=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=Ut;if(n&&[l,c,u,d].indexOf(a)>=0&&n!==this._joinRef())return;let f=this._onMessage(a,r,n);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(p=>{var g,y,w;return((g=p.filter)===null||g===void 0?void 0:g.event)==="*"||((w=(y=p.filter)===null||y===void 0?void 0:y.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===a}).map(p=>p.callback(f,n)):(i=this.bindings[a])===null||i===void 0||i.filter(p=>{var g,y,w,v,x,m;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in p){const b=p.id,j=(g=p.filter)===null||g===void 0?void 0:g.event;return b&&((y=r.ids)===null||y===void 0?void 0:y.includes(b))&&(j==="*"||(j==null?void 0:j.toLocaleLowerCase())===((w=r.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const b=(x=(v=p==null?void 0:p.filter)===null||v===void 0?void 0:v.event)===null||x===void 0?void 0:x.toLocaleLowerCase();return b==="*"||b===((m=r==null?void 0:r.event)===null||m===void 0?void 0:m.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===a}).map(p=>{if(typeof f=="object"&&"ids"in f){const g=f.data,{schema:y,table:w,commit_timestamp:v,type:x,errors:m}=g;f=Object.assign(Object.assign({},{schema:y,table:w,commit_timestamp:v,eventType:x,new:{},old:{},errors:m}),this._getPayloadRecords(g))}p.callback(f,n)})}_isClosed(){return this.state===et.closed}_isJoined(){return this.state===et.joined}_isJoining(){return this.state===et.joining}_isLeaving(){return this.state===et.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&ed.isEqual(s.filter,r))}),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Ut.close,{},t)}_onError(t){this._on(Ut.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=et.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=of(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=of(t.columns,t.old_record)),r}}const df=()=>{},p4=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class x4{constructor(t,r){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers=s4,this.params={},this.timeout=Xg,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=df,this.ref=0,this.logger=df,this.conn=null,this.sendBuffer=[],this.serializer=new o4,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let a;return i?a=i:typeof fetch>"u"?a=(...l)=>Ii(async()=>{const{default:c}=await Promise.resolve().then(()=>ks);return{default:c}},void 0).then(({default:c})=>c(...l)):a=fetch,(...l)=>a(...l)},this.endPoint=`${t}/${Tu.websocket}`,this.httpEndpoint=ev(t),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.headers&&(this.headers=Object.assign(Object.assign({},this.headers),r.headers)),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),(r!=null&&r.logLevel||r!=null&&r.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const s=(n=r==null?void 0:r.params)===null||n===void 0?void 0:n.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(i,a)=>a(JSON.stringify(i)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Zg(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=r4),this.transport){typeof window<"u"&&this.transport===window.WebSocket?this.conn=new this.transport(this.endpointURL()):this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection();return}this.conn=new m4(this.endpointURL(),void 0,{close:()=>{this.conn=null}})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:i4}))}disconnect(t,r){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(n=>n.teardown()))}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels=this.channels.filter(n=>n._joinRef!==t._joinRef),this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case ls.connecting:return on.Connecting;case ls.open:return on.Open;case ls.closing:return on.Closing;default:return on.Closed}}isConnected(){return this.connectionState()===on.Open}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new ed(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:s,ref:i}=t,a=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(t=null){let r=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{r&&n.updateJoinPayload({access_token:r,version:this.headers&&this.headers["X-Client-Info"]}),n.joinedOnce&&n._isJoined()&&n._push(Ut.access_token,{access_token:r})}))}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(t=this.conn)===null||t===void 0||t.close(a4,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,r=>{let{topic:n,event:s,payload:i,ref:a}=r;n==="phoenix"&&s==="phx_reply"&&this.heartbeatCallback(r.payload.status=="ok"?"ok":"error"),a&&a===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${n} ${s} ${a&&"("+a+")"||""}`,i),Array.from(this.channels).filter(l=>l._isMember(n)).forEach(l=>l._trigger(s,i,a)),this.stateChangeCallbacks.message.forEach(l=>l(r))})}_onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(t=>t())}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(t))}_onConnError(t){this.log("transport",t.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(Ut.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([p4],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}}class m4{constructor(t,r,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=ls.connecting,this.send=()=>{},this.url=null,this.url=t,this.close=n.close}}class td extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Ue(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class g4 extends td{constructor(t,r){super(t),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Lu extends td{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var v4=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function l(d){try{u(n.next(d))}catch(h){a(h)}}function c(d){try{u(n.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const tv=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Ii(async()=>{const{default:n}=await Promise.resolve().then(()=>ks);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},y4=()=>v4(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ii(()=>Promise.resolve().then(()=>ks),void 0)).Response:Response}),Ou=e=>{if(Array.isArray(e))return e.map(r=>Ou(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=Ou(n)}),t};var _n=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function l(d){try{u(n.next(d))}catch(h){a(h)}}function c(d){try{u(n.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const Ll=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),w4=(e,t,r)=>_n(void 0,void 0,void 0,function*(){const n=yield y4();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(s=>{t(new g4(Ll(s),e.status||500))}).catch(s=>{t(new Lu(Ll(s),s))}):t(new Lu(Ll(e),e))}),b4=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),n&&(s.body=JSON.stringify(n)),Object.assign(Object.assign({},s),r))};function Ui(e,t,r,n,s,i){return _n(this,void 0,void 0,function*(){return new Promise((a,l)=>{e(r,b4(t,n,s,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>a(c)).catch(c=>w4(c,l,n))})})}function ao(e,t,r,n){return _n(this,void 0,void 0,function*(){return Ui(e,"GET",t,r,n)})}function Cr(e,t,r,n,s){return _n(this,void 0,void 0,function*(){return Ui(e,"POST",t,n,s,r)})}function j4(e,t,r,n,s){return _n(this,void 0,void 0,function*(){return Ui(e,"PUT",t,n,s,r)})}function C4(e,t,r,n){return _n(this,void 0,void 0,function*(){return Ui(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function rv(e,t,r,n,s){return _n(this,void 0,void 0,function*(){return Ui(e,"DELETE",t,n,s,r)})}var ot=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function l(d){try{u(n.next(d))}catch(h){a(h)}}function c(d){try{u(n.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const k4={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},hf={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class _4{constructor(t,r={},n,s){this.url=t,this.headers=r,this.bucketId=n,this.fetch=tv(s)}uploadOrUpdate(t,r,n,s){return ot(this,void 0,void 0,function*(){try{let i;const a=Object.assign(Object.assign({},hf),s);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(a.upsert)});const c=a.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",a.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=n,l["cache-control"]=`max-age=${a.cacheControl}`,l["content-type"]=a.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),h=yield this.fetch(`${this.url}/object/${d}`,Object.assign({method:t,body:i,headers:l},a!=null&&a.duplex?{duplex:a.duplex}:{})),f=yield h.json();return h.ok?{data:{path:u,id:f.Id,fullPath:f.Key},error:null}:{data:null,error:f}}catch(i){if(Ue(i))return{data:null,error:i};throw i}})}upload(t,r,n){return ot(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,s){return ot(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),a=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${a}`);l.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:hf.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield this.fetch(l.toString(),{method:"PUT",body:c,headers:d}),f=yield h.json();return h.ok?{data:{path:i,fullPath:f.Key},error:null}:{data:null,error:f}}catch(c){if(Ue(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return ot(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const i=yield Cr(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),a=new URL(this.url+i.url),l=a.searchParams.get("token");if(!l)throw new td("No token returned by API");return{data:{signedUrl:a.toString(),path:t,token:l},error:null}}catch(n){if(Ue(n))return{data:null,error:n};throw n}})}update(t,r,n){return ot(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return ot(this,void 0,void 0,function*(){try{return{data:yield Cr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(Ue(s))return{data:null,error:s};throw s}})}copy(t,r,n){return ot(this,void 0,void 0,function*(){try{return{data:{path:(yield Cr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(Ue(s))return{data:null,error:s};throw s}})}createSignedUrl(t,r,n){return ot(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield Cr(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(s){if(Ue(s))return{data:null,error:s};throw s}})}createSignedUrls(t,r,n){return ot(this,void 0,void 0,function*(){try{const s=yield Cr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${i}`):null})),error:null}}catch(s){if(Ue(s))return{data:null,error:s};throw s}})}download(t,r){return ot(this,void 0,void 0,function*(){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),a=i?`?${i}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield ao(this.fetch,`${this.url}/${s}/${l}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(Ue(l))return{data:null,error:l};throw l}})}info(t){return ot(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield ao(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Ou(n),error:null}}catch(n){if(Ue(n))return{data:null,error:n};throw n}})}exists(t){return ot(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield C4(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(Ue(n)&&n instanceof Lu){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),s=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&s.push(i);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${u}`)}}}remove(t){return ot(this,void 0,void 0,function*(){try{return{data:yield rv(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(Ue(r))return{data:null,error:r};throw r}})}list(t,r,n){return ot(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},k4),r),{prefix:t||""});return{data:yield Cr(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(Ue(s))return{data:null,error:s};throw s}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const E4="2.7.1",N4={"X-Client-Info":`storage-js/${E4}`};var Bn=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function l(d){try{u(n.next(d))}catch(h){a(h)}}function c(d){try{u(n.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class S4{constructor(t,r={},n){this.url=t,this.headers=Object.assign(Object.assign({},N4),r),this.fetch=tv(n)}listBuckets(){return Bn(this,void 0,void 0,function*(){try{return{data:yield ao(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Ue(t))return{data:null,error:t};throw t}})}getBucket(t){return Bn(this,void 0,void 0,function*(){try{return{data:yield ao(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(Ue(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return Bn(this,void 0,void 0,function*(){try{return{data:yield Cr(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Ue(n))return{data:null,error:n};throw n}})}updateBucket(t,r){return Bn(this,void 0,void 0,function*(){try{return{data:yield j4(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Ue(n))return{data:null,error:n};throw n}})}emptyBucket(t){return Bn(this,void 0,void 0,function*(){try{return{data:yield Cr(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(Ue(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Bn(this,void 0,void 0,function*(){try{return{data:yield rv(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(Ue(r))return{data:null,error:r};throw r}})}}class A4 extends S4{constructor(t,r={},n){super(t,r,n)}from(t){return new _4(this.url,this.headers,t,this.fetch)}}const P4="2.50.0";let zs="";typeof Deno<"u"?zs="deno":typeof document<"u"?zs="web":typeof navigator<"u"&&navigator.product==="ReactNative"?zs="react-native":zs="node";const D4={"X-Client-Info":`supabase-js-${zs}/${P4}`},B4={headers:D4},F4={schema:"public"},T4={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},R4={};var L4=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function l(d){try{u(n.next(d))}catch(h){a(h)}}function c(d){try{u(n.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const O4=e=>{let t;return e?t=e:typeof fetch>"u"?t=Ug:t=fetch,(...r)=>t(...r)},I4=()=>typeof Headers>"u"?$g:Headers,M4=(e,t,r)=>{const n=O4(r),s=I4();return(i,a)=>L4(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let u=new s(a==null?void 0:a.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(i,Object.assign(Object.assign({},a),{headers:u}))})};var U4=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function l(d){try{u(n.next(d))}catch(h){a(h)}}function c(d){try{u(n.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};function $4(e){return e.endsWith("/")?e:e+"/"}function z4(e,t){var r,n;const{db:s,auth:i,realtime:a,global:l}=e,{db:c,auth:u,realtime:d,global:h}=t,f={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},d),a),global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>U4(this,void 0,void 0,function*(){return""})};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}const nv="2.70.0",Ln=30*1e3,Iu=3,Ol=Iu*Ln,V4="http://localhost:9999",H4="supabase.auth.token",W4={"X-Client-Info":`gotrue-js/${nv}`},Mu="X-Supabase-Api-Version",sv={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},q4=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,K4=6e5;class rd extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function se(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class G4 extends rd{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function Y4(e){return se(e)&&e.name==="AuthApiError"}class iv extends rd{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Gr extends rd{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class yr extends Gr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Q4(e){return se(e)&&e.name==="AuthSessionMissingError"}class da extends Gr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ha extends Gr{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class fa extends Gr{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function X4(e){return se(e)&&e.name==="AuthImplicitGrantRedirectError"}class ff extends Gr{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Uu extends Gr{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Il(e){return se(e)&&e.name==="AuthRetryableFetchError"}class pf extends Gr{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class ei extends Gr{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const oo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),xf=` 	
\r=`.split(""),Z4=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<xf.length;t+=1)e[xf[t].charCodeAt(0)]=-2;for(let t=0;t<oo.length;t+=1)e[oo[t].charCodeAt(0)]=t;return e})();function mf(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(oo[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(oo[n]),t.queuedBits-=6}}function av(e,t,r){const n=Z4[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function gf(e){const t=[],r=a=>{t.push(String.fromCodePoint(a))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=a=>{tj(a,n,r)};for(let a=0;a<e.length;a+=1)av(e.charCodeAt(a),s,i);return t.join("")}function J4(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function ej(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}J4(n,t)}}function tj(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function rj(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)av(e.charCodeAt(s),r,n);return new Uint8Array(t)}function nj(e){const t=[];return ej(e,r=>t.push(r)),new Uint8Array(t)}function sj(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>mf(s,r,n)),mf(null,r,n),t.join("")}function ij(e){return Math.round(Date.now()/1e3)+e}function aj(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Ot=()=>typeof window<"u"&&typeof document<"u",Zr={tested:!1,writable:!1},ti=()=>{if(!Ot())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Zr.tested)return Zr.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Zr.tested=!0,Zr.writable=!0}catch{Zr.tested=!0,Zr.writable=!1}return Zr.writable};function oj(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const ov=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Ii(async()=>{const{default:n}=await Promise.resolve().then(()=>ks);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},lj=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",lv=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},pa=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},xa=async(e,t)=>{await e.removeItem(t)};class Ko{constructor(){this.promise=new Ko.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Ko.promiseConstructor=Promise;function Ml(e){const t=e.split(".");if(t.length!==3)throw new ei("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!q4.test(t[n]))throw new ei("JWT not in base64url format");return{header:JSON.parse(gf(t[0])),payload:JSON.parse(gf(t[1])),signature:rj(t[2]),raw:{header:t[0],payload:t[1]}}}async function cj(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function uj(e,t){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await e(i);if(!t(i,null,a)){n(a);return}}catch(a){if(!t(i,a)){s(a);return}}})()})}function dj(e){return("0"+e.toString(16)).substr(-2)}function hj(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,dj).join("")}async function fj(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function pj(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await fj(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Fn(e,t,r=!1){const n=hj();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await lv(e,`${t}-code-verifier`,s);const i=await pj(n);return[i,n===i?"plain":"s256"]}const xj=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function mj(e){const t=e.headers.get(Mu);if(!t||!t.match(xj))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function gj(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function vj(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const yj=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Tn(e){if(!yj.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var wj=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};const rn=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),bj=[502,503,504];async function vf(e){var t;if(!lj(e))throw new Uu(rn(e),0);if(bj.includes(e.status))throw new Uu(rn(e),e.status);let r;try{r=await e.json()}catch(i){throw new iv(rn(i),i)}let n;const s=mj(e);if(s&&s.getTime()>=sv["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new pf(rn(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new yr}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new pf(rn(r),e.status,r.weak_password.reasons);throw new G4(rn(r),e.status||500,n)}const jj=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function ae(e,t,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[Mu]||(i[Mu]=sv["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const a=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(a.redirect_to=n.redirectTo);const l=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=await Cj(e,t,r+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function Cj(e,t,r,n,s,i){const a=jj(t,n,s,i);let l;try{l=await e(r,Object.assign({},a))}catch(c){throw console.error(c),new Uu(rn(c),0)}if(l.ok||await vf(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await vf(c)}}function Jt(e){var t;let r=null;Nj(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=ij(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function yf(e){const t=Jt(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Nr(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function kj(e){return{data:e,error:null}}function _j(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=e,a=wj(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},c=Object.assign({},a);return{data:{properties:l,user:c},error:null}}function Ej(e){return e}function Nj(e){return e.access_token&&e.refresh_token&&e.expires_in}const Ul=["global","local","others"];var Sj=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};class Aj{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=ov(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=Ul[0]){if(Ul.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Ul.join(", ")}`);try{return await ae(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(se(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await ae(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Nr})}catch(n){if(se(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=Sj(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await ae(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:_j,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(se(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await ae(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Nr})}catch(r){if(se(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,i,a,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await ae(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Ej});if(d.error)throw d.error;const h=await d.json(),f=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,p=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(g=>{const y=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(g.split(";")[1].split("=")[1]);u[`${w}Page`]=y}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(se(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Tn(t);try{return await ae(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Nr})}catch(r){if(se(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Tn(t);try{return await ae(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Nr})}catch(n){if(se(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){Tn(t);try{return await ae(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Nr})}catch(n){if(se(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Tn(t.userId);try{const{data:r,error:n}=await ae(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(se(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Tn(t.userId),Tn(t.id);try{return{data:await ae(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(se(r))return{data:null,error:r};throw r}}}const Pj={getItem:e=>ti()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{ti()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{ti()&&globalThis.localStorage.removeItem(e)}};function wf(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function Dj(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Rn={debug:!!(globalThis&&ti()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class cv extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class Bj extends cv{}async function Fj(e,t,r){Rn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Rn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){Rn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{Rn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw Rn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Bj(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Rn.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}Dj();const Tj={url:V4,storageKey:H4,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:W4,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function bf(e,t,r){return await r()}class Ei{constructor(t){var r,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ei.nextInstanceID,Ei.nextInstanceID+=1,this.instanceID>0&&Ot()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},Tj),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Aj({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=ov(s.fetch),this.lock=s.lock||bf,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Ot()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=Fj:this.lock=bf,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:ti()?this.storage=Pj:(this.memoryStorage={},this.storage=wf(this.memoryStorage)):(this.memoryStorage={},this.storage=wf(this.memoryStorage)),Ot()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${nv}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=oj(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),Ot()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),X4(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:a,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",l),await this._saveSession(a),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return se(r)?{error:r}:{error:new iv("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const i=await ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:Jt}),{data:a,error:l}=i;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(se(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var r,n,s;try{let i;if("email"in t){const{email:d,password:h,options:f}=t;let p=null,g=null;this.flowType==="pkce"&&([p,g]=await Fn(this.storage,this.storageKey)),i=await ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:g},xform:Jt})}else if("phone"in t){const{phone:d,password:h,options:f}=t;i=await ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Jt})}else throw new ha("You must provide either an email or phone number and a password");const{data:a,error:l}=i;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(se(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:a,options:l}=t;r=await ae(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:yf})}else if("phone"in t){const{phone:i,password:a,options:l}=t;r=await ae(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:yf})}else throw new ha("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new da}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(se(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,n,s,i,a,l,c,u,d,h,f,p;let g,y;if("message"in t)g=t.message,y=t.signature;else{const{chain:w,wallet:v,statement:x,options:m}=t;let b;if(Ot())if(typeof v=="object")b=v;else{const k=window;if("solana"in k&&typeof k.solana=="object"&&("signIn"in k.solana&&typeof k.solana.signIn=="function"||"signMessage"in k.solana&&typeof k.solana.signMessage=="function"))b=k.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(m!=null&&m.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=v}const j=new URL((r=m==null?void 0:m.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in b&&b.signIn){const k=await b.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},m==null?void 0:m.signInWithSolana),{version:"1",domain:j.host,uri:j.href}),x?{statement:x}:null));let C;if(Array.isArray(k)&&k[0]&&typeof k[0]=="object")C=k[0];else if(k&&typeof k=="object"&&"signedMessage"in k&&"signature"in k)C=k;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in C&&"signature"in C&&(typeof C.signedMessage=="string"||C.signedMessage instanceof Uint8Array)&&C.signature instanceof Uint8Array)g=typeof C.signedMessage=="string"?C.signedMessage:new TextDecoder().decode(C.signedMessage),y=C.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in b)||typeof b.signMessage!="function"||!("publicKey"in b)||typeof b!="object"||!b.publicKey||!("toBase58"in b.publicKey)||typeof b.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${j.host} wants you to sign in with your Solana account:`,b.publicKey.toBase58(),...x?["",x,""]:[""],"Version: 1",`URI: ${j.href}`,`Issued At: ${(s=(n=m==null?void 0:m.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=m==null?void 0:m.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${m.signInWithSolana.notBefore}`]:[],...!((a=m==null?void 0:m.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${m.signInWithSolana.expirationTime}`]:[],...!((l=m==null?void 0:m.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${m.signInWithSolana.chainId}`]:[],...!((c=m==null?void 0:m.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${m.signInWithSolana.nonce}`]:[],...!((u=m==null?void 0:m.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${m.signInWithSolana.requestId}`]:[],...!((h=(d=m==null?void 0:m.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...m.signInWithSolana.resources.map(C=>`- ${C}`)]:[]].join(`
`);const k=await b.signMessage(new TextEncoder().encode(g),"utf8");if(!k||!(k instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=k}}try{const{data:w,error:v}=await ae(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:sj(y)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Jt});if(v)throw v;return!w||!w.session||!w.user?{data:{user:null,session:null},error:new da}:(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),{data:Object.assign({},w),error:v})}catch(w){if(se(w))return{data:{user:null,session:null},error:w};throw w}}async _exchangeCodeForSession(t){const r=await pa(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:i,error:a}=await ae(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Jt});if(await xa(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new da}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:a})}catch(i){if(se(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:i,nonce:a}=t,l=await ae(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Jt}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new da}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(r){if(se(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,s,i,a;try{if("email"in t){const{email:l,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Fn(this.storage,this.storageKey));const{error:h}=await ae(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:d}=await ae(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(a=c==null?void 0:c.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new ha("You must provide either an email or phone number.")}catch(l){if(se(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var r,n;try{let s,i;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:a,error:l}=await ae(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Jt});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");const c=a.session,u=a.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(se(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var r,n,s;try{let i=null,a=null;return this.flowType==="pkce"&&([i,a]=await Fn(this.storage,this.storageKey)),await ae(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:a}),headers:this.headers,xform:kj})}catch(i){if(se(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new yr;const{error:s}=await ae(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(se(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:i}=t,{error:a}=await ae(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in t){const{phone:n,type:s,options:i}=t,{data:a,error:l}=await ae(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:l}}throw new ha("You must provide either an email or phone number and a type")}catch(r){if(se(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await pa(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<Ol:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.storage.isServer){let a=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,u,d)=>(!a&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:t},error:null}}const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await ae(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Nr}):await this._useSession(async r=>{var n,s,i;const{data:a,error:l}=r;if(l)throw l;return!(!((n=a.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new yr}:await ae(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Nr})})}catch(r){if(se(r))return Q4(r)&&(await this._removeSession(),await xa(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new yr;const a=s.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Fn(this.storage,this.storageKey));const{data:u,error:d}=await ae(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:a.access_token,xform:Nr});if(d)throw d;return a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(n){if(se(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new yr;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:a}=Ml(t.access_token);if(a.exp&&(n=a.exp,s=n<=r),s){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(se(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:a,error:l}=r;if(l)throw l;t=(n=a.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new yr;const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(se(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!Ot())throw new fa("No browser detected.");if(t.error||t.error_description||t.error_code)throw new fa(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new ff("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new fa("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new ff("No code detected.");const{data:x,error:m}=await this._exchangeCodeForSession(t.code);if(m)throw m;const b=new URL(window.location.href);return b.searchParams.delete("code"),window.history.replaceState(window.history.state,"",b.toString()),{data:{session:x.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:a,expires_in:l,expires_at:c,token_type:u}=t;if(!i||!l||!a||!u)throw new fa("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let f=d+h;c&&(f=parseInt(c));const p=f-d;p*1e3<=Ln&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);const g=f-h;d-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,f,d):d-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,f,d);const{data:y,error:w}=await this._getUser(i);if(w)throw w;const v={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:f,refresh_token:a,token_type:u,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:v,redirectType:t.type},error:null}}catch(n){if(se(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await pa(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{error:i};const a=(n=s.session)===null||n===void 0?void 0:n.access_token;if(a){const{error:l}=await this.admin.signOut(a,t);if(l&&!(Y4(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await xa(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=aj(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:a}=r;if(a)throw a;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await Fn(this.storage,this.storageKey,!0));try{return await ae(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(se(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(se(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var a,l,c,u,d;const{data:h,error:f}=i;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await ae(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return Ot()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(se(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:a}=r;if(a)throw a;return await ae(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(se(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await uj(async s=>(s>0&&await cj(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await ae(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Jt})),(s,i)=>{const a=200*Math.pow(2,s);return i&&Il(i)&&Date.now()+a-n<Ln})}catch(n){if(this._debug(r,"error",n),se(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Ot()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const n=await pa(this.storage,this.storageKey);if(this._debug(r,"session from storage",n),!this._isValidSession(n)){this._debug(r,"session is not valid"),n!==null&&await this._removeSession();return}const s=((t=n.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Ol;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${Ol}s`),s){if(this.autoRefreshToken&&n.refresh_token){const{error:i}=await this._callRefreshToken(n.refresh_token);i&&(console.error(i),Il(i)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(r,"error",n),console.error(n);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new yr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Ko;const{data:i,error:a}=await this._refreshAccessToken(t);if(a)throw a;if(!i.session)throw new yr;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),se(i)){const a={session:null,error:i};return Il(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(a),a}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){i.push(c)}});if(await Promise.all(a),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await lv(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),await xa(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Ot()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Ln);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/Ln);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Ln}ms, refresh threshold is ${Iu} ticks`),s<=Iu&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof cv)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ot()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,a]=await Fn(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await ae(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(se(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:a}=r;if(a)return{data:null,error:a};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:u}=await ae(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(se(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{data:null,error:i};const{data:a,error:l}=await ae(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:l})})}catch(r){if(se(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await ae(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(se(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(t==null?void 0:t.factors)||[],s=n.filter(a=>a.factor_type==="totp"&&a.status==="verified"),i=n.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:n,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:s},error:i}=t;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=Ml(s.access_token);let l=null;a.aal&&(l=a.aal);let c=l;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const d=a.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(a=>a.kid===t);if(n||(n=this.jwks.keys.find(a=>a.kid===t),n&&this.jwks_cached_at+K4>Date.now()))return n;const{data:s,error:i}=await ae(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!s.keys||s.keys.length===0)throw new ei("JWKS is empty");if(this.jwks=s,this.jwks_cached_at=Date.now(),n=s.keys.find(a=>a.kid===t),!n)throw new ei("No matching signing key found in JWKS");return n}async getClaims(t,r={keys:[]}){try{let n=t;if(!n){const{data:p,error:g}=await this.getSession();if(g||!p.session)return{data:null,error:g};n=p.session.access_token}const{header:s,payload:i,signature:a,raw:{header:l,payload:c}}=Ml(n);if(gj(i.exp),!s.kid||s.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:p}=await this.getUser(n);if(p)throw p;return{data:{claims:i,header:s,signature:a},error:null}}const u=vj(s.alg),d=await this.fetchJwk(s.kid,r),h=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,a,nj(`${l}.${c}`)))throw new ei("Invalid JWT signature");return{data:{claims:i,header:s,signature:a},error:null}}catch(n){if(se(n))return{data:null,error:n};throw n}}}Ei.nextInstanceID=0;const Rj=Ei;class Lj extends Rj{constructor(t){super(t)}}var Oj=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function l(d){try{u(n.next(d))}catch(h){a(h)}}function c(d){try{u(n.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class Ij{constructor(t,r,n){var s,i,a;if(this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const l=$4(t),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,d={db:F4,realtime:R4,auth:Object.assign(Object.assign({},T4),{storageKey:u}),global:B4},h=z4(n??{},d);this.storageKey=(s=h.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(f,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=h.auth)!==null&&a!==void 0?a:{},this.headers,h.global.fetch),this.fetch=M4(r,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new t4(new URL("rest/v1",c).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),h.accessToken||this._listenForAuthEvents()}get functions(){return new Db(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new A4(this.storageUrl.href,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return Oj(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,storageKey:i,flowType:a,lock:l,debug:c},u,d){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Lj({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),u),storageKey:i,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,flowType:a,lock:l,debug:c,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new x4(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Mj=(e,t,r)=>new Ij(e,t,r);var Uj={exports:{}};function $j(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var $l={exports:{}};const zj={},Vj=Object.freeze(Object.defineProperty({__proto__:null,default:zj},Symbol.toStringTag,{value:"Module"})),Hj=px(Vj);var jf;function le(){return jf||(jf=1,function(e,t){(function(r,n){e.exports=n()})(J,function(){var r=r||function(n,s){var i;if(typeof window<"u"&&window.crypto&&(i=window.crypto),typeof self<"u"&&self.crypto&&(i=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(i=globalThis.crypto),!i&&typeof window<"u"&&window.msCrypto&&(i=window.msCrypto),!i&&typeof J<"u"&&J.crypto&&(i=J.crypto),!i&&typeof $j=="function")try{i=Hj}catch{}var a=function(){if(i){if(typeof i.getRandomValues=="function")try{return i.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof i.randomBytes=="function")try{return i.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},l=Object.create||function(){function x(){}return function(m){var b;return x.prototype=m,b=new x,x.prototype=null,b}}(),c={},u=c.lib={},d=u.Base=function(){return{extend:function(x){var m=l(this);return x&&m.mixIn(x),(!m.hasOwnProperty("init")||this.init===m.init)&&(m.init=function(){m.$super.init.apply(this,arguments)}),m.init.prototype=m,m.$super=this,m},create:function(){var x=this.extend();return x.init.apply(x,arguments),x},init:function(){},mixIn:function(x){for(var m in x)x.hasOwnProperty(m)&&(this[m]=x[m]);x.hasOwnProperty("toString")&&(this.toString=x.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),h=u.WordArray=d.extend({init:function(x,m){x=this.words=x||[],m!=s?this.sigBytes=m:this.sigBytes=x.length*4},toString:function(x){return(x||p).stringify(this)},concat:function(x){var m=this.words,b=x.words,j=this.sigBytes,k=x.sigBytes;if(this.clamp(),j%4)for(var C=0;C<k;C++){var _=b[C>>>2]>>>24-C%4*8&255;m[j+C>>>2]|=_<<24-(j+C)%4*8}else for(var P=0;P<k;P+=4)m[j+P>>>2]=b[P>>>2];return this.sigBytes+=k,this},clamp:function(){var x=this.words,m=this.sigBytes;x[m>>>2]&=4294967295<<32-m%4*8,x.length=n.ceil(m/4)},clone:function(){var x=d.clone.call(this);return x.words=this.words.slice(0),x},random:function(x){for(var m=[],b=0;b<x;b+=4)m.push(a());return new h.init(m,x)}}),f=c.enc={},p=f.Hex={stringify:function(x){for(var m=x.words,b=x.sigBytes,j=[],k=0;k<b;k++){var C=m[k>>>2]>>>24-k%4*8&255;j.push((C>>>4).toString(16)),j.push((C&15).toString(16))}return j.join("")},parse:function(x){for(var m=x.length,b=[],j=0;j<m;j+=2)b[j>>>3]|=parseInt(x.substr(j,2),16)<<24-j%8*4;return new h.init(b,m/2)}},g=f.Latin1={stringify:function(x){for(var m=x.words,b=x.sigBytes,j=[],k=0;k<b;k++){var C=m[k>>>2]>>>24-k%4*8&255;j.push(String.fromCharCode(C))}return j.join("")},parse:function(x){for(var m=x.length,b=[],j=0;j<m;j++)b[j>>>2]|=(x.charCodeAt(j)&255)<<24-j%4*8;return new h.init(b,m)}},y=f.Utf8={stringify:function(x){try{return decodeURIComponent(escape(g.stringify(x)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(x){return g.parse(unescape(encodeURIComponent(x)))}},w=u.BufferedBlockAlgorithm=d.extend({reset:function(){this._data=new h.init,this._nDataBytes=0},_append:function(x){typeof x=="string"&&(x=y.parse(x)),this._data.concat(x),this._nDataBytes+=x.sigBytes},_process:function(x){var m,b=this._data,j=b.words,k=b.sigBytes,C=this.blockSize,_=C*4,P=k/_;x?P=n.ceil(P):P=n.max((P|0)-this._minBufferSize,0);var S=P*C,B=n.min(S*4,k);if(S){for(var A=0;A<S;A+=C)this._doProcessBlock(j,A);m=j.splice(0,S),b.sigBytes-=B}return new h.init(m,B)},clone:function(){var x=d.clone.call(this);return x._data=this._data.clone(),x},_minBufferSize:0});u.Hasher=w.extend({cfg:d.extend(),init:function(x){this.cfg=this.cfg.extend(x),this.reset()},reset:function(){w.reset.call(this),this._doReset()},update:function(x){return this._append(x),this._process(),this},finalize:function(x){x&&this._append(x);var m=this._doFinalize();return m},blockSize:16,_createHelper:function(x){return function(m,b){return new x.init(b).finalize(m)}},_createHmacHelper:function(x){return function(m,b){return new v.HMAC.init(x,b).finalize(m)}}});var v=c.algo={};return c}(Math);return r})}($l)),$l.exports}var zl={exports:{}},Cf;function Go(){return Cf||(Cf=1,function(e,t){(function(r,n){e.exports=n(le())})(J,function(r){return function(n){var s=r,i=s.lib,a=i.Base,l=i.WordArray,c=s.x64={};c.Word=a.extend({init:function(u,d){this.high=u,this.low=d}}),c.WordArray=a.extend({init:function(u,d){u=this.words=u||[],d!=n?this.sigBytes=d:this.sigBytes=u.length*8},toX32:function(){for(var u=this.words,d=u.length,h=[],f=0;f<d;f++){var p=u[f];h.push(p.high),h.push(p.low)}return l.create(h,this.sigBytes)},clone:function(){for(var u=a.clone.call(this),d=u.words=this.words.slice(0),h=d.length,f=0;f<h;f++)d[f]=d[f].clone();return u}})}(),r})}(zl)),zl.exports}var Vl={exports:{}},kf;function Wj(){return kf||(kf=1,function(e,t){(function(r,n){e.exports=n(le())})(J,function(r){return function(){if(typeof ArrayBuffer=="function"){var n=r,s=n.lib,i=s.WordArray,a=i.init,l=i.init=function(c){if(c instanceof ArrayBuffer&&(c=new Uint8Array(c)),(c instanceof Int8Array||typeof Uint8ClampedArray<"u"&&c instanceof Uint8ClampedArray||c instanceof Int16Array||c instanceof Uint16Array||c instanceof Int32Array||c instanceof Uint32Array||c instanceof Float32Array||c instanceof Float64Array)&&(c=new Uint8Array(c.buffer,c.byteOffset,c.byteLength)),c instanceof Uint8Array){for(var u=c.byteLength,d=[],h=0;h<u;h++)d[h>>>2]|=c[h]<<24-h%4*8;a.call(this,d,u)}else a.apply(this,arguments)};l.prototype=i}}(),r.lib.WordArray})}(Vl)),Vl.exports}var Hl={exports:{}},_f;function qj(){return _f||(_f=1,function(e,t){(function(r,n){e.exports=n(le())})(J,function(r){return function(){var n=r,s=n.lib,i=s.WordArray,a=n.enc;a.Utf16=a.Utf16BE={stringify:function(c){for(var u=c.words,d=c.sigBytes,h=[],f=0;f<d;f+=2){var p=u[f>>>2]>>>16-f%4*8&65535;h.push(String.fromCharCode(p))}return h.join("")},parse:function(c){for(var u=c.length,d=[],h=0;h<u;h++)d[h>>>1]|=c.charCodeAt(h)<<16-h%2*16;return i.create(d,u*2)}},a.Utf16LE={stringify:function(c){for(var u=c.words,d=c.sigBytes,h=[],f=0;f<d;f+=2){var p=l(u[f>>>2]>>>16-f%4*8&65535);h.push(String.fromCharCode(p))}return h.join("")},parse:function(c){for(var u=c.length,d=[],h=0;h<u;h++)d[h>>>1]|=l(c.charCodeAt(h)<<16-h%2*16);return i.create(d,u*2)}};function l(c){return c<<8&4278255360|c>>>8&16711935}}(),r.enc.Utf16})}(Hl)),Hl.exports}var Wl={exports:{}},Ef;function En(){return Ef||(Ef=1,function(e,t){(function(r,n){e.exports=n(le())})(J,function(r){return function(){var n=r,s=n.lib,i=s.WordArray,a=n.enc;a.Base64={stringify:function(c){var u=c.words,d=c.sigBytes,h=this._map;c.clamp();for(var f=[],p=0;p<d;p+=3)for(var g=u[p>>>2]>>>24-p%4*8&255,y=u[p+1>>>2]>>>24-(p+1)%4*8&255,w=u[p+2>>>2]>>>24-(p+2)%4*8&255,v=g<<16|y<<8|w,x=0;x<4&&p+x*.75<d;x++)f.push(h.charAt(v>>>6*(3-x)&63));var m=h.charAt(64);if(m)for(;f.length%4;)f.push(m);return f.join("")},parse:function(c){var u=c.length,d=this._map,h=this._reverseMap;if(!h){h=this._reverseMap=[];for(var f=0;f<d.length;f++)h[d.charCodeAt(f)]=f}var p=d.charAt(64);if(p){var g=c.indexOf(p);g!==-1&&(u=g)}return l(c,u,h)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function l(c,u,d){for(var h=[],f=0,p=0;p<u;p++)if(p%4){var g=d[c.charCodeAt(p-1)]<<p%4*2,y=d[c.charCodeAt(p)]>>>6-p%4*2,w=g|y;h[f>>>2]|=w<<24-f%4*8,f++}return i.create(h,f)}}(),r.enc.Base64})}(Wl)),Wl.exports}var ql={exports:{}},Nf;function Kj(){return Nf||(Nf=1,function(e,t){(function(r,n){e.exports=n(le())})(J,function(r){return function(){var n=r,s=n.lib,i=s.WordArray,a=n.enc;a.Base64url={stringify:function(c,u){u===void 0&&(u=!0);var d=c.words,h=c.sigBytes,f=u?this._safe_map:this._map;c.clamp();for(var p=[],g=0;g<h;g+=3)for(var y=d[g>>>2]>>>24-g%4*8&255,w=d[g+1>>>2]>>>24-(g+1)%4*8&255,v=d[g+2>>>2]>>>24-(g+2)%4*8&255,x=y<<16|w<<8|v,m=0;m<4&&g+m*.75<h;m++)p.push(f.charAt(x>>>6*(3-m)&63));var b=f.charAt(64);if(b)for(;p.length%4;)p.push(b);return p.join("")},parse:function(c,u){u===void 0&&(u=!0);var d=c.length,h=u?this._safe_map:this._map,f=this._reverseMap;if(!f){f=this._reverseMap=[];for(var p=0;p<h.length;p++)f[h.charCodeAt(p)]=p}var g=h.charAt(64);if(g){var y=c.indexOf(g);y!==-1&&(d=y)}return l(c,d,f)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function l(c,u,d){for(var h=[],f=0,p=0;p<u;p++)if(p%4){var g=d[c.charCodeAt(p-1)]<<p%4*2,y=d[c.charCodeAt(p)]>>>6-p%4*2,w=g|y;h[f>>>2]|=w<<24-f%4*8,f++}return i.create(h,f)}}(),r.enc.Base64url})}(ql)),ql.exports}var Kl={exports:{}},Sf;function Nn(){return Sf||(Sf=1,function(e,t){(function(r,n){e.exports=n(le())})(J,function(r){return function(n){var s=r,i=s.lib,a=i.WordArray,l=i.Hasher,c=s.algo,u=[];(function(){for(var y=0;y<64;y++)u[y]=n.abs(n.sin(y+1))*4294967296|0})();var d=c.MD5=l.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(y,w){for(var v=0;v<16;v++){var x=w+v,m=y[x];y[x]=(m<<8|m>>>24)&16711935|(m<<24|m>>>8)&4278255360}var b=this._hash.words,j=y[w+0],k=y[w+1],C=y[w+2],_=y[w+3],P=y[w+4],S=y[w+5],B=y[w+6],A=y[w+7],D=y[w+8],V=y[w+9],q=y[w+10],L=y[w+11],U=y[w+12],R=y[w+13],T=y[w+14],z=y[w+15],E=b[0],F=b[1],I=b[2],O=b[3];E=h(E,F,I,O,j,7,u[0]),O=h(O,E,F,I,k,12,u[1]),I=h(I,O,E,F,C,17,u[2]),F=h(F,I,O,E,_,22,u[3]),E=h(E,F,I,O,P,7,u[4]),O=h(O,E,F,I,S,12,u[5]),I=h(I,O,E,F,B,17,u[6]),F=h(F,I,O,E,A,22,u[7]),E=h(E,F,I,O,D,7,u[8]),O=h(O,E,F,I,V,12,u[9]),I=h(I,O,E,F,q,17,u[10]),F=h(F,I,O,E,L,22,u[11]),E=h(E,F,I,O,U,7,u[12]),O=h(O,E,F,I,R,12,u[13]),I=h(I,O,E,F,T,17,u[14]),F=h(F,I,O,E,z,22,u[15]),E=f(E,F,I,O,k,5,u[16]),O=f(O,E,F,I,B,9,u[17]),I=f(I,O,E,F,L,14,u[18]),F=f(F,I,O,E,j,20,u[19]),E=f(E,F,I,O,S,5,u[20]),O=f(O,E,F,I,q,9,u[21]),I=f(I,O,E,F,z,14,u[22]),F=f(F,I,O,E,P,20,u[23]),E=f(E,F,I,O,V,5,u[24]),O=f(O,E,F,I,T,9,u[25]),I=f(I,O,E,F,_,14,u[26]),F=f(F,I,O,E,D,20,u[27]),E=f(E,F,I,O,R,5,u[28]),O=f(O,E,F,I,C,9,u[29]),I=f(I,O,E,F,A,14,u[30]),F=f(F,I,O,E,U,20,u[31]),E=p(E,F,I,O,S,4,u[32]),O=p(O,E,F,I,D,11,u[33]),I=p(I,O,E,F,L,16,u[34]),F=p(F,I,O,E,T,23,u[35]),E=p(E,F,I,O,k,4,u[36]),O=p(O,E,F,I,P,11,u[37]),I=p(I,O,E,F,A,16,u[38]),F=p(F,I,O,E,q,23,u[39]),E=p(E,F,I,O,R,4,u[40]),O=p(O,E,F,I,j,11,u[41]),I=p(I,O,E,F,_,16,u[42]),F=p(F,I,O,E,B,23,u[43]),E=p(E,F,I,O,V,4,u[44]),O=p(O,E,F,I,U,11,u[45]),I=p(I,O,E,F,z,16,u[46]),F=p(F,I,O,E,C,23,u[47]),E=g(E,F,I,O,j,6,u[48]),O=g(O,E,F,I,A,10,u[49]),I=g(I,O,E,F,T,15,u[50]),F=g(F,I,O,E,S,21,u[51]),E=g(E,F,I,O,U,6,u[52]),O=g(O,E,F,I,_,10,u[53]),I=g(I,O,E,F,q,15,u[54]),F=g(F,I,O,E,k,21,u[55]),E=g(E,F,I,O,D,6,u[56]),O=g(O,E,F,I,z,10,u[57]),I=g(I,O,E,F,B,15,u[58]),F=g(F,I,O,E,R,21,u[59]),E=g(E,F,I,O,P,6,u[60]),O=g(O,E,F,I,L,10,u[61]),I=g(I,O,E,F,C,15,u[62]),F=g(F,I,O,E,V,21,u[63]),b[0]=b[0]+E|0,b[1]=b[1]+F|0,b[2]=b[2]+I|0,b[3]=b[3]+O|0},_doFinalize:function(){var y=this._data,w=y.words,v=this._nDataBytes*8,x=y.sigBytes*8;w[x>>>5]|=128<<24-x%32;var m=n.floor(v/4294967296),b=v;w[(x+64>>>9<<4)+15]=(m<<8|m>>>24)&16711935|(m<<24|m>>>8)&4278255360,w[(x+64>>>9<<4)+14]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,y.sigBytes=(w.length+1)*4,this._process();for(var j=this._hash,k=j.words,C=0;C<4;C++){var _=k[C];k[C]=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360}return j},clone:function(){var y=l.clone.call(this);return y._hash=this._hash.clone(),y}});function h(y,w,v,x,m,b,j){var k=y+(w&v|~w&x)+m+j;return(k<<b|k>>>32-b)+w}function f(y,w,v,x,m,b,j){var k=y+(w&x|v&~x)+m+j;return(k<<b|k>>>32-b)+w}function p(y,w,v,x,m,b,j){var k=y+(w^v^x)+m+j;return(k<<b|k>>>32-b)+w}function g(y,w,v,x,m,b,j){var k=y+(v^(w|~x))+m+j;return(k<<b|k>>>32-b)+w}s.MD5=l._createHelper(d),s.HmacMD5=l._createHmacHelper(d)}(Math),r.MD5})}(Kl)),Kl.exports}var Gl={exports:{}},Af;function uv(){return Af||(Af=1,function(e,t){(function(r,n){e.exports=n(le())})(J,function(r){return function(){var n=r,s=n.lib,i=s.WordArray,a=s.Hasher,l=n.algo,c=[],u=l.SHA1=a.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(d,h){for(var f=this._hash.words,p=f[0],g=f[1],y=f[2],w=f[3],v=f[4],x=0;x<80;x++){if(x<16)c[x]=d[h+x]|0;else{var m=c[x-3]^c[x-8]^c[x-14]^c[x-16];c[x]=m<<1|m>>>31}var b=(p<<5|p>>>27)+v+c[x];x<20?b+=(g&y|~g&w)+1518500249:x<40?b+=(g^y^w)+1859775393:x<60?b+=(g&y|g&w|y&w)-1894007588:b+=(g^y^w)-899497514,v=w,w=y,y=g<<30|g>>>2,g=p,p=b}f[0]=f[0]+p|0,f[1]=f[1]+g|0,f[2]=f[2]+y|0,f[3]=f[3]+w|0,f[4]=f[4]+v|0},_doFinalize:function(){var d=this._data,h=d.words,f=this._nDataBytes*8,p=d.sigBytes*8;return h[p>>>5]|=128<<24-p%32,h[(p+64>>>9<<4)+14]=Math.floor(f/4294967296),h[(p+64>>>9<<4)+15]=f,d.sigBytes=h.length*4,this._process(),this._hash},clone:function(){var d=a.clone.call(this);return d._hash=this._hash.clone(),d}});n.SHA1=a._createHelper(u),n.HmacSHA1=a._createHmacHelper(u)}(),r.SHA1})}(Gl)),Gl.exports}var Yl={exports:{}},Pf;function nd(){return Pf||(Pf=1,function(e,t){(function(r,n){e.exports=n(le())})(J,function(r){return function(n){var s=r,i=s.lib,a=i.WordArray,l=i.Hasher,c=s.algo,u=[],d=[];(function(){function p(v){for(var x=n.sqrt(v),m=2;m<=x;m++)if(!(v%m))return!1;return!0}function g(v){return(v-(v|0))*4294967296|0}for(var y=2,w=0;w<64;)p(y)&&(w<8&&(u[w]=g(n.pow(y,1/2))),d[w]=g(n.pow(y,1/3)),w++),y++})();var h=[],f=c.SHA256=l.extend({_doReset:function(){this._hash=new a.init(u.slice(0))},_doProcessBlock:function(p,g){for(var y=this._hash.words,w=y[0],v=y[1],x=y[2],m=y[3],b=y[4],j=y[5],k=y[6],C=y[7],_=0;_<64;_++){if(_<16)h[_]=p[g+_]|0;else{var P=h[_-15],S=(P<<25|P>>>7)^(P<<14|P>>>18)^P>>>3,B=h[_-2],A=(B<<15|B>>>17)^(B<<13|B>>>19)^B>>>10;h[_]=S+h[_-7]+A+h[_-16]}var D=b&j^~b&k,V=w&v^w&x^v&x,q=(w<<30|w>>>2)^(w<<19|w>>>13)^(w<<10|w>>>22),L=(b<<26|b>>>6)^(b<<21|b>>>11)^(b<<7|b>>>25),U=C+L+D+d[_]+h[_],R=q+V;C=k,k=j,j=b,b=m+U|0,m=x,x=v,v=w,w=U+R|0}y[0]=y[0]+w|0,y[1]=y[1]+v|0,y[2]=y[2]+x|0,y[3]=y[3]+m|0,y[4]=y[4]+b|0,y[5]=y[5]+j|0,y[6]=y[6]+k|0,y[7]=y[7]+C|0},_doFinalize:function(){var p=this._data,g=p.words,y=this._nDataBytes*8,w=p.sigBytes*8;return g[w>>>5]|=128<<24-w%32,g[(w+64>>>9<<4)+14]=n.floor(y/4294967296),g[(w+64>>>9<<4)+15]=y,p.sigBytes=g.length*4,this._process(),this._hash},clone:function(){var p=l.clone.call(this);return p._hash=this._hash.clone(),p}});s.SHA256=l._createHelper(f),s.HmacSHA256=l._createHmacHelper(f)}(Math),r.SHA256})}(Yl)),Yl.exports}var Ql={exports:{}},Df;function Gj(){return Df||(Df=1,function(e,t){(function(r,n,s){e.exports=n(le(),nd())})(J,function(r){return function(){var n=r,s=n.lib,i=s.WordArray,a=n.algo,l=a.SHA256,c=a.SHA224=l.extend({_doReset:function(){this._hash=new i.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var u=l._doFinalize.call(this);return u.sigBytes-=4,u}});n.SHA224=l._createHelper(c),n.HmacSHA224=l._createHmacHelper(c)}(),r.SHA224})}(Ql)),Ql.exports}var Xl={exports:{}},Bf;function dv(){return Bf||(Bf=1,function(e,t){(function(r,n,s){e.exports=n(le(),Go())})(J,function(r){return function(){var n=r,s=n.lib,i=s.Hasher,a=n.x64,l=a.Word,c=a.WordArray,u=n.algo;function d(){return l.create.apply(l,arguments)}var h=[d(1116352408,3609767458),d(1899447441,602891725),d(3049323471,3964484399),d(3921009573,2173295548),d(961987163,4081628472),d(1508970993,3053834265),d(2453635748,2937671579),d(2870763221,3664609560),d(3624381080,2734883394),d(310598401,1164996542),d(607225278,1323610764),d(1426881987,3590304994),d(1925078388,4068182383),d(2162078206,991336113),d(2614888103,633803317),d(3248222580,3479774868),d(3835390401,2666613458),d(4022224774,944711139),d(264347078,2341262773),d(604807628,2007800933),d(770255983,1495990901),d(1249150122,1856431235),d(1555081692,3175218132),d(1996064986,2198950837),d(2554220882,3999719339),d(2821834349,766784016),d(2952996808,2566594879),d(3210313671,3203337956),d(3336571891,1034457026),d(3584528711,2466948901),d(113926993,3758326383),d(338241895,168717936),d(666307205,1188179964),d(773529912,1546045734),d(1294757372,1522805485),d(1396182291,2643833823),d(1695183700,2343527390),d(1986661051,1014477480),d(2177026350,1206759142),d(2456956037,344077627),d(2730485921,1290863460),d(2820302411,3158454273),d(3259730800,3505952657),d(3345764771,106217008),d(3516065817,3606008344),d(3600352804,1432725776),d(4094571909,1467031594),d(275423344,851169720),d(430227734,3100823752),d(506948616,1363258195),d(659060556,3750685593),d(883997877,3785050280),d(958139571,3318307427),d(1322822218,3812723403),d(1537002063,2003034995),d(1747873779,3602036899),d(1955562222,1575990012),d(2024104815,1125592928),d(2227730452,2716904306),d(2361852424,442776044),d(2428436474,593698344),d(2756734187,3733110249),d(3204031479,2999351573),d(3329325298,3815920427),d(3391569614,3928383900),d(3515267271,566280711),d(3940187606,3454069534),d(4118630271,4000239992),d(116418474,1914138554),d(174292421,2731055270),d(289380356,3203993006),d(460393269,320620315),d(685471733,587496836),d(852142971,1086792851),d(1017036298,365543100),d(1126000580,2618297676),d(1288033470,3409855158),d(1501505948,4234509866),d(1607167915,987167468),d(1816402316,1246189591)],f=[];(function(){for(var g=0;g<80;g++)f[g]=d()})();var p=u.SHA512=i.extend({_doReset:function(){this._hash=new c.init([new l.init(1779033703,4089235720),new l.init(3144134277,2227873595),new l.init(1013904242,4271175723),new l.init(2773480762,1595750129),new l.init(1359893119,2917565137),new l.init(2600822924,725511199),new l.init(528734635,4215389547),new l.init(1541459225,327033209)])},_doProcessBlock:function(g,y){for(var w=this._hash.words,v=w[0],x=w[1],m=w[2],b=w[3],j=w[4],k=w[5],C=w[6],_=w[7],P=v.high,S=v.low,B=x.high,A=x.low,D=m.high,V=m.low,q=b.high,L=b.low,U=j.high,R=j.low,T=k.high,z=k.low,E=C.high,F=C.low,I=_.high,O=_.low,Q=P,X=S,ce=B,G=A,fe=D,Ne=V,Ie=q,re=L,be=U,Be=R,_t=T,Et=z,Je=E,M=F,te=I,ne=O,ie=0;ie<80;ie++){var Se,Wt,Pn=f[ie];if(ie<16)Wt=Pn.high=g[y+ie*2]|0,Se=Pn.low=g[y+ie*2+1]|0;else{var qi=f[ie-15],mr=qi.high,Xr=qi.low,il=(mr>>>1|Xr<<31)^(mr>>>8|Xr<<24)^mr>>>7,$=(Xr>>>1|mr<<31)^(Xr>>>8|mr<<24)^(Xr>>>7|mr<<25),W=f[ie-2],K=W.high,he=W.low,Nt=(K>>>19|he<<13)^(K<<3|he>>>29)^K>>>6,Me=(he>>>19|K<<13)^(he<<3|K>>>29)^(he>>>6|K<<26),Zt=f[ie-7],Ki=Zt.high,al=Zt.low,Td=f[ie-16],Qy=Td.high,Rd=Td.low;Se=$+al,Wt=il+Ki+(Se>>>0<$>>>0?1:0),Se=Se+Me,Wt=Wt+Nt+(Se>>>0<Me>>>0?1:0),Se=Se+Rd,Wt=Wt+Qy+(Se>>>0<Rd>>>0?1:0),Pn.high=Wt,Pn.low=Se}var Xy=be&_t^~be&Je,Ld=Be&Et^~Be&M,Zy=Q&ce^Q&fe^ce&fe,Jy=X&G^X&Ne^G&Ne,e1=(Q>>>28|X<<4)^(Q<<30|X>>>2)^(Q<<25|X>>>7),Od=(X>>>28|Q<<4)^(X<<30|Q>>>2)^(X<<25|Q>>>7),t1=(be>>>14|Be<<18)^(be>>>18|Be<<14)^(be<<23|Be>>>9),r1=(Be>>>14|be<<18)^(Be>>>18|be<<14)^(Be<<23|be>>>9),Id=h[ie],n1=Id.high,Md=Id.low,mt=ne+r1,gr=te+t1+(mt>>>0<ne>>>0?1:0),mt=mt+Ld,gr=gr+Xy+(mt>>>0<Ld>>>0?1:0),mt=mt+Md,gr=gr+n1+(mt>>>0<Md>>>0?1:0),mt=mt+Se,gr=gr+Wt+(mt>>>0<Se>>>0?1:0),Ud=Od+Jy,s1=e1+Zy+(Ud>>>0<Od>>>0?1:0);te=Je,ne=M,Je=_t,M=Et,_t=be,Et=Be,Be=re+mt|0,be=Ie+gr+(Be>>>0<re>>>0?1:0)|0,Ie=fe,re=Ne,fe=ce,Ne=G,ce=Q,G=X,X=mt+Ud|0,Q=gr+s1+(X>>>0<mt>>>0?1:0)|0}S=v.low=S+X,v.high=P+Q+(S>>>0<X>>>0?1:0),A=x.low=A+G,x.high=B+ce+(A>>>0<G>>>0?1:0),V=m.low=V+Ne,m.high=D+fe+(V>>>0<Ne>>>0?1:0),L=b.low=L+re,b.high=q+Ie+(L>>>0<re>>>0?1:0),R=j.low=R+Be,j.high=U+be+(R>>>0<Be>>>0?1:0),z=k.low=z+Et,k.high=T+_t+(z>>>0<Et>>>0?1:0),F=C.low=F+M,C.high=E+Je+(F>>>0<M>>>0?1:0),O=_.low=O+ne,_.high=I+te+(O>>>0<ne>>>0?1:0)},_doFinalize:function(){var g=this._data,y=g.words,w=this._nDataBytes*8,v=g.sigBytes*8;y[v>>>5]|=128<<24-v%32,y[(v+128>>>10<<5)+30]=Math.floor(w/4294967296),y[(v+128>>>10<<5)+31]=w,g.sigBytes=y.length*4,this._process();var x=this._hash.toX32();return x},clone:function(){var g=i.clone.call(this);return g._hash=this._hash.clone(),g},blockSize:1024/32});n.SHA512=i._createHelper(p),n.HmacSHA512=i._createHmacHelper(p)}(),r.SHA512})}(Xl)),Xl.exports}var Zl={exports:{}},Ff;function Yj(){return Ff||(Ff=1,function(e,t){(function(r,n,s){e.exports=n(le(),Go(),dv())})(J,function(r){return function(){var n=r,s=n.x64,i=s.Word,a=s.WordArray,l=n.algo,c=l.SHA512,u=l.SHA384=c.extend({_doReset:function(){this._hash=new a.init([new i.init(3418070365,3238371032),new i.init(1654270250,914150663),new i.init(2438529370,812702999),new i.init(355462360,4144912697),new i.init(1731405415,4290775857),new i.init(2394180231,1750603025),new i.init(3675008525,1694076839),new i.init(1203062813,3204075428)])},_doFinalize:function(){var d=c._doFinalize.call(this);return d.sigBytes-=16,d}});n.SHA384=c._createHelper(u),n.HmacSHA384=c._createHmacHelper(u)}(),r.SHA384})}(Zl)),Zl.exports}var Jl={exports:{}},Tf;function Qj(){return Tf||(Tf=1,function(e,t){(function(r,n,s){e.exports=n(le(),Go())})(J,function(r){return function(n){var s=r,i=s.lib,a=i.WordArray,l=i.Hasher,c=s.x64,u=c.Word,d=s.algo,h=[],f=[],p=[];(function(){for(var w=1,v=0,x=0;x<24;x++){h[w+5*v]=(x+1)*(x+2)/2%64;var m=v%5,b=(2*w+3*v)%5;w=m,v=b}for(var w=0;w<5;w++)for(var v=0;v<5;v++)f[w+5*v]=v+(2*w+3*v)%5*5;for(var j=1,k=0;k<24;k++){for(var C=0,_=0,P=0;P<7;P++){if(j&1){var S=(1<<P)-1;S<32?_^=1<<S:C^=1<<S-32}j&128?j=j<<1^113:j<<=1}p[k]=u.create(C,_)}})();var g=[];(function(){for(var w=0;w<25;w++)g[w]=u.create()})();var y=d.SHA3=l.extend({cfg:l.cfg.extend({outputLength:512}),_doReset:function(){for(var w=this._state=[],v=0;v<25;v++)w[v]=new u.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(w,v){for(var x=this._state,m=this.blockSize/2,b=0;b<m;b++){var j=w[v+2*b],k=w[v+2*b+1];j=(j<<8|j>>>24)&16711935|(j<<24|j>>>8)&4278255360,k=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360;var C=x[b];C.high^=k,C.low^=j}for(var _=0;_<24;_++){for(var P=0;P<5;P++){for(var S=0,B=0,A=0;A<5;A++){var C=x[P+5*A];S^=C.high,B^=C.low}var D=g[P];D.high=S,D.low=B}for(var P=0;P<5;P++)for(var V=g[(P+4)%5],q=g[(P+1)%5],L=q.high,U=q.low,S=V.high^(L<<1|U>>>31),B=V.low^(U<<1|L>>>31),A=0;A<5;A++){var C=x[P+5*A];C.high^=S,C.low^=B}for(var R=1;R<25;R++){var S,B,C=x[R],T=C.high,z=C.low,E=h[R];E<32?(S=T<<E|z>>>32-E,B=z<<E|T>>>32-E):(S=z<<E-32|T>>>64-E,B=T<<E-32|z>>>64-E);var F=g[f[R]];F.high=S,F.low=B}var I=g[0],O=x[0];I.high=O.high,I.low=O.low;for(var P=0;P<5;P++)for(var A=0;A<5;A++){var R=P+5*A,C=x[R],Q=g[R],X=g[(P+1)%5+5*A],ce=g[(P+2)%5+5*A];C.high=Q.high^~X.high&ce.high,C.low=Q.low^~X.low&ce.low}var C=x[0],G=p[_];C.high^=G.high,C.low^=G.low}},_doFinalize:function(){var w=this._data,v=w.words;this._nDataBytes*8;var x=w.sigBytes*8,m=this.blockSize*32;v[x>>>5]|=1<<24-x%32,v[(n.ceil((x+1)/m)*m>>>5)-1]|=128,w.sigBytes=v.length*4,this._process();for(var b=this._state,j=this.cfg.outputLength/8,k=j/8,C=[],_=0;_<k;_++){var P=b[_],S=P.high,B=P.low;S=(S<<8|S>>>24)&16711935|(S<<24|S>>>8)&4278255360,B=(B<<8|B>>>24)&16711935|(B<<24|B>>>8)&4278255360,C.push(B),C.push(S)}return new a.init(C,j)},clone:function(){for(var w=l.clone.call(this),v=w._state=this._state.slice(0),x=0;x<25;x++)v[x]=v[x].clone();return w}});s.SHA3=l._createHelper(y),s.HmacSHA3=l._createHmacHelper(y)}(Math),r.SHA3})}(Jl)),Jl.exports}var ec={exports:{}},Rf;function Xj(){return Rf||(Rf=1,function(e,t){(function(r,n){e.exports=n(le())})(J,function(r){/** @preserve
			(c) 2012 by Cédric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(n){var s=r,i=s.lib,a=i.WordArray,l=i.Hasher,c=s.algo,u=a.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),d=a.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),h=a.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),f=a.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),p=a.create([0,1518500249,1859775393,2400959708,2840853838]),g=a.create([1352829926,1548603684,1836072691,2053994217,0]),y=c.RIPEMD160=l.extend({_doReset:function(){this._hash=a.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(k,C){for(var _=0;_<16;_++){var P=C+_,S=k[P];k[P]=(S<<8|S>>>24)&16711935|(S<<24|S>>>8)&4278255360}var B=this._hash.words,A=p.words,D=g.words,V=u.words,q=d.words,L=h.words,U=f.words,R,T,z,E,F,I,O,Q,X,ce;I=R=B[0],O=T=B[1],Q=z=B[2],X=E=B[3],ce=F=B[4];for(var G,_=0;_<80;_+=1)G=R+k[C+V[_]]|0,_<16?G+=w(T,z,E)+A[0]:_<32?G+=v(T,z,E)+A[1]:_<48?G+=x(T,z,E)+A[2]:_<64?G+=m(T,z,E)+A[3]:G+=b(T,z,E)+A[4],G=G|0,G=j(G,L[_]),G=G+F|0,R=F,F=E,E=j(z,10),z=T,T=G,G=I+k[C+q[_]]|0,_<16?G+=b(O,Q,X)+D[0]:_<32?G+=m(O,Q,X)+D[1]:_<48?G+=x(O,Q,X)+D[2]:_<64?G+=v(O,Q,X)+D[3]:G+=w(O,Q,X)+D[4],G=G|0,G=j(G,U[_]),G=G+ce|0,I=ce,ce=X,X=j(Q,10),Q=O,O=G;G=B[1]+z+X|0,B[1]=B[2]+E+ce|0,B[2]=B[3]+F+I|0,B[3]=B[4]+R+O|0,B[4]=B[0]+T+Q|0,B[0]=G},_doFinalize:function(){var k=this._data,C=k.words,_=this._nDataBytes*8,P=k.sigBytes*8;C[P>>>5]|=128<<24-P%32,C[(P+64>>>9<<4)+14]=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360,k.sigBytes=(C.length+1)*4,this._process();for(var S=this._hash,B=S.words,A=0;A<5;A++){var D=B[A];B[A]=(D<<8|D>>>24)&16711935|(D<<24|D>>>8)&4278255360}return S},clone:function(){var k=l.clone.call(this);return k._hash=this._hash.clone(),k}});function w(k,C,_){return k^C^_}function v(k,C,_){return k&C|~k&_}function x(k,C,_){return(k|~C)^_}function m(k,C,_){return k&_|C&~_}function b(k,C,_){return k^(C|~_)}function j(k,C){return k<<C|k>>>32-C}s.RIPEMD160=l._createHelper(y),s.HmacRIPEMD160=l._createHmacHelper(y)}(),r.RIPEMD160})}(ec)),ec.exports}var tc={exports:{}},Lf;function sd(){return Lf||(Lf=1,function(e,t){(function(r,n){e.exports=n(le())})(J,function(r){(function(){var n=r,s=n.lib,i=s.Base,a=n.enc,l=a.Utf8,c=n.algo;c.HMAC=i.extend({init:function(u,d){u=this._hasher=new u.init,typeof d=="string"&&(d=l.parse(d));var h=u.blockSize,f=h*4;d.sigBytes>f&&(d=u.finalize(d)),d.clamp();for(var p=this._oKey=d.clone(),g=this._iKey=d.clone(),y=p.words,w=g.words,v=0;v<h;v++)y[v]^=1549556828,w[v]^=909522486;p.sigBytes=g.sigBytes=f,this.reset()},reset:function(){var u=this._hasher;u.reset(),u.update(this._iKey)},update:function(u){return this._hasher.update(u),this},finalize:function(u){var d=this._hasher,h=d.finalize(u);d.reset();var f=d.finalize(this._oKey.clone().concat(h));return f}})})()})}(tc)),tc.exports}var rc={exports:{}},Of;function Zj(){return Of||(Of=1,function(e,t){(function(r,n,s){e.exports=n(le(),nd(),sd())})(J,function(r){return function(){var n=r,s=n.lib,i=s.Base,a=s.WordArray,l=n.algo,c=l.SHA256,u=l.HMAC,d=l.PBKDF2=i.extend({cfg:i.extend({keySize:128/32,hasher:c,iterations:25e4}),init:function(h){this.cfg=this.cfg.extend(h)},compute:function(h,f){for(var p=this.cfg,g=u.create(p.hasher,h),y=a.create(),w=a.create([1]),v=y.words,x=w.words,m=p.keySize,b=p.iterations;v.length<m;){var j=g.update(f).finalize(w);g.reset();for(var k=j.words,C=k.length,_=j,P=1;P<b;P++){_=g.finalize(_),g.reset();for(var S=_.words,B=0;B<C;B++)k[B]^=S[B]}y.concat(j),x[0]++}return y.sigBytes=m*4,y}});n.PBKDF2=function(h,f,p){return d.create(p).compute(h,f)}}(),r.PBKDF2})}(rc)),rc.exports}var nc={exports:{}},If;function Yr(){return If||(If=1,function(e,t){(function(r,n,s){e.exports=n(le(),uv(),sd())})(J,function(r){return function(){var n=r,s=n.lib,i=s.Base,a=s.WordArray,l=n.algo,c=l.MD5,u=l.EvpKDF=i.extend({cfg:i.extend({keySize:128/32,hasher:c,iterations:1}),init:function(d){this.cfg=this.cfg.extend(d)},compute:function(d,h){for(var f,p=this.cfg,g=p.hasher.create(),y=a.create(),w=y.words,v=p.keySize,x=p.iterations;w.length<v;){f&&g.update(f),f=g.update(d).finalize(h),g.reset();for(var m=1;m<x;m++)f=g.finalize(f),g.reset();y.concat(f)}return y.sigBytes=v*4,y}});n.EvpKDF=function(d,h,f){return u.create(f).compute(d,h)}}(),r.EvpKDF})}(nc)),nc.exports}var sc={exports:{}},Mf;function Ve(){return Mf||(Mf=1,function(e,t){(function(r,n,s){e.exports=n(le(),Yr())})(J,function(r){r.lib.Cipher||function(n){var s=r,i=s.lib,a=i.Base,l=i.WordArray,c=i.BufferedBlockAlgorithm,u=s.enc;u.Utf8;var d=u.Base64,h=s.algo,f=h.EvpKDF,p=i.Cipher=c.extend({cfg:a.extend(),createEncryptor:function(S,B){return this.create(this._ENC_XFORM_MODE,S,B)},createDecryptor:function(S,B){return this.create(this._DEC_XFORM_MODE,S,B)},init:function(S,B,A){this.cfg=this.cfg.extend(A),this._xformMode=S,this._key=B,this.reset()},reset:function(){c.reset.call(this),this._doReset()},process:function(S){return this._append(S),this._process()},finalize:function(S){S&&this._append(S);var B=this._doFinalize();return B},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function S(B){return typeof B=="string"?P:k}return function(B){return{encrypt:function(A,D,V){return S(D).encrypt(B,A,D,V)},decrypt:function(A,D,V){return S(D).decrypt(B,A,D,V)}}}}()});i.StreamCipher=p.extend({_doFinalize:function(){var S=this._process(!0);return S},blockSize:1});var g=s.mode={},y=i.BlockCipherMode=a.extend({createEncryptor:function(S,B){return this.Encryptor.create(S,B)},createDecryptor:function(S,B){return this.Decryptor.create(S,B)},init:function(S,B){this._cipher=S,this._iv=B}}),w=g.CBC=function(){var S=y.extend();S.Encryptor=S.extend({processBlock:function(A,D){var V=this._cipher,q=V.blockSize;B.call(this,A,D,q),V.encryptBlock(A,D),this._prevBlock=A.slice(D,D+q)}}),S.Decryptor=S.extend({processBlock:function(A,D){var V=this._cipher,q=V.blockSize,L=A.slice(D,D+q);V.decryptBlock(A,D),B.call(this,A,D,q),this._prevBlock=L}});function B(A,D,V){var q,L=this._iv;L?(q=L,this._iv=n):q=this._prevBlock;for(var U=0;U<V;U++)A[D+U]^=q[U]}return S}(),v=s.pad={},x=v.Pkcs7={pad:function(S,B){for(var A=B*4,D=A-S.sigBytes%A,V=D<<24|D<<16|D<<8|D,q=[],L=0;L<D;L+=4)q.push(V);var U=l.create(q,D);S.concat(U)},unpad:function(S){var B=S.words[S.sigBytes-1>>>2]&255;S.sigBytes-=B}};i.BlockCipher=p.extend({cfg:p.cfg.extend({mode:w,padding:x}),reset:function(){var S;p.reset.call(this);var B=this.cfg,A=B.iv,D=B.mode;this._xformMode==this._ENC_XFORM_MODE?S=D.createEncryptor:(S=D.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==S?this._mode.init(this,A&&A.words):(this._mode=S.call(D,this,A&&A.words),this._mode.__creator=S)},_doProcessBlock:function(S,B){this._mode.processBlock(S,B)},_doFinalize:function(){var S,B=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(B.pad(this._data,this.blockSize),S=this._process(!0)):(S=this._process(!0),B.unpad(S)),S},blockSize:128/32});var m=i.CipherParams=a.extend({init:function(S){this.mixIn(S)},toString:function(S){return(S||this.formatter).stringify(this)}}),b=s.format={},j=b.OpenSSL={stringify:function(S){var B,A=S.ciphertext,D=S.salt;return D?B=l.create([1398893684,1701076831]).concat(D).concat(A):B=A,B.toString(d)},parse:function(S){var B,A=d.parse(S),D=A.words;return D[0]==1398893684&&D[1]==1701076831&&(B=l.create(D.slice(2,4)),D.splice(0,4),A.sigBytes-=16),m.create({ciphertext:A,salt:B})}},k=i.SerializableCipher=a.extend({cfg:a.extend({format:j}),encrypt:function(S,B,A,D){D=this.cfg.extend(D);var V=S.createEncryptor(A,D),q=V.finalize(B),L=V.cfg;return m.create({ciphertext:q,key:A,iv:L.iv,algorithm:S,mode:L.mode,padding:L.padding,blockSize:S.blockSize,formatter:D.format})},decrypt:function(S,B,A,D){D=this.cfg.extend(D),B=this._parse(B,D.format);var V=S.createDecryptor(A,D).finalize(B.ciphertext);return V},_parse:function(S,B){return typeof S=="string"?B.parse(S,this):S}}),C=s.kdf={},_=C.OpenSSL={execute:function(S,B,A,D,V){if(D||(D=l.random(64/8)),V)var q=f.create({keySize:B+A,hasher:V}).compute(S,D);else var q=f.create({keySize:B+A}).compute(S,D);var L=l.create(q.words.slice(B),A*4);return q.sigBytes=B*4,m.create({key:q,iv:L,salt:D})}},P=i.PasswordBasedCipher=k.extend({cfg:k.cfg.extend({kdf:_}),encrypt:function(S,B,A,D){D=this.cfg.extend(D);var V=D.kdf.execute(A,S.keySize,S.ivSize,D.salt,D.hasher);D.iv=V.iv;var q=k.encrypt.call(this,S,B,V.key,D);return q.mixIn(V),q},decrypt:function(S,B,A,D){D=this.cfg.extend(D),B=this._parse(B,D.format);var V=D.kdf.execute(A,S.keySize,S.ivSize,B.salt,D.hasher);D.iv=V.iv;var q=k.decrypt.call(this,S,B,V.key,D);return q}})}()})}(sc)),sc.exports}var ic={exports:{}},Uf;function Jj(){return Uf||(Uf=1,function(e,t){(function(r,n,s){e.exports=n(le(),Ve())})(J,function(r){return r.mode.CFB=function(){var n=r.lib.BlockCipherMode.extend();n.Encryptor=n.extend({processBlock:function(i,a){var l=this._cipher,c=l.blockSize;s.call(this,i,a,c,l),this._prevBlock=i.slice(a,a+c)}}),n.Decryptor=n.extend({processBlock:function(i,a){var l=this._cipher,c=l.blockSize,u=i.slice(a,a+c);s.call(this,i,a,c,l),this._prevBlock=u}});function s(i,a,l,c){var u,d=this._iv;d?(u=d.slice(0),this._iv=void 0):u=this._prevBlock,c.encryptBlock(u,0);for(var h=0;h<l;h++)i[a+h]^=u[h]}return n}(),r.mode.CFB})}(ic)),ic.exports}var ac={exports:{}},$f;function eC(){return $f||($f=1,function(e,t){(function(r,n,s){e.exports=n(le(),Ve())})(J,function(r){return r.mode.CTR=function(){var n=r.lib.BlockCipherMode.extend(),s=n.Encryptor=n.extend({processBlock:function(i,a){var l=this._cipher,c=l.blockSize,u=this._iv,d=this._counter;u&&(d=this._counter=u.slice(0),this._iv=void 0);var h=d.slice(0);l.encryptBlock(h,0),d[c-1]=d[c-1]+1|0;for(var f=0;f<c;f++)i[a+f]^=h[f]}});return n.Decryptor=s,n}(),r.mode.CTR})}(ac)),ac.exports}var oc={exports:{}},zf;function tC(){return zf||(zf=1,function(e,t){(function(r,n,s){e.exports=n(le(),Ve())})(J,function(r){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return r.mode.CTRGladman=function(){var n=r.lib.BlockCipherMode.extend();function s(l){if((l>>24&255)===255){var c=l>>16&255,u=l>>8&255,d=l&255;c===255?(c=0,u===255?(u=0,d===255?d=0:++d):++u):++c,l=0,l+=c<<16,l+=u<<8,l+=d}else l+=1<<24;return l}function i(l){return(l[0]=s(l[0]))===0&&(l[1]=s(l[1])),l}var a=n.Encryptor=n.extend({processBlock:function(l,c){var u=this._cipher,d=u.blockSize,h=this._iv,f=this._counter;h&&(f=this._counter=h.slice(0),this._iv=void 0),i(f);var p=f.slice(0);u.encryptBlock(p,0);for(var g=0;g<d;g++)l[c+g]^=p[g]}});return n.Decryptor=a,n}(),r.mode.CTRGladman})}(oc)),oc.exports}var lc={exports:{}},Vf;function rC(){return Vf||(Vf=1,function(e,t){(function(r,n,s){e.exports=n(le(),Ve())})(J,function(r){return r.mode.OFB=function(){var n=r.lib.BlockCipherMode.extend(),s=n.Encryptor=n.extend({processBlock:function(i,a){var l=this._cipher,c=l.blockSize,u=this._iv,d=this._keystream;u&&(d=this._keystream=u.slice(0),this._iv=void 0),l.encryptBlock(d,0);for(var h=0;h<c;h++)i[a+h]^=d[h]}});return n.Decryptor=s,n}(),r.mode.OFB})}(lc)),lc.exports}var cc={exports:{}},Hf;function nC(){return Hf||(Hf=1,function(e,t){(function(r,n,s){e.exports=n(le(),Ve())})(J,function(r){return r.mode.ECB=function(){var n=r.lib.BlockCipherMode.extend();return n.Encryptor=n.extend({processBlock:function(s,i){this._cipher.encryptBlock(s,i)}}),n.Decryptor=n.extend({processBlock:function(s,i){this._cipher.decryptBlock(s,i)}}),n}(),r.mode.ECB})}(cc)),cc.exports}var uc={exports:{}},Wf;function sC(){return Wf||(Wf=1,function(e,t){(function(r,n,s){e.exports=n(le(),Ve())})(J,function(r){return r.pad.AnsiX923={pad:function(n,s){var i=n.sigBytes,a=s*4,l=a-i%a,c=i+l-1;n.clamp(),n.words[c>>>2]|=l<<24-c%4*8,n.sigBytes+=l},unpad:function(n){var s=n.words[n.sigBytes-1>>>2]&255;n.sigBytes-=s}},r.pad.Ansix923})}(uc)),uc.exports}var dc={exports:{}},qf;function iC(){return qf||(qf=1,function(e,t){(function(r,n,s){e.exports=n(le(),Ve())})(J,function(r){return r.pad.Iso10126={pad:function(n,s){var i=s*4,a=i-n.sigBytes%i;n.concat(r.lib.WordArray.random(a-1)).concat(r.lib.WordArray.create([a<<24],1))},unpad:function(n){var s=n.words[n.sigBytes-1>>>2]&255;n.sigBytes-=s}},r.pad.Iso10126})}(dc)),dc.exports}var hc={exports:{}},Kf;function aC(){return Kf||(Kf=1,function(e,t){(function(r,n,s){e.exports=n(le(),Ve())})(J,function(r){return r.pad.Iso97971={pad:function(n,s){n.concat(r.lib.WordArray.create([2147483648],1)),r.pad.ZeroPadding.pad(n,s)},unpad:function(n){r.pad.ZeroPadding.unpad(n),n.sigBytes--}},r.pad.Iso97971})}(hc)),hc.exports}var fc={exports:{}},Gf;function oC(){return Gf||(Gf=1,function(e,t){(function(r,n,s){e.exports=n(le(),Ve())})(J,function(r){return r.pad.ZeroPadding={pad:function(n,s){var i=s*4;n.clamp(),n.sigBytes+=i-(n.sigBytes%i||i)},unpad:function(n){for(var s=n.words,i=n.sigBytes-1,i=n.sigBytes-1;i>=0;i--)if(s[i>>>2]>>>24-i%4*8&255){n.sigBytes=i+1;break}}},r.pad.ZeroPadding})}(fc)),fc.exports}var pc={exports:{}},Yf;function lC(){return Yf||(Yf=1,function(e,t){(function(r,n,s){e.exports=n(le(),Ve())})(J,function(r){return r.pad.NoPadding={pad:function(){},unpad:function(){}},r.pad.NoPadding})}(pc)),pc.exports}var xc={exports:{}},Qf;function cC(){return Qf||(Qf=1,function(e,t){(function(r,n,s){e.exports=n(le(),Ve())})(J,function(r){return function(n){var s=r,i=s.lib,a=i.CipherParams,l=s.enc,c=l.Hex,u=s.format;u.Hex={stringify:function(d){return d.ciphertext.toString(c)},parse:function(d){var h=c.parse(d);return a.create({ciphertext:h})}}}(),r.format.Hex})}(xc)),xc.exports}var mc={exports:{}},Xf;function uC(){return Xf||(Xf=1,function(e,t){(function(r,n,s){e.exports=n(le(),En(),Nn(),Yr(),Ve())})(J,function(r){return function(){var n=r,s=n.lib,i=s.BlockCipher,a=n.algo,l=[],c=[],u=[],d=[],h=[],f=[],p=[],g=[],y=[],w=[];(function(){for(var m=[],b=0;b<256;b++)b<128?m[b]=b<<1:m[b]=b<<1^283;for(var j=0,k=0,b=0;b<256;b++){var C=k^k<<1^k<<2^k<<3^k<<4;C=C>>>8^C&255^99,l[j]=C,c[C]=j;var _=m[j],P=m[_],S=m[P],B=m[C]*257^C*16843008;u[j]=B<<24|B>>>8,d[j]=B<<16|B>>>16,h[j]=B<<8|B>>>24,f[j]=B;var B=S*16843009^P*65537^_*257^j*16843008;p[C]=B<<24|B>>>8,g[C]=B<<16|B>>>16,y[C]=B<<8|B>>>24,w[C]=B,j?(j=_^m[m[m[S^_]]],k^=m[m[k]]):j=k=1}})();var v=[0,1,2,4,8,16,32,64,128,27,54],x=a.AES=i.extend({_doReset:function(){var m;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var b=this._keyPriorReset=this._key,j=b.words,k=b.sigBytes/4,C=this._nRounds=k+6,_=(C+1)*4,P=this._keySchedule=[],S=0;S<_;S++)S<k?P[S]=j[S]:(m=P[S-1],S%k?k>6&&S%k==4&&(m=l[m>>>24]<<24|l[m>>>16&255]<<16|l[m>>>8&255]<<8|l[m&255]):(m=m<<8|m>>>24,m=l[m>>>24]<<24|l[m>>>16&255]<<16|l[m>>>8&255]<<8|l[m&255],m^=v[S/k|0]<<24),P[S]=P[S-k]^m);for(var B=this._invKeySchedule=[],A=0;A<_;A++){var S=_-A;if(A%4)var m=P[S];else var m=P[S-4];A<4||S<=4?B[A]=m:B[A]=p[l[m>>>24]]^g[l[m>>>16&255]]^y[l[m>>>8&255]]^w[l[m&255]]}}},encryptBlock:function(m,b){this._doCryptBlock(m,b,this._keySchedule,u,d,h,f,l)},decryptBlock:function(m,b){var j=m[b+1];m[b+1]=m[b+3],m[b+3]=j,this._doCryptBlock(m,b,this._invKeySchedule,p,g,y,w,c);var j=m[b+1];m[b+1]=m[b+3],m[b+3]=j},_doCryptBlock:function(m,b,j,k,C,_,P,S){for(var B=this._nRounds,A=m[b]^j[0],D=m[b+1]^j[1],V=m[b+2]^j[2],q=m[b+3]^j[3],L=4,U=1;U<B;U++){var R=k[A>>>24]^C[D>>>16&255]^_[V>>>8&255]^P[q&255]^j[L++],T=k[D>>>24]^C[V>>>16&255]^_[q>>>8&255]^P[A&255]^j[L++],z=k[V>>>24]^C[q>>>16&255]^_[A>>>8&255]^P[D&255]^j[L++],E=k[q>>>24]^C[A>>>16&255]^_[D>>>8&255]^P[V&255]^j[L++];A=R,D=T,V=z,q=E}var R=(S[A>>>24]<<24|S[D>>>16&255]<<16|S[V>>>8&255]<<8|S[q&255])^j[L++],T=(S[D>>>24]<<24|S[V>>>16&255]<<16|S[q>>>8&255]<<8|S[A&255])^j[L++],z=(S[V>>>24]<<24|S[q>>>16&255]<<16|S[A>>>8&255]<<8|S[D&255])^j[L++],E=(S[q>>>24]<<24|S[A>>>16&255]<<16|S[D>>>8&255]<<8|S[V&255])^j[L++];m[b]=R,m[b+1]=T,m[b+2]=z,m[b+3]=E},keySize:256/32});n.AES=i._createHelper(x)}(),r.AES})}(mc)),mc.exports}var gc={exports:{}},Zf;function dC(){return Zf||(Zf=1,function(e,t){(function(r,n,s){e.exports=n(le(),En(),Nn(),Yr(),Ve())})(J,function(r){return function(){var n=r,s=n.lib,i=s.WordArray,a=s.BlockCipher,l=n.algo,c=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],u=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],d=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],h=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],f=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],p=l.DES=a.extend({_doReset:function(){for(var v=this._key,x=v.words,m=[],b=0;b<56;b++){var j=c[b]-1;m[b]=x[j>>>5]>>>31-j%32&1}for(var k=this._subKeys=[],C=0;C<16;C++){for(var _=k[C]=[],P=d[C],b=0;b<24;b++)_[b/6|0]|=m[(u[b]-1+P)%28]<<31-b%6,_[4+(b/6|0)]|=m[28+(u[b+24]-1+P)%28]<<31-b%6;_[0]=_[0]<<1|_[0]>>>31;for(var b=1;b<7;b++)_[b]=_[b]>>>(b-1)*4+3;_[7]=_[7]<<5|_[7]>>>27}for(var S=this._invSubKeys=[],b=0;b<16;b++)S[b]=k[15-b]},encryptBlock:function(v,x){this._doCryptBlock(v,x,this._subKeys)},decryptBlock:function(v,x){this._doCryptBlock(v,x,this._invSubKeys)},_doCryptBlock:function(v,x,m){this._lBlock=v[x],this._rBlock=v[x+1],g.call(this,4,252645135),g.call(this,16,65535),y.call(this,2,858993459),y.call(this,8,16711935),g.call(this,1,1431655765);for(var b=0;b<16;b++){for(var j=m[b],k=this._lBlock,C=this._rBlock,_=0,P=0;P<8;P++)_|=h[P][((C^j[P])&f[P])>>>0];this._lBlock=C,this._rBlock=k^_}var S=this._lBlock;this._lBlock=this._rBlock,this._rBlock=S,g.call(this,1,1431655765),y.call(this,8,16711935),y.call(this,2,858993459),g.call(this,16,65535),g.call(this,4,252645135),v[x]=this._lBlock,v[x+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function g(v,x){var m=(this._lBlock>>>v^this._rBlock)&x;this._rBlock^=m,this._lBlock^=m<<v}function y(v,x){var m=(this._rBlock>>>v^this._lBlock)&x;this._lBlock^=m,this._rBlock^=m<<v}n.DES=a._createHelper(p);var w=l.TripleDES=a.extend({_doReset:function(){var v=this._key,x=v.words;if(x.length!==2&&x.length!==4&&x.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var m=x.slice(0,2),b=x.length<4?x.slice(0,2):x.slice(2,4),j=x.length<6?x.slice(0,2):x.slice(4,6);this._des1=p.createEncryptor(i.create(m)),this._des2=p.createEncryptor(i.create(b)),this._des3=p.createEncryptor(i.create(j))},encryptBlock:function(v,x){this._des1.encryptBlock(v,x),this._des2.decryptBlock(v,x),this._des3.encryptBlock(v,x)},decryptBlock:function(v,x){this._des3.decryptBlock(v,x),this._des2.encryptBlock(v,x),this._des1.decryptBlock(v,x)},keySize:192/32,ivSize:64/32,blockSize:64/32});n.TripleDES=a._createHelper(w)}(),r.TripleDES})}(gc)),gc.exports}var vc={exports:{}},Jf;function hC(){return Jf||(Jf=1,function(e,t){(function(r,n,s){e.exports=n(le(),En(),Nn(),Yr(),Ve())})(J,function(r){return function(){var n=r,s=n.lib,i=s.StreamCipher,a=n.algo,l=a.RC4=i.extend({_doReset:function(){for(var d=this._key,h=d.words,f=d.sigBytes,p=this._S=[],g=0;g<256;g++)p[g]=g;for(var g=0,y=0;g<256;g++){var w=g%f,v=h[w>>>2]>>>24-w%4*8&255;y=(y+p[g]+v)%256;var x=p[g];p[g]=p[y],p[y]=x}this._i=this._j=0},_doProcessBlock:function(d,h){d[h]^=c.call(this)},keySize:256/32,ivSize:0});function c(){for(var d=this._S,h=this._i,f=this._j,p=0,g=0;g<4;g++){h=(h+1)%256,f=(f+d[h])%256;var y=d[h];d[h]=d[f],d[f]=y,p|=d[(d[h]+d[f])%256]<<24-g*8}return this._i=h,this._j=f,p}n.RC4=i._createHelper(l);var u=a.RC4Drop=l.extend({cfg:l.cfg.extend({drop:192}),_doReset:function(){l._doReset.call(this);for(var d=this.cfg.drop;d>0;d--)c.call(this)}});n.RC4Drop=i._createHelper(u)}(),r.RC4})}(vc)),vc.exports}var yc={exports:{}},ep;function fC(){return ep||(ep=1,function(e,t){(function(r,n,s){e.exports=n(le(),En(),Nn(),Yr(),Ve())})(J,function(r){return function(){var n=r,s=n.lib,i=s.StreamCipher,a=n.algo,l=[],c=[],u=[],d=a.Rabbit=i.extend({_doReset:function(){for(var f=this._key.words,p=this.cfg.iv,g=0;g<4;g++)f[g]=(f[g]<<8|f[g]>>>24)&16711935|(f[g]<<24|f[g]>>>8)&4278255360;var y=this._X=[f[0],f[3]<<16|f[2]>>>16,f[1],f[0]<<16|f[3]>>>16,f[2],f[1]<<16|f[0]>>>16,f[3],f[2]<<16|f[1]>>>16],w=this._C=[f[2]<<16|f[2]>>>16,f[0]&4294901760|f[1]&65535,f[3]<<16|f[3]>>>16,f[1]&4294901760|f[2]&65535,f[0]<<16|f[0]>>>16,f[2]&4294901760|f[3]&65535,f[1]<<16|f[1]>>>16,f[3]&4294901760|f[0]&65535];this._b=0;for(var g=0;g<4;g++)h.call(this);for(var g=0;g<8;g++)w[g]^=y[g+4&7];if(p){var v=p.words,x=v[0],m=v[1],b=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,j=(m<<8|m>>>24)&16711935|(m<<24|m>>>8)&4278255360,k=b>>>16|j&4294901760,C=j<<16|b&65535;w[0]^=b,w[1]^=k,w[2]^=j,w[3]^=C,w[4]^=b,w[5]^=k,w[6]^=j,w[7]^=C;for(var g=0;g<4;g++)h.call(this)}},_doProcessBlock:function(f,p){var g=this._X;h.call(this),l[0]=g[0]^g[5]>>>16^g[3]<<16,l[1]=g[2]^g[7]>>>16^g[5]<<16,l[2]=g[4]^g[1]>>>16^g[7]<<16,l[3]=g[6]^g[3]>>>16^g[1]<<16;for(var y=0;y<4;y++)l[y]=(l[y]<<8|l[y]>>>24)&16711935|(l[y]<<24|l[y]>>>8)&4278255360,f[p+y]^=l[y]},blockSize:128/32,ivSize:64/32});function h(){for(var f=this._X,p=this._C,g=0;g<8;g++)c[g]=p[g];p[0]=p[0]+1295307597+this._b|0,p[1]=p[1]+3545052371+(p[0]>>>0<c[0]>>>0?1:0)|0,p[2]=p[2]+886263092+(p[1]>>>0<c[1]>>>0?1:0)|0,p[3]=p[3]+1295307597+(p[2]>>>0<c[2]>>>0?1:0)|0,p[4]=p[4]+3545052371+(p[3]>>>0<c[3]>>>0?1:0)|0,p[5]=p[5]+886263092+(p[4]>>>0<c[4]>>>0?1:0)|0,p[6]=p[6]+1295307597+(p[5]>>>0<c[5]>>>0?1:0)|0,p[7]=p[7]+3545052371+(p[6]>>>0<c[6]>>>0?1:0)|0,this._b=p[7]>>>0<c[7]>>>0?1:0;for(var g=0;g<8;g++){var y=f[g]+p[g],w=y&65535,v=y>>>16,x=((w*w>>>17)+w*v>>>15)+v*v,m=((y&4294901760)*y|0)+((y&65535)*y|0);u[g]=x^m}f[0]=u[0]+(u[7]<<16|u[7]>>>16)+(u[6]<<16|u[6]>>>16)|0,f[1]=u[1]+(u[0]<<8|u[0]>>>24)+u[7]|0,f[2]=u[2]+(u[1]<<16|u[1]>>>16)+(u[0]<<16|u[0]>>>16)|0,f[3]=u[3]+(u[2]<<8|u[2]>>>24)+u[1]|0,f[4]=u[4]+(u[3]<<16|u[3]>>>16)+(u[2]<<16|u[2]>>>16)|0,f[5]=u[5]+(u[4]<<8|u[4]>>>24)+u[3]|0,f[6]=u[6]+(u[5]<<16|u[5]>>>16)+(u[4]<<16|u[4]>>>16)|0,f[7]=u[7]+(u[6]<<8|u[6]>>>24)+u[5]|0}n.Rabbit=i._createHelper(d)}(),r.Rabbit})}(yc)),yc.exports}var wc={exports:{}},tp;function pC(){return tp||(tp=1,function(e,t){(function(r,n,s){e.exports=n(le(),En(),Nn(),Yr(),Ve())})(J,function(r){return function(){var n=r,s=n.lib,i=s.StreamCipher,a=n.algo,l=[],c=[],u=[],d=a.RabbitLegacy=i.extend({_doReset:function(){var f=this._key.words,p=this.cfg.iv,g=this._X=[f[0],f[3]<<16|f[2]>>>16,f[1],f[0]<<16|f[3]>>>16,f[2],f[1]<<16|f[0]>>>16,f[3],f[2]<<16|f[1]>>>16],y=this._C=[f[2]<<16|f[2]>>>16,f[0]&4294901760|f[1]&65535,f[3]<<16|f[3]>>>16,f[1]&4294901760|f[2]&65535,f[0]<<16|f[0]>>>16,f[2]&4294901760|f[3]&65535,f[1]<<16|f[1]>>>16,f[3]&4294901760|f[0]&65535];this._b=0;for(var w=0;w<4;w++)h.call(this);for(var w=0;w<8;w++)y[w]^=g[w+4&7];if(p){var v=p.words,x=v[0],m=v[1],b=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,j=(m<<8|m>>>24)&16711935|(m<<24|m>>>8)&4278255360,k=b>>>16|j&4294901760,C=j<<16|b&65535;y[0]^=b,y[1]^=k,y[2]^=j,y[3]^=C,y[4]^=b,y[5]^=k,y[6]^=j,y[7]^=C;for(var w=0;w<4;w++)h.call(this)}},_doProcessBlock:function(f,p){var g=this._X;h.call(this),l[0]=g[0]^g[5]>>>16^g[3]<<16,l[1]=g[2]^g[7]>>>16^g[5]<<16,l[2]=g[4]^g[1]>>>16^g[7]<<16,l[3]=g[6]^g[3]>>>16^g[1]<<16;for(var y=0;y<4;y++)l[y]=(l[y]<<8|l[y]>>>24)&16711935|(l[y]<<24|l[y]>>>8)&4278255360,f[p+y]^=l[y]},blockSize:128/32,ivSize:64/32});function h(){for(var f=this._X,p=this._C,g=0;g<8;g++)c[g]=p[g];p[0]=p[0]+1295307597+this._b|0,p[1]=p[1]+3545052371+(p[0]>>>0<c[0]>>>0?1:0)|0,p[2]=p[2]+886263092+(p[1]>>>0<c[1]>>>0?1:0)|0,p[3]=p[3]+1295307597+(p[2]>>>0<c[2]>>>0?1:0)|0,p[4]=p[4]+3545052371+(p[3]>>>0<c[3]>>>0?1:0)|0,p[5]=p[5]+886263092+(p[4]>>>0<c[4]>>>0?1:0)|0,p[6]=p[6]+1295307597+(p[5]>>>0<c[5]>>>0?1:0)|0,p[7]=p[7]+3545052371+(p[6]>>>0<c[6]>>>0?1:0)|0,this._b=p[7]>>>0<c[7]>>>0?1:0;for(var g=0;g<8;g++){var y=f[g]+p[g],w=y&65535,v=y>>>16,x=((w*w>>>17)+w*v>>>15)+v*v,m=((y&4294901760)*y|0)+((y&65535)*y|0);u[g]=x^m}f[0]=u[0]+(u[7]<<16|u[7]>>>16)+(u[6]<<16|u[6]>>>16)|0,f[1]=u[1]+(u[0]<<8|u[0]>>>24)+u[7]|0,f[2]=u[2]+(u[1]<<16|u[1]>>>16)+(u[0]<<16|u[0]>>>16)|0,f[3]=u[3]+(u[2]<<8|u[2]>>>24)+u[1]|0,f[4]=u[4]+(u[3]<<16|u[3]>>>16)+(u[2]<<16|u[2]>>>16)|0,f[5]=u[5]+(u[4]<<8|u[4]>>>24)+u[3]|0,f[6]=u[6]+(u[5]<<16|u[5]>>>16)+(u[4]<<16|u[4]>>>16)|0,f[7]=u[7]+(u[6]<<8|u[6]>>>24)+u[5]|0}n.RabbitLegacy=i._createHelper(d)}(),r.RabbitLegacy})}(wc)),wc.exports}var bc={exports:{}},rp;function xC(){return rp||(rp=1,function(e,t){(function(r,n,s){e.exports=n(le(),En(),Nn(),Yr(),Ve())})(J,function(r){return function(){var n=r,s=n.lib,i=s.BlockCipher,a=n.algo;const l=16,c=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],u=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var d={pbox:[],sbox:[]};function h(w,v){let x=v>>24&255,m=v>>16&255,b=v>>8&255,j=v&255,k=w.sbox[0][x]+w.sbox[1][m];return k=k^w.sbox[2][b],k=k+w.sbox[3][j],k}function f(w,v,x){let m=v,b=x,j;for(let k=0;k<l;++k)m=m^w.pbox[k],b=h(w,m)^b,j=m,m=b,b=j;return j=m,m=b,b=j,b=b^w.pbox[l],m=m^w.pbox[l+1],{left:m,right:b}}function p(w,v,x){let m=v,b=x,j;for(let k=l+1;k>1;--k)m=m^w.pbox[k],b=h(w,m)^b,j=m,m=b,b=j;return j=m,m=b,b=j,b=b^w.pbox[1],m=m^w.pbox[0],{left:m,right:b}}function g(w,v,x){for(let C=0;C<4;C++){w.sbox[C]=[];for(let _=0;_<256;_++)w.sbox[C][_]=u[C][_]}let m=0;for(let C=0;C<l+2;C++)w.pbox[C]=c[C]^v[m],m++,m>=x&&(m=0);let b=0,j=0,k=0;for(let C=0;C<l+2;C+=2)k=f(w,b,j),b=k.left,j=k.right,w.pbox[C]=b,w.pbox[C+1]=j;for(let C=0;C<4;C++)for(let _=0;_<256;_+=2)k=f(w,b,j),b=k.left,j=k.right,w.sbox[C][_]=b,w.sbox[C][_+1]=j;return!0}var y=a.Blowfish=i.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var w=this._keyPriorReset=this._key,v=w.words,x=w.sigBytes/4;g(d,v,x)}},encryptBlock:function(w,v){var x=f(d,w[v],w[v+1]);w[v]=x.left,w[v+1]=x.right},decryptBlock:function(w,v){var x=p(d,w[v],w[v+1]);w[v]=x.left,w[v+1]=x.right},blockSize:64/32,keySize:128/32,ivSize:64/32});n.Blowfish=i._createHelper(y)}(),r.Blowfish})}(bc)),bc.exports}(function(e,t){(function(r,n,s){e.exports=n(le(),Go(),Wj(),qj(),En(),Kj(),Nn(),uv(),nd(),Gj(),dv(),Yj(),Qj(),Xj(),sd(),Zj(),Yr(),Ve(),Jj(),eC(),tC(),rC(),nC(),sC(),iC(),aC(),oC(),lC(),cC(),uC(),dC(),hC(),fC(),pC(),xC())})(J,function(r){return r})})(Uj);const mC="https://cggsodnyilnhlrtuzdkr.supabase.co",jc="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNnZ3NvZG55aWxuaGxydHV6ZGtyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTA0NTQ1MzksImV4cCI6MjA2NjAzMDUzOX0.I3j8Wyt1oeH57A3mN_MmcpMcHw9xS2zNqXWTTIYBF08",lt=Mj(mC,jc,{db:{schema:"public"},auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0},global:{headers:{apikey:jc,Authorization:`Bearer ${jc}`}}}),id=async(e,t,r)=>{try{const{data:n,error:s}=await lt.storage.from(t).upload(r,e,{cacheControl:"3600",upsert:!0});if(s)throw s;const{data:{publicUrl:i}}=lt.storage.from(t).getPublicUrl(n.path);return i}catch(n){return console.error("Error uploading image:",n),null}},ts=class ts{static storeTokens(t){try{localStorage.setItem(this.ACCESS_TOKEN_KEY,t.accessToken),localStorage.setItem(this.REFRESH_TOKEN_KEY,t.refreshToken),localStorage.setItem(this.EXPIRES_AT_KEY,t.expiresAt.toString()),localStorage.setItem(this.USER_ID_KEY,t.userId)}catch(r){console.error("Failed to store tokens:",r)}}static getTokens(){try{const t=localStorage.getItem(this.ACCESS_TOKEN_KEY),r=localStorage.getItem(this.REFRESH_TOKEN_KEY),n=localStorage.getItem(this.EXPIRES_AT_KEY),s=localStorage.getItem(this.USER_ID_KEY);return!t||!r||!n||!s?null:{accessToken:t,refreshToken:r,expiresAt:parseInt(n),userId:s}}catch(t){return console.error("Failed to get tokens:",t),null}}static clearTokens(){try{localStorage.removeItem(this.ACCESS_TOKEN_KEY),localStorage.removeItem(this.REFRESH_TOKEN_KEY),localStorage.removeItem(this.EXPIRES_AT_KEY),localStorage.removeItem(this.USER_ID_KEY)}catch(t){console.error("Failed to clear tokens:",t)}}static isTokenExpired(t){return Date.now()>=t}static needsRefresh(t){const r=Date.now()+3e5;return t<=r}static generateTokens(t){const r=this.generateToken(),n=this.generateToken(),s=Date.now()+7*24*60*60*1e3;return{accessToken:r,refreshToken:n,expiresAt:s,userId:t}}static generateToken(){const t=new Uint8Array(32);return crypto.getRandomValues(t),Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}static isValidTokenFormat(t){return typeof t=="string"&&t.length===64&&/^[a-f0-9]+$/.test(t)}};ts.ACCESS_TOKEN_KEY="verse_access_token",ts.REFRESH_TOKEN_KEY="verse_refresh_token",ts.EXPIRES_AT_KEY="verse_expires_at",ts.USER_ID_KEY="verse_user_id";let pe=ts;const hv=N.createContext(void 0),De=()=>{const e=N.useContext(hv);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},gC=({children:e})=>{const[t,r]=N.useState({isAuthenticated:!1,user:null,loading:!0});N.useEffect(()=>{let p;return t.isAuthenticated&&(p=setInterval(()=>{n()},5*60*1e3)),()=>{p&&clearInterval(p)}},[t.isAuthenticated]),N.useEffect(()=>{let p=!0;(async()=>{try{const w=pe.getTokens();if(w){if(pe.isTokenExpired(w.expiresAt)){console.log("Stored token expired, clearing..."),pe.clearTokens(),p&&r({isAuthenticated:!1,user:null,loading:!1});return}await s(w.userId);return}const{data:{session:v},error:x}=await lt.auth.getSession();if(x){console.error("Supabase session check error:",x),p&&r({isAuthenticated:!1,user:null,loading:!1});return}if(v!=null&&v.user&&p){const m=pe.generateTokens(v.user.id);pe.storeTokens(m),await s(v.user.id)}else p&&r({isAuthenticated:!1,user:null,loading:!1})}catch(w){console.error("Auth initialization failed:",w),p&&(pe.clearTokens(),r({isAuthenticated:!1,user:null,loading:!1}))}})();const{data:{subscription:y}}=lt.auth.onAuthStateChange(async(w,v)=>{if(p)try{if(w==="SIGNED_IN"&&(v!=null&&v.user)){const x=pe.generateTokens(v.user.id);pe.storeTokens(x),await s(v.user.id)}else w==="SIGNED_OUT"&&(pe.clearTokens(),r({isAuthenticated:!1,user:null,loading:!1}))}catch(x){console.error("Auth state change error:",x),pe.clearTokens(),r({isAuthenticated:!1,user:null,loading:!1})}});return()=>{p=!1,y.unsubscribe()}},[]);const n=async()=>{const p=pe.getTokens();if(!p){console.log("No stored tokens found"),await c();return}if(pe.isTokenExpired(p.expiresAt)){console.log("Token expired, logging out"),await c();return}if(pe.needsRefresh(p.expiresAt)){console.log("Token needs refresh, generating new tokens");const g=pe.generateTokens(p.userId);pe.storeTokens(g)}},s=async p=>{var g,y;try{const{data:w,error:v}=await lt.from("profiles").select(`
          *,
          characters(id),
          privacy_settings(*)
        `).eq("id",p).single();if(v){console.error("Profile load error:",v),pe.clearTokens(),r({isAuthenticated:!1,user:null,loading:!1});return}const x={id:w.id,username:w.username,displayName:w.display_name,email:w.email,avatar:w.avatar_url||"https://images.pexels.com/photos/1239291/pexels-photo-1239291.jpeg?auto=compress&cs=tinysrgb&w=150&h=150",headerImage:w.header_image_url||"https://images.pexels.com/photos/1323550/pexels-photo-1323550.jpeg?auto=compress&cs=tinysrgb&w=800&h=300",bio:w.bio,writersTag:w.writers_tag,twoFactorEnabled:w.two_factor_enabled,characters:((g=w.characters)==null?void 0:g.map(m=>m.id))||[],followers:w.followers||[],following:w.following||[],createdAt:new Date(w.created_at),role:w.role||"user",privacySettings:(y=w.privacy_settings)!=null&&y[0]?{profileVisibility:w.privacy_settings[0].profile_visibility,messagePermissions:w.privacy_settings[0].message_permissions,tagNotifications:w.privacy_settings[0].tag_notifications,directMessageNotifications:w.privacy_settings[0].direct_message_notifications}:{profileVisibility:"public",messagePermissions:"everyone",tagNotifications:!0,directMessageNotifications:!0}};r({isAuthenticated:!0,user:x,loading:!1})}catch(w){console.error("Error loading user profile:",w),pe.clearTokens(),r({isAuthenticated:!1,user:null,loading:!1})}},i=async()=>{await n()},a=async(p,g)=>{try{r(m=>({...m,loading:!0}));const y=p.includes("@");let w=p;if(!y)try{const{data:m,error:b}=await lt.from("profiles").select("email").eq("username",p).maybeSingle();if(b)throw console.error("Profile lookup error:",b),new Error("Database error occurred");if(!m||!m.email)throw new Error("User not found or no email associated with username");w=m.email}catch(m){throw console.error("Database query failed:",m),new Error("Unable to find user. Please check your username or try using your email address.")}const{data:v,error:x}=await lt.auth.signInWithPassword({email:w,password:g});if(x)throw console.error("Auth error:",x),r(m=>({...m,loading:!1})),new Error(x.message||"Login failed");if(v.user){const m=pe.generateTokens(v.user.id);pe.storeTokens(m)}return!0}catch(y){throw console.error("Login error:",y),r(w=>({...w,loading:!1})),y}},l=async(p,g,y,w,v)=>{try{r(b=>({...b,loading:!0}));const{data:x,error:m}=await lt.auth.signUp({email:v,password:g});if(m)throw console.error("Auth signup error:",m),r(b=>({...b,loading:!1})),new Error(m.message||"Registration failed");if(x.user){const{error:b}=await lt.from("profiles").insert({id:x.user.id,username:p,display_name:y,email:v,writers_tag:w,bio:"New to CharacterVerse!",role:"user"});if(b)throw console.error("Profile creation error:",b),r(C=>({...C,loading:!1})),b.code==="23505"?b.message.includes("username")?new Error("Username already exists. Please choose a different username."):new Error("This account already exists. Please try logging in instead."):new Error(b.message||"Failed to create user profile");const{error:j}=await lt.from("privacy_settings").insert({user_id:x.user.id,profile_visibility:"public",message_permissions:"everyone",tag_notifications:!0,direct_message_notifications:!0});j&&console.warn("Privacy settings creation failed:",j);const k=pe.generateTokens(x.user.id);pe.storeTokens(k)}return!0}catch(x){throw console.error("Registration error:",x),r(m=>({...m,loading:!1})),x}},c=async()=>{try{pe.clearTokens(),lt.auth.signOut().catch(p=>{console.warn("Supabase signout error:",p)}),r({isAuthenticated:!1,user:null,loading:!1})}catch(p){console.error("Logout error:",p),pe.clearTokens(),r({isAuthenticated:!1,user:null,loading:!1})}},u=async p=>{if(t.user)try{const{error:g}=await lt.from("profiles").update({username:p.username,display_name:p.displayName,bio:p.bio,writers_tag:p.writersTag,email:p.email,avatar_url:p.avatar,header_image_url:p.headerImage,updated_at:new Date().toISOString()}).eq("id",t.user.id);if(g)throw g;if(p.privacySettings){const{error:y}=await lt.from("privacy_settings").update({profile_visibility:p.privacySettings.profileVisibility,message_permissions:p.privacySettings.messagePermissions,tag_notifications:p.privacySettings.tagNotifications,direct_message_notifications:p.privacySettings.directMessageNotifications,updated_at:new Date().toISOString()}).eq("user_id",t.user.id);y&&console.warn("Privacy settings update failed:",y)}r(y=>({...y,user:y.user?{...y.user,...p}:null}))}catch(g){throw console.error("Error updating user:",g),g}},d=async(p,g)=>{try{const{error:y}=await lt.auth.updateUser({password:g});if(y)throw console.error("Password change error:",y),new Error(y.message||"Failed to change password");if(t.user){const w=pe.generateTokens(t.user.id);pe.storeTokens(w)}return!0}catch(y){throw console.error("Password change error:",y),y}},h=async p=>p==="123456",f=async p=>(t.user&&await u({email:p,twoFactorEnabled:!0}),!0);return o.jsx(hv.Provider,{value:{...t,login:a,register:l,logout:c,updateUser:u,changePassword:d,verifyOTP:h,enableTwoFactor:f,refreshSession:i},children:e})},fv=N.createContext(void 0),Ke=()=>{const e=N.useContext(fv);if(!e)throw new Error("useApp must be used within an AppProvider");return e},vC=({children:e})=>{const[t,r]=N.useState([]),[n,s]=N.useState([]),[i,a]=N.useState([]),[l,c]=N.useState([]),[u,d]=N.useState([]),[h,f]=N.useState([]),[p,g]=N.useState([]),[y,w]=N.useState([]),[v,x]=N.useState(null),m=$=>{x($),$?localStorage.setItem("verse_selected_character",JSON.stringify($)):localStorage.removeItem("verse_selected_character")};N.useEffect(()=>{const $=localStorage.getItem("verse_selected_character");if($)try{const W=JSON.parse($);x(W)}catch(W){console.error("Error loading saved character:",W),localStorage.removeItem("verse_selected_character")}},[]),N.useEffect(()=>{if(v){const $=n.find(W=>W.id===v.id);$?(x($),localStorage.setItem("verse_selected_character",JSON.stringify($))):(x(null),localStorage.removeItem("verse_selected_character"))}},[n,v]);const b=u.filter($=>!$.read).length,j=l.reduce(($,W)=>W.lastMessage&&!W.lastMessage.readBy.includes("current-user-id")?$+1:$,0);N.useEffect(()=>{k()},[]);const k=()=>{const $=[{id:"user-1",username:"alexwriter",displayName:"Alex Thompson",avatar:"https://images.pexels.com/photos/1239291/pexels-photo-1239291.jpeg?auto=compress&cs=tinysrgb&w=350&h=350",headerImage:"https://images.pexels.com/photos/1323550/pexels-photo-1323550.jpeg?auto=compress&cs=tinysrgb&w=800&h=300",bio:"Fantasy writer and world builder. Creating epic adventures one story at a time.",writersTag:"fantasy",email:"alex@example.com",twoFactorEnabled:!1,characters:[],followers:[],following:[],createdAt:new Date("2024-01-15"),privacySettings:{profileVisibility:"public",messagePermissions:"everyone",tagNotifications:!0,directMessageNotifications:!0}},{id:"user-2",username:"scifimaster",displayName:"Jordan Clarke",avatar:"https://images.pexels.com/photos/1382734/pexels-photo-1382734.jpeg?auto=compress&cs=tinysrgb&w=350&h=350",headerImage:"https://images.pexels.com/photos/1323550/pexels-photo-1323550.jpeg?auto=compress&cs=tinysrgb&w=800&h=300",bio:"Science fiction enthusiast exploring the boundaries of imagination.",writersTag:"scifi",email:"jordan@example.com",twoFactorEnabled:!0,characters:[],followers:[],following:[],createdAt:new Date("2024-02-01"),privacySettings:{profileVisibility:"public",messagePermissions:"followers",tagNotifications:!0,directMessageNotifications:!1}}],W=[{id:"char-1",username:"aragorn_ranger",name:"Aragorn",title:"Ranger of the North",avatar:"https://images.pexels.com/photos/1382734/pexels-photo-1382734.jpeg?auto=compress&cs=tinysrgb&w=350&h=350",headerImage:"https://images.pexels.com/photos/1323550/pexels-photo-1323550.jpeg?auto=compress&cs=tinysrgb&w=800&h=300",bio:"A skilled ranger and heir to the throne of Gondor, wandering the wild lands to protect the innocent.",universe:"Middle-earth",verseTag:"LOTR",traits:["Brave","Noble","Skilled Fighter","Natural Leader"],userId:"user-1",customColor:"#2d5a27",customFont:"Cinzel",followers:[],following:[],createdAt:new Date("2024-01-20")},{id:"char-2",username:"spock_vulcan",name:"Spock",title:"Science Officer",avatar:"https://images.pexels.com/photos/1239291/pexels-photo-1239291.jpeg?auto=compress&cs=tinysrgb&w=350&h=350",headerImage:"https://images.pexels.com/photos/1323550/pexels-photo-1323550.jpeg?auto=compress&cs=tinysrgb&w=800&h=300",bio:"Half-human, half-Vulcan officer aboard the USS Enterprise, dedicated to logic and scientific discovery.",universe:"Star Trek",verseTag:"StarTrek",traits:["Logical","Intelligent","Loyal","Curious"],userId:"user-2",customColor:"#1e3a8a",customFont:"Orbitron",followers:[],following:[],createdAt:new Date("2024-02-05")}],K=[{id:"post-1",content:"The path ahead is treacherous, but we must press on. The fate of Middle-earth depends on our courage. #LOTR #Adventure",characterId:"char-1",character:W[0],userId:"user-1",user:$[0],timestamp:new Date(Date.now()-2*60*60*1e3),likes:15,reposts:3,comments:7,isLiked:!1,isReposted:!1,isThread:!1,visibility:"public",tags:["LOTR","Adventure"]},{id:"post-2",content:"Fascinating. The quantum mechanics of this universe continue to defy conventional understanding. Further analysis is required. #StarTrek #Science",characterId:"char-2",character:W[1],userId:"user-2",user:$[1],timestamp:new Date(Date.now()-4*60*60*1e3),likes:22,reposts:5,comments:12,isLiked:!0,isReposted:!1,isThread:!1,visibility:"public",tags:["StarTrek","Science"]}];a($),s(W),r(K)},C=$=>{const W={id:Date.now().toString(),content:$.content||"",characterId:$.characterId,character:$.character,userId:$.userId||"",user:$.user,timestamp:new Date,likes:0,reposts:0,comments:0,isLiked:!1,isReposted:!1,isThread:$.isThread||!1,threadId:$.threadId,parentPostId:$.parentPostId,visibility:$.visibility||"public",tags:$.tags||[],mediaUrls:$.mediaUrls||[]};r(K=>[W,...K])},_=($,W)=>{r(K=>K.map(he=>he.id===$?{...he,...W}:he))},P=$=>{r(W=>W.filter(K=>K.id!==$))},S=$=>{r(W=>W.map(K=>K.id===$?{...K,isLiked:!K.isLiked,likes:K.isLiked?K.likes-1:K.likes+1}:K))},B=$=>{r(W=>W.map(K=>K.id===$?{...K,isReposted:!K.isReposted,reposts:K.isReposted?K.reposts-1:K.reposts+1}:K))},A=$=>{r(W=>W.map(K=>K.id===$?{...K,isPinned:!0}:K))},D=$=>{r(W=>W.map(K=>K.id===$?{...K,isPinned:!1}:K))},V=$=>{f(W=>[...W,$])},q=$=>{f(W=>W.filter(K=>K!==$))},L=$=>{s(W=>[...W,$])},U=($,W)=>{s(K=>K.map(he=>he.id===$?{...he,...W}:he))},R=$=>{s(W=>W.filter(K=>K.id!==$)),(v==null?void 0:v.id)===$&&m(null)},T=$=>{console.log("Following character:",$)},z=$=>{console.log("Unfollowing character:",$)},E=$=>{g(W=>[...W,$])},F=$=>{g(W=>W.filter(K=>K!==$))},I=$=>{console.log("Following user:",$)},O=$=>{console.log("Unfollowing user:",$)},Q=$=>{w(W=>[...W,$])},X=$=>{w(W=>W.filter(K=>K!==$))},ce=async($,W,K,he)=>{const Nt={id:Date.now().toString(),content:W,senderId:K,chatId:$,timestamp:new Date,isEncrypted:!0,readBy:[K],mediaUrl:he};c(Me=>Me.map(Zt=>Zt.id===$?{...Zt,lastMessage:Nt}:Zt))},G=async($,W,K)=>{const he={id:Date.now().toString(),participants:$,isGroup:W,name:K,createdAt:new Date,isEncrypted:!0};return c(Nt=>[...Nt,he]),he},fe=async $=>[],Ne=async $=>{c(W=>W.map(K=>K.id===$&&K.lastMessage?{...K,lastMessage:{...K.lastMessage,readBy:[...K.lastMessage.readBy,"current-user-id"]}}:K))},Ie=async($,W)=>{c(K=>K.filter(he=>he.id!==$))},re=()=>{c($=>$.map(W=>W.lastMessage&&!W.lastMessage.readBy.includes("current-user-id")?{...W,lastMessage:{...W.lastMessage,readBy:[...W.lastMessage.readBy,"current-user-id"]}}:W))},be=$=>{const W={...$,id:Date.now().toString(),timestamp:new Date,read:!1};d(K=>[W,...K])},Be=$=>{d(W=>W.map(K=>K.id===$?{...K,read:!0}:K))},_t=()=>{d([])},Et=($,W,K)=>{r(he=>he.map(Nt=>Nt.id===$?{...Nt,comments:Nt.comments+1}:Nt))},Je=$=>{const W=$.toLowerCase(),K=t.filter(Me=>{var Zt,Ki;return Me.content.toLowerCase().includes(W)||((Zt=Me.character)==null?void 0:Zt.name.toLowerCase().includes(W))||((Ki=Me.user)==null?void 0:Ki.displayName.toLowerCase().includes(W))||Me.tags.some(al=>al.toLowerCase().includes(W))}),he=n.filter(Me=>Me.name.toLowerCase().includes(W)||Me.username.toLowerCase().includes(W)||Me.verseTag.toLowerCase().includes(W)||Me.universe.toLowerCase().includes(W)),Nt=i.filter(Me=>Me.displayName.toLowerCase().includes(W)||Me.username.toLowerCase().includes(W)||Me.writersTag.toLowerCase().includes(W));return{posts:K,characters:he,users:Nt}},M=()=>{const $=i.slice(0,5),W=n.slice(0,5);return{writers:$,characters:W}},te=$=>t.sort((W,K)=>K.timestamp.getTime()-W.timestamp.getTime()),ne=async()=>i,ie=async $=>{a(W=>W.filter(K=>K.id!==$))},Se=async($,W)=>{console.log("Resetting password for user:",$)},Wt=async($,W)=>{a(K=>K.map(he=>he.id===$?{...he,role:W}:he))},Pn=async $=>[],qi=async $=>[],mr=async $=>[],Xr=async $=>[],il=async $=>[];return o.jsx(fv.Provider,{value:{posts:t,characters:n,allUsers:i,chats:l,notifications:u,unreadNotifications:b,unreadMessages:j,bookmarkedPosts:h,bookmarkedCharacters:p,bookmarkedUsers:y,selectedCharacter:v,setSelectedCharacter:m,addPost:C,updatePost:_,deletePost:P,likePost:S,repostPost:B,pinPost:A,unpinPost:D,bookmarkPost:V,unbookmarkPost:q,addCharacter:L,updateCharacter:U,deleteCharacter:R,followCharacter:T,unfollowCharacter:z,bookmarkCharacter:E,unbookmarkCharacter:F,followUser:I,unfollowUser:O,bookmarkUser:Q,unbookmarkUser:X,sendMessage:ce,createChat:G,getChatMessages:fe,markMessagesAsRead:Ne,deleteChatForUser:Ie,clearAllMessageNotifications:re,addNotification:be,markNotificationAsRead:Be,clearAllNotifications:_t,addComment:Et,searchContent:Je,getRecommendations:M,getFilteredPosts:te,getAllUsersAdmin:ne,deleteUserAdmin:ie,resetPasswordAdmin:Se,updateUserRoleAdmin:Wt,getUserFollowers:Pn,getUserFollowing:qi,getCharacterFollowers:mr,getCharacterFollowing:Xr,getPostComments:il},children:e})};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var yC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wC=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Z=(e,t)=>{const r=N.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:l="",children:c,...u},d)=>N.createElement("svg",{ref:d,...yC,width:s,height:s,stroke:n,strokeWidth:a?Number(i)*24/Number(s):i,className:["lucide",`lucide-${wC(e)}`,l].join(" "),...u},[...t.map(([h,f])=>N.createElement(h,f)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bC=Z("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ad=Z("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jC=Z("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CC=Z("AtSign",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8",key:"7n84p3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lo=Z("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const co=Z("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yo=Z("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pv=Z("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const np=Z("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kC=Z("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _C=Z("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EC=Z("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sp=Z("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NC=Z("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const od=Z("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ld=Z("Feather",[["path",{d:"M20.24 12.24a6 6 0 0 0-8.49-8.49L5 10.5V19h8.5z",key:"u4sw5n"}],["line",{x1:"16",x2:"2",y1:"8",y2:"22",key:"1c47m2"}],["line",{x1:"17.5",x2:"9",y1:"15",y2:"15",key:"2fj3pr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SC=Z("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xv=Z("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cc=Z("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mv=Z("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AC=Z("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gv=Z("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ba=Z("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uo=Z("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PC=Z("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vv=Z("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yv=Z("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $u=Z("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wv=Z("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cd=Z("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DC=Z("PinOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["line",{x1:"12",x2:"12",y1:"17",y2:"22",key:"1jrz49"}],["path",{d:"M9 9v1.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V17h12",key:"13x2n8"}],["path",{d:"M15 9.34V6h1a2 2 0 0 0 0-4H7.89",key:"reo3ki"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bv=Z("Pin",[["line",{x1:"12",x2:"12",y1:"17",y2:"22",key:"1jrz49"}],["path",{d:"M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z",key:"13yl11"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qo=Z("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BC=Z("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jv=Z("Repeat2",[["path",{d:"m2 9 3-3 3 3",key:"1ltn5i"}],["path",{d:"M13 18H7a2 2 0 0 1-2-2V6",key:"1r6tfw"}],["path",{d:"m22 15-3 3-3-3",key:"4rnwn2"}],["path",{d:"M11 6h6a2 2 0 0 1 2 2v10",key:"2f72bc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xn=Z("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cv=Z("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FC=Z("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TC=Z("Share",[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yn=Z("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RC=Z("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LC=Z("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OC=Z("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $i=Z("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ip=Z("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ud=Z("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ni=Z("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dr=Z("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dd=Z("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const or=Z("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kv=Z("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=Z("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),_v=()=>o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-purple-500 to-pink-500 rounded-2xl flex items-center justify-center mx-auto mb-4",children:o.jsx(ld,{className:"w-8 h-8 text-white animate-pulse"})}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("p",{className:"text-white text-lg font-medium",children:"Loading VERSE..."}),o.jsx("div",{className:"flex justify-center",children:o.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-purple-400"})})]})]})}),IC=()=>{const[e,t]=N.useState(!0),[r,n]=N.useState(!1),[s,i]=N.useState(!1),[a,l]=N.useState(""),[c,u]=N.useState({identifier:"",password:"",displayName:"",writersTag:"",email:""}),{login:d,register:h}=De(),f=async p=>{p.preventDefault(),i(!0),l("");try{if(e)await d(c.identifier,c.password);else{const g=c.identifier.includes("@")?c.identifier.split("@")[0]:c.identifier;await h(g,c.password,c.displayName,c.writersTag,c.email)}}catch(g){console.error("Authentication error:",g),l(g.message||"An error occurred. Please try again.")}finally{i(!1)}};return s?o.jsx(_v,{}):o.jsxs("div",{className:"min-h-screen flex flex-col",children:[o.jsx("div",{className:"flex-1 flex items-center justify-center p-4",children:o.jsx("div",{className:"w-full max-w-md",children:o.jsxs("div",{className:"bg-gray-900/80 backdrop-blur-md rounded-2xl border border-gray-700/50 p-8 shadow-2xl",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-purple-500 to-pink-500 rounded-2xl flex items-center justify-center mx-auto mb-4",children:o.jsx(ld,{className:"w-8 h-8 text-white"})}),o.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"VERSE"}),o.jsx("p",{className:"text-gray-400",children:e?"Welcome back to the community":"Join the storytelling community"})]}),a&&o.jsx("div",{className:"mb-4 p-3 bg-red-900/20 border border-red-500/30 rounded-lg",children:o.jsx("p",{className:"text-red-400 text-sm",children:a})}),o.jsxs("form",{onSubmit:f,className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:e?"Username or Email":"Username"}),o.jsx("input",{type:"text",value:c.identifier,onChange:p=>u(g=>({...g,identifier:p.target.value})),className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white focus:border-purple-500 focus:outline-none",placeholder:e?"Enter username or email":"Choose a username",required:!0})]}),!e&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Display Name"}),o.jsx("input",{type:"text",value:c.displayName,onChange:p=>u(g=>({...g,displayName:p.target.value})),className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white focus:border-purple-500 focus:outline-none",placeholder:"Your display name",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Writer's Tag"}),o.jsx("input",{type:"text",value:c.writersTag,onChange:p=>u(g=>({...g,writersTag:p.target.value})),className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white focus:border-purple-500 focus:outline-none",placeholder:"e.g., fantasy, scifi, modern",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email"}),o.jsx("input",{type:"email",value:c.email,onChange:p=>u(g=>({...g,email:p.target.value})),className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white focus:border-purple-500 focus:outline-none",placeholder:"your@email.com",required:!0})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Password"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:r?"text":"password",value:c.password,onChange:p=>u(g=>({...g,password:p.target.value})),className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 pr-12 text-white focus:border-purple-500 focus:outline-none",placeholder:"Enter your password",required:!0}),o.jsx("button",{type:"button",onClick:()=>n(!r),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-300",children:r?o.jsx(NC,{className:"w-5 h-5"}):o.jsx(od,{className:"w-5 h-5"})})]})]}),o.jsx("button",{type:"submit",className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white font-semibold py-3 rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all duration-200",children:e?"Sign In":"Create Account"})]}),o.jsx("div",{className:"mt-6 text-center",children:o.jsx("button",{onClick:()=>{t(!e),l(""),u({identifier:"",password:"",displayName:"",writersTag:"",email:""})},className:"text-purple-400 hover:text-purple-300 transition-colors",children:e?"Don't have an account? Sign up":"Already have an account? Sign in"})})]})})}),o.jsx("div",{className:"p-6 text-center border-t border-gray-700/50 bg-black/20",children:o.jsxs("p",{className:"text-gray-500 text-sm",children:["Verse © ",new Date().getFullYear()]})})]})};function ho(e){const r=new Date().getTime()-e.getTime(),n=Math.floor(r/(1e3*60)),s=Math.floor(r/(1e3*60*60)),i=Math.floor(r/(1e3*60*60*24));return n<1?"now":n<60?`${n}m`:s<24?`${s}h`:i<7?`${i}d`:e.toLocaleDateString()}const Es=({post:e,onLike:t,onRepost:r,onBookmark:n,isBookmarked:s=!1,showReplies:i=!1,showPinOption:a=!1,onPin:l})=>{var F,I,O,Q,X,ce,G,fe,Ne,Ie;const{user:c}=De(),{updatePost:u,deletePost:d,addComment:h,characters:f}=Ke(),[p,g]=N.useState(!1),[y,w]=N.useState(!1),[v,x]=N.useState(!1),[m,b]=N.useState(e.content),[j,k]=N.useState(""),[C,_]=N.useState("user"),P=((F=e.character)==null?void 0:F.avatar)||((I=e.user)==null?void 0:I.avatar)||"https://images.pexels.com/photos/1239291/pexels-photo-1239291.jpeg?auto=compress&cs=tinysrgb&w=350&h=350",S=((O=e.character)==null?void 0:O.name)||((Q=e.user)==null?void 0:Q.displayName)||((X=e.user)==null?void 0:X.username)||"Unknown User",B=((ce=e.character)==null?void 0:ce.title)||"",A=(G=e.character)==null?void 0:G.universe,D=((fe=e.character)==null?void 0:fe.username)||((Ne=e.user)==null?void 0:Ne.username)||"",V=e.userId===(c==null?void 0:c.id),q=f.filter(re=>re.userId===(c==null?void 0:c.id)),L=()=>{x(!0),g(!1)},U=()=>{u(e.id,{content:m}),x(!1)},R=()=>{window.confirm("Are you sure you want to delete this post?")&&d(e.id),g(!1)},T=()=>{w(!0)},z=re=>{if(re.preventDefault(),j.trim()){const be=C==="user"?void 0:C;h(e.id,j.trim(),be),k("")}},E=()=>{l&&l(),g(!1)};return o.jsxs("article",{className:"bg-gray-800/30 rounded-xl border border-gray-700/50 overflow-hidden",children:[o.jsx("div",{className:"p-6 hover:bg-gray-800/20 transition-colors",children:o.jsxs("div",{className:"flex space-x-4",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx("img",{src:P,alt:S,className:"w-12 h-12 rounded-full object-cover ring-2 ring-purple-500/30"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("h3",{className:"font-bold text-white",children:S}),B&&o.jsx("span",{className:"text-purple-400 text-sm font-medium",children:B}),o.jsxs("span",{className:"text-gray-500",children:["@",D]})]}),o.jsx("span",{className:"text-gray-500",children:"·"}),o.jsx("time",{className:"text-gray-500 text-sm",children:ho(e.timestamp)}),o.jsxs("div",{className:"ml-auto relative",children:[o.jsx("button",{onClick:()=>g(!p),className:"text-gray-500 hover:text-gray-300 transition-colors",children:o.jsx(wv,{className:"w-5 h-5"})}),p&&o.jsxs("div",{className:"absolute right-0 top-8 bg-gray-800 border border-gray-700 rounded-lg shadow-lg z-10 min-w-[120px]",children:[n&&o.jsxs("button",{onClick:()=>{n(),g(!1)},className:"w-full text-left px-4 py-2 text-white hover:bg-gray-700 flex items-center space-x-2",children:[o.jsx(co,{className:`w-4 h-4 ${s?"fill-current":""}`}),o.jsx("span",{children:s?"Remove Bookmark":"Bookmark"})]}),V&&o.jsxs(o.Fragment,{children:[a&&o.jsxs("button",{onClick:E,className:"w-full text-left px-4 py-2 text-white hover:bg-gray-700 flex items-center space-x-2",children:[e.isPinned?o.jsx(DC,{className:"w-4 h-4"}):o.jsx(bv,{className:"w-4 h-4"}),o.jsx("span",{children:e.isPinned?"Unpin":"Pin to Profile"})]}),o.jsxs("button",{onClick:L,className:"w-full text-left px-4 py-2 text-white hover:bg-gray-700 flex items-center space-x-2",children:[o.jsx(cd,{className:"w-4 h-4"}),o.jsx("span",{children:"Edit"})]}),o.jsxs("button",{onClick:R,className:"w-full text-left px-4 py-2 text-red-400 hover:bg-gray-700 flex items-center space-x-2",children:[o.jsx($i,{className:"w-4 h-4"}),o.jsx("span",{children:"Delete"})]})]}),o.jsx("button",{onClick:()=>g(!1),className:"w-full text-left px-4 py-2 text-gray-400 hover:bg-gray-700",children:"Cancel"})]})]})]}),A&&o.jsx("div",{className:"mb-3",children:o.jsxs("div",{className:"inline-flex items-center space-x-2 text-xs text-purple-300 bg-purple-900/30 px-2 py-1 rounded-full mb-2",children:[o.jsx("span",{children:"📖"}),o.jsx("span",{children:A})]})}),o.jsx("div",{className:"mb-4",children:v?o.jsxs("div",{className:"space-y-3",children:[o.jsx("textarea",{value:m,onChange:re=>b(re.target.value),className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white focus:border-purple-500 focus:outline-none resize-none",rows:3}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsx("button",{onClick:U,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Save"}),o.jsx("button",{onClick:()=>{x(!1),b(e.content)},className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Cancel"})]})]}):o.jsx("p",{className:"text-gray-100 leading-relaxed whitespace-pre-wrap",children:e.content})}),e.mediaUrls&&e.mediaUrls.length>0&&o.jsx("div",{className:"mb-4 grid grid-cols-2 gap-2",children:e.mediaUrls.map((re,be)=>o.jsx("div",{className:"rounded-lg overflow-hidden",children:re.includes(".mp4")||re.includes(".mov")||re.includes(".avi")?o.jsx("video",{src:re,className:"w-full h-48 object-cover",controls:!0}):o.jsx("img",{src:re,alt:"Post media",className:"w-full h-48 object-cover"})},be))}),o.jsxs("div",{className:"flex items-center justify-between max-w-md",children:[o.jsxs("button",{onClick:T,className:"flex items-center space-x-2 text-gray-500 hover:text-blue-400 transition-colors group",children:[o.jsx("div",{className:"p-2 rounded-full group-hover:bg-blue-400/10 transition-colors",children:o.jsx($u,{className:"w-5 h-5"})}),o.jsx("span",{className:"text-sm",children:e.comments})]}),o.jsxs("button",{onClick:r,className:`flex items-center space-x-2 transition-colors group ${e.isReposted?"text-green-400":"text-gray-500 hover:text-green-400"}`,children:[o.jsx("div",{className:"p-2 rounded-full group-hover:bg-green-400/10 transition-colors",children:o.jsx(jv,{className:"w-5 h-5"})}),o.jsx("span",{className:"text-sm",children:e.reposts})]}),o.jsxs("button",{onClick:t,className:`flex items-center space-x-2 transition-colors group ${e.isLiked?"text-red-500":"text-gray-500 hover:text-red-400"}`,children:[o.jsx("div",{className:"p-2 rounded-full group-hover:bg-red-400/10 transition-colors",children:o.jsx(mv,{className:`w-5 h-5 ${e.isLiked?"fill-current":""}`})}),o.jsx("span",{className:"text-sm",children:e.likes})]}),n&&o.jsx("button",{onClick:n,className:`flex items-center space-x-2 transition-colors group ${s?"text-purple-400":"text-gray-500 hover:text-purple-400"}`,children:o.jsx("div",{className:"p-2 rounded-full group-hover:bg-purple-400/10 transition-colors",children:o.jsx(co,{className:`w-5 h-5 ${s?"fill-current":""}`})})}),o.jsx("button",{className:"flex items-center space-x-2 text-gray-500 hover:text-blue-400 transition-colors group",children:o.jsx("div",{className:"p-2 rounded-full group-hover:bg-blue-400/10 transition-colors",children:o.jsx(TC,{className:"w-5 h-5"})})})]})]})]})}),y&&o.jsxs("div",{className:"border-t border-gray-700/50 bg-gray-900/30",children:[o.jsxs("form",{onSubmit:z,className:"p-4 border-b border-gray-700/30",children:[o.jsxs("div",{className:"flex space-x-3 mb-3",children:[o.jsx("img",{src:C==="user"?c==null?void 0:c.avatar:((Ie=q.find(re=>re.id===C))==null?void 0:Ie.avatar)||(c==null?void 0:c.avatar),alt:"Your avatar",className:"w-8 h-8 rounded-full object-cover"}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("select",{value:C,onChange:re=>_(re.target.value),className:"mb-2 bg-gray-800 text-white border border-gray-600 rounded-lg px-3 py-1 text-sm focus:border-purple-500 focus:outline-none",children:[o.jsx("option",{value:"user",children:"Reply as yourself"}),q.map(re=>o.jsxs("option",{value:re.id,children:[re.name," - ",re.title]},re.id))]}),o.jsx("textarea",{value:j,onChange:re=>k(re.target.value),placeholder:"Write your reply...",className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-3 py-2 text-white focus:border-purple-500 focus:outline-none resize-none text-sm",rows:2})]})]}),o.jsx("div",{className:"flex justify-end",children:o.jsx("button",{type:"submit",disabled:!j.trim(),className:"bg-purple-600 hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed text-white px-4 py-1 rounded-lg transition-colors text-sm",children:"Reply"})})]}),e.replies&&e.replies.length>0&&o.jsx("div",{className:"divide-y divide-gray-700/30",children:e.replies.map(re=>{var be,Be,_t,Et,Je,M;return o.jsxs("div",{className:"p-4 flex space-x-3",children:[o.jsx("img",{src:((be=re.character)==null?void 0:be.avatar)||((Be=re.user)==null?void 0:Be.avatar),alt:((_t=re.character)==null?void 0:_t.name)||((Et=re.user)==null?void 0:Et.displayName),className:"w-6 h-6 rounded-full object-cover"}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[o.jsx("span",{className:"font-medium text-white text-sm",children:((Je=re.character)==null?void 0:Je.name)||((M=re.user)==null?void 0:M.displayName)}),o.jsx("span",{className:"text-gray-500 text-xs",children:ho(re.timestamp)})]}),o.jsx("p",{className:"text-gray-100 text-sm",children:re.content})]})]},re.id)})}),o.jsx("div",{className:"p-2 text-center",children:o.jsxs("button",{onClick:()=>w(!1),className:"text-gray-400 hover:text-white transition-colors text-sm flex items-center space-x-1 mx-auto",children:[o.jsx(EC,{className:"w-4 h-4"}),o.jsx("span",{children:"Hide replies"})]})})]})]})},MC=({post:e,onClose:t})=>{var v,x,m,b,j,k;const{user:r}=De(),{characters:n,getPostComments:s,addPost:i}=Ke(),[a,l]=N.useState([]),[c,u]=N.useState(""),[d,h]=N.useState(null),[f,p]=N.useState(!0),g=n.filter(C=>C.userId===(r==null?void 0:r.id));N.useEffect(()=>{y()},[e.id]);const y=async()=>{p(!0);const C=await s(e.id);l(C),p(!1)},w=async C=>{C.preventDefault(),!(!c.trim()||!r)&&(await i({content:c.trim(),characterId:d==null?void 0:d.id,character:d,userId:r.id,user:r,parentPostId:e.id,isThread:!1,visibility:"public",tags:c.match(/#\w+/g)||[]}),u(""),y())};return o.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-gray-900 rounded-2xl border border-gray-700/50 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"sticky top-0 bg-gray-900 border-b border-gray-700/50 p-4 flex items-center justify-between",children:[o.jsx("h2",{className:"text-lg font-bold text-white",children:"Replies"}),o.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-800 rounded-full transition-colors",children:o.jsx(st,{className:"w-6 h-6 text-gray-400"})})]}),o.jsxs("div",{className:"p-6",children:[o.jsx("div",{className:"mb-6 p-4 bg-gray-800/30 rounded-lg border border-gray-700/50",children:o.jsxs("div",{className:"flex space-x-3",children:[o.jsx("img",{src:((v=e.character)==null?void 0:v.avatar)||((x=e.user)==null?void 0:x.avatar),alt:((m=e.character)==null?void 0:m.name)||((b=e.user)==null?void 0:b.displayName),className:"w-10 h-10 rounded-full object-cover"}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[o.jsx("span",{className:"font-bold text-white",children:((j=e.character)==null?void 0:j.name)||((k=e.user)==null?void 0:k.displayName)}),o.jsx("span",{className:"text-gray-500 text-sm",children:ho(e.timestamp)})]}),o.jsx("p",{className:"text-gray-100",children:e.content})]})]})}),o.jsxs("form",{onSubmit:w,className:"mb-6",children:[o.jsxs("div",{className:"flex space-x-3 mb-4",children:[o.jsx("img",{src:(d==null?void 0:d.avatar)||(r==null?void 0:r.avatar),alt:(d==null?void 0:d.name)||(r==null?void 0:r.displayName),className:"w-10 h-10 rounded-full object-cover"}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("select",{value:(d==null?void 0:d.id)||"user",onChange:C=>{if(C.target.value==="user")h(null);else{const _=g.find(P=>P.id===C.target.value);h(_||null)}},className:"mb-3 bg-gray-800 text-white border border-gray-600 rounded-lg px-3 py-1 text-sm focus:border-purple-500 focus:outline-none",children:[o.jsx("option",{value:"user",children:"Reply as yourself"}),g.map(C=>o.jsxs("option",{value:C.id,children:[C.name," - ",C.title]},C.id))]}),o.jsx("textarea",{value:c,onChange:C=>u(C.target.value),placeholder:"Write your reply...",className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white focus:border-purple-500 focus:outline-none resize-none",rows:3})]})]}),o.jsx("div",{className:"flex justify-end",children:o.jsxs("button",{type:"submit",disabled:!c.trim(),className:"flex items-center space-x-2 bg-purple-600 hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed text-white px-4 py-2 rounded-lg transition-colors",children:[o.jsx(Cv,{className:"w-4 h-4"}),o.jsx("span",{children:"Reply"})]})})]}),o.jsx("div",{className:"space-y-4",children:f?o.jsxs("div",{className:"text-center py-8",children:[o.jsx("div",{className:"animate-spin w-6 h-6 border-2 border-purple-500 border-t-transparent rounded-full mx-auto"}),o.jsx("p",{className:"text-gray-400 mt-2",children:"Loading replies..."})]}):a.length===0?o.jsx("div",{className:"text-center py-8",children:o.jsx("p",{className:"text-gray-400",children:"No replies yet. Be the first to reply!"})}):a.map(C=>{var _,P,S,B,A,D;return o.jsxs("div",{className:"flex space-x-3 p-4 bg-gray-800/20 rounded-lg",children:[o.jsx("img",{src:((_=C.character)==null?void 0:_.avatar_url)||((P=C.user)==null?void 0:P.avatar_url),alt:((S=C.character)==null?void 0:S.name)||((B=C.user)==null?void 0:B.display_name),className:"w-8 h-8 rounded-full object-cover"}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[o.jsx("span",{className:"font-medium text-white",children:((A=C.character)==null?void 0:A.name)||((D=C.user)==null?void 0:D.display_name)}),o.jsx("span",{className:"text-gray-500 text-sm",children:ho(C.timestamp)})]}),o.jsx("p",{className:"text-gray-100",children:C.content})]})]},C.id)})})]})]})})},UC=({posts:e,onLike:t,onRepost:r,onCreatePost:n})=>{const{user:s}=De(),{characters:i,getFilteredPosts:a,allUsers:l,bookmarkPost:c,unbookmarkPost:u,bookmarkedPosts:d,selectedCharacter:h,setSelectedCharacter:f}=Ke(),[p,g]=N.useState(!1),[y,w]=N.useState("for-you"),[v,x]=N.useState(null),[m,b]=N.useState([]),j=i.filter(A=>A.userId===(s==null?void 0:s.id));N.useEffect(()=>{const A=()=>{const V=k();b(V)};A();const D=setInterval(A,1e3);return()=>clearInterval(D)},[e,y,h,s]);const k=()=>y==="browse"?e.sort((A,D)=>D.timestamp.getTime()-A.timestamp.getTime()):a(h||"user"),C=A=>{f(A==="user"?null:A),g(!1)},_=A=>{d.includes(A)?u(A):c(A)},P=A=>{x(A)},S=()=>h?h.name:"Main Account",B=()=>h?h.avatar:s==null?void 0:s.avatar;return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"min-h-screen bg-black/10 backdrop-blur-sm",children:[o.jsxs("div",{className:"sticky top-0 bg-black/80 backdrop-blur-md border-b border-gray-700/50 p-4 z-10",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-bold text-white",children:"Home"}),o.jsx("p",{className:"text-gray-400 text-sm",children:"Character stories and adventures"})]}),o.jsxs("button",{onClick:n,className:"flex items-center space-x-2 bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-full transition-colors",children:[o.jsx(Qo,{className:"w-4 h-4"}),o.jsx("span",{children:"Post"})]})]}),o.jsxs("div",{className:"flex space-x-1 mb-4 bg-gray-800/50 rounded-lg p-1",children:[o.jsxs("button",{onClick:()=>w("for-you"),className:`flex-1 flex items-center justify-center space-x-2 px-4 py-2 rounded-md transition-colors ${y==="for-you"?"bg-purple-600 text-white":"text-gray-400 hover:text-white"}`,children:[o.jsx(or,{className:"w-4 h-4"}),o.jsx("span",{children:"For You"})]}),o.jsxs("button",{onClick:()=>w("browse"),className:`flex-1 flex items-center justify-center space-x-2 px-4 py-2 rounded-md transition-colors ${y==="browse"?"bg-purple-600 text-white":"text-gray-400 hover:text-white"}`,children:[o.jsx(xv,{className:"w-4 h-4"}),o.jsx("span",{children:"Browse"})]})]}),y==="for-you"&&o.jsxs("div",{className:"relative",children:[o.jsxs("button",{onClick:()=>g(!p),className:"flex items-center space-x-3 bg-gray-800/50 hover:bg-gray-700/50 rounded-lg px-4 py-3 transition-colors w-full",children:[o.jsx("img",{src:B(),alt:S(),className:"w-8 h-8 rounded-full object-cover"}),o.jsxs("div",{className:"flex-1 text-left",children:[o.jsx("p",{className:"text-white font-medium",children:"Viewing as"}),o.jsx("p",{className:"text-gray-400 text-sm",children:S()}),h&&o.jsxs("p",{className:"text-purple-300 text-xs",children:["#",h.verseTag]})]}),o.jsx(_C,{className:`w-5 h-5 text-gray-400 transition-transform ${p?"rotate-180":""}`})]}),p&&o.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-gray-800 border border-gray-700 rounded-lg shadow-lg z-20",children:[o.jsxs("button",{onClick:()=>C("user"),className:`w-full flex items-center space-x-3 px-4 py-3 hover:bg-gray-700 transition-colors ${h?"":"bg-gray-700"}`,children:[o.jsx("img",{src:s==null?void 0:s.avatar,alt:s==null?void 0:s.displayName,className:"w-8 h-8 rounded-full object-cover"}),o.jsxs("div",{className:"text-left",children:[o.jsx("p",{className:"text-white font-medium",children:"Main Account"}),o.jsxs("p",{className:"text-gray-400 text-sm",children:["@",s==null?void 0:s.username]})]})]}),j.map(A=>o.jsxs("button",{onClick:()=>C(A),className:`w-full flex items-center space-x-3 px-4 py-3 hover:bg-gray-700 transition-colors ${(h==null?void 0:h.id)===A.id?"bg-gray-700":""}`,children:[o.jsx("img",{src:A.avatar,alt:A.name,className:"w-8 h-8 rounded-full object-cover"}),o.jsxs("div",{className:"text-left",children:[o.jsx("p",{className:"text-white font-medium",children:A.name}),o.jsxs("p",{className:"text-gray-400 text-sm",children:["@",A.username]}),o.jsxs("p",{className:"text-purple-300 text-xs",children:["#",A.verseTag]})]})]},A.id))]})]})]}),o.jsx("div",{className:"divide-y divide-gray-700/30",children:m.length===0?o.jsxs("div",{className:"p-12 text-center",children:[o.jsx("h3",{className:"text-xl font-semibold text-gray-400 mb-2",children:y==="browse"?"No posts available":"Welcome to CharacterVerse!"}),o.jsx("p",{className:"text-gray-500 mb-6",children:y==="browse"?"Check back later for new content from the community.":h?`Follow accounts or characters as ${S()} to see their posts here.`:"Follow other writers to see their posts here, or create your first post!"}),o.jsx("button",{onClick:n,className:"bg-purple-600 hover:bg-purple-700 text-white px-6 py-3 rounded-full transition-colors",children:"Create Your First Post"})]}):m.map(A=>o.jsx("div",{onClick:()=>P(A),className:"cursor-pointer",children:o.jsx(Es,{post:A,onLike:()=>t(A.id),onRepost:()=>r(A.id),onBookmark:()=>_(A.id),isBookmarked:d.includes(A.id)})},A.id))}),o.jsx("div",{className:"p-6 text-center border-t border-gray-700/50 bg-black/20",children:o.jsxs("p",{className:"text-gray-500 text-sm",children:["Verse © ",new Date().getFullYear()]})})]}),v&&o.jsx(MC,{post:v,onClose:()=>x(null)})]})},$C=({characters:e,selectedCharacter:t,onCreatePost:r,onClose:n,replyToPost:s})=>{var B,A,D,V,q,L,U,R;const{user:i}=De(),[a,l]=N.useState(""),[c,u]=N.useState(t),[d,h]=N.useState("public"),[f,p]=N.useState(!1),[g,y]=N.useState([]),[w,v]=N.useState(!1),x=e.filter(T=>T.userId===(i==null?void 0:i.id)),m=T=>{T.preventDefault(),a.trim()&&(r(a.trim(),c||void 0,g),l(""),y([]))},b=async(T,z)=>{if(i){v(!0);try{const E=z==="image"?"post-images":"post-videos",F=`${i.id}/${z}_${Date.now()}.${T.name.split(".").pop()}`,I=await id(T,E,F);I?y(O=>[...O,I]):alert("Failed to upload file")}catch(E){console.error("Upload error:",E),alert("Failed to upload file")}finally{v(!1)}}},j=()=>{const T=document.createElement("input");T.type="file",T.accept="image/*",T.onchange=z=>{var F;const E=(F=z.target.files)==null?void 0:F[0];E&&b(E,"image")},T.click()},k=()=>{const T=document.createElement("input");T.type="file",T.accept="video/*",T.onchange=z=>{var F;const E=(F=z.target.files)==null?void 0:F[0];E&&b(E,"video")},T.click()},C=T=>{y(z=>z.filter((E,F)=>F!==T))},_=a.length,P=280,S=[{value:"public",label:"Public",icon:xv,desc:"Anyone can see this post"},{value:"followers",label:"Followers",icon:or,desc:"Only your followers can see this"},{value:"private",label:"Private",icon:uo,desc:"Only you can see this"}];return o.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-gray-900 rounded-2xl border border-gray-700/50 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"sticky top-0 bg-gray-900 border-b border-gray-700/50 p-4 flex items-center justify-between",children:[o.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-800 rounded-full transition-colors",children:o.jsx(st,{className:"w-6 h-6 text-gray-400"})}),o.jsx("h2",{className:"text-lg font-bold text-white",children:s?"Reply to Post":"Create Post"}),o.jsx("div",{className:"w-10"})]}),s&&o.jsx("div",{className:"p-4 bg-gray-800/30 border-b border-gray-700/50",children:o.jsxs("div",{className:"flex space-x-3",children:[o.jsx("img",{src:((B=s.character)==null?void 0:B.avatar)||((A=s.user)==null?void 0:A.avatar),alt:((D=s.character)==null?void 0:D.name)||((V=s.user)==null?void 0:V.displayName),className:"w-8 h-8 rounded-full object-cover"}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[o.jsx("span",{className:"font-medium text-white",children:((q=s.character)==null?void 0:q.name)||((L=s.user)==null?void 0:L.displayName)}),o.jsxs("span",{className:"text-gray-500 text-sm",children:["@",((U=s.character)==null?void 0:U.username)||((R=s.user)==null?void 0:R.username)]})]}),o.jsx("p",{className:"text-gray-300 text-sm",children:s.content})]})]})}),o.jsxs("form",{onSubmit:m,className:"p-6",children:[o.jsxs("div",{className:"flex space-x-4 mb-4",children:[o.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center",children:c?o.jsx("img",{src:c.avatar,alt:c.name,className:"w-12 h-12 rounded-full object-cover"}):o.jsx("img",{src:i==null?void 0:i.avatar,alt:i==null?void 0:i.displayName,className:"w-12 h-12 rounded-full object-cover"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"flex items-center space-x-2 mb-2",children:o.jsxs("select",{value:(c==null?void 0:c.id)||"user",onChange:T=>{if(T.target.value==="user")u(null);else{const z=x.find(E=>E.id===T.target.value);u(z||null)}},className:"bg-gray-800 text-white border border-gray-600 rounded-lg px-3 py-1 text-sm focus:border-purple-500 focus:outline-none",children:[o.jsx("option",{value:"user",children:"Post as yourself"}),x.map(T=>o.jsxs("option",{value:T.id,children:[T.name," - ",T.title]},T.id))]})}),c&&o.jsxs("div",{className:"inline-flex items-center space-x-2 text-xs text-purple-300 bg-purple-900/30 px-2 py-1 rounded-full mb-3",children:[o.jsx("span",{children:"📖"}),o.jsx("span",{children:c.universe})]})]})]}),o.jsx("textarea",{value:a,onChange:T=>l(T.target.value),placeholder:s?"Write your reply...":c?`What's happening in ${c.name}'s world?`:"What's on your mind?",className:"w-full bg-transparent text-white text-xl placeholder-gray-500 resize-none border-none outline-none min-h-[120px]",maxLength:P}),g.length>0&&o.jsx("div",{className:"grid grid-cols-2 gap-2 mt-4",children:g.map((T,z)=>o.jsxs("div",{className:"relative",children:[T.includes(".mp4")||T.includes(".mov")||T.includes(".avi")?o.jsx("video",{src:T,className:"w-full h-32 object-cover rounded-lg",controls:!0}):o.jsx("img",{src:T,alt:"Upload",className:"w-full h-32 object-cover rounded-lg"}),o.jsx("button",{type:"button",onClick:()=>C(z),className:"absolute top-2 right-2 p-1 bg-black/50 hover:bg-black/70 rounded-full transition-colors",children:o.jsx(st,{className:"w-4 h-4 text-white"})})]},z))}),o.jsxs("div",{className:"space-y-4 pt-4 border-t border-gray-700/50",children:[!s&&o.jsx("div",{className:"flex items-center space-x-4",children:o.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:f,onChange:T=>p(T.target.checked),className:"text-purple-600 focus:ring-purple-500 rounded"}),o.jsx("span",{className:"text-gray-300 text-sm",children:"Create as thread"})]})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-gray-300 text-sm mb-2",children:"Who can see this?"}),o.jsx("div",{className:"flex space-x-2",children:S.map(T=>o.jsxs("button",{type:"button",onClick:()=>h(T.value),className:`flex items-center space-x-2 px-3 py-2 rounded-lg text-sm transition-colors ${d===T.value?"bg-purple-600 text-white":"bg-gray-800 text-gray-300 hover:bg-gray-700"}`,children:[o.jsx(T.icon,{className:"w-4 h-4"}),o.jsx("span",{children:T.label})]},T.value))})]})]}),o.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-700/50",children:[o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx("button",{type:"button",onClick:j,disabled:w,className:"p-2 text-purple-400 hover:bg-purple-400/10 rounded-full transition-colors disabled:opacity-50",children:w?o.jsx(ud,{className:"w-5 h-5 animate-spin"}):o.jsx(gv,{className:"w-5 h-5"})}),o.jsx("button",{type:"button",onClick:k,disabled:w,className:"p-2 text-purple-400 hover:bg-purple-400/10 rounded-full transition-colors disabled:opacity-50",children:o.jsx(kv,{className:"w-5 h-5"})}),o.jsx("button",{type:"button",className:"p-2 text-purple-400 hover:bg-purple-400/10 rounded-full transition-colors",children:o.jsx(LC,{className:"w-5 h-5"})}),o.jsx("button",{type:"button",className:"p-2 text-purple-400 hover:bg-purple-400/10 rounded-full transition-colors",children:o.jsx(Yo,{className:"w-5 h-5"})}),o.jsx("button",{type:"button",className:"p-2 text-purple-400 hover:bg-purple-400/10 rounded-full transition-colors",children:o.jsx(vv,{className:"w-5 h-5"})})]}),o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:`w-8 h-8 rounded-full border-2 ${_>P*.8?_>=P?"border-red-500":"border-yellow-500":"border-gray-600"}`,children:o.jsx("svg",{className:"w-full h-full transform -rotate-90",children:o.jsx("circle",{cx:"16",cy:"16",r:"14",fill:"none",strokeWidth:"2",className:_>P*.8?_>=P?"stroke-red-500":"stroke-yellow-500":"stroke-purple-500",strokeDasharray:`${_/P*88} 88`})})}),o.jsx("span",{className:`text-sm ${_>=P?"text-red-400":"text-gray-500"}`,children:P-_})]}),o.jsx("button",{type:"submit",disabled:!a.trim()||_>P||w,className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white font-semibold px-6 py-2 rounded-full hover:from-purple-700 hover:to-pink-700 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:s?"Reply":f?"Start Thread":"Post"})]})]})]})]})})},zC=()=>{const{posts:e,characters:t,selectedCharacter:r,addPost:n,likePost:s,repostPost:i}=Ke(),{user:a}=De(),[l,c]=N.useState(!1),u=(f,p,g)=>{a&&(n({content:f,characterId:p==null?void 0:p.id,character:p,userId:a.id,user:a,isThread:!1,visibility:"public",tags:f.match(/#\w+/g)||[],mediaUrls:g}),c(!1))},d=f=>{s(f)},h=f=>{i(f)};return o.jsxs(o.Fragment,{children:[o.jsx(UC,{posts:e,onLike:d,onRepost:h,onCreatePost:()=>c(!0)}),l&&o.jsx($C,{characters:t,selectedCharacter:r,onCreatePost:u,onClose:()=>c(!1)})]})},fo=({currentImage:e,onImageChange:t,type:r,className:n=""})=>{const{user:s}=De(),i=N.useRef(null),a=N.useRef(null),[l,c]=N.useState(!1),[u,d]=N.useState(!1),[h,f]=N.useState(!1),[p,g]=N.useState(null),[y,w]=N.useState({x:0,y:0,scale:1,rotation:0}),v=r==="avatar"?{width:350,height:350}:{width:1500,height:500},x=P=>new Promise(S=>{const B=a.current,A=B.getContext("2d"),D=new Image;D.onload=()=>{B.width=v.width,B.height=v.height,A.clearRect(0,0,B.width,B.height),A.save(),A.translate(B.width/2,B.height/2),A.rotate(y.rotation*Math.PI/180),A.scale(y.scale,y.scale);const V=D.width,q=D.height,L=-V/2+y.x,U=-q/2+y.y;A.drawImage(D,L,U,V,q),A.restore(),B.toBlob(R=>{if(R){const T=new File([R],P.name,{type:P.type,lastModified:Date.now()});S(T)}},P.type,.9)},D.src=URL.createObjectURL(P)}),m=async P=>{if(!(!s||!P)){if(!P.type.startsWith("image/")){alert("Please select an image file");return}if(P.size>10*1024*1024){alert("File size must be less than 10MB");return}g(P),f(!0)}},b=async()=>{if(!(!p||!s)){c(!0);try{const P=await x(p),S=r==="avatar"?"avatars":"headers",B=`${s.id}/${r}_${Date.now()}.${P.name.split(".").pop()}`,A=await id(P,S,B);A?(t(A),f(!1),g(null),w({x:0,y:0,scale:1,rotation:0})):alert("Failed to upload image")}catch(P){console.error("Upload error:",P),alert("Failed to upload image")}finally{c(!1)}}},j=()=>{var P;(P=i.current)==null||P.click()},k=P=>{P.preventDefault(),d(!1);const S=Array.from(P.dataTransfer.files);S.length>0&&m(S[0])},C=P=>{P.preventDefault(),d(!0)},_=P=>{P.preventDefault(),d(!1)};return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:`relative group ${n}`,children:[o.jsxs("div",{onClick:j,onDrop:k,onDragOver:C,onDragLeave:_,className:`relative cursor-pointer transition-all duration-200 ${u?"scale-105 opacity-80":""} ${r==="avatar"?"w-32 h-32 rounded-full":"w-full h-48 rounded-lg"} overflow-hidden bg-gray-800 border-2 border-dashed border-gray-600 hover:border-purple-500`,children:[e?o.jsx("img",{src:e,alt:r,className:"w-full h-full object-cover"}):o.jsx("div",{className:"w-full h-full flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx(pv,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),o.jsx("p",{className:"text-gray-400 text-sm",children:r==="avatar"?"Upload Avatar":"Upload Header"}),o.jsx("p",{className:"text-gray-500 text-xs mt-1",children:r==="avatar"?"350x350":"1500x500"})]})}),o.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex items-center justify-center",children:l?o.jsxs("div",{className:"text-white text-center",children:[o.jsx("div",{className:"animate-spin w-6 h-6 border-2 border-white border-t-transparent rounded-full mx-auto mb-2"}),o.jsx("p",{className:"text-sm",children:"Uploading..."})]}):o.jsxs("div",{className:"text-white text-center",children:[o.jsx(ud,{className:"w-6 h-6 mx-auto mb-2"}),o.jsxs("p",{className:"text-sm",children:[e?"Change":"Upload"," ",r]})]})})]}),o.jsx("input",{ref:i,type:"file",accept:"image/*",onChange:P=>{var B;const S=(B=P.target.files)==null?void 0:B[0];S&&m(S)},className:"hidden"}),u&&o.jsx("div",{className:"absolute inset-0 bg-purple-500/20 border-2 border-purple-500 rounded-lg flex items-center justify-center",children:o.jsx("p",{className:"text-purple-300 font-medium",children:"Drop image here"})})]}),o.jsx("canvas",{ref:a,className:"hidden"}),h&&p&&o.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-gray-900 rounded-2xl border border-gray-700/50 w-full max-w-2xl",children:[o.jsxs("div",{className:"p-4 border-b border-gray-700/50 flex items-center justify-between",children:[o.jsx("h3",{className:"text-lg font-bold text-white",children:"Adjust Image"}),o.jsx("button",{onClick:()=>{f(!1),g(null),w({x:0,y:0,scale:1,rotation:0})},className:"p-2 hover:bg-gray-800 rounded-full transition-colors",children:o.jsx(st,{className:"w-6 h-6 text-gray-400"})})]}),o.jsxs("div",{className:"p-6",children:[o.jsx("div",{className:"mb-6",children:o.jsx("div",{className:`relative mx-auto border-2 border-gray-600 overflow-hidden ${r==="avatar"?"w-64 h-64 rounded-full":"w-full h-40 rounded-lg"}`,style:{maxWidth:r==="avatar"?"256px":"100%"},children:o.jsx("img",{src:URL.createObjectURL(p),alt:"Preview",className:"w-full h-full object-cover",style:{transform:`translate(${y.x}px, ${y.y}px) scale(${y.scale}) rotate(${y.rotation}deg)`,transformOrigin:"center"}})})}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Position X: ",y.x,"px"]}),o.jsx("input",{type:"range",min:"-200",max:"200",value:y.x,onChange:P=>w(S=>({...S,x:parseInt(P.target.value)})),className:"w-full"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Position Y: ",y.y,"px"]}),o.jsx("input",{type:"range",min:"-200",max:"200",value:y.y,onChange:P=>w(S=>({...S,y:parseInt(P.target.value)})),className:"w-full"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Scale: ",y.scale.toFixed(1),"x"]}),o.jsx("input",{type:"range",min:"0.5",max:"3",step:"0.1",value:y.scale,onChange:P=>w(S=>({...S,scale:parseFloat(P.target.value)})),className:"w-full"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Rotation: ",y.rotation,"°"]}),o.jsx("input",{type:"range",min:"0",max:"360",value:y.rotation,onChange:P=>w(S=>({...S,rotation:parseInt(P.target.value)})),className:"w-full"})]})]}),o.jsxs("div",{className:"flex justify-end space-x-4 mt-6 pt-6 border-t border-gray-700/50",children:[o.jsx("button",{onClick:()=>{f(!1),g(null),w({x:0,y:0,scale:1,rotation:0})},className:"px-6 py-2 text-gray-400 hover:text-white transition-colors",children:"Cancel"}),o.jsx("button",{onClick:b,disabled:l,className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white font-semibold px-6 py-2 rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all duration-200 disabled:opacity-50",children:l?"Uploading...":"Apply & Upload"})]})]})]})})]})},VC=({character:e,onClose:t})=>{const{updateCharacter:r}=Ke(),[n,s]=N.useState({username:e.username,name:e.name,title:e.title,bio:e.bio,universe:e.universe,verseTag:e.verseTag,traits:e.traits.join(", "),customColor:e.customColor,customFont:e.customFont,avatar:e.avatar,headerImage:e.headerImage}),i=l=>{l.preventDefault();const c={username:n.username,name:n.name,title:n.title,bio:n.bio,universe:n.universe,verseTag:n.verseTag,traits:n.traits.split(",").map(u=>u.trim()).filter(u=>u),customColor:n.customColor,customFont:n.customFont,avatar:n.avatar,headerImage:n.headerImage};r(e.id,c),t()},a=["Inter","Roboto","Open Sans","Lato","Montserrat","Playfair Display","Crimson Text","Merriweather","Courier New","Georgia"];return o.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-gray-900 rounded-2xl border border-gray-700/50 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"sticky top-0 bg-gray-900 border-b border-gray-700/50 p-4 flex items-center justify-between",children:[o.jsx("h2",{className:"text-lg font-bold text-white",children:"Edit Character"}),o.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-800 rounded-full transition-colors",children:o.jsx(st,{className:"w-6 h-6 text-gray-400"})})]}),o.jsxs("form",{onSubmit:i,className:"p-6 space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Header Image"}),o.jsx(fo,{currentImage:n.headerImage,onImageChange:l=>s(c=>({...c,headerImage:l})),type:"header"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Avatar"}),o.jsx(fo,{currentImage:n.avatar,onImageChange:l=>s(c=>({...c,avatar:l})),type:"avatar",className:"w-32"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Character Username *"}),o.jsx("input",{type:"text",value:n.username,onChange:l=>s(c=>({...c,username:l.target.value})),className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white focus:border-purple-500 focus:outline-none",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Character Name *"}),o.jsx("input",{type:"text",value:n.name,onChange:l=>s(c=>({...c,name:l.target.value})),className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white focus:border-purple-500 focus:outline-none",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Title/Role *"}),o.jsx("input",{type:"text",value:n.title,onChange:l=>s(c=>({...c,title:l.target.value})),className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white focus:border-purple-500 focus:outline-none",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Universe *"}),o.jsx("input",{type:"text",value:n.universe,onChange:l=>s(c=>({...c,universe:l.target.value})),className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white focus:border-purple-500 focus:outline-none",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Verse Tag *"}),o.jsx("input",{type:"text",value:n.verseTag,onChange:l=>s(c=>({...c,verseTag:l.target.value})),className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white focus:border-purple-500 focus:outline-none",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Character Color"}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"color",value:n.customColor,onChange:l=>s(c=>({...c,customColor:l.target.value})),className:"w-12 h-12 rounded-lg border border-gray-600 bg-gray-800"}),o.jsx("div",{className:"flex-1",children:o.jsx("input",{type:"text",value:n.customColor,onChange:l=>s(c=>({...c,customColor:l.target.value})),className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white focus:border-purple-500 focus:outline-none"})})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Bio *"}),o.jsx("textarea",{value:n.bio,onChange:l=>s(c=>({...c,bio:l.target.value})),rows:4,className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white focus:border-purple-500 focus:outline-none resize-none",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Traits (comma-separated)"}),o.jsx("input",{type:"text",value:n.traits,onChange:l=>s(c=>({...c,traits:l.target.value})),className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white focus:border-purple-500 focus:outline-none"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Custom Font"}),o.jsx("select",{value:n.customFont,onChange:l=>s(c=>({...c,customFont:l.target.value})),className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white focus:border-purple-500 focus:outline-none",children:a.map(l=>o.jsx("option",{value:l,style:{fontFamily:l},children:l},l))})]}),o.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-700/50",children:[o.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 text-gray-400 hover:text-white transition-colors",children:"Cancel"}),o.jsx("button",{type:"submit",className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white font-semibold px-6 py-2 rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all duration-200",children:"Save Changes"})]})]})]})})},hd=({character:e,onClose:t})=>{const{user:r}=De(),{posts:n,followCharacter:s,unfollowCharacter:i,likePost:a,repostPost:l,getCharacterFollowers:c,getCharacterFollowing:u}=Ke(),[d,h]=N.useState("posts"),[f,p]=N.useState([]),[g,y]=N.useState([]),[w,v]=N.useState(e.followers.length),[x,m]=N.useState(e.following.length),b=e.userId===(r==null?void 0:r.id),j=e.followers.includes((r==null?void 0:r.id)||""),k=n.filter(D=>D.characterId===e.id);N.useEffect(()=>{d==="followers"?_():d==="following"&&P()},[d,e.id]),N.useEffect(()=>{const D=setInterval(()=>{C()},1e3);return()=>clearInterval(D)},[e.id]);const C=async()=>{const D=await c(e.id),V=await u(e.id);v(D.length),m(V.length)},_=async()=>{const D=await c(e.id);p(D),v(D.length)},P=async()=>{const D=await u(e.id);y(D),m(D.length)},S=()=>{j?i(e.id):s(e.id)},B=D=>{a(D)},A=D=>{l(D)};return o.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-gray-900 rounded-2xl border border-gray-700/50 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"sticky top-0 bg-gray-900 border-b border-gray-700/50 p-4 flex items-center justify-between",children:[o.jsx("h2",{className:"text-lg font-bold text-white",children:"Character Profile"}),o.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-800 rounded-full transition-colors",children:o.jsx(st,{className:"w-6 h-6 text-gray-400"})})]}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"h-48 relative",style:{backgroundColor:`${e.customColor}30`},children:o.jsx("img",{src:e.headerImage,alt:"Character header",className:"w-full h-full object-cover"})}),o.jsxs("div",{className:"relative px-6 pb-6",children:[o.jsxs("div",{className:"flex items-end justify-between -mt-16 mb-4",children:[o.jsx("img",{src:e.avatar,alt:e.name,className:"w-32 h-32 rounded-full object-cover ring-4 ring-gray-900 bg-gray-900 relative z-10"}),!b&&o.jsx("button",{onClick:S,className:`flex items-center space-x-2 px-4 py-2 rounded-full transition-colors ${j?"bg-gray-600 text-white hover:bg-gray-700":"bg-purple-600 text-white hover:bg-purple-700"}`,children:j?o.jsxs(o.Fragment,{children:[o.jsx(Ni,{className:"w-4 h-4"}),o.jsx("span",{children:"Unfollow"})]}):o.jsxs(o.Fragment,{children:[o.jsx(Dr,{className:"w-4 h-4"}),o.jsx("span",{children:"Follow"})]})})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-white",children:e.name}),o.jsx("p",{className:"text-purple-300 text-lg",children:e.title}),o.jsxs("p",{className:"text-gray-400",children:["@",e.username]})]}),o.jsx("p",{className:"text-gray-300",children:e.bio}),o.jsxs("div",{className:"flex items-center space-x-4 text-gray-400 text-sm",children:[o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx(vv,{className:"w-4 h-4"}),o.jsx("span",{children:e.universe})]}),o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx(Yo,{className:"w-4 h-4"}),o.jsxs("span",{children:["Created ",e.createdAt.toLocaleDateString()]})]}),o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:e.customColor}}),o.jsxs("span",{children:["#",e.verseTag]})]})]}),o.jsx("div",{className:"flex flex-wrap gap-2",children:e.traits.map(D=>o.jsx("span",{className:"px-2 py-1 bg-gray-700/50 text-gray-300 text-xs rounded-full",children:D},D))}),o.jsxs("div",{className:"flex items-center space-x-6 text-sm",children:[o.jsxs("button",{onClick:()=>h("following"),className:"hover:text-white transition-colors",children:[o.jsx("span",{className:"font-bold text-white",children:x}),o.jsx("span",{className:"text-gray-400 ml-1",children:"Following"})]}),o.jsxs("button",{onClick:()=>h("followers"),className:"hover:text-white transition-colors",children:[o.jsx("span",{className:"font-bold text-white",children:w}),o.jsx("span",{className:"text-gray-400 ml-1",children:"Followers"})]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-bold text-white",children:k.length}),o.jsx("span",{className:"text-gray-400 ml-1",children:"Posts"})]})]})]})]})]}),o.jsx("div",{className:"border-b border-gray-700/50 bg-black/20 sticky top-16 z-10",children:o.jsx("div",{className:"flex",children:[{key:"posts",label:"Posts",count:k.length},{key:"followers",label:"Followers",count:w},{key:"following",label:"Following",count:x}].map(D=>o.jsxs("button",{onClick:()=>h(D.key),className:`flex-1 px-4 py-4 text-center transition-colors relative ${d===D.key?"text-purple-400 border-b-2 border-purple-400":"text-gray-400 hover:text-white"}`,children:[o.jsx("span",{className:"font-medium",children:D.label}),D.count>0&&o.jsx("span",{className:"ml-2 text-xs bg-gray-700 px-2 py-1 rounded-full",children:D.count})]},D.key))})}),o.jsxs("div",{className:"p-6",children:[d==="posts"&&o.jsx("div",{className:"space-y-4",children:k.length===0?o.jsx("div",{className:"text-center py-12",children:o.jsx("p",{className:"text-gray-400",children:"No posts yet"})}):k.map(D=>o.jsx(Es,{post:D,onLike:()=>B(D.id),onRepost:()=>A(D.id)},D.id))}),d==="followers"&&o.jsx("div",{className:"space-y-4",children:f.length===0?o.jsx("div",{className:"text-center py-12",children:o.jsx("p",{className:"text-gray-400",children:"No followers yet"})}):f.map(D=>o.jsxs("div",{className:"flex items-center space-x-4 p-4 bg-gray-800/30 rounded-lg hover:bg-gray-700/30 transition-colors cursor-pointer",children:[o.jsx("img",{src:D.avatar,alt:D.displayName,className:"w-12 h-12 rounded-full object-cover"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-white font-medium",children:D.displayName}),o.jsxs("p",{className:"text-gray-400 text-sm",children:["@",D.username]}),o.jsxs("p",{className:"text-purple-300 text-sm",children:["#",D.writersTag]})]})]},D.id))}),d==="following"&&o.jsx("div",{className:"space-y-4",children:g.length===0?o.jsx("div",{className:"text-center py-12",children:o.jsx("p",{className:"text-gray-400",children:"Not following anyone yet"})}):g.map(D=>o.jsxs("div",{className:"flex items-center space-x-4 p-4 bg-gray-800/30 rounded-lg hover:bg-gray-700/30 transition-colors cursor-pointer",children:[o.jsx("img",{src:D.avatar,alt:"displayName"in D?D.displayName:D.name,className:"w-12 h-12 rounded-full object-cover"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-white font-medium",children:"displayName"in D?D.displayName:D.name}),o.jsxs("p",{className:"text-gray-400 text-sm",children:["@",D.username]}),o.jsxs("p",{className:"text-purple-300 text-sm",children:["#","writersTag"in D?D.writersTag:D.verseTag]})]})]},D.id))})]})]})})},ri=({character:e,onEdit:t,onDelete:r,showActions:n=!0,showFollowButton:s=!1})=>{const{user:i}=De(),{deleteCharacter:a,followCharacter:l,unfollowCharacter:c}=Ke(),[u,d]=N.useState(!1),[h,f]=N.useState(!1),p=e.userId===(i==null?void 0:i.id),g=e.followers.includes((i==null?void 0:i.id)||""),y=()=>{t?t():d(!0)},w=()=>{window.confirm("Are you sure you want to delete this character?")&&(r?r():a(e.id))},v=()=>{g?c(e.id):l(e.id)},x=()=>{f(!0)};return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"rounded-2xl border border-gray-700/50 overflow-hidden hover:bg-gray-700/30 transition-colors cursor-pointer relative",style:{backgroundColor:`${e.customColor}50`},onClick:x,children:[o.jsxs("div",{className:"relative h-32",children:[o.jsx("img",{src:e.headerImage,alt:`${e.name} header`,className:"w-full h-full object-cover"}),n&&p&&o.jsxs("div",{className:"absolute top-3 right-3 flex space-x-2",children:[o.jsx("button",{onClick:m=>{m.stopPropagation(),y()},className:"p-2 bg-black/50 hover:bg-black/70 rounded-full transition-colors",children:o.jsx(cd,{className:"w-4 h-4 text-white"})}),o.jsx("button",{onClick:m=>{m.stopPropagation(),w()},className:"p-2 bg-black/50 hover:bg-red-600/70 rounded-full transition-colors",children:o.jsx($i,{className:"w-4 h-4 text-white"})})]})]}),o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex items-center space-x-4 -mt-16 mb-4 relative z-10",children:[o.jsx("img",{src:e.avatar,alt:e.name,className:"w-16 h-16 rounded-full object-cover ring-4 ring-gray-800 bg-gray-800"}),o.jsx("div",{className:"flex items-center space-x-2 mt-8",children:o.jsxs("span",{className:"text-purple-300 text-sm",children:["#",e.verseTag]})})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-white font-bold text-lg",children:e.name}),o.jsx("p",{className:"text-purple-300",children:e.title}),o.jsxs("p",{className:"text-gray-400 text-sm",children:["@",e.username]})]}),o.jsx("p",{className:"text-gray-300 text-sm line-clamp-3",children:e.bio}),o.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.traits.slice(0,3).map(m=>o.jsx("span",{className:"px-2 py-1 bg-gray-700/50 text-gray-300 text-xs rounded-full",children:m},m)),e.traits.length>3&&o.jsxs("span",{className:"px-2 py-1 bg-gray-700/50 text-gray-400 text-xs rounded-full",children:["+",e.traits.length-3," more"]})]}),o.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-gray-700/50",children:[o.jsxs("div",{className:"flex items-center space-x-4 text-gray-400 text-sm",children:[o.jsxs("span",{children:[e.followers.length," followers"]}),o.jsxs("span",{children:[e.following.length," following"]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[s&&!p&&o.jsx("button",{onClick:m=>{m.stopPropagation(),v()},className:`flex items-center space-x-1 px-3 py-1 rounded-full text-sm transition-colors ${g?"bg-gray-600 text-white hover:bg-gray-700":"bg-purple-600 text-white hover:bg-purple-700"}`,children:g?o.jsxs(o.Fragment,{children:[o.jsx(Ni,{className:"w-3 h-3"}),o.jsx("span",{children:"Unfollow"})]}):o.jsxs(o.Fragment,{children:[o.jsx(Dr,{className:"w-3 h-3"}),o.jsx("span",{children:"Follow"})]})}),o.jsxs("button",{onClick:m=>{m.stopPropagation(),x()},className:"flex items-center space-x-1 px-3 py-1 bg-gray-700 text-white rounded-full text-sm hover:bg-gray-600 transition-colors",children:[o.jsx(od,{className:"w-3 h-3"}),o.jsx("span",{children:"View"})]})]})]})]})]})]}),u&&o.jsx(VC,{character:e,onClose:()=>d(!1)}),h&&o.jsx(hd,{character:e,onClose:()=>f(!1)})]})},Ev=({user:e,onClose:t})=>{const{user:r}=De(),{posts:n,followUser:s,unfollowUser:i,likePost:a,repostPost:l,getUserFollowers:c,getUserFollowing:u}=Ke(),[d,h]=N.useState("posts"),[f,p]=N.useState([]),[g,y]=N.useState([]),w=e.id===(r==null?void 0:r.id),v=(r==null?void 0:r.following.includes(e.id))||!1,x=n.filter(_=>_.userId===e.id);N.useEffect(()=>{d==="followers"?m():d==="following"&&b()},[d,e.id]);const m=async()=>{const _=await c(e.id);p(_)},b=async()=>{const _=await u(e.id);y(_)},j=()=>{s(e.id)},k=_=>{a(_)},C=_=>{l(_)};return o.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-gray-900 rounded-2xl border border-gray-700/50 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"sticky top-0 bg-gray-900 border-b border-gray-700/50 p-4 flex items-center justify-between",children:[o.jsx("h2",{className:"text-lg font-bold text-white",children:"Profile"}),o.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-800 rounded-full transition-colors",children:o.jsx(st,{className:"w-6 h-6 text-gray-400"})})]}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"h-48 relative bg-gradient-to-r from-purple-600 via-pink-600 to-purple-800",children:o.jsx("img",{src:e.headerImage,alt:"Profile header",className:"w-full h-full object-cover"})}),o.jsxs("div",{className:"relative px-6 pb-6",children:[o.jsxs("div",{className:"flex items-end justify-between -mt-16 mb-4",children:[o.jsx("img",{src:e.avatar,alt:e.displayName,className:"w-32 h-32 rounded-full object-cover ring-4 ring-gray-900 bg-gray-900 relative z-10"}),!w&&o.jsx("button",{onClick:j,className:`flex items-center space-x-2 px-4 py-2 rounded-full transition-colors ${v?"bg-gray-600 text-white hover:bg-gray-700":"bg-purple-600 text-white hover:bg-purple-700"}`,children:v?o.jsxs(o.Fragment,{children:[o.jsx(Ni,{className:"w-4 h-4"}),o.jsx("span",{children:"Unfollow"})]}):o.jsxs(o.Fragment,{children:[o.jsx(Dr,{className:"w-4 h-4"}),o.jsx("span",{children:"Follow"})]})})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-white",children:e.displayName}),o.jsxs("p",{className:"text-gray-400",children:["@",e.username]})]}),o.jsx("p",{className:"text-gray-300",children:e.bio}),o.jsxs("div",{className:"flex items-center space-x-4 text-gray-400 text-sm",children:[o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx(Yo,{className:"w-4 h-4"}),o.jsxs("span",{children:["Joined ",e.createdAt.toLocaleDateString()]})]}),o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx("span",{className:"w-2 h-2 bg-purple-500 rounded-full"}),o.jsxs("span",{children:["#",e.writersTag]})]})]}),o.jsxs("div",{className:"flex items-center space-x-6 text-sm",children:[o.jsxs("button",{onClick:()=>h("following"),className:"hover:text-white transition-colors",children:[o.jsx("span",{className:"font-bold text-white",children:e.following.length}),o.jsx("span",{className:"text-gray-400 ml-1",children:"Following"})]}),o.jsxs("button",{onClick:()=>h("followers"),className:"hover:text-white transition-colors",children:[o.jsx("span",{className:"font-bold text-white",children:e.followers.length}),o.jsx("span",{className:"text-gray-400 ml-1",children:"Followers"})]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-bold text-white",children:x.length}),o.jsx("span",{className:"text-gray-400 ml-1",children:"Posts"})]})]})]})]})]}),o.jsx("div",{className:"border-b border-gray-700/50 bg-black/20 sticky top-16 z-10",children:o.jsx("div",{className:"flex",children:[{key:"posts",label:"Posts",count:x.length},{key:"followers",label:"Followers",count:e.followers.length},{key:"following",label:"Following",count:e.following.length}].map(_=>o.jsxs("button",{onClick:()=>h(_.key),className:`flex-1 px-4 py-4 text-center transition-colors relative ${d===_.key?"text-purple-400 border-b-2 border-purple-400":"text-gray-400 hover:text-white"}`,children:[o.jsx("span",{className:"font-medium",children:_.label}),_.count>0&&o.jsx("span",{className:"ml-2 text-xs bg-gray-700 px-2 py-1 rounded-full",children:_.count})]},_.key))})}),o.jsxs("div",{className:"p-6",children:[d==="posts"&&o.jsx("div",{className:"space-y-4",children:x.length===0?o.jsx("div",{className:"text-center py-12",children:o.jsx("p",{className:"text-gray-400",children:"No posts yet"})}):x.map(_=>o.jsx(Es,{post:_,onLike:()=>k(_.id),onRepost:()=>C(_.id)},_.id))}),d==="followers"&&o.jsx("div",{className:"space-y-4",children:f.length===0?o.jsx("div",{className:"text-center py-12",children:o.jsx("p",{className:"text-gray-400",children:"No followers yet"})}):f.map(_=>o.jsxs("div",{className:"flex items-center space-x-4 p-4 bg-gray-800/30 rounded-lg hover:bg-gray-700/30 transition-colors cursor-pointer",children:[o.jsx("img",{src:_.avatar,alt:_.displayName,className:"w-12 h-12 rounded-full object-cover"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-white font-medium",children:_.displayName}),o.jsxs("p",{className:"text-gray-400 text-sm",children:["@",_.username]}),o.jsxs("p",{className:"text-purple-300 text-sm",children:["#",_.writersTag]})]})]},_.id))}),d==="following"&&o.jsx("div",{className:"space-y-4",children:g.length===0?o.jsx("div",{className:"text-center py-12",children:o.jsx("p",{className:"text-gray-400",children:"Not following anyone yet"})}):g.map(_=>o.jsxs("div",{className:"flex items-center space-x-4 p-4 bg-gray-800/30 rounded-lg hover:bg-gray-700/30 transition-colors cursor-pointer",children:[o.jsx("img",{src:_.avatar,alt:_.displayName,className:"w-12 h-12 rounded-full object-cover"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-white font-medium",children:_.displayName}),o.jsxs("p",{className:"text-gray-400 text-sm",children:["@",_.username]}),o.jsxs("p",{className:"text-purple-300 text-sm",children:["#",_.writersTag]})]})]},_.id))})]})]})})},HC=()=>{const{user:e}=De(),{posts:t,characters:r,allUsers:n,searchContent:s,getRecommendations:i,likePost:a,repostPost:l,followUser:c,unfollowUser:u}=Ke(),[d,h]=N.useState(""),[f,p]=N.useState("trending"),[g,y]=N.useState({posts:[],characters:[],users:[]}),[w,v]=N.useState({writers:[],characters:[]}),[x,m]=N.useState(null),[b,j]=N.useState(null),[k,C]=N.useState({}),[_,P]=N.useState([]),[S,B]=N.useState([]),[A,D]=N.useState([]);N.useEffect(()=>{const E=()=>{const I=i();v(I);const O=t.flatMap(G=>G.tags).reduce((G,fe)=>(G[fe]=(G[fe]||0)+1,G),{}),Q=Object.entries(O).sort(([,G],[,fe])=>fe-G).slice(0,10);P(Q);const X=r.map(G=>G.verseTag).filter((G,fe,Ne)=>Ne.indexOf(G)===fe).slice(0,8);B(X);const ce=n.filter(G=>G.id!==(e==null?void 0:e.id));if(D(ce),e){const G={};n.forEach(fe=>{G[fe.id]=e.following.includes(fe.id)}),C(G)}d.trim()&&V()};E();const F=setInterval(E,1e3);return()=>clearInterval(F)},[t,r,n,e,d,i]);const V=()=>{if(!d.trim())return;const E=d.toLowerCase(),F=t.filter(Q=>{var X,ce;return Q.content.toLowerCase().includes(E)||((X=Q.character)==null?void 0:X.name.toLowerCase().includes(E))||((ce=Q.user)==null?void 0:ce.displayName.toLowerCase().includes(E))||Q.tags.some(G=>G.toLowerCase().includes(E))}),I=r.filter(Q=>Q.name.toLowerCase().includes(E)||Q.username.toLowerCase().includes(E)||Q.verseTag.toLowerCase().includes(E)||Q.universe.toLowerCase().includes(E)||Q.bio.toLowerCase().includes(E)||Q.traits.some(X=>X.toLowerCase().includes(E))),O=n.filter(Q=>Q.displayName.toLowerCase().includes(E)||Q.username.toLowerCase().includes(E)||Q.writersTag.toLowerCase().includes(E)||Q.bio.toLowerCase().includes(E));y({posts:F,characters:I,users:O})};N.useEffect(()=>{d.trim()&&(V(),p("search"))},[d]);const q=E=>{a(E)},L=E=>{l(E)},U=async E=>{await c(E),C(F=>({...F,[E]:!F[E]}))},R=E=>k[E]||!1,T=E=>{m(E)},z=E=>{j(E)};return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"min-h-screen bg-black/10 backdrop-blur-sm",children:[o.jsxs("div",{className:"sticky top-0 bg-black/80 backdrop-blur-md border-b border-gray-700/50 p-4 z-10",children:[o.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Explore"}),o.jsxs("div",{className:"relative mb-4",children:[o.jsx(xn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),o.jsx("input",{type:"text",value:d,onChange:E=>h(E.target.value),placeholder:"Search posts, characters, tags, or writers...",className:"w-full bg-gray-800 border border-gray-600 rounded-full pl-10 pr-4 py-3 text-white focus:border-purple-500 focus:outline-none"})]}),o.jsx("div",{className:"flex space-x-1 overflow-x-auto",children:[{key:"trending",label:"Trending",icon:ip},{key:"tags",label:"Tags",icon:Cc},{key:"characters",label:"Characters",icon:or},{key:"writers",label:"Writers",icon:Dr},...d?[{key:"search",label:"Search Results",icon:xn}]:[]].map(E=>o.jsxs("button",{onClick:()=>p(E.key),className:`flex items-center space-x-2 px-4 py-2 rounded-full transition-colors whitespace-nowrap ${f===E.key?"bg-purple-600 text-white":"text-gray-400 hover:text-white hover:bg-gray-800"}`,children:[o.jsx(E.icon,{className:"w-4 h-4"}),o.jsx("span",{children:E.label})]},E.key))})]}),o.jsxs("div",{className:"p-6",children:[f==="trending"&&o.jsxs("div",{className:"space-y-6",children:[w.characters.length>0&&o.jsxs("div",{className:"bg-gray-800/50 rounded-2xl p-6 border border-gray-700/50",children:[o.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center space-x-2",children:[o.jsx(OC,{className:"w-5 h-5 text-purple-400"}),o.jsx("span",{children:"Recommended for You"})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:w.characters.slice(0,4).map(E=>o.jsx("div",{onClick:()=>z(E),children:o.jsx(ri,{character:E,showActions:!1,showFollowButton:!0})},E.id))})]}),o.jsxs("div",{className:"bg-gray-800/50 rounded-2xl p-6 border border-gray-700/50",children:[o.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center space-x-2",children:[o.jsx(ip,{className:"w-5 h-5 text-purple-400"}),o.jsx("span",{children:"Trending Now"})]}),o.jsx("div",{className:"space-y-3",children:_.length>0?_.map(([E,F])=>o.jsx("div",{className:"flex items-center justify-between p-3 hover:bg-gray-700/30 rounded-lg cursor-pointer transition-colors",children:o.jsxs("div",{children:[o.jsxs("p",{className:"text-purple-400 font-medium",children:["#",E]}),o.jsxs("p",{className:"text-gray-500 text-sm",children:[F," posts"]})]})},E)):o.jsx("p",{className:"text-gray-400 text-center py-4",children:"No trending tags yet"})})]}),o.jsxs("div",{className:"bg-gray-800/50 rounded-2xl p-6 border border-gray-700/50",children:[o.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Popular Verses"}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:S.map(E=>o.jsxs("div",{className:"bg-purple-900/30 rounded-lg p-3 hover:bg-purple-900/50 cursor-pointer transition-colors",children:[o.jsxs("p",{className:"text-purple-300 font-medium",children:["#",E]}),o.jsxs("p",{className:"text-gray-400 text-sm",children:[r.filter(F=>F.verseTag===E).length," characters"]})]},E))})]})]}),f==="tags"&&o.jsx("div",{className:"space-y-4",children:_.length>0?_.map(([E,F])=>o.jsx("div",{className:"bg-gray-800/50 rounded-xl p-4 border border-gray-700/50 hover:bg-gray-700/30 cursor-pointer transition-colors",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsxs("h4",{className:"text-purple-400 font-bold text-lg",children:["#",E]}),o.jsxs("p",{className:"text-gray-400",children:[F," posts"]})]}),o.jsx(Cc,{className:"w-6 h-6 text-purple-400"})]})},E)):o.jsxs("div",{className:"text-center py-12",children:[o.jsx(Cc,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-400",children:"No tags found"})]})}),f==="characters"&&o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:r.length>0?r.map(E=>o.jsx("div",{onClick:()=>z(E),children:o.jsx(ri,{character:E,showActions:!1,showFollowButton:E.userId!==(e==null?void 0:e.id)})},E.id)):o.jsxs("div",{className:"col-span-full text-center py-12",children:[o.jsx(or,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-400",children:"No characters found"})]})}),f==="writers"&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"All Writers"}),o.jsx("p",{className:"text-gray-400 text-sm",children:"Discover writers from the entire community"})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:A.length>0?A.map(E=>o.jsxs("div",{onClick:()=>T(E),className:"bg-gray-800/50 rounded-2xl border border-gray-700/50 hover:bg-gray-700/30 transition-colors cursor-pointer overflow-hidden",children:[o.jsx("div",{className:"h-32 relative",children:o.jsx("img",{src:E.headerImage,alt:`${E.displayName} header`,className:"w-full h-full object-cover"})}),o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex items-center space-x-4 -mt-16 mb-4 relative z-10",children:[o.jsx("img",{src:E.avatar,alt:E.displayName,className:"w-16 h-16 rounded-full object-cover ring-4 ring-gray-800 bg-gray-800"}),o.jsx("div",{className:"flex items-center space-x-2 mt-8",children:o.jsxs("span",{className:"text-purple-300 text-sm",children:["#",E.writersTag]})})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-white font-bold text-lg",children:E.displayName}),o.jsxs("p",{className:"text-gray-400 text-sm",children:["@",E.username]})]}),o.jsx("p",{className:"text-gray-300 text-sm line-clamp-3",children:E.bio}),o.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-gray-700/50",children:[o.jsxs("div",{className:"flex items-center space-x-4 text-gray-400 text-sm",children:[o.jsxs("span",{children:[E.followers.length," followers"]}),o.jsxs("span",{children:[E.following.length," following"]})]}),o.jsx("button",{onClick:F=>{F.stopPropagation(),U(E.id)},className:`flex items-center space-x-1 px-3 py-1 rounded-full text-sm transition-colors ${R(E.id)?"bg-gray-600 text-white hover:bg-gray-700":"bg-purple-600 text-white hover:bg-purple-700"}`,children:R(E.id)?o.jsxs(o.Fragment,{children:[o.jsx(Ni,{className:"w-3 h-3"}),o.jsx("span",{children:"Unfollow"})]}):o.jsxs(o.Fragment,{children:[o.jsx(Dr,{className:"w-3 h-3"}),o.jsx("span",{children:"Follow"})]})})]})]})]})]},E.id)):o.jsxs("div",{className:"col-span-full text-center py-12",children:[o.jsx(Dr,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-400",children:"No writers found"})]})})]}),f==="search"&&d&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsxs("h3",{className:"text-lg font-bold text-white mb-2",children:['Search Results for "',d,'"']}),o.jsxs("p",{className:"text-gray-400 text-sm",children:["Found ",g.posts.length+g.characters.length+g.users.length," results"]})]}),g.posts.length>0&&o.jsxs("div",{children:[o.jsxs("h3",{className:"text-lg font-bold text-white mb-4",children:["Posts (",g.posts.length,")"]}),o.jsx("div",{className:"space-y-4",children:g.posts.map(E=>o.jsx(Es,{post:E,onLike:()=>q(E.id),onRepost:()=>L(E.id)},E.id))})]}),g.characters.length>0&&o.jsxs("div",{children:[o.jsxs("h3",{className:"text-lg font-bold text-white mb-4",children:["Characters (",g.characters.length,")"]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:g.characters.map(E=>o.jsx("div",{onClick:()=>z(E),children:o.jsx(ri,{character:E,showActions:!1,showFollowButton:E.userId!==(e==null?void 0:e.id)})},E.id))})]}),g.users.length>0&&o.jsxs("div",{children:[o.jsxs("h3",{className:"text-lg font-bold text-white mb-4",children:["Writers (",g.users.length,")"]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:g.users.map(E=>o.jsxs("div",{onClick:()=>T(E),className:"bg-gray-800/50 rounded-2xl border border-gray-700/50 hover:bg-gray-700/30 transition-colors cursor-pointer overflow-hidden",children:[o.jsx("div",{className:"h-32 relative",children:o.jsx("img",{src:E.headerImage,alt:`${E.displayName} header`,className:"w-full h-full object-cover"})}),o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex items-center space-x-4 -mt-16 mb-4 relative z-10",children:[o.jsx("img",{src:E.avatar,alt:E.displayName,className:"w-16 h-16 rounded-full object-cover ring-4 ring-gray-800 bg-gray-800"}),o.jsx("div",{className:"flex items-center space-x-2 mt-8",children:o.jsxs("span",{className:"text-purple-300 text-sm",children:["#",E.writersTag]})})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-white font-bold text-lg",children:E.displayName}),o.jsxs("p",{className:"text-gray-400 text-sm",children:["@",E.username]})]}),o.jsx("p",{className:"text-gray-300 text-sm line-clamp-3",children:E.bio}),o.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-gray-700/50",children:[o.jsxs("div",{className:"flex items-center space-x-4 text-gray-400 text-sm",children:[o.jsxs("span",{children:[E.followers.length," followers"]}),o.jsxs("span",{children:[E.following.length," following"]})]}),E.id!==(e==null?void 0:e.id)&&o.jsx("button",{onClick:F=>{F.stopPropagation(),U(E.id)},className:`flex items-center space-x-1 px-3 py-1 rounded-full text-sm transition-colors ${R(E.id)?"bg-gray-600 text-white hover:bg-gray-700":"bg-purple-600 text-white hover:bg-purple-700"}`,children:R(E.id)?o.jsxs(o.Fragment,{children:[o.jsx(Ni,{className:"w-3 h-3"}),o.jsx("span",{children:"Unfollow"})]}):o.jsxs(o.Fragment,{children:[o.jsx(Dr,{className:"w-3 h-3"}),o.jsx("span",{children:"Follow"})]})})]})]})]})]},E.id))})]}),g.posts.length===0&&g.characters.length===0&&g.users.length===0&&o.jsxs("div",{className:"text-center py-12",children:[o.jsx(xn,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),o.jsx("h3",{className:"text-xl font-semibold text-gray-400 mb-2",children:"No results found"}),o.jsx("p",{className:"text-gray-500",children:"Try adjusting your search terms"})]})]})]}),o.jsx("div",{className:"p-6 text-center border-t border-gray-700/50 bg-black/20",children:o.jsxs("p",{className:"text-gray-500 text-sm",children:["Verse © ",new Date().getFullYear()]})})]}),x&&o.jsx(Ev,{user:x,onClose:()=>m(null)}),b&&o.jsx(hd,{character:b,onClose:()=>j(null)})]})},WC="Left",qC="Right",KC="Up",GC="Down",Qn={delta:10,preventScrollOnSwipe:!1,rotationAngle:0,trackMouse:!1,trackTouch:!0,swipeDuration:1/0,touchEventOptions:{passive:!0}},zu={first:!0,initial:[0,0],start:0,swiping:!1,xy:[0,0]},ap="mousemove",op="mouseup",YC="touchend",QC="touchmove",XC="touchstart";function ZC(e,t,r,n){return e>t?r>0?qC:WC:n>0?GC:KC}function lp(e,t){if(t===0)return e;const r=Math.PI/180*t,n=e[0]*Math.cos(r)+e[1]*Math.sin(r),s=e[1]*Math.cos(r)-e[0]*Math.sin(r);return[n,s]}function JC(e,t){const r=d=>{const h="touches"in d;h&&d.touches.length>1||e((f,p)=>{p.trackMouse&&!h&&(document.addEventListener(ap,n),document.addEventListener(op,a));const{clientX:g,clientY:y}=h?d.touches[0]:d,w=lp([g,y],p.rotationAngle);return p.onTouchStartOrOnMouseDown&&p.onTouchStartOrOnMouseDown({event:d}),Object.assign(Object.assign(Object.assign({},f),zu),{initial:w.slice(),xy:w,start:d.timeStamp||0})})},n=d=>{e((h,f)=>{const p="touches"in d;if(p&&d.touches.length>1)return h;if(d.timeStamp-h.start>f.swipeDuration)return h.swiping?Object.assign(Object.assign({},h),{swiping:!1}):h;const{clientX:g,clientY:y}=p?d.touches[0]:d,[w,v]=lp([g,y],f.rotationAngle),x=w-h.xy[0],m=v-h.xy[1],b=Math.abs(x),j=Math.abs(m),k=(d.timeStamp||0)-h.start,C=Math.sqrt(b*b+j*j)/(k||1),_=[x/(k||1),m/(k||1)],P=ZC(b,j,x,m),S=typeof f.delta=="number"?f.delta:f.delta[P.toLowerCase()]||Qn.delta;if(b<S&&j<S&&!h.swiping)return h;const B={absX:b,absY:j,deltaX:x,deltaY:m,dir:P,event:d,first:h.first,initial:h.initial,velocity:C,vxvy:_};B.first&&f.onSwipeStart&&f.onSwipeStart(B),f.onSwiping&&f.onSwiping(B);let A=!1;return(f.onSwiping||f.onSwiped||f[`onSwiped${P}`])&&(A=!0),A&&f.preventScrollOnSwipe&&f.trackTouch&&d.cancelable&&d.preventDefault(),Object.assign(Object.assign({},h),{first:!1,eventData:B,swiping:!0})})},s=d=>{e((h,f)=>{let p;if(h.swiping&&h.eventData){if(d.timeStamp-h.start<f.swipeDuration){p=Object.assign(Object.assign({},h.eventData),{event:d}),f.onSwiped&&f.onSwiped(p);const g=f[`onSwiped${p.dir}`];g&&g(p)}}else f.onTap&&f.onTap({event:d});return f.onTouchEndOrOnMouseUp&&f.onTouchEndOrOnMouseUp({event:d}),Object.assign(Object.assign(Object.assign({},h),zu),{eventData:p})})},i=()=>{document.removeEventListener(ap,n),document.removeEventListener(op,a)},a=d=>{i(),s(d)},l=(d,h)=>{let f=()=>{};if(d&&d.addEventListener){const p=Object.assign(Object.assign({},Qn.touchEventOptions),h.touchEventOptions),g=[[XC,r,p],[QC,n,Object.assign(Object.assign({},p),h.preventScrollOnSwipe?{passive:!1}:{})],[YC,s,p]];g.forEach(([y,w,v])=>d.addEventListener(y,w,v)),f=()=>g.forEach(([y,w])=>d.removeEventListener(y,w))}return f},u={ref:d=>{d!==null&&e((h,f)=>{if(h.el===d)return h;const p={};return h.el&&h.el!==d&&h.cleanUpTouch&&(h.cleanUpTouch(),p.cleanUpTouch=void 0),f.trackTouch&&d&&(p.cleanUpTouch=l(d,f)),Object.assign(Object.assign(Object.assign({},h),{el:d}),p)})}};return t.trackMouse&&(u.onMouseDown=r),[u,l]}function ek(e,t,r,n){return!t.trackTouch||!e.el?(e.cleanUpTouch&&e.cleanUpTouch(),Object.assign(Object.assign({},e),{cleanUpTouch:void 0})):e.cleanUpTouch?t.preventScrollOnSwipe!==r.preventScrollOnSwipe||t.touchEventOptions.passive!==r.touchEventOptions.passive?(e.cleanUpTouch(),Object.assign(Object.assign({},e),{cleanUpTouch:n(e.el,t)})):e:Object.assign(Object.assign({},e),{cleanUpTouch:n(e.el,t)})}function tk(e){const{trackMouse:t}=e,r=N.useRef(Object.assign({},zu)),n=N.useRef(Object.assign({},Qn)),s=N.useRef(Object.assign({},n.current));s.current=Object.assign({},n.current),n.current=Object.assign(Object.assign({},Qn),e);let i;for(i in Qn)n.current[i]===void 0&&(n.current[i]=Qn[i]);const[a,l]=N.useMemo(()=>JC(c=>r.current=c(r.current,n.current),{trackMouse:t}),[t]);return r.current=ek(r.current,n.current,s.current,l),a}const Nv=N.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),Xo=N.createContext({}),Zo=N.createContext(null),Jo=typeof document<"u",fd=Jo?N.useLayoutEffect:N.useEffect,Sv=N.createContext({strict:!1}),pd=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),rk="framerAppearId",Av="data-"+pd(rk);function nk(e,t,r,n){const{visualElement:s}=N.useContext(Xo),i=N.useContext(Sv),a=N.useContext(Zo),l=N.useContext(Nv).reducedMotion,c=N.useRef();n=n||i.renderer,!c.current&&n&&(c.current=n(e,{visualState:t,parent:s,props:r,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const u=c.current;N.useInsertionEffect(()=>{u&&u.update(r,a)});const d=N.useRef(!!(r[Av]&&!window.HandoffComplete));return fd(()=>{u&&(u.render(),d.current&&u.animationState&&u.animationState.animateChanges())}),N.useEffect(()=>{u&&(u.updateFeatures(),!d.current&&u.animationState&&u.animationState.animateChanges(),d.current&&(d.current=!1,window.HandoffComplete=!0))}),u}function Xn(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function sk(e,t,r){return N.useCallback(n=>{n&&e.mount&&e.mount(n),t&&(n?t.mount(n):t.unmount()),r&&(typeof r=="function"?r(n):Xn(r)&&(r.current=n))},[t])}function Si(e){return typeof e=="string"||Array.isArray(e)}function el(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const xd=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],md=["initial",...xd];function tl(e){return el(e.animate)||md.some(t=>Si(e[t]))}function Pv(e){return!!(tl(e)||e.variants)}function ik(e,t){if(tl(e)){const{initial:r,animate:n}=e;return{initial:r===!1||Si(r)?r:void 0,animate:Si(n)?n:void 0}}return e.inherit!==!1?t:{}}function ak(e){const{initial:t,animate:r}=ik(e,N.useContext(Xo));return N.useMemo(()=>({initial:t,animate:r}),[cp(t),cp(r)])}function cp(e){return Array.isArray(e)?e.join(" "):e}const up={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ai={};for(const e in up)Ai[e]={isEnabled:t=>up[e].some(r=>!!t[r])};function ok(e){for(const t in e)Ai[t]={...Ai[t],...e[t]}}const gd=N.createContext({}),Dv=N.createContext({}),lk=Symbol.for("motionComponentSymbol");function ck({preloadedFeatures:e,createVisualElement:t,useRender:r,useVisualState:n,Component:s}){e&&ok(e);function i(l,c){let u;const d={...N.useContext(Nv),...l,layoutId:uk(l)},{isStatic:h}=d,f=ak(l),p=n(l,h);if(!h&&Jo){f.visualElement=nk(s,p,d,t);const g=N.useContext(Dv),y=N.useContext(Sv).strict;f.visualElement&&(u=f.visualElement.loadFeatures(d,y,e,g))}return N.createElement(Xo.Provider,{value:f},u&&f.visualElement?N.createElement(u,{visualElement:f.visualElement,...d}):null,r(s,l,sk(p,f.visualElement,c),p,h,f.visualElement))}const a=N.forwardRef(i);return a[lk]=s,a}function uk({layoutId:e}){const t=N.useContext(gd).id;return t&&e!==void 0?t+"-"+e:e}function dk(e){function t(n,s={}){return ck(e(n,s))}if(typeof Proxy>"u")return t;const r=new Map;return new Proxy(t,{get:(n,s)=>(r.has(s)||r.set(s,t(s)),r.get(s))})}const hk=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function vd(e){return typeof e!="string"||e.includes("-")?!1:!!(hk.indexOf(e)>-1||/[A-Z]/.test(e))}const po={};function fk(e){Object.assign(po,e)}const zi=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Sn=new Set(zi);function Bv(e,{layout:t,layoutId:r}){return Sn.has(e)||e.startsWith("origin")||(t||r!==void 0)&&(!!po[e]||e==="opacity")}const xt=e=>!!(e&&e.getVelocity),pk={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},xk=zi.length;function mk(e,{enableHardwareAcceleration:t=!0,allowTransformNone:r=!0},n,s){let i="";for(let a=0;a<xk;a++){const l=zi[a];if(e[l]!==void 0){const c=pk[l]||l;i+=`${c}(${e[l]}) `}}return t&&!e.z&&(i+="translateZ(0)"),i=i.trim(),s?i=s(e,n?"":i):r&&n&&(i="none"),i}const Fv=e=>t=>typeof t=="string"&&t.startsWith(e),Tv=Fv("--"),Vu=Fv("var(--"),gk=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,vk=(e,t)=>t&&typeof e=="number"?t.transform(e):e,Vr=(e,t,r)=>Math.min(Math.max(r,e),t),An={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},ni={...An,transform:e=>Vr(0,1,e)},ma={...An,default:1},si=e=>Math.round(e*1e5)/1e5,rl=/(-)?([\d]*\.?[\d])+/g,Rv=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,yk=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Vi(e){return typeof e=="string"}const Hi=e=>({test:t=>Vi(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),wr=Hi("deg"),Xt=Hi("%"),ee=Hi("px"),wk=Hi("vh"),bk=Hi("vw"),dp={...Xt,parse:e=>Xt.parse(e)/100,transform:e=>Xt.transform(e*100)},hp={...An,transform:Math.round},Lv={borderWidth:ee,borderTopWidth:ee,borderRightWidth:ee,borderBottomWidth:ee,borderLeftWidth:ee,borderRadius:ee,radius:ee,borderTopLeftRadius:ee,borderTopRightRadius:ee,borderBottomRightRadius:ee,borderBottomLeftRadius:ee,width:ee,maxWidth:ee,height:ee,maxHeight:ee,size:ee,top:ee,right:ee,bottom:ee,left:ee,padding:ee,paddingTop:ee,paddingRight:ee,paddingBottom:ee,paddingLeft:ee,margin:ee,marginTop:ee,marginRight:ee,marginBottom:ee,marginLeft:ee,rotate:wr,rotateX:wr,rotateY:wr,rotateZ:wr,scale:ma,scaleX:ma,scaleY:ma,scaleZ:ma,skew:wr,skewX:wr,skewY:wr,distance:ee,translateX:ee,translateY:ee,translateZ:ee,x:ee,y:ee,z:ee,perspective:ee,transformPerspective:ee,opacity:ni,originX:dp,originY:dp,originZ:ee,zIndex:hp,fillOpacity:ni,strokeOpacity:ni,numOctaves:hp};function yd(e,t,r,n){const{style:s,vars:i,transform:a,transformOrigin:l}=e;let c=!1,u=!1,d=!0;for(const h in t){const f=t[h];if(Tv(h)){i[h]=f;continue}const p=Lv[h],g=vk(f,p);if(Sn.has(h)){if(c=!0,a[h]=g,!d)continue;f!==(p.default||0)&&(d=!1)}else h.startsWith("origin")?(u=!0,l[h]=g):s[h]=g}if(t.transform||(c||n?s.transform=mk(e.transform,r,d,n):s.transform&&(s.transform="none")),u){const{originX:h="50%",originY:f="50%",originZ:p=0}=l;s.transformOrigin=`${h} ${f} ${p}`}}const wd=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Ov(e,t,r){for(const n in t)!xt(t[n])&&!Bv(n,r)&&(e[n]=t[n])}function jk({transformTemplate:e},t,r){return N.useMemo(()=>{const n=wd();return yd(n,t,{enableHardwareAcceleration:!r},e),Object.assign({},n.vars,n.style)},[t])}function Ck(e,t,r){const n=e.style||{},s={};return Ov(s,n,e),Object.assign(s,jk(e,t,r)),e.transformValues?e.transformValues(s):s}function kk(e,t,r){const n={},s=Ck(e,t,r);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=s,n}const _k=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function xo(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||_k.has(e)}let Iv=e=>!xo(e);function Ek(e){e&&(Iv=t=>t.startsWith("on")?!xo(t):e(t))}try{Ek(require("@emotion/is-prop-valid").default)}catch{}function Nk(e,t,r){const n={};for(const s in e)s==="values"&&typeof e.values=="object"||(Iv(s)||r===!0&&xo(s)||!t&&!xo(s)||e.draggable&&s.startsWith("onDrag"))&&(n[s]=e[s]);return n}function fp(e,t,r){return typeof e=="string"?e:ee.transform(t+r*e)}function Sk(e,t,r){const n=fp(t,e.x,e.width),s=fp(r,e.y,e.height);return`${n} ${s}`}const Ak={offset:"stroke-dashoffset",array:"stroke-dasharray"},Pk={offset:"strokeDashoffset",array:"strokeDasharray"};function Dk(e,t,r=1,n=0,s=!0){e.pathLength=1;const i=s?Ak:Pk;e[i.offset]=ee.transform(-n);const a=ee.transform(t),l=ee.transform(r);e[i.array]=`${a} ${l}`}function bd(e,{attrX:t,attrY:r,attrScale:n,originX:s,originY:i,pathLength:a,pathSpacing:l=1,pathOffset:c=0,...u},d,h,f){if(yd(e,u,d,f),h){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:p,style:g,dimensions:y}=e;p.transform&&(y&&(g.transform=p.transform),delete p.transform),y&&(s!==void 0||i!==void 0||g.transform)&&(g.transformOrigin=Sk(y,s!==void 0?s:.5,i!==void 0?i:.5)),t!==void 0&&(p.x=t),r!==void 0&&(p.y=r),n!==void 0&&(p.scale=n),a!==void 0&&Dk(p,a,l,c,!1)}const Mv=()=>({...wd(),attrs:{}}),jd=e=>typeof e=="string"&&e.toLowerCase()==="svg";function Bk(e,t,r,n){const s=N.useMemo(()=>{const i=Mv();return bd(i,t,{enableHardwareAcceleration:!1},jd(n),e.transformTemplate),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};Ov(i,e.style,e),s.style={...i,...s.style}}return s}function Fk(e=!1){return(r,n,s,{latestValues:i},a)=>{const c=(vd(r)?Bk:kk)(n,i,a,r),d={...Nk(n,typeof r=="string",e),...c,ref:s},{children:h}=n,f=N.useMemo(()=>xt(h)?h.get():h,[h]);return N.createElement(r,{...d,children:f})}}function Uv(e,{style:t,vars:r},n,s){Object.assign(e.style,t,s&&s.getProjectionStyles(n));for(const i in r)e.style.setProperty(i,r[i])}const $v=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function zv(e,t,r,n){Uv(e,t,void 0,n);for(const s in t.attrs)e.setAttribute($v.has(s)?s:pd(s),t.attrs[s])}function Cd(e,t){const{style:r}=e,n={};for(const s in r)(xt(r[s])||t.style&&xt(t.style[s])||Bv(s,e))&&(n[s]=r[s]);return n}function Vv(e,t){const r=Cd(e,t);for(const n in e)if(xt(e[n])||xt(t[n])){const s=zi.indexOf(n)!==-1?"attr"+n.charAt(0).toUpperCase()+n.substring(1):n;r[s]=e[n]}return r}function kd(e,t,r,n={},s={}){return typeof t=="function"&&(t=t(r!==void 0?r:e.custom,n,s)),typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"&&(t=t(r!==void 0?r:e.custom,n,s)),t}function Hv(e){const t=N.useRef(null);return t.current===null&&(t.current=e()),t.current}const mo=e=>Array.isArray(e),Tk=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),Rk=e=>mo(e)?e[e.length-1]||0:e;function Fa(e){const t=xt(e)?e.get():e;return Tk(t)?t.toValue():t}function Lk({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:r},n,s,i){const a={latestValues:Ok(n,s,i,e),renderState:t()};return r&&(a.mount=l=>r(n,l,a)),a}const Wv=e=>(t,r)=>{const n=N.useContext(Xo),s=N.useContext(Zo),i=()=>Lk(e,t,n,s);return r?i():Hv(i)};function Ok(e,t,r,n){const s={},i=n(e,{});for(const f in i)s[f]=Fa(i[f]);let{initial:a,animate:l}=e;const c=tl(e),u=Pv(e);t&&u&&!c&&e.inherit!==!1&&(a===void 0&&(a=t.initial),l===void 0&&(l=t.animate));let d=r?r.initial===!1:!1;d=d||a===!1;const h=d?l:a;return h&&typeof h!="boolean"&&!el(h)&&(Array.isArray(h)?h:[h]).forEach(p=>{const g=kd(e,p);if(!g)return;const{transitionEnd:y,transition:w,...v}=g;for(const x in v){let m=v[x];if(Array.isArray(m)){const b=d?m.length-1:0;m=m[b]}m!==null&&(s[x]=m)}for(const x in y)s[x]=y[x]}),s}const Pe=e=>e;class pp{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const r=this.order.indexOf(t);r!==-1&&(this.order.splice(r,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}function Ik(e){let t=new pp,r=new pp,n=0,s=!1,i=!1;const a=new WeakSet,l={schedule:(c,u=!1,d=!1)=>{const h=d&&s,f=h?t:r;return u&&a.add(c),f.add(c)&&h&&s&&(n=t.order.length),c},cancel:c=>{r.remove(c),a.delete(c)},process:c=>{if(s){i=!0;return}if(s=!0,[t,r]=[r,t],r.clear(),n=t.order.length,n)for(let u=0;u<n;u++){const d=t.order[u];d(c),a.has(d)&&(l.schedule(d),e())}s=!1,i&&(i=!1,l.process(c))}};return l}const ga=["prepare","read","update","preRender","render","postRender"],Mk=40;function Uk(e,t){let r=!1,n=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=ga.reduce((h,f)=>(h[f]=Ik(()=>r=!0),h),{}),a=h=>i[h].process(s),l=()=>{const h=performance.now();r=!1,s.delta=n?1e3/60:Math.max(Math.min(h-s.timestamp,Mk),1),s.timestamp=h,s.isProcessing=!0,ga.forEach(a),s.isProcessing=!1,r&&t&&(n=!1,e(l))},c=()=>{r=!0,n=!0,s.isProcessing||e(l)};return{schedule:ga.reduce((h,f)=>{const p=i[f];return h[f]=(g,y=!1,w=!1)=>(r||c(),p.schedule(g,y,w)),h},{}),cancel:h=>ga.forEach(f=>i[f].cancel(h)),state:s,steps:i}}const{schedule:ge,cancel:pr,state:Qe,steps:kc}=Uk(typeof requestAnimationFrame<"u"?requestAnimationFrame:Pe,!0),$k={useVisualState:Wv({scrapeMotionValuesFromProps:Vv,createRenderState:Mv,onMount:(e,t,{renderState:r,latestValues:n})=>{ge.read(()=>{try{r.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{r.dimensions={x:0,y:0,width:0,height:0}}}),ge.render(()=>{bd(r,n,{enableHardwareAcceleration:!1},jd(t.tagName),e.transformTemplate),zv(t,r)})}})},zk={useVisualState:Wv({scrapeMotionValuesFromProps:Cd,createRenderState:wd})};function Vk(e,{forwardMotionProps:t=!1},r,n){return{...vd(e)?$k:zk,preloadedFeatures:r,useRender:Fk(t),createVisualElement:n,Component:e}}function ir(e,t,r,n={passive:!0}){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r)}const qv=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function nl(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const Hk=e=>t=>qv(t)&&e(t,nl(t));function lr(e,t,r,n){return ir(e,t,Hk(r),n)}const Wk=(e,t)=>r=>t(e(r)),Ur=(...e)=>e.reduce(Wk);function Kv(e){let t=null;return()=>{const r=()=>{t=null};return t===null?(t=e,r):!1}}const xp=Kv("dragHorizontal"),mp=Kv("dragVertical");function Gv(e){let t=!1;if(e==="y")t=mp();else if(e==="x")t=xp();else{const r=xp(),n=mp();r&&n?t=()=>{r(),n()}:(r&&r(),n&&n())}return t}function Yv(){const e=Gv(!0);return e?(e(),!1):!0}class Qr{constructor(t){this.isMounted=!1,this.node=t}update(){}}function gp(e,t){const r="pointer"+(t?"enter":"leave"),n="onHover"+(t?"Start":"End"),s=(i,a)=>{if(i.pointerType==="touch"||Yv())return;const l=e.getProps();e.animationState&&l.whileHover&&e.animationState.setActive("whileHover",t),l[n]&&ge.update(()=>l[n](i,a))};return lr(e.current,r,s,{passive:!e.getProps()[n]})}class qk extends Qr{mount(){this.unmount=Ur(gp(this.node,!0),gp(this.node,!1))}unmount(){}}class Kk extends Qr{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ur(ir(this.node.current,"focus",()=>this.onFocus()),ir(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const Qv=(e,t)=>t?e===t?!0:Qv(e,t.parentElement):!1;function _c(e,t){if(!t)return;const r=new PointerEvent("pointer"+e);t(r,nl(r))}class Gk extends Qr{constructor(){super(...arguments),this.removeStartListeners=Pe,this.removeEndListeners=Pe,this.removeAccessibleListeners=Pe,this.startPointerPress=(t,r)=>{if(this.isPressing)return;this.removeEndListeners();const n=this.node.getProps(),i=lr(window,"pointerup",(l,c)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:d,globalTapTarget:h}=this.node.getProps();ge.update(()=>{!h&&!Qv(this.node.current,l.target)?d&&d(l,c):u&&u(l,c)})},{passive:!(n.onTap||n.onPointerUp)}),a=lr(window,"pointercancel",(l,c)=>this.cancelPress(l,c),{passive:!(n.onTapCancel||n.onPointerCancel)});this.removeEndListeners=Ur(i,a),this.startPress(t,r)},this.startAccessiblePress=()=>{const t=i=>{if(i.key!=="Enter"||this.isPressing)return;const a=l=>{l.key!=="Enter"||!this.checkPressEnd()||_c("up",(c,u)=>{const{onTap:d}=this.node.getProps();d&&ge.update(()=>d(c,u))})};this.removeEndListeners(),this.removeEndListeners=ir(this.node.current,"keyup",a),_c("down",(l,c)=>{this.startPress(l,c)})},r=ir(this.node.current,"keydown",t),n=()=>{this.isPressing&&_c("cancel",(i,a)=>this.cancelPress(i,a))},s=ir(this.node.current,"blur",n);this.removeAccessibleListeners=Ur(r,s)}}startPress(t,r){this.isPressing=!0;const{onTapStart:n,whileTap:s}=this.node.getProps();s&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),n&&ge.update(()=>n(t,r))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!Yv()}cancelPress(t,r){if(!this.checkPressEnd())return;const{onTapCancel:n}=this.node.getProps();n&&ge.update(()=>n(t,r))}mount(){const t=this.node.getProps(),r=lr(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),n=ir(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Ur(r,n)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Hu=new WeakMap,Ec=new WeakMap,Yk=e=>{const t=Hu.get(e.target);t&&t(e)},Qk=e=>{e.forEach(Yk)};function Xk({root:e,...t}){const r=e||document;Ec.has(r)||Ec.set(r,{});const n=Ec.get(r),s=JSON.stringify(t);return n[s]||(n[s]=new IntersectionObserver(Qk,{root:e,...t})),n[s]}function Zk(e,t,r){const n=Xk(t);return Hu.set(e,r),n.observe(e),()=>{Hu.delete(e),n.unobserve(e)}}const Jk={some:0,all:1};class e3 extends Qr{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:r,margin:n,amount:s="some",once:i}=t,a={root:r?r.current:void 0,rootMargin:n,threshold:typeof s=="number"?s:Jk[s]},l=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),f=u?d:h;f&&f(c)};return Zk(this.node.current,a,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:r}=this.node;["amount","margin","root"].some(t3(t,r))&&this.startObserver()}unmount(){}}function t3({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}const r3={inView:{Feature:e3},tap:{Feature:Gk},focus:{Feature:Kk},hover:{Feature:qk}};function Xv(e,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==e.length)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}function n3(e){const t={};return e.values.forEach((r,n)=>t[n]=r.get()),t}function s3(e){const t={};return e.values.forEach((r,n)=>t[n]=r.getVelocity()),t}function sl(e,t,r){const n=e.getProps();return kd(n,t,r!==void 0?r:n.custom,n3(e),s3(e))}let go=Pe;const mn=e=>e*1e3,cr=e=>e/1e3,i3={current:!1},Zv=e=>Array.isArray(e)&&typeof e[0]=="number";function Jv(e){return!!(!e||typeof e=="string"&&ey[e]||Zv(e)||Array.isArray(e)&&e.every(Jv))}const Vs=([e,t,r,n])=>`cubic-bezier(${e}, ${t}, ${r}, ${n})`,ey={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Vs([0,.65,.55,1]),circOut:Vs([.55,0,1,.45]),backIn:Vs([.31,.01,.66,-.59]),backOut:Vs([.33,1.53,.69,.99])};function ty(e){if(e)return Zv(e)?Vs(e):Array.isArray(e)?e.map(ty):ey[e]}function a3(e,t,r,{delay:n=0,duration:s,repeat:i=0,repeatType:a="loop",ease:l,times:c}={}){const u={[t]:r};c&&(u.offset=c);const d=ty(l);return Array.isArray(d)&&(u.easing=d),e.animate(u,{delay:n,duration:s,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:i+1,direction:a==="reverse"?"alternate":"normal"})}function o3(e,{repeat:t,repeatType:r="loop"}){const n=t&&r!=="loop"&&t%2===1?0:e.length-1;return e[n]}const ry=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e,l3=1e-7,c3=12;function u3(e,t,r,n,s){let i,a,l=0;do a=t+(r-t)/2,i=ry(a,n,s)-e,i>0?r=a:t=a;while(Math.abs(i)>l3&&++l<c3);return a}function Wi(e,t,r,n){if(e===t&&r===n)return Pe;const s=i=>u3(i,0,1,e,r);return i=>i===0||i===1?i:ry(s(i),t,n)}const d3=Wi(.42,0,1,1),h3=Wi(0,0,.58,1),ny=Wi(.42,0,.58,1),f3=e=>Array.isArray(e)&&typeof e[0]!="number",sy=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,iy=e=>t=>1-e(1-t),_d=e=>1-Math.sin(Math.acos(e)),ay=iy(_d),p3=sy(_d),oy=Wi(.33,1.53,.69,.99),Ed=iy(oy),x3=sy(Ed),m3=e=>(e*=2)<1?.5*Ed(e):.5*(2-Math.pow(2,-10*(e-1))),vp={linear:Pe,easeIn:d3,easeInOut:ny,easeOut:h3,circIn:_d,circInOut:p3,circOut:ay,backIn:Ed,backInOut:x3,backOut:oy,anticipate:m3},yp=e=>{if(Array.isArray(e)){go(e.length===4);const[t,r,n,s]=e;return Wi(t,r,n,s)}else if(typeof e=="string")return go(vp[e]!==void 0),vp[e];return e},Nd=(e,t)=>r=>!!(Vi(r)&&yk.test(r)&&r.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(r,t)),ly=(e,t,r)=>n=>{if(!Vi(n))return n;const[s,i,a,l]=n.match(rl);return{[e]:parseFloat(s),[t]:parseFloat(i),[r]:parseFloat(a),alpha:l!==void 0?parseFloat(l):1}},g3=e=>Vr(0,255,e),Nc={...An,transform:e=>Math.round(g3(e))},dn={test:Nd("rgb","red"),parse:ly("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:n=1})=>"rgba("+Nc.transform(e)+", "+Nc.transform(t)+", "+Nc.transform(r)+", "+si(ni.transform(n))+")"};function v3(e){let t="",r="",n="",s="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),n=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),n=e.substring(3,4),s=e.substring(4,5),t+=t,r+=r,n+=n,s+=s),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:s?parseInt(s,16)/255:1}}const Wu={test:Nd("#"),parse:v3,transform:dn.transform},Zn={test:Nd("hsl","hue"),parse:ly("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:n=1})=>"hsla("+Math.round(e)+", "+Xt.transform(si(t))+", "+Xt.transform(si(r))+", "+si(ni.transform(n))+")"},tt={test:e=>dn.test(e)||Wu.test(e)||Zn.test(e),parse:e=>dn.test(e)?dn.parse(e):Zn.test(e)?Zn.parse(e):Wu.parse(e),transform:e=>Vi(e)?e:e.hasOwnProperty("red")?dn.transform(e):Zn.transform(e)},Ce=(e,t,r)=>-r*e+r*t+e;function Sc(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function y3({hue:e,saturation:t,lightness:r,alpha:n}){e/=360,t/=100,r/=100;let s=0,i=0,a=0;if(!t)s=i=a=r;else{const l=r<.5?r*(1+t):r+t-r*t,c=2*r-l;s=Sc(c,l,e+1/3),i=Sc(c,l,e),a=Sc(c,l,e-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(a*255),alpha:n}}const Ac=(e,t,r)=>{const n=e*e;return Math.sqrt(Math.max(0,r*(t*t-n)+n))},w3=[Wu,dn,Zn],b3=e=>w3.find(t=>t.test(e));function wp(e){const t=b3(e);let r=t.parse(e);return t===Zn&&(r=y3(r)),r}const cy=(e,t)=>{const r=wp(e),n=wp(t),s={...r};return i=>(s.red=Ac(r.red,n.red,i),s.green=Ac(r.green,n.green,i),s.blue=Ac(r.blue,n.blue,i),s.alpha=Ce(r.alpha,n.alpha,i),dn.transform(s))};function j3(e){var t,r;return isNaN(e)&&Vi(e)&&(((t=e.match(rl))===null||t===void 0?void 0:t.length)||0)+(((r=e.match(Rv))===null||r===void 0?void 0:r.length)||0)>0}const uy={regex:gk,countKey:"Vars",token:"${v}",parse:Pe},dy={regex:Rv,countKey:"Colors",token:"${c}",parse:tt.parse},hy={regex:rl,countKey:"Numbers",token:"${n}",parse:An.parse};function Pc(e,{regex:t,countKey:r,token:n,parse:s}){const i=e.tokenised.match(t);i&&(e["num"+r]=i.length,e.tokenised=e.tokenised.replace(t,n),e.values.push(...i.map(s)))}function vo(e){const t=e.toString(),r={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return r.value.includes("var(--")&&Pc(r,uy),Pc(r,dy),Pc(r,hy),r}function fy(e){return vo(e).values}function py(e){const{values:t,numColors:r,numVars:n,tokenised:s}=vo(e),i=t.length;return a=>{let l=s;for(let c=0;c<i;c++)c<n?l=l.replace(uy.token,a[c]):c<n+r?l=l.replace(dy.token,tt.transform(a[c])):l=l.replace(hy.token,si(a[c]));return l}}const C3=e=>typeof e=="number"?0:e;function k3(e){const t=fy(e);return py(e)(t.map(C3))}const Hr={test:j3,parse:fy,createTransformer:py,getAnimatableNone:k3},xy=(e,t)=>r=>`${r>0?t:e}`;function my(e,t){return typeof e=="number"?r=>Ce(e,t,r):tt.test(e)?cy(e,t):e.startsWith("var(")?xy(e,t):vy(e,t)}const gy=(e,t)=>{const r=[...e],n=r.length,s=e.map((i,a)=>my(i,t[a]));return i=>{for(let a=0;a<n;a++)r[a]=s[a](i);return r}},_3=(e,t)=>{const r={...e,...t},n={};for(const s in r)e[s]!==void 0&&t[s]!==void 0&&(n[s]=my(e[s],t[s]));return s=>{for(const i in n)r[i]=n[i](s);return r}},vy=(e,t)=>{const r=Hr.createTransformer(t),n=vo(e),s=vo(t);return n.numVars===s.numVars&&n.numColors===s.numColors&&n.numNumbers>=s.numNumbers?Ur(gy(n.values,s.values),r):xy(e,t)},Pi=(e,t,r)=>{const n=t-e;return n===0?1:(r-e)/n},bp=(e,t)=>r=>Ce(e,t,r);function E3(e){return typeof e=="number"?bp:typeof e=="string"?tt.test(e)?cy:vy:Array.isArray(e)?gy:typeof e=="object"?_3:bp}function N3(e,t,r){const n=[],s=r||E3(e[0]),i=e.length-1;for(let a=0;a<i;a++){let l=s(e[a],e[a+1]);if(t){const c=Array.isArray(t)?t[a]||Pe:t;l=Ur(c,l)}n.push(l)}return n}function yy(e,t,{clamp:r=!0,ease:n,mixer:s}={}){const i=e.length;if(go(i===t.length),i===1)return()=>t[0];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const a=N3(t,n,s),l=a.length,c=u=>{let d=0;if(l>1)for(;d<e.length-2&&!(u<e[d+1]);d++);const h=Pi(e[d],e[d+1],u);return a[d](h)};return r?u=>c(Vr(e[0],e[i-1],u)):c}function S3(e,t){const r=e[e.length-1];for(let n=1;n<=t;n++){const s=Pi(0,t,n);e.push(Ce(r,1,s))}}function A3(e){const t=[0];return S3(t,e.length-1),t}function P3(e,t){return e.map(r=>r*t)}function D3(e,t){return e.map(()=>t||ny).splice(0,e.length-1)}function yo({duration:e=300,keyframes:t,times:r,ease:n="easeInOut"}){const s=f3(n)?n.map(yp):yp(n),i={done:!1,value:t[0]},a=P3(r&&r.length===t.length?r:A3(t),e),l=yy(a,t,{ease:Array.isArray(s)?s:D3(t,s)});return{calculatedDuration:e,next:c=>(i.value=l(c),i.done=c>=e,i)}}function wy(e,t){return t?e*(1e3/t):0}const B3=5;function by(e,t,r){const n=Math.max(t-B3,0);return wy(r-e(n),t-n)}const Dc=.001,F3=.01,T3=10,R3=.05,L3=1;function O3({duration:e=800,bounce:t=.25,velocity:r=0,mass:n=1}){let s,i,a=1-t;a=Vr(R3,L3,a),e=Vr(F3,T3,cr(e)),a<1?(s=u=>{const d=u*a,h=d*e,f=d-r,p=qu(u,a),g=Math.exp(-h);return Dc-f/p*g},i=u=>{const h=u*a*e,f=h*r+r,p=Math.pow(a,2)*Math.pow(u,2)*e,g=Math.exp(-h),y=qu(Math.pow(u,2),a);return(-s(u)+Dc>0?-1:1)*((f-p)*g)/y}):(s=u=>{const d=Math.exp(-u*e),h=(u-r)*e+1;return-Dc+d*h},i=u=>{const d=Math.exp(-u*e),h=(r-u)*(e*e);return d*h});const l=5/e,c=M3(s,i,l);if(e=mn(e),isNaN(c))return{stiffness:100,damping:10,duration:e};{const u=Math.pow(c,2)*n;return{stiffness:u,damping:a*2*Math.sqrt(n*u),duration:e}}}const I3=12;function M3(e,t,r){let n=r;for(let s=1;s<I3;s++)n=n-e(n)/t(n);return n}function qu(e,t){return e*Math.sqrt(1-t*t)}const U3=["duration","bounce"],$3=["stiffness","damping","mass"];function jp(e,t){return t.some(r=>e[r]!==void 0)}function z3(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!jp(e,$3)&&jp(e,U3)){const r=O3(e);t={...t,...r,mass:1},t.isResolvedFromDuration=!0}return t}function jy({keyframes:e,restDelta:t,restSpeed:r,...n}){const s=e[0],i=e[e.length-1],a={done:!1,value:s},{stiffness:l,damping:c,mass:u,duration:d,velocity:h,isResolvedFromDuration:f}=z3({...n,velocity:-cr(n.velocity||0)}),p=h||0,g=c/(2*Math.sqrt(l*u)),y=i-s,w=cr(Math.sqrt(l/u)),v=Math.abs(y)<5;r||(r=v?.01:2),t||(t=v?.005:.5);let x;if(g<1){const m=qu(w,g);x=b=>{const j=Math.exp(-g*w*b);return i-j*((p+g*w*y)/m*Math.sin(m*b)+y*Math.cos(m*b))}}else if(g===1)x=m=>i-Math.exp(-w*m)*(y+(p+w*y)*m);else{const m=w*Math.sqrt(g*g-1);x=b=>{const j=Math.exp(-g*w*b),k=Math.min(m*b,300);return i-j*((p+g*w*y)*Math.sinh(k)+m*y*Math.cosh(k))/m}}return{calculatedDuration:f&&d||null,next:m=>{const b=x(m);if(f)a.done=m>=d;else{let j=p;m!==0&&(g<1?j=by(x,m,b):j=0);const k=Math.abs(j)<=r,C=Math.abs(i-b)<=t;a.done=k&&C}return a.value=a.done?i:b,a}}}function Cp({keyframes:e,velocity:t=0,power:r=.8,timeConstant:n=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:a,min:l,max:c,restDelta:u=.5,restSpeed:d}){const h=e[0],f={done:!1,value:h},p=_=>l!==void 0&&_<l||c!==void 0&&_>c,g=_=>l===void 0?c:c===void 0||Math.abs(l-_)<Math.abs(c-_)?l:c;let y=r*t;const w=h+y,v=a===void 0?w:a(w);v!==w&&(y=v-h);const x=_=>-y*Math.exp(-_/n),m=_=>v+x(_),b=_=>{const P=x(_),S=m(_);f.done=Math.abs(P)<=u,f.value=f.done?v:S};let j,k;const C=_=>{p(f.value)&&(j=_,k=jy({keyframes:[f.value,g(f.value)],velocity:by(m,_,f.value),damping:s,stiffness:i,restDelta:u,restSpeed:d}))};return C(0),{calculatedDuration:null,next:_=>{let P=!1;return!k&&j===void 0&&(P=!0,b(_),C(_)),j!==void 0&&_>j?k.next(_-j):(!P&&b(_),f)}}}const V3=e=>{const t=({timestamp:r})=>e(r);return{start:()=>ge.update(t,!0),stop:()=>pr(t),now:()=>Qe.isProcessing?Qe.timestamp:performance.now()}},kp=2e4;function _p(e){let t=0;const r=50;let n=e.next(t);for(;!n.done&&t<kp;)t+=r,n=e.next(t);return t>=kp?1/0:t}const H3={decay:Cp,inertia:Cp,tween:yo,keyframes:yo,spring:jy};function wo({autoplay:e=!0,delay:t=0,driver:r=V3,keyframes:n,type:s="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:l="loop",onPlay:c,onStop:u,onComplete:d,onUpdate:h,...f}){let p=1,g=!1,y,w;const v=()=>{w=new Promise(E=>{y=E})};v();let x;const m=H3[s]||yo;let b;m!==yo&&typeof n[0]!="number"&&(b=yy([0,100],n,{clamp:!1}),n=[0,100]);const j=m({...f,keyframes:n});let k;l==="mirror"&&(k=m({...f,keyframes:[...n].reverse(),velocity:-(f.velocity||0)}));let C="idle",_=null,P=null,S=null;j.calculatedDuration===null&&i&&(j.calculatedDuration=_p(j));const{calculatedDuration:B}=j;let A=1/0,D=1/0;B!==null&&(A=B+a,D=A*(i+1)-a);let V=0;const q=E=>{if(P===null)return;p>0&&(P=Math.min(P,E)),p<0&&(P=Math.min(E-D/p,P)),_!==null?V=_:V=Math.round(E-P)*p;const F=V-t*(p>=0?1:-1),I=p>=0?F<0:F>D;V=Math.max(F,0),C==="finished"&&_===null&&(V=D);let O=V,Q=j;if(i){const fe=Math.min(V,D)/A;let Ne=Math.floor(fe),Ie=fe%1;!Ie&&fe>=1&&(Ie=1),Ie===1&&Ne--,Ne=Math.min(Ne,i+1),!!(Ne%2)&&(l==="reverse"?(Ie=1-Ie,a&&(Ie-=a/A)):l==="mirror"&&(Q=k)),O=Vr(0,1,Ie)*A}const X=I?{done:!1,value:n[0]}:Q.next(O);b&&(X.value=b(X.value));let{done:ce}=X;!I&&B!==null&&(ce=p>=0?V>=D:V<=0);const G=_===null&&(C==="finished"||C==="running"&&ce);return h&&h(X.value),G&&R(),X},L=()=>{x&&x.stop(),x=void 0},U=()=>{C="idle",L(),y(),v(),P=S=null},R=()=>{C="finished",d&&d(),L(),y()},T=()=>{if(g)return;x||(x=r(q));const E=x.now();c&&c(),_!==null?P=E-_:(!P||C==="finished")&&(P=E),C==="finished"&&v(),S=P,_=null,C="running",x.start()};e&&T();const z={then(E,F){return w.then(E,F)},get time(){return cr(V)},set time(E){E=mn(E),V=E,_!==null||!x||p===0?_=E:P=x.now()-E/p},get duration(){const E=j.calculatedDuration===null?_p(j):j.calculatedDuration;return cr(E)},get speed(){return p},set speed(E){E===p||!x||(p=E,z.time=cr(V))},get state(){return C},play:T,pause:()=>{C="paused",_=V},stop:()=>{g=!0,C!=="idle"&&(C="idle",u&&u(),U())},cancel:()=>{S!==null&&q(S),U()},complete:()=>{C="finished"},sample:E=>(P=0,q(E))};return z}function W3(e){let t;return()=>(t===void 0&&(t=e()),t)}const q3=W3(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),K3=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),va=10,G3=2e4,Y3=(e,t)=>t.type==="spring"||e==="backgroundColor"||!Jv(t.ease);function Q3(e,t,{onUpdate:r,onComplete:n,...s}){if(!(q3()&&K3.has(t)&&!s.repeatDelay&&s.repeatType!=="mirror"&&s.damping!==0&&s.type!=="inertia"))return!1;let a=!1,l,c,u=!1;const d=()=>{c=new Promise(m=>{l=m})};d();let{keyframes:h,duration:f=300,ease:p,times:g}=s;if(Y3(t,s)){const m=wo({...s,repeat:0,delay:0});let b={done:!1,value:h[0]};const j=[];let k=0;for(;!b.done&&k<G3;)b=m.sample(k),j.push(b.value),k+=va;g=void 0,h=j,f=k-va,p="linear"}const y=a3(e.owner.current,t,h,{...s,duration:f,ease:p,times:g}),w=()=>{u=!1,y.cancel()},v=()=>{u=!0,ge.update(w),l(),d()};return y.onfinish=()=>{u||(e.set(o3(h,s)),n&&n(),v())},{then(m,b){return c.then(m,b)},attachTimeline(m){return y.timeline=m,y.onfinish=null,Pe},get time(){return cr(y.currentTime||0)},set time(m){y.currentTime=mn(m)},get speed(){return y.playbackRate},set speed(m){y.playbackRate=m},get duration(){return cr(f)},play:()=>{a||(y.play(),pr(w))},pause:()=>y.pause(),stop:()=>{if(a=!0,y.playState==="idle")return;const{currentTime:m}=y;if(m){const b=wo({...s,autoplay:!1});e.setWithVelocity(b.sample(m-va).value,b.sample(m).value,va)}v()},complete:()=>{u||y.finish()},cancel:v}}function X3({keyframes:e,delay:t,onUpdate:r,onComplete:n}){const s=()=>(r&&r(e[e.length-1]),n&&n(),{time:0,speed:1,duration:0,play:Pe,pause:Pe,stop:Pe,then:i=>(i(),Promise.resolve()),cancel:Pe,complete:Pe});return t?wo({keyframes:[0,1],duration:0,delay:t,onComplete:s}):s()}const Z3={type:"spring",stiffness:500,damping:25,restSpeed:10},J3=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),e8={type:"keyframes",duration:.8},t8={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},r8=(e,{keyframes:t})=>t.length>2?e8:Sn.has(e)?e.startsWith("scale")?J3(t[1]):Z3:t8,Ku=(e,t)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Hr.test(t)||t==="0")&&!t.startsWith("url(")),n8=new Set(["brightness","contrast","saturate","opacity"]);function s8(e){const[t,r]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[n]=r.match(rl)||[];if(!n)return e;const s=r.replace(n,"");let i=n8.has(t)?1:0;return n!==r&&(i*=100),t+"("+i+s+")"}const i8=/([a-z-]*)\(.*?\)/g,Gu={...Hr,getAnimatableNone:e=>{const t=e.match(i8);return t?t.map(s8).join(" "):e}},a8={...Lv,color:tt,backgroundColor:tt,outlineColor:tt,fill:tt,stroke:tt,borderColor:tt,borderTopColor:tt,borderRightColor:tt,borderBottomColor:tt,borderLeftColor:tt,filter:Gu,WebkitFilter:Gu},Sd=e=>a8[e];function Cy(e,t){let r=Sd(e);return r!==Gu&&(r=Hr),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const ky=e=>/^0[^.\s]+$/.test(e);function o8(e){if(typeof e=="number")return e===0;if(e!==null)return e==="none"||e==="0"||ky(e)}function l8(e,t,r,n){const s=Ku(t,r);let i;Array.isArray(r)?i=[...r]:i=[null,r];const a=n.from!==void 0?n.from:e.get();let l;const c=[];for(let u=0;u<i.length;u++)i[u]===null&&(i[u]=u===0?a:i[u-1]),o8(i[u])&&c.push(u),typeof i[u]=="string"&&i[u]!=="none"&&i[u]!=="0"&&(l=i[u]);if(s&&c.length&&l)for(let u=0;u<c.length;u++){const d=c[u];i[d]=Cy(t,l)}return i}function c8({when:e,delay:t,delayChildren:r,staggerChildren:n,staggerDirection:s,repeat:i,repeatType:a,repeatDelay:l,from:c,elapsed:u,...d}){return!!Object.keys(d).length}function Ad(e,t){return e[t]||e.default||e}const u8={skipAnimations:!1},Pd=(e,t,r,n={})=>s=>{const i=Ad(n,e)||{},a=i.delay||n.delay||0;let{elapsed:l=0}=n;l=l-mn(a);const c=l8(t,e,r,i),u=c[0],d=c[c.length-1],h=Ku(e,u),f=Ku(e,d);let p={keyframes:c,velocity:t.getVelocity(),ease:"easeOut",...i,delay:-l,onUpdate:g=>{t.set(g),i.onUpdate&&i.onUpdate(g)},onComplete:()=>{s(),i.onComplete&&i.onComplete()}};if(c8(i)||(p={...p,...r8(e,p)}),p.duration&&(p.duration=mn(p.duration)),p.repeatDelay&&(p.repeatDelay=mn(p.repeatDelay)),!h||!f||i3.current||i.type===!1||u8.skipAnimations)return X3(p);if(!n.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const g=Q3(t,e,p);if(g)return g}return wo(p)};function bo(e){return!!(xt(e)&&e.add)}const _y=e=>/^\-?\d*\.?\d+$/.test(e);function Dd(e,t){e.indexOf(t)===-1&&e.push(t)}function Bd(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}class Fd{constructor(){this.subscriptions=[]}add(t){return Dd(this.subscriptions,t),()=>Bd(this.subscriptions,t)}notify(t,r,n){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,r,n);else for(let i=0;i<s;i++){const a=this.subscriptions[i];a&&a(t,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const d8=e=>!isNaN(parseFloat(e));class h8{constructor(t,r={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(n,s=!0)=>{this.prev=this.current,this.current=n;const{delta:i,timestamp:a}=Qe;this.lastUpdated!==a&&(this.timeDelta=i,this.lastUpdated=a,ge.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>ge.postRender(this.velocityCheck),this.velocityCheck=({timestamp:n})=>{n!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=d8(this.current),this.owner=r.owner}onChange(t){return this.on("change",t)}on(t,r){this.events[t]||(this.events[t]=new Fd);const n=this.events[t].add(r);return t==="change"?()=>{n(),ge.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,r){this.passiveEffect=t,this.stopPassiveEffect=r}set(t,r=!0){!r||!this.passiveEffect?this.updateAndNotify(t,r):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,r,n){this.set(r),this.prev=t,this.timeDelta=n}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?wy(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=t(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function gs(e,t){return new h8(e,t)}const Ey=e=>t=>t.test(e),f8={test:e=>e==="auto",parse:e=>e},Ny=[An,ee,Xt,wr,bk,wk,f8],Ls=e=>Ny.find(Ey(e)),p8=[...Ny,tt,Hr],x8=e=>p8.find(Ey(e));function m8(e,t,r){e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,gs(r))}function g8(e,t){const r=sl(e,t);let{transitionEnd:n={},transition:s={},...i}=r?e.makeTargetAnimatable(r,!1):{};i={...i,...n};for(const a in i){const l=Rk(i[a]);m8(e,a,l)}}function v8(e,t,r){var n,s;const i=Object.keys(t).filter(l=>!e.hasValue(l)),a=i.length;if(a)for(let l=0;l<a;l++){const c=i[l],u=t[c];let d=null;Array.isArray(u)&&(d=u[0]),d===null&&(d=(s=(n=r[c])!==null&&n!==void 0?n:e.readValue(c))!==null&&s!==void 0?s:t[c]),d!=null&&(typeof d=="string"&&(_y(d)||ky(d))?d=parseFloat(d):!x8(d)&&Hr.test(u)&&(d=Cy(c,u)),e.addValue(c,gs(d,{owner:e})),r[c]===void 0&&(r[c]=d),d!==null&&e.setBaseTarget(c,d))}}function y8(e,t){return t?(t[e]||t.default||t).from:void 0}function w8(e,t,r){const n={};for(const s in e){const i=y8(s,t);if(i!==void 0)n[s]=i;else{const a=r.getValue(s);a&&(n[s]=a.get())}}return n}function b8({protectedKeys:e,needsAnimating:t},r){const n=e.hasOwnProperty(r)&&t[r]!==!0;return t[r]=!1,n}function j8(e,t){const r=e.get();if(Array.isArray(t)){for(let n=0;n<t.length;n++)if(t[n]!==r)return!0}else return r!==t}function Sy(e,t,{delay:r=0,transitionOverride:n,type:s}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:a,...l}=e.makeTargetAnimatable(t);const c=e.getValue("willChange");n&&(i=n);const u=[],d=s&&e.animationState&&e.animationState.getState()[s];for(const h in l){const f=e.getValue(h),p=l[h];if(!f||p===void 0||d&&b8(d,h))continue;const g={delay:r,elapsed:0,...Ad(i||{},h)};if(window.HandoffAppearAnimations){const v=e.getProps()[Av];if(v){const x=window.HandoffAppearAnimations(v,h,f,ge);x!==null&&(g.elapsed=x,g.isHandoff=!0)}}let y=!g.isHandoff&&!j8(f,p);if(g.type==="spring"&&(f.getVelocity()||g.velocity)&&(y=!1),f.animation&&(y=!1),y)continue;f.start(Pd(h,f,p,e.shouldReduceMotion&&Sn.has(h)?{type:!1}:g));const w=f.animation;bo(c)&&(c.add(h),w.then(()=>c.remove(h))),u.push(w)}return a&&Promise.all(u).then(()=>{a&&g8(e,a)}),u}function Yu(e,t,r={}){const n=sl(e,t,r.custom);let{transition:s=e.getDefaultTransition()||{}}=n||{};r.transitionOverride&&(s=r.transitionOverride);const i=n?()=>Promise.all(Sy(e,n,r)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:h}=s;return C8(e,t,u+c,d,h,r)}:()=>Promise.resolve(),{when:l}=s;if(l){const[c,u]=l==="beforeChildren"?[i,a]:[a,i];return c().then(()=>u())}else return Promise.all([i(),a(r.delay)])}function C8(e,t,r=0,n=0,s=1,i){const a=[],l=(e.variantChildren.size-1)*n,c=s===1?(u=0)=>u*n:(u=0)=>l-u*n;return Array.from(e.variantChildren).sort(k8).forEach((u,d)=>{u.notify("AnimationStart",t),a.push(Yu(u,t,{...i,delay:r+c(d)}).then(()=>u.notify("AnimationComplete",t)))}),Promise.all(a)}function k8(e,t){return e.sortNodePosition(t)}function _8(e,t,r={}){e.notify("AnimationStart",t);let n;if(Array.isArray(t)){const s=t.map(i=>Yu(e,i,r));n=Promise.all(s)}else if(typeof t=="string")n=Yu(e,t,r);else{const s=typeof t=="function"?sl(e,t,r.custom):t;n=Promise.all(Sy(e,s,r))}return n.then(()=>e.notify("AnimationComplete",t))}const E8=[...xd].reverse(),N8=xd.length;function S8(e){return t=>Promise.all(t.map(({animation:r,options:n})=>_8(e,r,n)))}function A8(e){let t=S8(e);const r=D8();let n=!0;const s=(c,u)=>{const d=sl(e,u);if(d){const{transition:h,transitionEnd:f,...p}=d;c={...c,...p,...f}}return c};function i(c){t=c(e)}function a(c,u){const d=e.getProps(),h=e.getVariantContext(!0)||{},f=[],p=new Set;let g={},y=1/0;for(let v=0;v<N8;v++){const x=E8[v],m=r[x],b=d[x]!==void 0?d[x]:h[x],j=Si(b),k=x===u?m.isActive:null;k===!1&&(y=v);let C=b===h[x]&&b!==d[x]&&j;if(C&&n&&e.manuallyAnimateOnMount&&(C=!1),m.protectedKeys={...g},!m.isActive&&k===null||!b&&!m.prevProp||el(b)||typeof b=="boolean")continue;let P=P8(m.prevProp,b)||x===u&&m.isActive&&!C&&j||v>y&&j,S=!1;const B=Array.isArray(b)?b:[b];let A=B.reduce(s,{});k===!1&&(A={});const{prevResolvedValues:D={}}=m,V={...D,...A},q=L=>{P=!0,p.has(L)&&(S=!0,p.delete(L)),m.needsAnimating[L]=!0};for(const L in V){const U=A[L],R=D[L];if(g.hasOwnProperty(L))continue;let T=!1;mo(U)&&mo(R)?T=!Xv(U,R):T=U!==R,T?U!==void 0?q(L):p.add(L):U!==void 0&&p.has(L)?q(L):m.protectedKeys[L]=!0}m.prevProp=b,m.prevResolvedValues=A,m.isActive&&(g={...g,...A}),n&&e.blockInitialAnimation&&(P=!1),P&&(!C||S)&&f.push(...B.map(L=>({animation:L,options:{type:x,...c}})))}if(p.size){const v={};p.forEach(x=>{const m=e.getBaseTarget(x);m!==void 0&&(v[x]=m)}),f.push({animation:v})}let w=!!f.length;return n&&(d.initial===!1||d.initial===d.animate)&&!e.manuallyAnimateOnMount&&(w=!1),n=!1,w?t(f):Promise.resolve()}function l(c,u,d){var h;if(r[c].isActive===u)return Promise.resolve();(h=e.variantChildren)===null||h===void 0||h.forEach(p=>{var g;return(g=p.animationState)===null||g===void 0?void 0:g.setActive(c,u)}),r[c].isActive=u;const f=a(d,c);for(const p in r)r[p].protectedKeys={};return f}return{animateChanges:a,setActive:l,setAnimateFunction:i,getState:()=>r}}function P8(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!Xv(t,e):!1}function Jr(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function D8(){return{animate:Jr(!0),whileInView:Jr(),whileHover:Jr(),whileTap:Jr(),whileDrag:Jr(),whileFocus:Jr(),exit:Jr()}}class B8 extends Qr{constructor(t){super(t),t.animationState||(t.animationState=A8(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),el(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:r}=this.node.prevProps||{};t!==r&&this.updateAnimationControlsSubscription()}unmount(){}}let F8=0;class T8 extends Qr{constructor(){super(...arguments),this.id=F8++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:r,custom:n}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===s)return;const i=this.node.animationState.setActive("exit",!t,{custom:n??this.node.getProps().custom});r&&!t&&i.then(()=>r(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const R8={animation:{Feature:B8},exit:{Feature:T8}},Ep=(e,t)=>Math.abs(e-t);function L8(e,t){const r=Ep(e.x,t.x),n=Ep(e.y,t.y);return Math.sqrt(r**2+n**2)}class Ay{constructor(t,r,{transformPagePoint:n,contextWindow:s,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=Fc(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,p=L8(h.offset,{x:0,y:0})>=3;if(!f&&!p)return;const{point:g}=h,{timestamp:y}=Qe;this.history.push({...g,timestamp:y});const{onStart:w,onMove:v}=this.handlers;f||(w&&w(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,h)},this.handlePointerMove=(h,f)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=Bc(f,this.transformPagePoint),ge.update(this.updatePoint,!0)},this.handlePointerUp=(h,f)=>{this.end();const{onEnd:p,onSessionEnd:g,resumeAnimation:y}=this.handlers;if(this.dragSnapToOrigin&&y&&y(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=Fc(h.type==="pointercancel"?this.lastMoveEventInfo:Bc(f,this.transformPagePoint),this.history);this.startEvent&&p&&p(h,w),g&&g(h,w)},!qv(t))return;this.dragSnapToOrigin=i,this.handlers=r,this.transformPagePoint=n,this.contextWindow=s||window;const a=nl(t),l=Bc(a,this.transformPagePoint),{point:c}=l,{timestamp:u}=Qe;this.history=[{...c,timestamp:u}];const{onSessionStart:d}=r;d&&d(t,Fc(l,this.history)),this.removeListeners=Ur(lr(this.contextWindow,"pointermove",this.handlePointerMove),lr(this.contextWindow,"pointerup",this.handlePointerUp),lr(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),pr(this.updatePoint)}}function Bc(e,t){return t?{point:t(e.point)}:e}function Np(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Fc({point:e},t){return{point:e,delta:Np(e,Py(t)),offset:Np(e,O8(t)),velocity:I8(t,.1)}}function O8(e){return e[0]}function Py(e){return e[e.length-1]}function I8(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,n=null;const s=Py(e);for(;r>=0&&(n=e[r],!(s.timestamp-n.timestamp>mn(t)));)r--;if(!n)return{x:0,y:0};const i=cr(s.timestamp-n.timestamp);if(i===0)return{x:0,y:0};const a={x:(s.x-n.x)/i,y:(s.y-n.y)/i};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function jt(e){return e.max-e.min}function Qu(e,t=0,r=.01){return Math.abs(e-t)<=r}function Sp(e,t,r,n=.5){e.origin=n,e.originPoint=Ce(t.min,t.max,e.origin),e.scale=jt(r)/jt(t),(Qu(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=Ce(r.min,r.max,e.origin)-e.originPoint,(Qu(e.translate)||isNaN(e.translate))&&(e.translate=0)}function ii(e,t,r,n){Sp(e.x,t.x,r.x,n?n.originX:void 0),Sp(e.y,t.y,r.y,n?n.originY:void 0)}function Ap(e,t,r){e.min=r.min+t.min,e.max=e.min+jt(t)}function M8(e,t,r){Ap(e.x,t.x,r.x),Ap(e.y,t.y,r.y)}function Pp(e,t,r){e.min=t.min-r.min,e.max=e.min+jt(t)}function ai(e,t,r){Pp(e.x,t.x,r.x),Pp(e.y,t.y,r.y)}function U8(e,{min:t,max:r},n){return t!==void 0&&e<t?e=n?Ce(t,e,n.min):Math.max(e,t):r!==void 0&&e>r&&(e=n?Ce(r,e,n.max):Math.min(e,r)),e}function Dp(e,t,r){return{min:t!==void 0?e.min+t:void 0,max:r!==void 0?e.max+r-(e.max-e.min):void 0}}function $8(e,{top:t,left:r,bottom:n,right:s}){return{x:Dp(e.x,r,s),y:Dp(e.y,t,n)}}function Bp(e,t){let r=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,n]=[n,r]),{min:r,max:n}}function z8(e,t){return{x:Bp(e.x,t.x),y:Bp(e.y,t.y)}}function V8(e,t){let r=.5;const n=jt(e),s=jt(t);return s>n?r=Pi(t.min,t.max-n,e.min):n>s&&(r=Pi(e.min,e.max-s,t.min)),Vr(0,1,r)}function H8(e,t){const r={};return t.min!==void 0&&(r.min=t.min-e.min),t.max!==void 0&&(r.max=t.max-e.min),r}const Xu=.35;function W8(e=Xu){return e===!1?e=0:e===!0&&(e=Xu),{x:Fp(e,"left","right"),y:Fp(e,"top","bottom")}}function Fp(e,t,r){return{min:Tp(e,t),max:Tp(e,r)}}function Tp(e,t){return typeof e=="number"?e:e[t]||0}const Rp=()=>({translate:0,scale:1,origin:0,originPoint:0}),Jn=()=>({x:Rp(),y:Rp()}),Lp=()=>({min:0,max:0}),Fe=()=>({x:Lp(),y:Lp()});function At(e){return[e("x"),e("y")]}function Dy({top:e,left:t,right:r,bottom:n}){return{x:{min:t,max:r},y:{min:e,max:n}}}function q8({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function K8(e,t){if(!t)return e;const r=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function Tc(e){return e===void 0||e===1}function Zu({scale:e,scaleX:t,scaleY:r}){return!Tc(e)||!Tc(t)||!Tc(r)}function nn(e){return Zu(e)||By(e)||e.z||e.rotate||e.rotateX||e.rotateY}function By(e){return Op(e.x)||Op(e.y)}function Op(e){return e&&e!=="0%"}function jo(e,t,r){const n=e-r,s=t*n;return r+s}function Ip(e,t,r,n,s){return s!==void 0&&(e=jo(e,s,n)),jo(e,r,n)+t}function Ju(e,t=0,r=1,n,s){e.min=Ip(e.min,t,r,n,s),e.max=Ip(e.max,t,r,n,s)}function Fy(e,{x:t,y:r}){Ju(e.x,t.translate,t.scale,t.originPoint),Ju(e.y,r.translate,r.scale,r.originPoint)}function G8(e,t,r,n=!1){const s=r.length;if(!s)return;t.x=t.y=1;let i,a;for(let l=0;l<s;l++){i=r[l],a=i.projectionDelta;const c=i.instance;c&&c.style&&c.style.display==="contents"||(n&&i.options.layoutScroll&&i.scroll&&i!==i.root&&es(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),a&&(t.x*=a.x.scale,t.y*=a.y.scale,Fy(e,a)),n&&nn(i.latestValues)&&es(e,i.latestValues))}t.x=Mp(t.x),t.y=Mp(t.y)}function Mp(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function kr(e,t){e.min=e.min+t,e.max=e.max+t}function Up(e,t,[r,n,s]){const i=t[s]!==void 0?t[s]:.5,a=Ce(e.min,e.max,i);Ju(e,t[r],t[n],a,t.scale)}const Y8=["x","scaleX","originX"],Q8=["y","scaleY","originY"];function es(e,t){Up(e.x,t,Y8),Up(e.y,t,Q8)}function Ty(e,t){return Dy(K8(e.getBoundingClientRect(),t))}function X8(e,t,r){const n=Ty(e,r),{scroll:s}=t;return s&&(kr(n.x,s.offset.x),kr(n.y,s.offset.y)),n}const Ry=({current:e})=>e?e.ownerDocument.defaultView:null,Z8=new WeakMap;class J8{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Fe(),this.visualElement=t}start(t,{snapToCursor:r=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const s=d=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(nl(d,"page").point)},i=(d,h)=>{const{drag:f,dragPropagation:p,onDragStart:g}=this.getProps();if(f&&!p&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=Gv(f),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),At(w=>{let v=this.getAxisMotionValue(w).get()||0;if(Xt.test(v)){const{projection:x}=this.visualElement;if(x&&x.layout){const m=x.layout.layoutBox[w];m&&(v=jt(m)*(parseFloat(v)/100))}}this.originPoint[w]=v}),g&&ge.update(()=>g(d,h),!1,!0);const{animationState:y}=this.visualElement;y&&y.setActive("whileDrag",!0)},a=(d,h)=>{const{dragPropagation:f,dragDirectionLock:p,onDirectionLock:g,onDrag:y}=this.getProps();if(!f&&!this.openGlobalLock)return;const{offset:w}=h;if(p&&this.currentDirection===null){this.currentDirection=e_(w),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",h.point,w),this.updateAxis("y",h.point,w),this.visualElement.render(),y&&y(d,h)},l=(d,h)=>this.stop(d,h),c=()=>At(d=>{var h;return this.getAnimationState(d)==="paused"&&((h=this.getAxisMotionValue(d).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new Ay(t,{onSessionStart:s,onStart:i,onMove:a,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:Ry(this.visualElement)})}stop(t,r){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:s}=r;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&ge.update(()=>i(t,r))}cancel(){this.isDragging=!1;const{projection:t,animationState:r}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(t,r,n){const{drag:s}=this.getProps();if(!n||!ya(t,s,this.currentDirection))return;const i=this.getAxisMotionValue(t);let a=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(a=U8(a,this.constraints[t],this.elastic[t])),i.set(a)}resolveConstraints(){var t;const{dragConstraints:r,dragElastic:n}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,i=this.constraints;r&&Xn(r)?this.constraints||(this.constraints=this.resolveRefConstraints()):r&&s?this.constraints=$8(s.layoutBox,r):this.constraints=!1,this.elastic=W8(n),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&At(a=>{this.getAxisMotionValue(a)&&(this.constraints[a]=H8(s.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!Xn(t))return!1;const n=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=X8(n,s.root,this.visualElement.getTransformPagePoint());let a=z8(s.layout.layoutBox,i);if(r){const l=r(q8(a));this.hasMutatedConstraints=!!l,l&&(a=Dy(l))}return a}startAnimation(t){const{drag:r,dragMomentum:n,dragElastic:s,dragTransition:i,dragSnapToOrigin:a,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},u=At(d=>{if(!ya(d,r,this.currentDirection))return;let h=c&&c[d]||{};a&&(h={min:0,max:0});const f=s?200:1e6,p=s?40:1e7,g={type:"inertia",velocity:n?t[d]:0,bounceStiffness:f,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(d,g)});return Promise.all(u).then(l)}startAxisValueAnimation(t,r){const n=this.getAxisMotionValue(t);return n.start(Pd(t,n,0,r))}stopAnimation(){At(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){At(t=>{var r;return(r=this.getAxisMotionValue(t).animation)===null||r===void 0?void 0:r.pause()})}getAnimationState(t){var r;return(r=this.getAxisMotionValue(t).animation)===null||r===void 0?void 0:r.state}getAxisMotionValue(t){const r="_drag"+t.toUpperCase(),n=this.visualElement.getProps(),s=n[r];return s||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){At(r=>{const{drag:n}=this.getProps();if(!ya(r,n,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(r);if(s&&s.layout){const{min:a,max:l}=s.layout.layoutBox[r];i.set(t[r]-Ce(a,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!Xn(r)||!n||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};At(a=>{const l=this.getAxisMotionValue(a);if(l){const c=l.get();s[a]=V8({min:c,max:c},this.constraints[a])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),At(a=>{if(!ya(a,t,null))return;const l=this.getAxisMotionValue(a),{min:c,max:u}=this.constraints[a];l.set(Ce(c,u,s[a]))})}addListeners(){if(!this.visualElement.current)return;Z8.set(this.visualElement,this);const t=this.visualElement.current,r=lr(t,"pointerdown",c=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(c)}),n=()=>{const{dragConstraints:c}=this.getProps();Xn(c)&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",n);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),n();const a=ir(window,"resize",()=>this.scalePositionWithinConstraints()),l=s.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(At(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=c[d].translate,h.set(h.get()+c[d].translate))}),this.visualElement.render())});return()=>{a(),r(),i(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:a=Xu,dragMomentum:l=!0}=t;return{...t,drag:r,dragDirectionLock:n,dragPropagation:s,dragConstraints:i,dragElastic:a,dragMomentum:l}}}function ya(e,t,r){return(t===!0||t===e)&&(r===null||r===e)}function e_(e,t=10){let r=null;return Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x"),r}class t_ extends Qr{constructor(t){super(t),this.removeGroupControls=Pe,this.removeListeners=Pe,this.controls=new J8(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Pe}unmount(){this.removeGroupControls(),this.removeListeners()}}const $p=e=>(t,r)=>{e&&ge.update(()=>e(t,r))};class r_ extends Qr{constructor(){super(...arguments),this.removePointerDownListener=Pe}onPointerDown(t){this.session=new Ay(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Ry(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:r,onPan:n,onPanEnd:s}=this.node.getProps();return{onSessionStart:$p(t),onStart:$p(r),onMove:n,onEnd:(i,a)=>{delete this.session,s&&ge.update(()=>s(i,a))}}}mount(){this.removePointerDownListener=lr(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function n_(){const e=N.useContext(Zo);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:n}=e,s=N.useId();return N.useEffect(()=>n(s),[]),!t&&r?[!1,()=>r&&r(s)]:[!0]}const Ta={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function zp(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Os={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(ee.test(e))e=parseFloat(e);else return e;const r=zp(e,t.target.x),n=zp(e,t.target.y);return`${r}% ${n}%`}},s_={correct:(e,{treeScale:t,projectionDelta:r})=>{const n=e,s=Hr.parse(e);if(s.length>5)return n;const i=Hr.createTransformer(e),a=typeof s[0]!="number"?1:0,l=r.x.scale*t.x,c=r.y.scale*t.y;s[0+a]/=l,s[1+a]/=c;const u=Ce(l,c,.5);return typeof s[2+a]=="number"&&(s[2+a]/=u),typeof s[3+a]=="number"&&(s[3+a]/=u),i(s)}};class i_ extends a0.Component{componentDidMount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n,layoutId:s}=this.props,{projection:i}=t;fk(a_),i&&(r.group&&r.group.add(i),n&&n.register&&s&&n.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Ta.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:r,visualElement:n,drag:s,isPresent:i}=this.props,a=n.projection;return a&&(a.isPresent=i,s||t.layoutDependency!==r||r===void 0?a.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?a.promote():a.relegate()||ge.postRender(()=>{const l=a.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),queueMicrotask(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:s}=t;s&&(s.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(s),n&&n.deregister&&n.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function Ly(e){const[t,r]=n_(),n=N.useContext(gd);return a0.createElement(i_,{...e,layoutGroup:n,switchLayoutGroup:N.useContext(Dv),isPresent:t,safeToRemove:r})}const a_={borderRadius:{...Os,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Os,borderTopRightRadius:Os,borderBottomLeftRadius:Os,borderBottomRightRadius:Os,boxShadow:s_},Oy=["TopLeft","TopRight","BottomLeft","BottomRight"],o_=Oy.length,Vp=e=>typeof e=="string"?parseFloat(e):e,Hp=e=>typeof e=="number"||ee.test(e);function l_(e,t,r,n,s,i){s?(e.opacity=Ce(0,r.opacity!==void 0?r.opacity:1,c_(n)),e.opacityExit=Ce(t.opacity!==void 0?t.opacity:1,0,u_(n))):i&&(e.opacity=Ce(t.opacity!==void 0?t.opacity:1,r.opacity!==void 0?r.opacity:1,n));for(let a=0;a<o_;a++){const l=`border${Oy[a]}Radius`;let c=Wp(t,l),u=Wp(r,l);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||Hp(c)===Hp(u)?(e[l]=Math.max(Ce(Vp(c),Vp(u),n),0),(Xt.test(u)||Xt.test(c))&&(e[l]+="%")):e[l]=u}(t.rotate||r.rotate)&&(e.rotate=Ce(t.rotate||0,r.rotate||0,n))}function Wp(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const c_=Iy(0,.5,ay),u_=Iy(.5,.95,Pe);function Iy(e,t,r){return n=>n<e?0:n>t?1:r(Pi(e,t,n))}function qp(e,t){e.min=t.min,e.max=t.max}function St(e,t){qp(e.x,t.x),qp(e.y,t.y)}function Kp(e,t,r,n,s){return e-=t,e=jo(e,1/r,n),s!==void 0&&(e=jo(e,1/s,n)),e}function d_(e,t=0,r=1,n=.5,s,i=e,a=e){if(Xt.test(t)&&(t=parseFloat(t),t=Ce(a.min,a.max,t/100)-a.min),typeof t!="number")return;let l=Ce(i.min,i.max,n);e===i&&(l-=t),e.min=Kp(e.min,t,r,l,s),e.max=Kp(e.max,t,r,l,s)}function Gp(e,t,[r,n,s],i,a){d_(e,t[r],t[n],t[s],t.scale,i,a)}const h_=["x","scaleX","originX"],f_=["y","scaleY","originY"];function Yp(e,t,r,n){Gp(e.x,t,h_,r?r.x:void 0,n?n.x:void 0),Gp(e.y,t,f_,r?r.y:void 0,n?n.y:void 0)}function Qp(e){return e.translate===0&&e.scale===1}function My(e){return Qp(e.x)&&Qp(e.y)}function p_(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function Uy(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function Xp(e){return jt(e.x)/jt(e.y)}class x_{constructor(){this.members=[]}add(t){Dd(this.members,t),t.scheduleRender()}remove(t){if(Bd(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(t){const r=this.members.findIndex(s=>t===s);if(r===0)return!1;let n;for(let s=r;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){n=i;break}}return n?(this.promote(n),!0):!1}promote(t,r){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,r&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:r,resumingFrom:n}=t;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Zp(e,t,r){let n="";const s=e.x.translate/t.x,i=e.y.translate/t.y;if((s||i)&&(n=`translate3d(${s}px, ${i}px, 0) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),r){const{rotate:c,rotateX:u,rotateY:d}=r;c&&(n+=`rotate(${c}deg) `),u&&(n+=`rotateX(${u}deg) `),d&&(n+=`rotateY(${d}deg) `)}const a=e.x.scale*t.x,l=e.y.scale*t.y;return(a!==1||l!==1)&&(n+=`scale(${a}, ${l})`),n||"none"}const m_=(e,t)=>e.depth-t.depth;class g_{constructor(){this.children=[],this.isDirty=!1}add(t){Dd(this.children,t),this.isDirty=!0}remove(t){Bd(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(m_),this.isDirty=!1,this.children.forEach(t)}}function v_(e,t){const r=performance.now(),n=({timestamp:s})=>{const i=s-r;i>=t&&(pr(n),e(i-t))};return ge.read(n,!0),()=>pr(n)}function y_(e){window.MotionDebug&&window.MotionDebug.record(e)}function w_(e){return e instanceof SVGElement&&e.tagName!=="svg"}function b_(e,t,r){const n=xt(e)?e:gs(e);return n.start(Pd("",n,t,r)),n.animation}const Jp=["","X","Y","Z"],j_={visibility:"hidden"},ex=1e3;let C_=0;const sn={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function $y({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:n,resetTransform:s}){return class{constructor(a={},l=t==null?void 0:t()){this.id=C_++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,sn.totalNodes=sn.resolvedTargetDeltas=sn.recalculatedProjection=0,this.nodes.forEach(E_),this.nodes.forEach(D_),this.nodes.forEach(B_),this.nodes.forEach(N_),y_(sn)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new g_)}addEventListener(a,l){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new Fd),this.eventHandlers.get(a).add(l)}notifyListeners(a,...l){const c=this.eventHandlers.get(a);c&&c.notify(...l)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=w_(a),this.instance=a;const{layoutId:c,layout:u,visualElement:d}=this.options;if(d&&!d.current&&d.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(u||c)&&(this.isLayoutDirty=!0),e){let h;const f=()=>this.root.updateBlockedByResize=!1;e(a,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=v_(f,250),Ta.hasAnimatedSinceResize&&(Ta.hasAnimatedSinceResize=!1,this.nodes.forEach(rx))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&d&&(c||u)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f,hasRelativeTargetChanged:p,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const y=this.options.transition||d.getDefaultTransition()||O_,{onLayoutAnimationStart:w,onLayoutAnimationComplete:v}=d.getProps(),x=!this.targetLayout||!Uy(this.targetLayout,g)||p,m=!f&&p;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||m||f&&(x||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,m);const b={...Ad(y,"layout"),onPlay:w,onComplete:v};(d.shouldReduceMotion||this.options.layoutRoot)&&(b.delay=0,b.type=!1),this.startAnimation(b)}else f||rx(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,pr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(F_),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(tx);return}this.isUpdating||this.nodes.forEach(A_),this.isUpdating=!1,this.nodes.forEach(P_),this.nodes.forEach(k_),this.nodes.forEach(__),this.clearAllSnapshots();const l=performance.now();Qe.delta=Vr(0,1e3/60,l-Qe.timestamp),Qe.timestamp=l,Qe.isProcessing=!0,kc.update.process(Qe),kc.preRender.process(Qe),kc.render.process(Qe),Qe.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(S_),this.sharedNodes.forEach(T_)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ge.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ge.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Fe(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let l=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(l=!1),l&&(this.scroll={animationId:this.root.animationId,phase:a,isRoot:n(this.instance),offset:r(this.instance)})}resetTransform(){if(!s)return;const a=this.isLayoutDirty||this.shouldResetTransform,l=this.projectionDelta&&!My(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;a&&(l||nn(this.latestValues)||d)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return a&&(c=this.removeTransform(c)),I_(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:a}=this.options;if(!a)return Fe();const l=a.measureViewportBox(),{scroll:c}=this.root;return c&&(kr(l.x,c.offset.x),kr(l.y,c.offset.y)),l}removeElementScroll(a){const l=Fe();St(l,a);for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:d,options:h}=u;if(u!==this.root&&d&&h.layoutScroll){if(d.isRoot){St(l,a);const{scroll:f}=this.root;f&&(kr(l.x,-f.offset.x),kr(l.y,-f.offset.y))}kr(l.x,d.offset.x),kr(l.y,d.offset.y)}}return l}applyTransform(a,l=!1){const c=Fe();St(c,a);for(let u=0;u<this.path.length;u++){const d=this.path[u];!l&&d.options.layoutScroll&&d.scroll&&d!==d.root&&es(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),nn(d.latestValues)&&es(c,d.latestValues)}return nn(this.latestValues)&&es(c,this.latestValues),c}removeTransform(a){const l=Fe();St(l,a);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!nn(u.latestValues))continue;Zu(u.latestValues)&&u.updateSnapshot();const d=Fe(),h=u.measurePageBox();St(d,h),Yp(l,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return nn(this.latestValues)&&Yp(l,this.latestValues),l}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Qe.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var l;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(a||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:h,layoutId:f}=this.options;if(!(!this.layout||!(h||f))){if(this.resolvedRelativeTargetAt=Qe.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Fe(),this.relativeTargetOrigin=Fe(),ai(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),St(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Fe(),this.targetWithTransforms=Fe()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),M8(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):St(this.target,this.layout.layoutBox),Fy(this.target,this.targetDelta)):St(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Fe(),this.relativeTargetOrigin=Fe(),ai(this.relativeTargetOrigin,this.target,p.target),St(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}sn.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Zu(this.parent.latestValues)||By(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const l=this.getLead(),c=!!this.resumingFrom||this!==l;let u=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Qe.timestamp&&(u=!1),u)return;const{layout:d,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||h))return;St(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,p=this.treeScale.y;G8(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox);const{target:g}=l;if(!g){this.projectionTransform&&(this.projectionDelta=Jn(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Jn(),this.projectionDeltaWithTransform=Jn());const y=this.projectionTransform;ii(this.projectionDelta,this.layoutCorrected,g,this.latestValues),this.projectionTransform=Zp(this.projectionDelta,this.treeScale),(this.projectionTransform!==y||this.treeScale.x!==f||this.treeScale.y!==p)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g)),sn.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(a,l=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},h=Jn();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const f=Fe(),p=c?c.source:void 0,g=this.layout?this.layout.source:void 0,y=p!==g,w=this.getStack(),v=!w||w.members.length<=1,x=!!(y&&!v&&this.options.crossfade===!0&&!this.path.some(L_));this.animationProgress=0;let m;this.mixTargetDelta=b=>{const j=b/1e3;nx(h.x,a.x,j),nx(h.y,a.y,j),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ai(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),R_(this.relativeTarget,this.relativeTargetOrigin,f,j),m&&p_(this.relativeTarget,m)&&(this.isProjectionDirty=!1),m||(m=Fe()),St(m,this.relativeTarget)),y&&(this.animationValues=d,l_(d,u,this.latestValues,j,x,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=j},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(pr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ge.update(()=>{Ta.hasAnimatedSinceResize=!0,this.currentAnimation=b_(0,ex,{...a,onUpdate:l=>{this.mixTargetDelta(l),a.onUpdate&&a.onUpdate(l)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(ex),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:l,target:c,layout:u,latestValues:d}=a;if(!(!l||!c||!u)){if(this!==a&&this.layout&&u&&zy(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||Fe();const h=jt(this.layout.layoutBox.x);c.x.min=a.target.x.min,c.x.max=c.x.min+h;const f=jt(this.layout.layoutBox.y);c.y.min=a.target.y.min,c.y.max=c.y.min+f}St(l,c),es(l,d),ii(this.projectionDeltaWithTransform,this.layoutCorrected,l,d)}}registerSharedNode(a,l){this.sharedNodes.has(a)||this.sharedNodes.set(a,new x_),this.sharedNodes.get(a).add(l);const u=l.options.initialPromotionConfig;l.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(l):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:l}=this.options;return l?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:l}=this.options;return l?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:l,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),a&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetRotation(){const{visualElement:a}=this.options;if(!a)return;let l=!1;const{latestValues:c}=a;if((c.rotate||c.rotateX||c.rotateY||c.rotateZ)&&(l=!0),!l)return;const u={};for(let d=0;d<Jp.length;d++){const h="rotate"+Jp[d];c[h]&&(u[h]=c[h],a.setStaticValue(h,0))}a.render();for(const d in u)a.setStaticValue(d,u[d]);a.scheduleRender()}getProjectionStyles(a){var l,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return j_;const u={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=Fa(a==null?void 0:a.pointerEvents)||"",u.transform=d?d(this.latestValues,""):"none",u;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const y={};return this.options.layoutId&&(y.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,y.pointerEvents=Fa(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!nn(this.latestValues)&&(y.transform=d?d({},""):"none",this.hasProjected=!1),y}const f=h.animationValues||h.latestValues;this.applyTransformsToTarget(),u.transform=Zp(this.projectionDeltaWithTransform,this.treeScale,f),d&&(u.transform=d(f,u.transform));const{x:p,y:g}=this.projectionDelta;u.transformOrigin=`${p.origin*100}% ${g.origin*100}% 0`,h.animationValues?u.opacity=h===this?(c=(l=f.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:u.opacity=h===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const y in po){if(f[y]===void 0)continue;const{correct:w,applyTo:v}=po[y],x=u.transform==="none"?f[y]:w(f[y],h);if(v){const m=v.length;for(let b=0;b<m;b++)u[v[b]]=x}else u[y]=x}return this.options.layoutId&&(u.pointerEvents=h===this?Fa(a==null?void 0:a.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var l;return(l=a.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(tx),this.root.sharedNodes.clear()}}}function k_(e){e.updateLayout()}function __(e){var t;const r=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&r&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:s}=e.layout,{animationType:i}=e.options,a=r.source!==e.layout.source;i==="size"?At(h=>{const f=a?r.measuredBox[h]:r.layoutBox[h],p=jt(f);f.min=n[h].min,f.max=f.min+p}):zy(i,r.layoutBox,n)&&At(h=>{const f=a?r.measuredBox[h]:r.layoutBox[h],p=jt(n[h]);f.max=f.min+p,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[h].max=e.relativeTarget[h].min+p)});const l=Jn();ii(l,n,r.layoutBox);const c=Jn();a?ii(c,e.applyTransform(s,!0),r.measuredBox):ii(c,n,r.layoutBox);const u=!My(l);let d=!1;if(!e.resumeFrom){const h=e.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:p}=h;if(f&&p){const g=Fe();ai(g,r.layoutBox,f.layoutBox);const y=Fe();ai(y,n,p.layoutBox),Uy(g,y)||(d=!0),h.options.layoutRoot&&(e.relativeTarget=y,e.relativeTargetOrigin=g,e.relativeParent=h)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:r,delta:c,layoutDelta:l,hasLayoutChanged:u,hasRelativeTargetChanged:d})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function E_(e){sn.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function N_(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function S_(e){e.clearSnapshot()}function tx(e){e.clearMeasurements()}function A_(e){e.isLayoutDirty=!1}function P_(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function rx(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function D_(e){e.resolveTargetDelta()}function B_(e){e.calcProjection()}function F_(e){e.resetRotation()}function T_(e){e.removeLeadSnapshot()}function nx(e,t,r){e.translate=Ce(t.translate,0,r),e.scale=Ce(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function sx(e,t,r,n){e.min=Ce(t.min,r.min,n),e.max=Ce(t.max,r.max,n)}function R_(e,t,r,n){sx(e.x,t.x,r.x,n),sx(e.y,t.y,r.y,n)}function L_(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const O_={duration:.45,ease:[.4,0,.1,1]},ix=e=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(e),ax=ix("applewebkit/")&&!ix("chrome/")?Math.round:Pe;function ox(e){e.min=ax(e.min),e.max=ax(e.max)}function I_(e){ox(e.x),ox(e.y)}function zy(e,t,r){return e==="position"||e==="preserve-aspect"&&!Qu(Xp(t),Xp(r),.2)}const M_=$y({attachResizeListener:(e,t)=>ir(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Rc={current:void 0},Vy=$y({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Rc.current){const e=new M_({});e.mount(window),e.setOptions({layoutScroll:!0}),Rc.current=e}return Rc.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),U_={pan:{Feature:r_},drag:{Feature:t_,ProjectionNode:Vy,MeasureLayout:Ly}},$_=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function z_(e){const t=$_.exec(e);if(!t)return[,];const[,r,n]=t;return[r,n]}function e0(e,t,r=1){const[n,s]=z_(e);if(!n)return;const i=window.getComputedStyle(t).getPropertyValue(n);if(i){const a=i.trim();return _y(a)?parseFloat(a):a}else return Vu(s)?e0(s,t,r+1):s}function V_(e,{...t},r){const n=e.current;if(!(n instanceof Element))return{target:t,transitionEnd:r};r&&(r={...r}),e.values.forEach(s=>{const i=s.get();if(!Vu(i))return;const a=e0(i,n);a&&s.set(a)});for(const s in t){const i=t[s];if(!Vu(i))continue;const a=e0(i,n);a&&(t[s]=a,r||(r={}),r[s]===void 0&&(r[s]=i))}return{target:t,transitionEnd:r}}const H_=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),Hy=e=>H_.has(e),W_=e=>Object.keys(e).some(Hy),lx=e=>e===An||e===ee,cx=(e,t)=>parseFloat(e.split(", ")[t]),ux=(e,t)=>(r,{transform:n})=>{if(n==="none"||!n)return 0;const s=n.match(/^matrix3d\((.+)\)$/);if(s)return cx(s[1],t);{const i=n.match(/^matrix\((.+)\)$/);return i?cx(i[1],e):0}},q_=new Set(["x","y","z"]),K_=zi.filter(e=>!q_.has(e));function G_(e){const t=[];return K_.forEach(r=>{const n=e.getValue(r);n!==void 0&&(t.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),t.length&&e.render(),t}const vs={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:ux(4,13),y:ux(5,14)};vs.translateX=vs.x;vs.translateY=vs.y;const Y_=(e,t,r)=>{const n=t.measureViewportBox(),s=t.current,i=getComputedStyle(s),{display:a}=i,l={};a==="none"&&t.setStaticValue("display",e.display||"block"),r.forEach(u=>{l[u]=vs[u](n,i)}),t.render();const c=t.measureViewportBox();return r.forEach(u=>{const d=t.getValue(u);d&&d.jump(l[u]),e[u]=vs[u](c,i)}),e},Q_=(e,t,r={},n={})=>{t={...t},n={...n};const s=Object.keys(t).filter(Hy);let i=[],a=!1;const l=[];if(s.forEach(c=>{const u=e.getValue(c);if(!e.hasValue(c))return;let d=r[c],h=Ls(d);const f=t[c];let p;if(mo(f)){const g=f.length,y=f[0]===null?1:0;d=f[y],h=Ls(d);for(let w=y;w<g&&f[w]!==null;w++)p?go(Ls(f[w])===p):p=Ls(f[w])}else p=Ls(f);if(h!==p)if(lx(h)&&lx(p)){const g=u.get();typeof g=="string"&&u.set(parseFloat(g)),typeof f=="string"?t[c]=parseFloat(f):Array.isArray(f)&&p===ee&&(t[c]=f.map(parseFloat))}else h!=null&&h.transform&&(p!=null&&p.transform)&&(d===0||f===0)?d===0?u.set(p.transform(d)):t[c]=h.transform(f):(a||(i=G_(e),a=!0),l.push(c),n[c]=n[c]!==void 0?n[c]:t[c],u.jump(f))}),l.length){const c=l.indexOf("height")>=0?window.pageYOffset:null,u=Y_(t,e,l);return i.length&&i.forEach(([d,h])=>{e.getValue(d).set(h)}),e.render(),Jo&&c!==null&&window.scrollTo({top:c}),{target:u,transitionEnd:n}}else return{target:t,transitionEnd:n}};function X_(e,t,r,n){return W_(t)?Q_(e,t,r,n):{target:t,transitionEnd:n}}const Z_=(e,t,r,n)=>{const s=V_(e,t,n);return t=s.target,n=s.transitionEnd,X_(e,t,r,n)},t0={current:null},Wy={current:!1};function J_(){if(Wy.current=!0,!!Jo)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>t0.current=e.matches;e.addListener(t),t()}else t0.current=!1}function e5(e,t,r){const{willChange:n}=t;for(const s in t){const i=t[s],a=r[s];if(xt(i))e.addValue(s,i),bo(n)&&n.add(s);else if(xt(a))e.addValue(s,gs(i,{owner:e})),bo(n)&&n.remove(s);else if(a!==i)if(e.hasValue(s)){const l=e.getValue(s);!l.hasAnimated&&l.set(i)}else{const l=e.getStaticValue(s);e.addValue(s,gs(l!==void 0?l:i,{owner:e}))}}for(const s in r)t[s]===void 0&&e.removeValue(s);return t}const dx=new WeakMap,qy=Object.keys(Ai),t5=qy.length,hx=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],r5=md.length;class n5{constructor({parent:t,props:r,presenceContext:n,reducedMotionConfig:s,visualState:i},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>ge.render(this.render,!1,!0);const{latestValues:l,renderState:c}=i;this.latestValues=l,this.baseTarget={...l},this.initialValues=r.initial?{...l}:{},this.renderState=c,this.parent=t,this.props=r,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=a,this.isControllingVariants=tl(r),this.isVariantNode=Pv(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:u,...d}=this.scrapeMotionValuesFromProps(r,{});for(const h in d){const f=d[h];l[h]!==void 0&&xt(f)&&(f.set(l[h],!1),bo(u)&&u.add(h))}}scrapeMotionValuesFromProps(t,r){return{}}mount(t){this.current=t,dx.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,n)=>this.bindToMotionValue(n,r)),Wy.current||J_(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:t0.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){dx.delete(this.current),this.projection&&this.projection.unmount(),pr(this.notifyUpdate),pr(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,r){const n=Sn.has(t),s=r.on("change",a=>{this.latestValues[t]=a,this.props.onUpdate&&ge.update(this.notifyUpdate,!1,!0),n&&this.projection&&(this.projection.isTransformDirty=!0)}),i=r.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{s(),i()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...r},n,s,i){let a,l;for(let c=0;c<t5;c++){const u=qy[c],{isEnabled:d,Feature:h,ProjectionNode:f,MeasureLayout:p}=Ai[u];f&&(a=f),d(r)&&(!this.features[u]&&h&&(this.features[u]=new h(this)),p&&(l=p))}if((this.type==="html"||this.type==="svg")&&!this.projection&&a){this.projection=new a(this.latestValues,this.parent&&this.parent.projection);const{layoutId:c,layout:u,drag:d,dragConstraints:h,layoutScroll:f,layoutRoot:p}=r;this.projection.setOptions({layoutId:c,layout:u,alwaysMeasureLayout:!!d||h&&Xn(h),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof u=="string"?u:"both",initialPromotionConfig:i,layoutScroll:f,layoutRoot:p})}return l}updateFeatures(){for(const t in this.features){const r=this.features[t];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Fe()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,r){this.latestValues[t]=r}makeTargetAnimatable(t,r=!0){return this.makeTargetAnimatableFromInstance(t,this.props,r)}update(t,r){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<hx.length;n++){const s=hx[n];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i=t["on"+s];i&&(this.propEventSubscriptions[s]=this.on(s,i))}this.prevMotionValues=e5(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const n=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(n.initial=this.props.initial),n}const r={};for(let n=0;n<r5;n++){const s=md[n],i=this.props[s];(Si(i)||i===!1)&&(r[s]=i)}return r}addVariantChild(t){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(t),()=>r.variantChildren.delete(t)}addValue(t,r){r!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,r)),this.values.set(t,r),this.latestValues[t]=r.get()}removeValue(t){this.values.delete(t);const r=this.valueSubscriptions.get(t);r&&(r(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,r){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&r!==void 0&&(n=gs(r,{owner:this}),this.addValue(t,n)),n}readValue(t){var r;return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(r=this.getBaseTargetFromProps(this.props,t))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,r){this.baseTarget[t]=r}getBaseTarget(t){var r;const{initial:n}=this.props,s=typeof n=="string"||typeof n=="object"?(r=kd(this.props,n))===null||r===void 0?void 0:r[t]:void 0;if(n&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!xt(i)?i:this.initialValues[t]!==void 0&&s===void 0?void 0:this.baseTarget[t]}on(t,r){return this.events[t]||(this.events[t]=new Fd),this.events[t].add(r)}notify(t,...r){this.events[t]&&this.events[t].notify(...r)}}class Ky extends n5{sortInstanceNodePosition(t,r){return t.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(t,r){return t.style?t.style[r]:void 0}removeValueFromRenderState(t,{vars:r,style:n}){delete r[t],delete n[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:r,...n},{transformValues:s},i){let a=w8(n,t||{},this);if(s&&(r&&(r=s(r)),n&&(n=s(n)),a&&(a=s(a))),i){v8(this,n,a);const l=Z_(this,n,a,r);r=l.transitionEnd,n=l.target}return{transition:t,transitionEnd:r,...n}}}function s5(e){return window.getComputedStyle(e)}class i5 extends Ky{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,r){if(Sn.has(r)){const n=Sd(r);return n&&n.default||0}else{const n=s5(t),s=(Tv(r)?n.getPropertyValue(r):n[r])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:r}){return Ty(t,r)}build(t,r,n,s){yd(t,r,n,s.transformTemplate)}scrapeMotionValuesFromProps(t,r){return Cd(t,r)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;xt(t)&&(this.childSubscription=t.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}renderInstance(t,r,n,s){Uv(t,r,n,s)}}class a5 extends Ky{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,r){return t[r]}readValueFromInstance(t,r){if(Sn.has(r)){const n=Sd(r);return n&&n.default||0}return r=$v.has(r)?r:pd(r),t.getAttribute(r)}measureInstanceViewportBox(){return Fe()}scrapeMotionValuesFromProps(t,r){return Vv(t,r)}build(t,r,n,s){bd(t,r,n,this.isSVGTag,s.transformTemplate)}renderInstance(t,r,n,s){zv(t,r,n,s)}mount(t){this.isSVGTag=jd(t.tagName),super.mount(t)}}const o5=(e,t)=>vd(e)?new a5(t,{enableHardwareAcceleration:!1}):new i5(t,{enableHardwareAcceleration:!0}),l5={layout:{ProjectionNode:Vy,MeasureLayout:Ly}},c5={...R8,...r3,...U_,...l5},Lc=dk((e,t)=>Vk(e,t,c5,o5));function Gy(){const e=N.useRef(!1);return fd(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function u5(){const e=Gy(),[t,r]=N.useState(0),n=N.useCallback(()=>{e.current&&r(t+1)},[t]);return[N.useCallback(()=>ge.postRender(n),[n]),t]}class d5 extends N.Component{getSnapshotBeforeUpdate(t){const r=this.props.childRef.current;if(r&&t.isPresent&&!this.props.isPresent){const n=this.props.sizeRef.current;n.height=r.offsetHeight||0,n.width=r.offsetWidth||0,n.top=r.offsetTop,n.left=r.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function h5({children:e,isPresent:t}){const r=N.useId(),n=N.useRef(null),s=N.useRef({width:0,height:0,top:0,left:0});return N.useInsertionEffect(()=>{const{width:i,height:a,top:l,left:c}=s.current;if(t||!n.current||!i||!a)return;n.current.dataset.motionPopId=r;const u=document.createElement("style");return document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${a}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[t]),N.createElement(d5,{isPresent:t,childRef:n,sizeRef:s},N.cloneElement(e,{ref:n}))}const Oc=({children:e,initial:t,isPresent:r,onExitComplete:n,custom:s,presenceAffectsLayout:i,mode:a})=>{const l=Hv(f5),c=N.useId(),u=N.useMemo(()=>({id:c,initial:t,isPresent:r,custom:s,onExitComplete:d=>{l.set(d,!0);for(const h of l.values())if(!h)return;n&&n()},register:d=>(l.set(d,!1),()=>l.delete(d))}),i?void 0:[r]);return N.useMemo(()=>{l.forEach((d,h)=>l.set(h,!1))},[r]),N.useEffect(()=>{!r&&!l.size&&n&&n()},[r]),a==="popLayout"&&(e=N.createElement(h5,{isPresent:r},e)),N.createElement(Zo.Provider,{value:u},e)};function f5(){return new Map}function p5(e){return N.useEffect(()=>()=>e(),[])}const an=e=>e.key||"";function x5(e,t){e.forEach(r=>{const n=an(r);t.set(n,r)})}function m5(e){const t=[];return N.Children.forEach(e,r=>{N.isValidElement(r)&&t.push(r)}),t}const fx=({children:e,custom:t,initial:r=!0,onExitComplete:n,exitBeforeEnter:s,presenceAffectsLayout:i=!0,mode:a="sync"})=>{const l=N.useContext(gd).forceRender||u5()[0],c=Gy(),u=m5(e);let d=u;const h=N.useRef(new Map).current,f=N.useRef(d),p=N.useRef(new Map).current,g=N.useRef(!0);if(fd(()=>{g.current=!1,x5(u,p),f.current=d}),p5(()=>{g.current=!0,p.clear(),h.clear()}),g.current)return N.createElement(N.Fragment,null,d.map(x=>N.createElement(Oc,{key:an(x),isPresent:!0,initial:r?void 0:!1,presenceAffectsLayout:i,mode:a},x)));d=[...d];const y=f.current.map(an),w=u.map(an),v=y.length;for(let x=0;x<v;x++){const m=y[x];w.indexOf(m)===-1&&!h.has(m)&&h.set(m,void 0)}return a==="wait"&&h.size&&(d=[]),h.forEach((x,m)=>{if(w.indexOf(m)!==-1)return;const b=p.get(m);if(!b)return;const j=y.indexOf(m);let k=x;if(!k){const C=()=>{h.delete(m);const _=Array.from(p.keys()).filter(P=>!w.includes(P));if(_.forEach(P=>p.delete(P)),f.current=u.filter(P=>{const S=an(P);return S===m||_.includes(S)}),!h.size){if(c.current===!1)return;l(),n&&n()}};k=N.createElement(Oc,{key:an(b),isPresent:!1,onExitComplete:C,custom:t,presenceAffectsLayout:i,mode:a},b),h.set(m,k)}d.splice(j,0,k)}),d=d.map(x=>{const m=x.key;return h.has(m)?x:N.createElement(Oc,{key:an(x),isPresent:!0,presenceAffectsLayout:i,mode:a},x)}),N.createElement(N.Fragment,null,h.size?d:d.map(x=>N.cloneElement(x)))},Yy=({children:e,onSwipeLeft:t,onSwipeRight:r,leftAction:n={icon:o.jsx(ad,{className:"w-5 h-5"}),color:"bg-blue-500",label:"Archive"},rightAction:s={icon:o.jsx($i,{className:"w-5 h-5"}),color:"bg-red-500",label:"Delete"},className:i=""})=>{const[a,l]=N.useState(0),[c,u]=N.useState(!1),d=tk({onSwiping:h=>{const f=h.deltaX,p=100,g=Math.max(-p,Math.min(p,f));l(g),u(Math.abs(g)>20)},onSwipedLeft:()=>{Math.abs(a)>50&&t&&t(),l(0),u(!1)},onSwipedRight:()=>{Math.abs(a)>50&&r&&r(),l(0),u(!1)},onSwiped:()=>{l(0),u(!1)},trackMouse:!0,trackTouch:!0});return o.jsxs("div",{className:`relative overflow-hidden ${i}`,...d,children:[o.jsx(fx,{children:a>20&&o.jsx(Lc.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:`absolute left-0 top-0 h-full flex items-center px-4 ${s.color}`,style:{width:Math.abs(a)},children:o.jsxs("div",{className:"flex items-center space-x-2 text-white",children:[s.icon,Math.abs(a)>60&&o.jsx("span",{className:"text-sm font-medium",children:s.label})]})})}),o.jsx(fx,{children:a<-20&&o.jsx(Lc.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:`absolute right-0 top-0 h-full flex items-center justify-end px-4 ${n.color}`,style:{width:Math.abs(a)},children:o.jsxs("div",{className:"flex items-center space-x-2 text-white",children:[Math.abs(a)>60&&o.jsx("span",{className:"text-sm font-medium",children:n.label}),n.icon]})})}),o.jsx(Lc.div,{animate:{x:a},transition:{type:"spring",stiffness:300,damping:30},className:`relative z-10 ${c?"shadow-lg":""}`,children:e})]})},g5=()=>{const{notifications:e,markNotificationAsRead:t,clearAllNotifications:r,posts:n,allUsers:s}=Ke();De();const i=Uo(),a=f=>{switch(f){case"like":return o.jsx(mv,{className:"w-5 h-5 text-red-400"});case"repost":return o.jsx(jv,{className:"w-5 h-5 text-green-400"});case"comment":return o.jsx($u,{className:"w-5 h-5 text-blue-400"});case"follow":return o.jsx(Dr,{className:"w-5 h-5 text-purple-400"});case"mention":return o.jsx(CC,{className:"w-5 h-5 text-yellow-400"});case"message":return o.jsx($u,{className:"w-5 h-5 text-pink-400"});default:return o.jsx(lo,{className:"w-5 h-5 text-gray-400"})}},l=f=>{switch(f.type){case"like":return"liked your post";case"repost":return"reposted your post";case"comment":return"commented on your post";case"follow":return"started following you";case"mention":return"mentioned you in a post";case"message":return"sent you a message";default:return"interacted with your content"}},c=f=>{switch(t(f.id),f.type){case"like":case"repost":case"comment":case"mention":f.postId&&i("/");break;case"follow":f.fromUserId&&i("/explore");break;case"message":i("/messages");break}},u=f=>{t(f)},d=f=>{console.log("Archive notification:",f)},h=f=>{console.log("Delete notification:",f)};return o.jsxs("div",{className:"min-h-screen bg-black/10 backdrop-blur-sm",children:[o.jsx("div",{className:"sticky top-0 bg-black/80 backdrop-blur-md border-b border-gray-700/50 p-4 z-10",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-bold text-white",children:"Notifications"}),o.jsx("p",{className:"text-gray-400 text-sm",children:"Stay updated with your community"})]}),e.length>0&&o.jsxs("button",{onClick:r,className:"flex items-center space-x-2 px-4 py-2 bg-gray-800 hover:bg-gray-700 rounded-lg transition-colors text-gray-300 hover:text-white",children:[o.jsx(st,{className:"w-4 h-4"}),o.jsx("span",{children:"Clear All"})]})]})}),o.jsx("div",{className:"divide-y divide-gray-700/30",children:e.length===0?o.jsxs("div",{className:"p-12 text-center",children:[o.jsx(lo,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),o.jsx("h3",{className:"text-xl font-semibold text-gray-400 mb-2",children:"No notifications yet"}),o.jsx("p",{className:"text-gray-500",children:"When someone interacts with your content, you'll see it here."})]}):e.map(f=>{var p;return o.jsx(Yy,{onSwipeLeft:()=>d(f.id),onSwipeRight:()=>h(f.id),leftAction:{icon:o.jsx(ad,{className:"w-5 h-5"}),color:"bg-blue-500",label:"Archive"},rightAction:{icon:o.jsx(st,{className:"w-5 h-5"}),color:"bg-red-500",label:"Delete"},children:o.jsx("div",{onClick:()=>c(f),className:`p-6 hover:bg-gray-800/20 transition-colors cursor-pointer ${f.read?"":"bg-purple-900/10 border-l-4 border-purple-500"}`,children:o.jsxs("div",{className:"flex space-x-4",children:[o.jsx("div",{className:"flex-shrink-0",children:a(f.type)}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[f.fromUser&&o.jsx("img",{src:f.fromUser.avatar,alt:f.fromUser.displayName,className:"w-8 h-8 rounded-full object-cover"}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("p",{className:"text-white",children:[o.jsx("span",{className:"font-semibold",children:((p=f.fromUser)==null?void 0:p.displayName)||"Someone"})," ",o.jsx("span",{className:"text-gray-300",children:l(f)})]}),o.jsx("p",{className:"text-gray-500 text-sm",children:f.timestamp.toLocaleString()})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[!f.read&&o.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),o.jsx("button",{onClick:g=>{g.stopPropagation(),u(f.id)},className:"p-1 text-gray-400 hover:text-green-400 transition-colors",children:o.jsx(kC,{className:"w-4 h-4"})})]})]}),f.message&&o.jsx("p",{className:"text-gray-400 text-sm mt-2 bg-gray-800/30 rounded-lg p-3",children:f.message})]})]})})},f.id)})})]})},v5=()=>{const{chats:e,sendMessage:t,createChat:r,allUsers:n,getChatMessages:s,markMessagesAsRead:i,deleteChatForUser:a,clearAllMessageNotifications:l}=Ke(),{user:c}=De(),[u,d]=N.useState(null),[h,f]=N.useState(""),[p,g]=N.useState(!1),[y,w]=N.useState(""),[v,x]=N.useState([]),[m,b]=N.useState([]),[j,k]=N.useState(""),[C,_]=N.useState(!1),[P,S]=N.useState(!1),[B,A]=N.useState(null),[D,V]=N.useState(window.innerWidth<768),[q,L]=N.useState(!1),[U,R]=N.useState([]);N.useEffect(()=>{const M=()=>{R([...e]),u&&T(u.id)};M();const te=setInterval(M,1e3);return()=>clearInterval(te)},[e,u]),N.useEffect(()=>{const M=()=>{V(window.innerWidth<768)};return window.addEventListener("resize",M),()=>window.removeEventListener("resize",M)},[]),N.useEffect(()=>{u&&(T(u.id),i(u.id))},[u]);const T=async M=>{const te=await s(M);x(te)},z=async M=>{if(M.preventDefault(),h.trim()&&u&&c){await t(u.id,h.trim(),c.id);const te={id:Date.now().toString(),content:h.trim(),senderId:c.id,chatId:u.id,timestamp:new Date,isEncrypted:!0,readBy:[c.id]};x(ne=>[...ne,te]),f("")}},E=async()=>{if(m.length!==0)try{const M=await r(m,C,j||void 0);d(M),g(!1),b([]),k(""),_(!1)}catch(M){console.error("Error creating chat:",M)}},F=M=>{console.log("Archive chat:",M)},I=M=>{A(M)},O=async M=>{c&&(await a(M,c.id),A(null),(u==null?void 0:u.id)===M&&d(null))},Q=async(M,te)=>{if(!(!c||!u)){S(!0);try{const ne=te==="image"?"message-images":"message-videos",ie=`${c.id}/${te}_${Date.now()}.${M.name.split(".").pop()}`,Se=await id(M,ne,ie);Se?(await t(u.id,`Sent ${te==="image"?"an image":"a video"}`,c.id,Se),T(u.id)):alert("Failed to upload file")}catch(ne){console.error("Upload error:",ne),alert("Failed to upload file")}finally{S(!1)}}},X=()=>{const M=document.createElement("input");M.type="file",M.accept="image/*",M.onchange=te=>{var ie;const ne=(ie=te.target.files)==null?void 0:ie[0];ne&&Q(ne,"image")},M.click()},ce=()=>{const M=document.createElement("input");M.type="file",M.accept="video/*",M.onchange=te=>{var ie;const ne=(ie=te.target.files)==null?void 0:ie[0];ne&&Q(ne,"video")},M.click()},G=M=>{d(M),i(M.id)},fe=()=>{l()},Ne=U.filter(M=>{var te;return((te=M.name)==null?void 0:te.toLowerCase().includes(y.toLowerCase()))||M.participants.some(ne=>{const ie=n.find(Se=>Se.id===ne);return(ie==null?void 0:ie.displayName.toLowerCase().includes(y.toLowerCase()))||(ie==null?void 0:ie.username.toLowerCase().includes(y.toLowerCase()))})}),Ie=n.filter(M=>M.id!==(c==null?void 0:c.id)),re=M=>{if(M.name)return M.name;const te=M.participants.filter(ne=>ne!==(c==null?void 0:c.id));if(te.length===1){const ne=n.find(ie=>ie.id===te[0]);return(ne==null?void 0:ne.displayName)||"Unknown User"}return`Group Chat (${M.participants.length} members)`},be=M=>{if(M.isGroup)return"https://images.pexels.com/photos/1239291/pexels-photo-1239291.jpeg?auto=compress&cs=tinysrgb&w=350&h=350";const te=M.participants.filter(ne=>ne!==(c==null?void 0:c.id));if(te.length===1){const ne=n.find(ie=>ie.id===te[0]);return(ne==null?void 0:ne.avatar)||"https://images.pexels.com/photos/1239291/pexels-photo-1239291.jpeg?auto=compress&cs=tinysrgb&w=350&h=350"}return"https://images.pexels.com/photos/1239291/pexels-photo-1239291.jpeg?auto=compress&cs=tinysrgb&w=350&h=350"},Be=M=>{const te=n.find(ne=>ne.id===M);return{name:(te==null?void 0:te.displayName)||"Unknown User",avatar:(te==null?void 0:te.avatar)||"https://images.pexels.com/photos/1239291/pexels-photo-1239291.jpeg?auto=compress&cs=tinysrgb&w=350&h=350"}},_t=M=>M===(c==null?void 0:c.id),Et=(M,te)=>!(u!=null&&u.isGroup)||_t(M.senderId)?!1:te===0?!0:v[te-1].senderId!==M.senderId,Je=e.reduce((M,te)=>te.lastMessage&&!te.lastMessage.readBy.includes((c==null?void 0:c.id)||"")?M+1:M,0);return o.jsxs(o.Fragment,{children:[D&&!u&&o.jsx("button",{onClick:()=>L(!q),className:"fixed top-4 left-4 z-50 p-2 bg-gray-900 rounded-full border border-gray-700",children:q?o.jsx(st,{className:"w-6 h-6 text-white"}):o.jsx(yv,{className:"w-6 h-6 text-white"})}),o.jsxs("div",{className:"min-h-screen bg-black/10 backdrop-blur-sm flex relative",children:[o.jsxs("div",{className:`${D?u?"hidden":"w-full":"w-80"} border-r border-gray-700/50 bg-black/20 ${D?"absolute inset-0 z-10":""}`,children:[o.jsxs("div",{className:"p-4 border-b border-gray-700/50",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-bold text-white",children:"Messages"}),Je>0&&o.jsxs("p",{className:"text-purple-400 text-sm",children:[Je," unread messages"]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[Je>0&&o.jsx("button",{onClick:fe,className:"p-2 text-purple-400 hover:bg-purple-400/10 rounded-full transition-colors",title:"Clear all message notifications",children:o.jsx(np,{className:"w-5 h-5"})}),o.jsx("button",{onClick:()=>g(!0),className:"p-2 bg-purple-600 hover:bg-purple-700 rounded-full transition-colors",children:o.jsx(Qo,{className:"w-5 h-5 text-white"})})]})]}),o.jsxs("div",{className:"relative",children:[o.jsx(xn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),o.jsx("input",{type:"text",value:y,onChange:M=>w(M.target.value),placeholder:"Search conversations...",className:"w-full bg-gray-800 border border-gray-600 rounded-full pl-9 pr-4 py-2 text-white text-sm focus:border-purple-500 focus:outline-none"})]})]}),o.jsx("div",{className:"overflow-y-auto",children:Ne.length===0?o.jsxs("div",{className:"p-6 text-center",children:[o.jsx(or,{className:"w-12 h-12 text-gray-600 mx-auto mb-3"}),o.jsx("p",{className:"text-gray-400",children:"No conversations yet"}),o.jsx("p",{className:"text-gray-500 text-sm",children:"Start a new chat to connect with other writers"})]}):Ne.map(M=>{var te;return o.jsx(Yy,{onSwipeLeft:()=>F(M.id),onSwipeRight:()=>I(M.id),leftAction:{icon:o.jsx(ad,{className:"w-5 h-5"}),color:"bg-blue-500",label:"Archive"},rightAction:{icon:o.jsx($i,{className:"w-5 h-5"}),color:"bg-red-500",label:"Delete"},children:o.jsx("button",{onClick:()=>G(M),className:`w-full p-4 text-left hover:bg-gray-800/30 transition-colors border-b border-gray-700/20 ${(u==null?void 0:u.id)===M.id?"bg-purple-900/20":""}`,children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsxs("div",{className:"relative",children:[o.jsx("img",{src:be(M),alt:"Chat avatar",className:"w-12 h-12 rounded-full object-cover"}),M.isEncrypted&&o.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 rounded-full flex items-center justify-center",children:o.jsx(uo,{className:"w-2 h-2 text-white"})})]}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-white font-medium truncate",children:re(M)}),o.jsx("p",{className:"text-gray-400 text-sm truncate",children:((te=M.lastMessage)==null?void 0:te.content)||"No messages yet"})]}),M.lastMessage&&!M.lastMessage.readBy.includes((c==null?void 0:c.id)||"")&&o.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"})]})})},M.id)})})]}),o.jsx("div",{className:`flex-1 flex flex-col ${D&&u?"absolute inset-0 z-20 bg-gray-900":""}`,children:u?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"p-4 border-b border-gray-700/50 bg-black/20",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[D&&o.jsx("button",{onClick:()=>d(null),className:"p-2 text-gray-400 hover:text-white transition-colors",children:o.jsx(jC,{className:"w-5 h-5"})}),o.jsx("img",{src:be(u),alt:"Chat avatar",className:"w-10 h-10 rounded-full object-cover"}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-white font-semibold",children:re(u)}),o.jsxs("div",{className:"flex items-center space-x-2",children:[u.isEncrypted&&o.jsxs("div",{className:"flex items-center space-x-1 text-green-400 text-xs",children:[o.jsx(uo,{className:"w-3 h-3"}),o.jsx("span",{children:"Encrypted"})]}),o.jsxs("span",{className:"text-gray-400 text-sm",children:[u.participants.length," participants"]})]})]})]}),o.jsx("button",{className:"p-2 text-gray-400 hover:text-white transition-colors",children:o.jsx(wv,{className:"w-5 h-5"})})]})}),o.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:v.map((M,te)=>{const ne=Be(M.senderId),ie=_t(M.senderId),Se=Et(M,te);return o.jsx("div",{className:`flex ${ie?"justify-end":"justify-start"}`,children:o.jsxs("div",{className:`max-w-xs ${ie?"order-2":"order-1"}`,children:[Se&&o.jsxs("div",{className:"flex items-center space-x-2 mb-1 px-3",children:[o.jsx("img",{src:ne.avatar,alt:ne.name,className:"w-4 h-4 rounded-full object-cover"}),o.jsx("span",{className:"text-xs text-gray-400 font-medium",children:ne.name})]}),o.jsxs("div",{className:`rounded-2xl p-3 ${ie?"bg-purple-600 rounded-br-md":"bg-gray-800 rounded-bl-md"}`,children:[M.mediaUrl&&o.jsx("div",{className:"mb-2",children:M.mediaUrl.includes(".mp4")||M.mediaUrl.includes(".mov")||M.mediaUrl.includes(".avi")?o.jsx("video",{src:M.mediaUrl,className:"w-full max-w-xs rounded-lg",controls:!0}):o.jsx("img",{src:M.mediaUrl,alt:"Shared media",className:"w-full max-w-xs rounded-lg"})}),o.jsx("p",{className:"text-white text-sm",children:M.content}),o.jsx("p",{className:`text-xs mt-1 ${ie?"text-purple-200":"text-gray-400"}`,children:M.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]})},M.id)})}),o.jsx("form",{onSubmit:z,className:"p-4 border-t border-gray-700/50 bg-black/20",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("button",{type:"button",onClick:X,disabled:P,className:"p-2 text-gray-400 hover:text-purple-400 transition-colors disabled:opacity-50",children:P?o.jsx(ud,{className:"w-5 h-5 animate-spin"}):o.jsx(gv,{className:"w-5 h-5"})}),o.jsx("button",{type:"button",onClick:ce,disabled:P,className:"p-2 text-gray-400 hover:text-purple-400 transition-colors disabled:opacity-50",children:o.jsx(kv,{className:"w-5 h-5"})}),o.jsx("input",{type:"text",value:h,onChange:M=>f(M.target.value),placeholder:"Type a message...",className:"flex-1 bg-gray-800 border border-gray-600 rounded-full px-4 py-2 text-white focus:border-purple-500 focus:outline-none"}),o.jsx("button",{type:"submit",disabled:!h.trim()||P,className:"p-2 bg-purple-600 hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed rounded-full transition-colors",children:o.jsx(Cv,{className:"w-5 h-5 text-white"})})]})})]}):o.jsx("div",{className:"flex-1 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx(or,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),o.jsx("h3",{className:"text-xl font-semibold text-gray-400 mb-2",children:"Select a conversation"}),o.jsx("p",{className:"text-gray-500",children:"Choose from your existing conversations or start a new one"}),Je>0&&o.jsx("div",{className:"mt-4",children:o.jsxs("button",{onClick:fe,className:"flex items-center space-x-2 bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-full transition-colors mx-auto",children:[o.jsx(np,{className:"w-4 h-4"}),o.jsxs("span",{children:["Clear All Notifications (",Je,")"]})]})})]})})})]}),B&&o.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-gray-900 rounded-2xl border border-gray-700/50 p-6 mx-4 max-w-sm w-full",children:[o.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Delete Conversation"}),o.jsx("p",{className:"text-gray-300 mb-6",children:"Are you sure you want to delete this conversation? This will only remove it from your view. Other participants will still be able to see the conversation."}),o.jsxs("div",{className:"flex space-x-3",children:[o.jsx("button",{onClick:()=>O(B),className:"flex-1 bg-red-600 hover:bg-red-700 text-white font-semibold py-2 rounded-lg transition-colors",children:"Delete for Me"}),o.jsx("button",{onClick:()=>A(null),className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white font-semibold py-2 rounded-lg transition-colors",children:"Cancel"})]})]})}),p&&o.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",children:o.jsx("div",{className:"bg-gray-900 rounded-2xl border border-gray-700/50 w-full max-w-md mx-4 max-h-[80vh] overflow-y-auto",children:o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-lg font-bold text-white",children:"Start New Conversation"}),o.jsx("button",{onClick:()=>g(!1),className:"p-2 text-gray-400 hover:text-white transition-colors",children:o.jsx(st,{className:"w-5 h-5"})})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[o.jsx("input",{type:"checkbox",id:"groupChat",checked:C,onChange:M=>_(M.target.checked),className:"text-purple-600 focus:ring-purple-500 rounded"}),o.jsx("label",{htmlFor:"groupChat",className:"text-white text-sm",children:"Create group chat"})]}),C&&o.jsx("input",{type:"text",value:j,onChange:M=>k(M.target.value),placeholder:"Group name (optional)",className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white focus:border-purple-500 focus:outline-none"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-white text-sm mb-2",children:"Select users:"}),o.jsx("div",{className:"max-h-48 overflow-y-auto space-y-2",children:Ie.map(M=>o.jsxs("label",{className:"flex items-center space-x-3 p-2 hover:bg-gray-800 rounded-lg cursor-pointer",children:[o.jsx("input",{type:C?"checkbox":"radio",name:"selectedUsers",value:M.id,checked:m.includes(M.id),onChange:te=>{C?te.target.checked?b(ne=>[...ne,M.id]):b(ne=>ne.filter(ie=>ie!==M.id)):b([M.id])},className:"text-purple-600 focus:ring-purple-500"}),o.jsx("img",{src:M.avatar,alt:M.displayName,className:"w-8 h-8 rounded-full object-cover"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-white text-sm",children:M.displayName}),o.jsxs("p",{className:"text-gray-400 text-xs",children:["@",M.username]})]})]},M.id))})]}),o.jsxs("div",{className:"flex space-x-3 pt-4",children:[o.jsx("button",{onClick:E,disabled:m.length===0,className:"flex-1 bg-purple-600 hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed text-white font-semibold py-3 rounded-lg transition-colors",children:"Create Chat"}),o.jsx("button",{onClick:()=>{g(!1),b([]),k(""),_(!1)},className:"px-6 py-3 text-gray-400 hover:text-white transition-colors",children:"Cancel"})]})]})]})})})]})},y5=()=>{const{user:e}=De(),{posts:t,characters:r,allUsers:n,bookmarkedPosts:s,bookmarkedCharacters:i,bookmarkedUsers:a,likePost:l,repostPost:c}=Ke(),[u,d]=N.useState(""),[h,f]=N.useState("all"),[p,g]=N.useState(null),[y,w]=N.useState(null),v=t.filter(L=>s.includes(L.id)),x=r.filter(L=>i.includes(L.id)),m=n.filter(L=>a.includes(L.id)),b=()=>{const L=u.toLowerCase();let U=v,R=x,T=m;return u&&(U=U.filter(z=>{var E,F;return z.content.toLowerCase().includes(L)||((E=z.character)==null?void 0:E.name.toLowerCase().includes(L))||((F=z.user)==null?void 0:F.displayName.toLowerCase().includes(L))}),R=R.filter(z=>z.name.toLowerCase().includes(L)||z.username.toLowerCase().includes(L)||z.verseTag.toLowerCase().includes(L)),T=T.filter(z=>z.displayName.toLowerCase().includes(L)||z.username.toLowerCase().includes(L)||z.writersTag.toLowerCase().includes(L))),{filteredPosts:U,filteredCharacters:R,filteredUsers:T}},{filteredPosts:j,filteredCharacters:k,filteredUsers:C}=b(),_=L=>{l(L)},P=L=>{c(L)},S=L=>{g(L)},B=L=>{w(L)},A=h==="all"||h==="posts",D=h==="all"||h==="characters",V=h==="all"||h==="writers",q=A&&j.length>0||D&&k.length>0||V&&C.length>0;return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"min-h-screen bg-black/10 backdrop-blur-sm",children:[o.jsxs("div",{className:"sticky top-0 bg-black/80 backdrop-blur-md border-b border-gray-700/50 p-4 z-10",children:[o.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Bookmarks"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx(xn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),o.jsx("input",{type:"text",value:u,onChange:L=>d(L.target.value),placeholder:"Search bookmarks...",className:"w-full bg-gray-800 border border-gray-600 rounded-full pl-10 pr-4 py-3 text-white focus:border-purple-500 focus:outline-none"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(SC,{className:"w-4 h-4 text-gray-400"}),o.jsx("div",{className:"flex space-x-1",children:[{key:"all",label:"All"},{key:"posts",label:"Posts"},{key:"characters",label:"Characters"},{key:"writers",label:"Writers"}].map(L=>o.jsx("button",{onClick:()=>f(L.key),className:`px-3 py-1 rounded-full text-sm transition-colors ${h===L.key?"bg-purple-600 text-white":"text-gray-400 hover:text-white hover:bg-gray-800"}`,children:L.label},L.key))})]})]})]}),o.jsx("div",{className:"p-6 space-y-8",children:q?o.jsxs(o.Fragment,{children:[A&&j.length>0&&o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Bookmarked Posts"}),o.jsx("div",{className:"space-y-4",children:j.map(L=>o.jsx(Es,{post:L,onLike:()=>_(L.id),onRepost:()=>P(L.id)},L.id))})]}),D&&k.length>0&&o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Bookmarked Characters"}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:k.map(L=>o.jsx("div",{onClick:()=>B(L),children:o.jsx(ri,{character:L,showActions:!1,showFollowButton:L.userId!==(e==null?void 0:e.id)})},L.id))})]}),V&&C.length>0&&o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Bookmarked Writers"}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:C.map(L=>o.jsxs("div",{onClick:()=>S(L),className:"bg-gray-800/50 rounded-2xl p-6 border border-gray-700/50 hover:bg-gray-700/30 transition-colors cursor-pointer",children:[o.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[o.jsx("img",{src:L.avatar,alt:L.displayName,className:"w-16 h-16 rounded-full object-cover ring-2 ring-purple-500/30"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-white font-bold text-lg",children:L.displayName}),o.jsxs("p",{className:"text-gray-400",children:["@",L.username]}),o.jsxs("p",{className:"text-purple-300 text-sm",children:["#",L.writersTag]})]})]}),o.jsx("p",{className:"text-gray-300 text-sm",children:L.bio})]},L.id))})]})]}):o.jsxs("div",{className:"text-center py-12",children:[o.jsx(co,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),o.jsx("h3",{className:"text-xl font-semibold text-gray-400 mb-2",children:u?"No matching bookmarks":"No bookmarks yet"}),o.jsx("p",{className:"text-gray-500",children:u?"Try adjusting your search or filter criteria":"Save posts, characters, and writers you want to revisit later"})]})}),o.jsx("div",{className:"p-6 text-center border-t border-gray-700/50 bg-black/20",children:o.jsxs("p",{className:"text-gray-500 text-sm",children:["Verse © ",new Date().getFullYear()," - UNWYRE TECH AND CONSULTING"]})})]}),p&&o.jsx(Ev,{user:p,onClose:()=>g(null)}),y&&o.jsx(hd,{character:y,onClose:()=>w(null)})]})},w5=({onClose:e})=>{const{addCharacter:t,characters:r}=Ke(),{user:n}=De(),[s,i]=N.useState({username:"",name:"",title:"",bio:"",universe:"",verseTag:"",traits:"",customColor:"#8b5cf6",customFont:"Inter"}),[a,l]=N.useState(""),c=r.filter(p=>p.userId===(n==null?void 0:n.id)),u=10,d=c.length<u,h=p=>{if(p.preventDefault(),!n)return;if(!d){l(`You can only create up to ${u} characters.`);return}const g={id:Date.now().toString(),username:s.username,name:s.name,title:s.title,avatar:"https://images.pexels.com/photos/1382734/pexels-photo-1382734.jpeg?auto=compress&cs=tinysrgb&w=150&h=150",headerImage:"https://images.pexels.com/photos/1323550/pexels-photo-1323550.jpeg?auto=compress&cs=tinysrgb&w=800&h=300",bio:s.bio,universe:s.universe,verseTag:s.verseTag,traits:s.traits.split(",").map(y=>y.trim()).filter(y=>y),userId:n.id,customColor:s.customColor,customFont:s.customFont,followers:[],following:[],createdAt:new Date};t(g),e()},f=["Inter","Roboto","Open Sans","Lato","Montserrat","Playfair Display","Crimson Text","Merriweather","Courier New","Georgia"];return d?o.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-gray-900 rounded-2xl border border-gray-700/50 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"sticky top-0 bg-gray-900 border-b border-gray-700/50 p-4 flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg font-bold text-white",children:"Create New Character"}),o.jsxs("p",{className:"text-gray-400 text-sm",children:[c.length,"/",u," characters created"]})]}),o.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-800 rounded-full transition-colors",children:o.jsx(st,{className:"w-6 h-6 text-gray-400"})})]}),o.jsxs("form",{onSubmit:h,className:"p-6 space-y-6",children:[a&&o.jsx("div",{className:"p-3 bg-red-900/20 border border-red-500/30 rounded-lg",children:o.jsx("p",{className:"text-red-400 text-sm",children:a})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Character Username *"}),o.jsx("input",{type:"text",value:s.username,onChange:p=>i(g=>({...g,username:p.target.value})),className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white focus:border-purple-500 focus:outline-none",placeholder:"character_username",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Character Name *"}),o.jsx("input",{type:"text",value:s.name,onChange:p=>i(g=>({...g,name:p.target.value})),className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white focus:border-purple-500 focus:outline-none",placeholder:"Character's full name",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Title/Role *"}),o.jsx("input",{type:"text",value:s.title,onChange:p=>i(g=>({...g,title:p.target.value})),className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white focus:border-purple-500 focus:outline-none",placeholder:"e.g., Elven Ranger, Detective, Wizard",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Universe *"}),o.jsx("input",{type:"text",value:s.universe,onChange:p=>i(g=>({...g,universe:p.target.value})),className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white focus:border-purple-500 focus:outline-none",placeholder:"e.g., Middle Earth, Marvel Universe",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Verse Tag *"}),o.jsx("input",{type:"text",value:s.verseTag,onChange:p=>i(g=>({...g,verseTag:p.target.value})),className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white focus:border-purple-500 focus:outline-none",placeholder:"e.g., Marvel, Fantasy, SciFi",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Character Color"}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"color",value:s.customColor,onChange:p=>i(g=>({...g,customColor:p.target.value})),className:"w-12 h-12 rounded-lg border border-gray-600 bg-gray-800"}),o.jsx("div",{className:"flex-1",children:o.jsx("input",{type:"text",value:s.customColor,onChange:p=>i(g=>({...g,customColor:p.target.value})),className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white focus:border-purple-500 focus:outline-none"})})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Bio *"}),o.jsx("textarea",{value:s.bio,onChange:p=>i(g=>({...g,bio:p.target.value})),rows:4,className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white focus:border-purple-500 focus:outline-none resize-none",placeholder:"Describe your character's background, personality, and story...",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Traits (comma-separated)"}),o.jsx("input",{type:"text",value:s.traits,onChange:p=>i(g=>({...g,traits:p.target.value})),className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white focus:border-purple-500 focus:outline-none",placeholder:"e.g., Brave, Mysterious, Loyal, Cunning"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Custom Font"}),o.jsx("select",{value:s.customFont,onChange:p=>i(g=>({...g,customFont:p.target.value})),className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white focus:border-purple-500 focus:outline-none",children:f.map(p=>o.jsx("option",{value:p,style:{fontFamily:p},children:p},p))})]}),o.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-700/50",children:[o.jsx("button",{type:"button",onClick:e,className:"px-6 py-2 text-gray-400 hover:text-white transition-colors",children:"Cancel"}),o.jsx("button",{type:"submit",className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white font-semibold px-6 py-2 rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all duration-200",children:"Create Character"})]})]})]})}):o.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",children:o.jsx("div",{className:"bg-gray-900 rounded-2xl border border-gray-700/50 p-6 mx-4 max-w-md w-full",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"w-16 h-16 bg-red-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(st,{className:"w-8 h-8 text-red-400"})}),o.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"Character Limit Reached"}),o.jsxs("p",{className:"text-gray-300 mb-6",children:["You have reached the maximum limit of ",u," characters. You currently have ",c.length," characters."]}),o.jsx("button",{onClick:e,className:"bg-purple-600 hover:bg-purple-700 text-white font-semibold px-6 py-2 rounded-lg transition-colors",children:"Close"})]})})})},b5=({onClose:e})=>{const{user:t,updateUser:r}=De(),[n,s]=N.useState({displayName:(t==null?void 0:t.displayName)||"",bio:(t==null?void 0:t.bio)||"",writersTag:(t==null?void 0:t.writersTag)||"",avatar:(t==null?void 0:t.avatar)||"",headerImage:(t==null?void 0:t.headerImage)||""}),i=a=>{a.preventDefault(),r(n),e()};return o.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-gray-900 rounded-2xl border border-gray-700/50 w-full max-w-lg mx-4",children:[o.jsxs("div",{className:"p-4 border-b border-gray-700/50 flex items-center justify-between",children:[o.jsx("h2",{className:"text-lg font-bold text-white",children:"Edit Profile"}),o.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-800 rounded-full transition-colors",children:o.jsx(st,{className:"w-6 h-6 text-gray-400"})})]}),o.jsxs("form",{onSubmit:i,className:"p-6 space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Header Image"}),o.jsx(fo,{currentImage:n.headerImage,onImageChange:a=>s(l=>({...l,headerImage:a})),type:"header"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Profile Picture"}),o.jsx(fo,{currentImage:n.avatar,onImageChange:a=>s(l=>({...l,avatar:a})),type:"avatar",className:"w-32"})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Display Name"}),o.jsx("input",{type:"text",value:n.displayName,onChange:a=>s(l=>({...l,displayName:a.target.value})),className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white focus:border-purple-500 focus:outline-none",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Bio"}),o.jsx("textarea",{value:n.bio,onChange:a=>s(l=>({...l,bio:a.target.value})),rows:3,className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white focus:border-purple-500 focus:outline-none resize-none",placeholder:"Tell us about yourself..."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Writer's Tag"}),o.jsx("input",{type:"text",value:n.writersTag,onChange:a=>s(l=>({...l,writersTag:a.target.value})),className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white focus:border-purple-500 focus:outline-none",placeholder:"e.g., fantasy, scifi, modern",required:!0})]})]}),o.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-700/50",children:[o.jsx("button",{type:"button",onClick:e,className:"px-6 py-2 text-gray-400 hover:text-white transition-colors",children:"Cancel"}),o.jsx("button",{type:"submit",className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white font-semibold px-6 py-2 rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all duration-200",children:"Save Changes"})]})]})]})})},j5=()=>{const{user:e,updateUser:t}=De(),{characters:r,posts:n,getUserFollowers:s,getUserFollowing:i,likePost:a,repostPost:l,pinPost:c,unpinPost:u}=Ke(),[d,h]=N.useState("posts"),[f,p]=N.useState(!1),[g,y]=N.useState(!1),[w,v]=N.useState([]),[x,m]=N.useState([]),[b,j]=N.useState(0),[k,C]=N.useState(0),_=n.filter(U=>U.userId===(e==null?void 0:e.id)),P=r.filter(U=>U.userId===(e==null?void 0:e.id)),S=_.sort((U,R)=>U.isPinned&&!R.isPinned?-1:!U.isPinned&&R.isPinned?1:R.timestamp.getTime()-U.timestamp.getTime());N.useEffect(()=>{e&&(d==="followers"?A():d==="following"&&D())},[d,e]),N.useEffect(()=>{if(!e)return;const U=setInterval(()=>{B()},1e3);return()=>clearInterval(U)},[e]);const B=async()=>{if(e){const U=await s(e.id),R=await i(e.id);j(U.length),C(R.length)}},A=async()=>{if(e){const U=await s(e.id);v(U),j(U.length)}},D=async()=>{if(e){const U=await i(e.id);m(U),C(U.length)}},V=U=>{a(U)},q=U=>{l(U)},L=U=>{const R=_.find(T=>T.id===U);R!=null&&R.isPinned?u(U):c(U)};return e?o.jsxs("div",{className:"min-h-screen bg-black/10 backdrop-blur-sm",children:[o.jsxs("div",{className:"relative",children:[o.jsxs("div",{className:"h-48 relative",children:[o.jsx("img",{src:e.headerImage,alt:"Profile header",className:"w-full h-full object-cover"}),o.jsx("button",{onClick:()=>y(!0),className:"absolute top-4 right-4 p-2 bg-black/50 hover:bg-black/70 rounded-full transition-colors",children:o.jsx(pv,{className:"w-5 h-5 text-white"})})]}),o.jsxs("div",{className:"relative px-6 pb-6",children:[o.jsxs("div",{className:"flex items-end justify-between -mt-16 mb-4",children:[o.jsx("img",{src:e.avatar,alt:e.displayName,className:"w-32 h-32 rounded-full object-cover ring-4 ring-gray-900 bg-gray-900 relative z-10"}),o.jsxs("button",{onClick:()=>y(!0),className:"flex items-center space-x-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 rounded-full transition-colors text-white",children:[o.jsx(cd,{className:"w-4 h-4"}),o.jsx("span",{children:"Edit Profile"})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-white",children:e.displayName}),o.jsxs("p",{className:"text-gray-400",children:["@",e.username]}),e.role==="admin"&&o.jsx("p",{className:"text-red-400 text-sm font-medium",children:"Administrator"})]}),o.jsx("p",{className:"text-gray-300",children:e.bio}),o.jsxs("div",{className:"flex items-center space-x-4 text-gray-400 text-sm",children:[o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx(Yo,{className:"w-4 h-4"}),o.jsxs("span",{children:["Joined ",e.createdAt.toLocaleDateString()]})]}),o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx("span",{className:"w-2 h-2 bg-purple-500 rounded-full"}),o.jsxs("span",{children:["#",e.writersTag]})]})]}),o.jsxs("div",{className:"flex items-center space-x-6 text-sm",children:[o.jsxs("button",{onClick:()=>h("following"),className:"hover:text-white transition-colors",children:[o.jsx("span",{className:"font-bold text-white",children:k}),o.jsx("span",{className:"text-gray-400 ml-1",children:"Following"})]}),o.jsxs("button",{onClick:()=>h("followers"),className:"hover:text-white transition-colors",children:[o.jsx("span",{className:"font-bold text-white",children:b}),o.jsx("span",{className:"text-gray-400 ml-1",children:"Followers"})]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-bold text-white",children:P.length}),o.jsx("span",{className:"text-gray-400 ml-1",children:"Characters"})]}),o.jsxs("div",{children:[o.jsx("span",{className:"font-bold text-white",children:_.length}),o.jsx("span",{className:"text-gray-400 ml-1",children:"Posts"})]})]})]})]})]}),o.jsx("div",{className:"border-b border-gray-700/50 bg-black/20 sticky top-0 z-10",children:o.jsx("div",{className:"flex",children:[{key:"posts",label:"Posts",count:_.length},{key:"characters",label:"Characters",count:P.length},{key:"followers",label:"Followers",count:b},{key:"following",label:"Following",count:k}].map(U=>o.jsxs("button",{onClick:()=>h(U.key),className:`flex-1 px-4 py-4 text-center transition-colors relative ${d===U.key?"text-purple-400 border-b-2 border-purple-400":"text-gray-400 hover:text-white"}`,children:[o.jsx("span",{className:"font-medium",children:U.label}),U.count>0&&o.jsx("span",{className:"ml-2 text-xs bg-gray-700 px-2 py-1 rounded-full",children:U.count})]},U.key))})}),o.jsxs("div",{className:"p-6",children:[d==="posts"&&o.jsx("div",{className:"space-y-4",children:S.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx("p",{className:"text-gray-400 mb-4",children:"No posts yet"}),o.jsx("button",{className:"bg-purple-600 hover:bg-purple-700 text-white px-6 py-2 rounded-full transition-colors",children:"Create your first post"})]}):S.map(U=>o.jsxs("div",{className:"relative",children:[U.isPinned&&o.jsxs("div",{className:"flex items-center space-x-2 text-purple-400 text-sm mb-2",children:[o.jsx(bv,{className:"w-4 h-4"}),o.jsx("span",{children:"Pinned Post"})]}),o.jsx(Es,{post:U,onLike:()=>V(U.id),onRepost:()=>q(U.id),showPinOption:!0,onPin:()=>L(U.id)})]},U.id))}),d==="characters"&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:"text-lg font-bold text-white",children:"Your Characters"}),o.jsxs("button",{onClick:()=>p(!0),className:"flex items-center space-x-2 bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-full transition-colors",children:[o.jsx(Qo,{className:"w-4 h-4"}),o.jsx("span",{children:"New Character"})]})]}),P.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx("p",{className:"text-gray-400 mb-4",children:"No characters created yet"}),o.jsx("button",{onClick:()=>p(!0),className:"bg-purple-600 hover:bg-purple-700 text-white px-6 py-2 rounded-full transition-colors",children:"Create your first character"})]}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:P.map(U=>o.jsx(ri,{character:U},U.id))})]}),d==="followers"&&o.jsx("div",{className:"space-y-4",children:w.length===0?o.jsx("div",{className:"text-center py-12",children:o.jsx("p",{className:"text-gray-400",children:"No followers yet"})}):w.map(U=>o.jsxs("div",{className:"flex items-center space-x-4 p-4 bg-gray-800/30 rounded-lg hover:bg-gray-700/30 transition-colors cursor-pointer",children:[o.jsx("img",{src:U.avatar,alt:U.displayName,className:"w-12 h-12 rounded-full object-cover"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-white font-medium",children:U.displayName}),o.jsxs("p",{className:"text-gray-400 text-sm",children:["@",U.username]}),o.jsxs("p",{className:"text-purple-300 text-sm",children:["#",U.writersTag]})]})]},U.id))}),d==="following"&&o.jsx("div",{className:"space-y-4",children:x.length===0?o.jsx("div",{className:"text-center py-12",children:o.jsx("p",{className:"text-gray-400",children:"Not following anyone yet"})}):x.map(U=>o.jsxs("div",{className:"flex items-center space-x-4 p-4 bg-gray-800/30 rounded-lg hover:bg-gray-700/30 transition-colors cursor-pointer",children:[o.jsx("img",{src:U.avatar,alt:U.displayName,className:"w-12 h-12 rounded-full object-cover"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-white font-medium",children:U.displayName}),o.jsxs("p",{className:"text-gray-400 text-sm",children:["@",U.username]}),o.jsxs("p",{className:"text-purple-300 text-sm",children:["#",U.writersTag]})]})]},U.id))})]}),f&&o.jsx(w5,{onClose:()=>p(!1)}),g&&o.jsx(b5,{onClose:()=>y(!1)})]}):null},C5=()=>{const{user:e,updateUser:t,enableTwoFactor:r,changePassword:n}=De(),[s,i]=N.useState("privacy"),[a,l]=N.useState({currentPassword:"",newPassword:"",confirmPassword:"",email:(e==null?void 0:e.email)||"",otpCode:"",username:(e==null?void 0:e.username)||""}),[c,u]=N.useState(!1),[d,h]=N.useState(""),f=[{key:"privacy",label:"Privacy & Safety",icon:Yn},{key:"account",label:"Account",icon:dd},{key:"security",label:"Security",icon:uo},{key:"notifications",label:"Notifications",icon:lo}],p=async v=>{if(v.preventDefault(),a.newPassword!==a.confirmPassword){h("Passwords do not match");return}u(!0),h("");try{await n(a.currentPassword,a.newPassword),h("Password changed successfully"),l(x=>({...x,currentPassword:"",newPassword:"",confirmPassword:""}))}catch(x){h(x.message||"Failed to change password")}finally{u(!1)}},g=async()=>{if(!a.username.trim()){h("Username cannot be empty");return}u(!0),h("");try{await t({username:a.username}),h("Username updated successfully")}catch(v){h(v.message||"Failed to update username")}finally{u(!1)}},y=async()=>{a.email&&await r(a.email)},w=(v,x)=>{e&&t({privacySettings:{...e.privacySettings,[v]:x}})};return o.jsxs("div",{className:"min-h-screen bg-black/10 backdrop-blur-sm",children:[o.jsxs("div",{className:"sticky top-0 bg-black/80 backdrop-blur-md border-b border-gray-700/50 p-4 z-10",children:[o.jsx("h2",{className:"text-xl font-bold text-white",children:"Settings"}),o.jsx("p",{className:"text-gray-400 text-sm",children:"Manage your account and privacy preferences"})]}),o.jsxs("div",{className:"flex flex-col lg:flex-row min-h-0",children:[o.jsx("div",{className:"w-full lg:w-64 border-b lg:border-r lg:border-b-0 border-gray-700/50 bg-black/20 p-4",children:o.jsx("nav",{className:"space-y-2",children:f.map(v=>o.jsxs("button",{onClick:()=>i(v.key),className:`w-full flex items-center space-x-3 px-4 py-3 rounded-xl transition-colors ${s===v.key?"bg-purple-600/20 text-purple-300 border border-purple-500/30":"text-gray-300 hover:bg-gray-800/50 hover:text-white"}`,children:[o.jsx(v.icon,{className:"w-5 h-5"}),o.jsx("span",{children:v.label})]},v.key))})}),o.jsxs("div",{className:"flex-1 p-4 lg:p-6 overflow-y-auto",children:[d&&o.jsx("div",{className:`mb-4 p-3 rounded-lg ${d.includes("successfully")?"bg-green-900/20 border border-green-500/30 text-green-400":"bg-red-900/20 border border-red-500/30 text-red-400"}`,children:d}),s==="privacy"&&o.jsxs("div",{className:"space-y-6 max-w-2xl",children:[o.jsxs("div",{className:"bg-gray-800/50 rounded-2xl p-6 border border-gray-700/50",children:[o.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center space-x-2",children:[o.jsx(od,{className:"w-5 h-5 text-purple-400"}),o.jsx("span",{children:"Profile Visibility"})]}),o.jsx("div",{className:"space-y-4",children:[{value:"public",label:"Public",desc:"Anyone can see your profile"},{value:"followers",label:"Followers Only",desc:"Only your followers can see your profile"},{value:"private",label:"Private",desc:"Only you can see your profile"}].map(v=>o.jsxs("label",{className:"flex items-start space-x-3 cursor-pointer",children:[o.jsx("input",{type:"radio",name:"profileVisibility",value:v.value,checked:(e==null?void 0:e.privacySettings.profileVisibility)===v.value,onChange:x=>w("profileVisibility",x.target.value),className:"text-purple-600 focus:ring-purple-500 mt-1"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-white font-medium",children:v.label}),o.jsx("p",{className:"text-gray-400 text-sm",children:v.desc})]})]},v.value))})]}),o.jsxs("div",{className:"bg-gray-800/50 rounded-2xl p-6 border border-gray-700/50",children:[o.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Message Permissions"}),o.jsx("div",{className:"space-y-4",children:[{value:"everyone",label:"Everyone",desc:"Anyone can send you messages"},{value:"followers",label:"Followers Only",desc:"Only your followers can message you"},{value:"none",label:"No One",desc:"Disable direct messages"}].map(v=>o.jsxs("label",{className:"flex items-start space-x-3 cursor-pointer",children:[o.jsx("input",{type:"radio",name:"messagePermissions",value:v.value,checked:(e==null?void 0:e.privacySettings.messagePermissions)===v.value,onChange:x=>w("messagePermissions",x.target.value),className:"text-purple-600 focus:ring-purple-500 mt-1"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-white font-medium",children:v.label}),o.jsx("p",{className:"text-gray-400 text-sm",children:v.desc})]})]},v.value))})]})]}),s==="account"&&o.jsx("div",{className:"space-y-6 max-w-2xl",children:o.jsxs("div",{className:"bg-gray-800/50 rounded-2xl p-6 border border-gray-700/50",children:[o.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Account Information"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Username"}),o.jsxs("div",{className:"flex space-x-3",children:[o.jsx("input",{type:"text",value:a.username,onChange:v=>l(x=>({...x,username:v.target.value})),className:"flex-1 bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white focus:border-purple-500 focus:outline-none"}),o.jsx("button",{onClick:g,disabled:c||a.username===(e==null?void 0:e.username),className:"bg-purple-600 hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed text-white font-semibold px-4 py-2 rounded-lg transition-colors",children:"Update"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Display Name"}),o.jsx("input",{type:"text",value:e==null?void 0:e.displayName,onChange:v=>t({displayName:v.target.value}),className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white focus:border-purple-500 focus:outline-none"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Writer's Tag"}),o.jsx("input",{type:"text",value:e==null?void 0:e.writersTag,onChange:v=>t({writersTag:v.target.value}),className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white focus:border-purple-500 focus:outline-none"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Bio"}),o.jsx("textarea",{value:e==null?void 0:e.bio,onChange:v=>t({bio:v.target.value}),rows:3,className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white focus:border-purple-500 focus:outline-none resize-none"})]})]})]})}),s==="security"&&o.jsxs("div",{className:"space-y-6 max-w-2xl",children:[o.jsxs("div",{className:"bg-gray-800/50 rounded-2xl p-6 border border-gray-700/50",children:[o.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center space-x-2",children:[o.jsx(Ba,{className:"w-5 h-5 text-purple-400"}),o.jsx("span",{children:"Change Password"})]}),o.jsxs("form",{onSubmit:p,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Current Password"}),o.jsx("input",{type:"password",value:a.currentPassword,onChange:v=>l(x=>({...x,currentPassword:v.target.value})),className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white focus:border-purple-500 focus:outline-none",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"New Password"}),o.jsx("input",{type:"password",value:a.newPassword,onChange:v=>l(x=>({...x,newPassword:v.target.value})),className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white focus:border-purple-500 focus:outline-none",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Confirm New Password"}),o.jsx("input",{type:"password",value:a.confirmPassword,onChange:v=>l(x=>({...x,confirmPassword:v.target.value})),className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white focus:border-purple-500 focus:outline-none",required:!0})]}),o.jsx("button",{type:"submit",disabled:c,className:"bg-purple-600 hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed text-white font-semibold px-6 py-2 rounded-lg transition-colors",children:c?"Updating...":"Update Password"})]})]}),o.jsxs("div",{className:"bg-gray-800/50 rounded-2xl p-6 border border-gray-700/50",children:[o.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center space-x-2",children:[o.jsx(RC,{className:"w-5 h-5 text-purple-400"}),o.jsx("span",{children:"Two-Factor Authentication"})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-white font-medium",children:"2FA Status"}),o.jsx("p",{className:"text-gray-400 text-sm",children:e!=null&&e.twoFactorEnabled?"Enabled":"Disabled"})]}),o.jsx("div",{className:`w-4 h-4 rounded-full ${e!=null&&e.twoFactorEnabled?"bg-green-500":"bg-red-500"}`})]}),!(e!=null&&e.twoFactorEnabled)&&o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email for 2FA"}),o.jsx("input",{type:"email",value:a.email,onChange:v=>l(x=>({...x,email:v.target.value})),className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white focus:border-purple-500 focus:outline-none",placeholder:"your@email.com"})]}),o.jsx("button",{onClick:y,className:"bg-green-600 hover:bg-green-700 text-white font-semibold px-6 py-2 rounded-lg transition-colors",children:"Enable 2FA"})]})]})]})]}),s==="notifications"&&o.jsx("div",{className:"space-y-6 max-w-2xl",children:o.jsxs("div",{className:"bg-gray-800/50 rounded-2xl p-6 border border-gray-700/50",children:[o.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Notification Preferences"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-white font-medium",children:"Tag Notifications"}),o.jsx("p",{className:"text-gray-400 text-sm",children:"Get notified when someone mentions you"})]}),o.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:e==null?void 0:e.privacySettings.tagNotifications,onChange:v=>w("tagNotifications",v.target.checked),className:"sr-only peer"}),o.jsx("div",{className:"w-11 h-6 bg-gray-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"})]})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-white font-medium",children:"Direct Message Notifications"}),o.jsx("p",{className:"text-gray-400 text-sm",children:"Get notified about new messages"})]}),o.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:e==null?void 0:e.privacySettings.directMessageNotifications,onChange:v=>w("directMessageNotifications",v.target.checked),className:"sr-only peer"}),o.jsx("div",{className:"w-11 h-6 bg-gray-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"})]})]})]})]})})]})]})]})},k5=()=>{const{user:e}=De(),{getAllUsersAdmin:t,deleteUserAdmin:r,resetPasswordAdmin:n,updateUserRoleAdmin:s}=Ke(),[i,a]=N.useState([]),[l,c]=N.useState(!0),[u,d]=N.useState("");N.useState(null);const[h,f]=N.useState(null),[p,g]=N.useState(null),[y,w]=N.useState(null),[v,x]=N.useState(""),[m,b]=N.useState(!1),[j,k]=N.useState("");N.useEffect(()=>{(e==null?void 0:e.role)==="admin"&&C()},[e]);const C=async()=>{try{c(!0);const A=await t();a(A)}catch(A){console.error("Error loading users:",A),k("Failed to load users")}finally{c(!1)}},_=async A=>{if(A===(e==null?void 0:e.id)){k("Cannot delete your own account");return}b(!0);try{await r(A),k("User deleted successfully"),f(null),C()}catch(D){k(D.message||"Failed to delete user")}finally{b(!1)}},P=async A=>{if(!v.trim()){k("Please enter a new password");return}b(!0);try{await n(A,v),k("Password reset successfully"),g(null),x("")}catch(D){k(D.message||"Failed to reset password")}finally{b(!1)}},S=async(A,D)=>{if(A===(e==null?void 0:e.id)){k("Cannot change your own role");return}b(!0);try{await s(A,D),k(`User role updated to ${D} successfully`),w(null),C()}catch(V){k(V.message||"Failed to update user role")}finally{b(!1)}},B=i.filter(A=>{var D;return A.username.toLowerCase().includes(u.toLowerCase())||A.displayName.toLowerCase().includes(u.toLowerCase())||((D=A.email)==null?void 0:D.toLowerCase().includes(u.toLowerCase()))});return!e||e.role!=="admin"?o.jsx("div",{className:"min-h-screen bg-black/10 backdrop-blur-sm flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx(Yn,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),o.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Access Denied"}),o.jsx("p",{className:"text-gray-400",children:"You don't have permission to access this page."})]})}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"min-h-screen bg-black/10 backdrop-blur-sm",children:[o.jsx("div",{className:"sticky top-0 bg-black/80 backdrop-blur-md border-b border-gray-700/50 p-4 z-10",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsxs("h2",{className:"text-xl font-bold text-white flex items-center space-x-2",children:[o.jsx(Yn,{className:"w-6 h-6 text-red-500"}),o.jsx("span",{children:"Admin Panel"})]}),o.jsx("p",{className:"text-gray-400 text-sm",children:"Manage users and system settings"})]}),o.jsxs("button",{onClick:C,disabled:l,className:"flex items-center space-x-2 bg-purple-600 hover:bg-purple-700 disabled:opacity-50 text-white px-4 py-2 rounded-lg transition-colors",children:[o.jsx(BC,{className:`w-4 h-4 ${l?"animate-spin":""}`}),o.jsx("span",{children:"Refresh"})]})]})}),o.jsxs("div",{className:"p-6",children:[j&&o.jsx("div",{className:`mb-4 p-3 rounded-lg ${j.includes("successfully")?"bg-green-900/20 border border-green-500/30 text-green-400":"bg-red-900/20 border border-red-500/30 text-red-400"}`,children:j}),o.jsxs("div",{className:"mb-6 space-y-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx(xn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),o.jsx("input",{type:"text",value:u,onChange:A=>d(A.target.value),placeholder:"Search users by username, display name, or email...",className:"w-full bg-gray-800 border border-gray-600 rounded-lg pl-10 pr-4 py-3 text-white focus:border-purple-500 focus:outline-none"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[o.jsx("div",{className:"bg-gray-800/50 rounded-lg p-4 border border-gray-700/50",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(or,{className:"w-8 h-8 text-blue-400"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-2xl font-bold text-white",children:i.length}),o.jsx("p",{className:"text-gray-400 text-sm",children:"Total Users"})]})]})}),o.jsx("div",{className:"bg-gray-800/50 rounded-lg p-4 border border-gray-700/50",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(Yn,{className:"w-8 h-8 text-red-400"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-2xl font-bold text-white",children:i.filter(A=>A.role==="admin").length}),o.jsx("p",{className:"text-gray-400 text-sm",children:"Admins"})]})]})}),o.jsx("div",{className:"bg-gray-800/50 rounded-lg p-4 border border-gray-700/50",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(or,{className:"w-8 h-8 text-green-400"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-2xl font-bold text-white",children:i.filter(A=>A.role==="user").length}),o.jsx("p",{className:"text-gray-400 text-sm",children:"Regular Users"})]})]})}),o.jsx("div",{className:"bg-gray-800/50 rounded-lg p-4 border border-gray-700/50",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(Ba,{className:"w-8 h-8 text-yellow-400"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-2xl font-bold text-white",children:i.filter(A=>A.twoFactorEnabled).length}),o.jsx("p",{className:"text-gray-400 text-sm",children:"2FA Enabled"})]})]})})]})]}),o.jsxs("div",{className:"bg-gray-800/50 rounded-2xl border border-gray-700/50 overflow-hidden",children:[o.jsx("div",{className:"p-4 border-b border-gray-700/50",children:o.jsx("h3",{className:"text-lg font-bold text-white",children:"User Management"})}),l?o.jsxs("div",{className:"p-8 text-center",children:[o.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-purple-500 border-t-transparent rounded-full mx-auto mb-4"}),o.jsx("p",{className:"text-gray-400",children:"Loading users..."})]}):o.jsxs("div",{className:"overflow-x-auto",children:[o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-gray-900/50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"text-left p-4 text-gray-300 font-medium",children:"User"}),o.jsx("th",{className:"text-left p-4 text-gray-300 font-medium",children:"Email"}),o.jsx("th",{className:"text-left p-4 text-gray-300 font-medium",children:"Role"}),o.jsx("th",{className:"text-left p-4 text-gray-300 font-medium",children:"2FA"}),o.jsx("th",{className:"text-left p-4 text-gray-300 font-medium",children:"Joined"}),o.jsx("th",{className:"text-left p-4 text-gray-300 font-medium",children:"Actions"})]})}),o.jsx("tbody",{className:"divide-y divide-gray-700/30",children:B.map(A=>o.jsxs("tr",{className:"hover:bg-gray-700/20 transition-colors",children:[o.jsx("td",{className:"p-4",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("img",{src:A.avatar,alt:A.displayName,className:"w-10 h-10 rounded-full object-cover"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-white font-medium",children:A.displayName}),o.jsxs("p",{className:"text-gray-400 text-sm",children:["@",A.username]})]})]})}),o.jsx("td",{className:"p-4 text-gray-300",children:A.email||"N/A"}),o.jsx("td",{className:"p-4",children:o.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${A.role==="admin"?"bg-red-900/30 text-red-400 border border-red-500/30":"bg-gray-700/50 text-gray-300"}`,children:A.role||"user"})}),o.jsx("td",{className:"p-4",children:o.jsx("div",{className:`w-3 h-3 rounded-full ${A.twoFactorEnabled?"bg-green-500":"bg-red-500"}`})}),o.jsx("td",{className:"p-4 text-gray-300 text-sm",children:A.createdAt.toLocaleDateString()}),o.jsx("td",{className:"p-4",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("button",{onClick:()=>w(A.id),disabled:A.id===e.id,className:"p-2 text-purple-400 hover:bg-purple-400/10 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Change Role",children:o.jsx(sp,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>g(A.id),disabled:A.id===e.id,className:"p-2 text-yellow-400 hover:bg-yellow-400/10 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Reset Password",children:o.jsx(Ba,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>f(A.id),disabled:A.id===e.id,className:"p-2 text-red-400 hover:bg-red-400/10 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Delete User",children:o.jsx($i,{className:"w-4 h-4"})})]})})]},A.id))})]}),B.length===0&&o.jsxs("div",{className:"p-8 text-center",children:[o.jsx(or,{className:"w-12 h-12 text-gray-600 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-400",children:"No users found"})]})]})]})]})]}),y&&o.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-gray-900 rounded-2xl border border-gray-700/50 p-6 mx-4 max-w-md w-full",children:[o.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[o.jsx(sp,{className:"w-8 h-8 text-purple-500"}),o.jsx("h3",{className:"text-lg font-bold text-white",children:"Change User Role"})]}),o.jsx("p",{className:"text-gray-300 mb-6",children:"Select the new role for this user. Admin users have full access to the admin panel and can manage other users."}),o.jsxs("div",{className:"space-y-3 mb-6",children:[o.jsxs("button",{onClick:()=>S(y,"user"),disabled:m,className:"w-full flex items-center space-x-3 p-3 bg-gray-800 hover:bg-gray-700 rounded-lg transition-colors text-left",children:[o.jsx(dd,{className:"w-5 h-5 text-gray-400"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-white font-medium",children:"Regular User"}),o.jsx("p",{className:"text-gray-400 text-sm",children:"Standard user access"})]})]}),o.jsxs("button",{onClick:()=>S(y,"admin"),disabled:m,className:"w-full flex items-center space-x-3 p-3 bg-red-900/20 hover:bg-red-900/30 border border-red-500/30 rounded-lg transition-colors text-left",children:[o.jsx(Yn,{className:"w-5 h-5 text-red-400"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-white font-medium",children:"Administrator"}),o.jsx("p",{className:"text-gray-400 text-sm",children:"Full admin access"})]})]})]}),o.jsx("div",{className:"flex space-x-3",children:o.jsx("button",{onClick:()=>w(null),disabled:m,className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white font-semibold py-2 rounded-lg transition-colors",children:"Cancel"})})]})}),h&&o.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-gray-900 rounded-2xl border border-gray-700/50 p-6 mx-4 max-w-md w-full",children:[o.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[o.jsx(bC,{className:"w-8 h-8 text-red-500"}),o.jsx("h3",{className:"text-lg font-bold text-white",children:"Delete User"})]}),o.jsx("p",{className:"text-gray-300 mb-6",children:"Are you sure you want to delete this user? This action cannot be undone and will remove all their data."}),o.jsxs("div",{className:"flex space-x-3",children:[o.jsx("button",{onClick:()=>_(h),disabled:m,className:"flex-1 bg-red-600 hover:bg-red-700 disabled:opacity-50 text-white font-semibold py-2 rounded-lg transition-colors",children:m?"Deleting...":"Delete User"}),o.jsx("button",{onClick:()=>f(null),disabled:m,className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white font-semibold py-2 rounded-lg transition-colors",children:"Cancel"})]})]})}),p&&o.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-gray-900 rounded-2xl border border-gray-700/50 p-6 mx-4 max-w-md w-full",children:[o.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[o.jsx(Ba,{className:"w-8 h-8 text-yellow-500"}),o.jsx("h3",{className:"text-lg font-bold text-white",children:"Reset Password"})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"New Password"}),o.jsx("input",{type:"password",value:v,onChange:A=>x(A.target.value),className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white focus:border-purple-500 focus:outline-none",placeholder:"Enter new password"})]}),o.jsxs("div",{className:"flex space-x-3",children:[o.jsx("button",{onClick:()=>P(p),disabled:m||!v.trim(),className:"flex-1 bg-yellow-600 hover:bg-yellow-700 disabled:opacity-50 text-white font-semibold py-2 rounded-lg transition-colors",children:m?"Resetting...":"Reset Password"}),o.jsx("button",{onClick:()=>{g(null),x("")},disabled:m,className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white font-semibold py-2 rounded-lg transition-colors",children:"Cancel"})]})]})]})})]})},_5=({unreadNotifications:e,isOpen:t=!0,onToggle:r,hideOnMobile:n=!1})=>{const s=Uo(),i=Cs(),{user:a,logout:l}=De(),{unreadMessages:c}=Ke(),u=[{icon:AC,label:"Home",path:"/"},{icon:xn,label:"Explore",path:"/explore"},{icon:lo,label:"Notifications",path:"/notifications",badge:e},{icon:PC,label:"Messages",path:"/messages",badge:c},{icon:co,label:"Bookmarks",path:"/bookmarks"},{icon:dd,label:"Profile",path:"/profile"},{icon:FC,label:"Settings",path:"/settings"},...(a==null?void 0:a.role)==="admin"?[{icon:Yn,label:"Admin",path:"/admin"}]:[]],d=()=>{l()};return o.jsxs(o.Fragment,{children:[!n&&o.jsx("button",{onClick:r,className:"md:hidden fixed top-4 left-4 z-50 p-2 bg-gray-900 rounded-full border border-gray-700",children:t?o.jsx(st,{className:"w-6 h-6 text-white"}):o.jsx(yv,{className:"w-6 h-6 text-white"})}),o.jsxs("div",{className:`
        fixed md:sticky top-0 left-0 h-screen bg-black/20 backdrop-blur-sm border-r border-gray-700/50 z-40
        transition-transform duration-300 ease-in-out
        ${t?"translate-x-0":"-translate-x-full"}
        md:translate-x-0 w-64 md:w-64
      `,children:[o.jsxs("div",{className:"p-6 space-y-8",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg flex items-center justify-center",children:o.jsx(ld,{className:"w-5 h-5 text-white"})}),o.jsx("h1",{className:"text-xl font-bold text-white",children:"VERSE"})]}),o.jsx("nav",{className:"space-y-2",children:u.map(h=>o.jsxs("button",{onClick:()=>{s(h.path),r&&window.innerWidth<768&&r()},className:`w-full flex items-center space-x-4 px-4 py-3 rounded-xl transition-all duration-200 relative ${i.pathname===h.path?"bg-purple-600/20 text-purple-300 border border-purple-500/30":"text-gray-300 hover:bg-gray-800/50 hover:text-white"}`,children:[o.jsx(h.icon,{className:"w-6 h-6"}),o.jsx("span",{className:"font-medium",children:h.label}),h.badge&&h.badge>0&&o.jsx("span",{className:"absolute right-3 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:h.badge>99?"99+":h.badge}),h.label==="Admin"&&o.jsx("span",{className:"absolute right-3 bg-red-500 text-white text-xs rounded-full px-2 py-1",children:"ADMIN"})]},h.label))}),o.jsxs("button",{onClick:()=>{s("/"),r&&window.innerWidth<768&&r()},className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white font-semibold py-4 rounded-xl hover:from-purple-700 hover:to-pink-700 transition-all duration-200 flex items-center justify-center space-x-2 shadow-lg hover:shadow-purple-500/25",children:[o.jsx(Qo,{className:"w-5 h-5"}),o.jsx("span",{children:"Create Post"})]}),o.jsx("div",{className:"pt-8 border-t border-gray-700/50",children:o.jsxs("div",{className:"flex items-center space-x-3 p-3 rounded-xl hover:bg-gray-800/50 transition-colors cursor-pointer group",children:[o.jsx("img",{src:a==null?void 0:a.avatar,alt:a==null?void 0:a.displayName,className:"w-12 h-12 rounded-full object-cover ring-2 ring-purple-500/30"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-white font-medium truncate",children:a==null?void 0:a.displayName}),o.jsxs("p",{className:"text-gray-400 text-sm truncate",children:["@",a==null?void 0:a.username]}),(a==null?void 0:a.role)==="admin"&&o.jsx("p",{className:"text-red-400 text-xs",children:"Administrator"})]}),o.jsx("button",{onClick:d,className:"opacity-0 group-hover:opacity-100 text-gray-400 hover:text-red-400 transition-all duration-200 text-sm",children:"Logout"})]})})]}),o.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 text-center border-t border-gray-700/50 bg-black/20",children:o.jsxs("p",{className:"text-gray-500 text-xs",children:["Verse © ",new Date().getFullYear()," - UNWYRE TECH AND CONSULTING"]})})]}),t&&!n&&o.jsx("div",{className:"md:hidden fixed inset-0 bg-black/50 z-30",onClick:r})]})},E5=({children:e})=>{const{unreadNotifications:t}=Ke(),[r,n]=N.useState(!1);return Cs().pathname,o.jsxs("div",{className:"max-w-7xl mx-auto flex min-h-screen",children:[o.jsx(_5,{unreadNotifications:t,isOpen:r,onToggle:()=>n(!r),hideOnMobile:!1}),o.jsx("main",{className:"flex-1 max-w-2xl border-x border-gray-700/50 md:ml-0",children:e}),o.jsx("div",{className:"hidden lg:block w-80 h-screen sticky top-0 p-6 bg-black/20 backdrop-blur-sm"})]})},N5=()=>{const{isAuthenticated:e,loading:t,user:r}=De(),n=Uo(),s=Cs();return N.useEffect(()=>{t||(e?e&&s.pathname==="/login"&&n("/",{replace:!0}):s.pathname!=="/login"&&n("/login",{replace:!0}))},[e,t,n,s.pathname]),t?o.jsx(_v,{}):e?o.jsx(E5,{children:o.jsxs(tf,{children:[o.jsx(gt,{path:"/login",element:o.jsx(Tl,{to:"/",replace:!0})}),o.jsx(gt,{path:"/",element:o.jsx(zC,{})}),o.jsx(gt,{path:"/explore",element:o.jsx(HC,{})}),o.jsx(gt,{path:"/notifications",element:o.jsx(g5,{})}),o.jsx(gt,{path:"/messages",element:o.jsx(v5,{})}),o.jsx(gt,{path:"/bookmarks",element:o.jsx(y5,{})}),o.jsx(gt,{path:"/profile",element:o.jsx(j5,{})}),o.jsx(gt,{path:"/settings",element:o.jsx(C5,{})}),(r==null?void 0:r.role)==="admin"&&o.jsx(gt,{path:"/admin",element:o.jsx(k5,{})}),o.jsx(gt,{path:"*",element:o.jsx(Tl,{to:"/",replace:!0})})]})}):o.jsxs(tf,{children:[o.jsx(gt,{path:"/login",element:o.jsx(IC,{})}),o.jsx(gt,{path:"*",element:o.jsx(Tl,{to:"/login",replace:!0})})]})};function S5(){return o.jsx(gC,{children:o.jsx(vC,{children:o.jsx(Cb,{children:o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900",children:o.jsx(N5,{})})})})})}Ng(document.getElementById("root")).render(o.jsx(N.StrictMode,{children:o.jsx(S5,{})}));
